<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>VScodeæœåŠ¡å™¨ç¦»çº¿è¿æ¥é…ç½®</title>
      <link href="/2025/03/03/env_build-vscode-offline-connect/"/>
      <url>/2025/03/03/env_build-vscode-offline-connect/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="VScodeæœåŠ¡å™¨ç¦»çº¿è¿æ¥é…ç½®"><a href="#VScodeæœåŠ¡å™¨ç¦»çº¿è¿æ¥é…ç½®" class="headerlink" title="VScodeæœåŠ¡å™¨ç¦»çº¿è¿æ¥é…ç½®"></a>VScodeæœåŠ¡å™¨ç¦»çº¿è¿æ¥é…ç½®</h1><p>VScodeæä¾›äº†ä¸¤ç§è¿æ¥æœåŠ¡å™¨çš„æ–¹æ³•ï¼Œ<code>Remote-SSH</code> å’Œ<code>Remote-Tunnels</code>ã€‚å…¶ä¸­<code>Remote-SSH</code>æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ç±»å‹ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨  ç›®æ ‡è®¡ç®—æœºæ— æ³•è¿ä¸Šäº’è”ç½‘  çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡  ç¦»çº¿éƒ¨ç½²  çš„æ–¹å¼è®©VScodeå¯ä»¥è¿œç¨‹è®¿é—®ç›®æ ‡è®¡ç®—æœºã€‚</p><h2 id="ä¸€ã€å‡†å¤‡æ­¥éª¤"><a href="#ä¸€ã€å‡†å¤‡æ­¥éª¤" class="headerlink" title="ä¸€ã€å‡†å¤‡æ­¥éª¤"></a>ä¸€ã€å‡†å¤‡æ­¥éª¤</h2><h3 id="1ã€vscodeåˆå§‹åŒ–"><a href="#1ã€vscodeåˆå§‹åŒ–" class="headerlink" title="1ã€vscodeåˆå§‹åŒ–"></a>1ã€vscodeåˆå§‹åŒ–</h3><p>åœ¨vscodeå·¦ä¾§çš„æ‰©å±•æŒ‰é’®ï¼ˆæˆ–<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>X</kbd>ï¼‰ï¼Œæœç´¢æ’ä»¶<code>Remote-SSH</code>ï¼Œç‚¹å‡»Microsoftç‰ˆæœ¬çš„<code>Remote-SSH</code>å¹¶åœ¨ä¸‹è½½é¡µä¸­è¿›è¡Œä¸‹è½½</p><h3 id="2ã€å‡†å¤‡vscodeèµ„æ–™"><a href="#2ã€å‡†å¤‡vscodeèµ„æ–™" class="headerlink" title="2ã€å‡†å¤‡vscodeèµ„æ–™"></a>2ã€å‡†å¤‡vscodeèµ„æ–™</h3><p>åœ¨é¡¶éƒ¨èœå•æ <kbd>help</kbd>ä¸­ç‚¹é€‰<kbd>about</kbd>ï¼Œä¼šæœ‰ä¸€ä¸ªå¼¹å‡ºæ¡†ï¼Œå¤åˆ¶å…¶ä¸­çš„<code>Commit</code>é¡¹åé¢çš„å€¼ï¼Œå½¢å¦‚ï¼š<code>abdxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code></p><p> <font style="background:yellow">  <span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è¿™ä¸ªIDå€¼éœ€æ‰‹åŠ¨æ‹·è´ï¼Œåé¢æåˆ°çš„æ‰€æœ‰<code>${commit_id}</code>çš„éƒ¨åˆ†éƒ½éœ€æ‰‹åŠ¨æ›´æ”¹ä¸ºæ‚¨è‡ªå·±çš„Commit_IDå€¼</font></p><h3 id="3ã€è½¯ä»¶å‡†å¤‡ï¼ˆå¯é€‰ï¼‰"><a href="#3ã€è½¯ä»¶å‡†å¤‡ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="3ã€è½¯ä»¶å‡†å¤‡ï¼ˆå¯é€‰ï¼‰"></a>3ã€è½¯ä»¶å‡†å¤‡ï¼ˆå¯é€‰ï¼‰</h3><p>å»ºè®®å‡†å¤‡ä¸€ä¸ªFileZillaï¼Œä¾¿äºæ–‡ä»¶ä¼ è¾“</p><p>å¦‚æœä¸é‡‡ç”¨è¿™ä¸ªè½¯ä»¶ï¼Œåˆ™éœ€è¦ä½¿ç”¨scpè¯­å¥è¿›è¡Œä¼ è¾“ã€‚å¦‚æœä½ æ˜¯ä½¿ç”¨windowsç«¯è€Œélinuxï¼Œéœ€è¦åœ¨windowsç«¯å…ˆä¸‹è½½GITï¼Œç„¶åå³å¯ä½¿ç”¨å’Œsshï¼Œscpç›¸å…³çš„æŒ‡ä»¤ã€‚scpç”¨æ³•å¯ä»¥å‚è€ƒæ–‡æœ«é™„å½•</p><h2 id="äºŒã€è§£å†³æ–¹æ³•"><a href="#äºŒã€è§£å†³æ–¹æ³•" class="headerlink" title="äºŒã€è§£å†³æ–¹æ³•"></a>äºŒã€è§£å†³æ–¹æ³•</h2><h3 id="1ã€ä¸‹è½½ç¦»çº¿æ–‡ä»¶å¹¶ä¼ è¾“è‡³æŒ‡å®šä½ç½®"><a href="#1ã€ä¸‹è½½ç¦»çº¿æ–‡ä»¶å¹¶ä¼ è¾“è‡³æŒ‡å®šä½ç½®" class="headerlink" title="1ã€ä¸‹è½½ç¦»çº¿æ–‡ä»¶å¹¶ä¼ è¾“è‡³æŒ‡å®šä½ç½®"></a>1ã€ä¸‹è½½ç¦»çº¿æ–‡ä»¶å¹¶ä¼ è¾“è‡³æŒ‡å®šä½ç½®</h3><p>åœ¨æŸæ¬¡æ›´æ–°åï¼Œè¿œç«¯çš„<code>.vscode-server</code>ç›®å½•ç»“æ„å˜åŒ–å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">ğŸ“¦.vscode-server â”£â” ğŸ“bin  # å­˜æ”¾æ—§æ–¹æ³•ä¸‹çš„vscode commitç›¸å…³æ–‡ä»¶ â”ƒ   â”—â” ğŸ“${commit_id1} â”ƒ   â”—â” ğŸ“${commit_id2} â”ƒ   â”—â” Â·Â·Â· â”£â” ğŸ“cli  # å­˜æ”¾æ–°æ–¹æ³•ä¸‹çš„vscode commitç›¸å…³æ–‡ä»¶ â”ƒ   â”—â” ğŸ“servers â”ƒ   â”ƒ   â”—â” ğŸ“Stable-${commit_id} â”ƒ   â”ƒ   â”ƒ   â”—â” ğŸ“servers â”ƒ   â”ƒ   â”ƒ   â”—â” Â·Â·Â· â”ƒ   â”ƒ   â”—â” Â·Â·Â· â”ƒ   â”—â” ğŸ“œiru.json  # å­˜æ”¾æœ€è¿‘çš„vscode commit_id â”£â” ğŸ“œcode-${commit_id}  # å­˜æ”¾vscode_cli_alpine_x64_cli.tar.gzè§£å‹ååä¸ºcodeçš„æ–‡ä»¶,å¹¶å°†å…¶æ”¹åä¸ºcode-${commit_id} â”£â” ğŸ“data â”—â” ğŸ“extensions<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€ä»¥ä½ ç°åœ¨éœ€è¦æ‰‹åŠ¨ä¸‹è½½ä»¥ä¸‹æ–‡ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">x86:https://vscode.download.prss.microsoft.com/dbazure/download/stable/<span class="token variable">${commit_id}</span>/vscode-server-linux-x64.tar.gzhttps://vscode.download.prss.microsoft.com/dbazure/download/stable/<span class="token variable">${commit_id}</span>/vscode_cli_alpine_x64_cli.tar.gz arm:https://vscode.download.prss.microsoft.com/dbazure/download/stable/<span class="token variable">${commit_id}</span>/vscode-server-linux-arm64.tar.gzhttps://vscode.download.prss.microsoft.com/dbazure/download/stable/<span class="token variable">${commit_id}</span>/vscode_cli_alpine_arm64_cli.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2ã€ä¼ è¾“æ–‡ä»¶"><a href="#2ã€ä¼ è¾“æ–‡ä»¶" class="headerlink" title="2ã€ä¼ è¾“æ–‡ä»¶"></a>2ã€ä¼ è¾“æ–‡ä»¶</h3><p>éœ€è¦ä½¿ç”¨ä¸€ä¸ªç»ˆç«¯å…ˆå’Œç›®æ ‡è®¡ç®—æœºå»ºç«‹sshé“¾æ¥ã€‚è¿æ¥æˆåŠŸåï¼Œ</p><p>ç¬¬ä¸€ä¸ªæ–‡ä»¶: <code>vscode-server-linux-x64.tar.gz</code> è§£å‹åï¼Œæ–‡ä»¶å¤¹åå­—ä¸º <code>vscode-server-linux-x64</code> ï¼Œ</p><ul><li><p>éœ€è¦å°†è¯¥æ–‡ä»¶å¤¹æ”¹åä¸º <code>server</code> æ”¾åœ¨ <code>/home/${user}/.vscodeâˆ’server/cli/servers/Stableâˆ’${commit_id}/</code> ç›®å½•ä¸‹</p></li><li><p>åŒæ—¶è¿™ä¸ªæ–‡ä»¶éœ€è¦è§£å‹åœ¨<code>/home/${user}/.vscode-server/bin/${commit_id}</code>ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œåä¸å†èµ˜è¿°ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> -p /home/<span class="token variable">${user}</span>/.vscode-server/bin/<span class="token variable">${commit_id}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><p>ç¬¬äºŒä¸ªæ–‡ä»¶: <code>vscode_cli_alpine_x64_cli.tar.gz</code> è§£å‹åï¼Œæ–‡ä»¶åå­—ä¸º<code>code</code> çš„æ–‡ä»¶æ”¹åä¸º <code>code-${commit_id}</code> ï¼Œæ”¾åœ¨<code>/home/${user}/.vscode-server/</code>ç›®å½•ä¸‹ </p><blockquote><p>è§£å‹æŒ‡ä»¤ï¼š<code>tar -zxvf xxx.tar.gz</code></p></blockquote><h3 id="3ã€åˆ›å»ºlru-jsonæ–‡ä»¶"><a href="#3ã€åˆ›å»ºlru-jsonæ–‡ä»¶" class="headerlink" title="3ã€åˆ›å»ºlru.jsonæ–‡ä»¶"></a>3ã€åˆ›å»ºlru.jsonæ–‡ä»¶</h3><p>åœ¨ <code>~/.vscode-server/cli/servers/</code> ç›®å½•ä¸‹åˆ›å»º <code>lru.json</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span><span class="token string">"Stable-${commit_id}"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸€æ­¥ç¡®ä¿ VS Code Server èƒ½æ­£ç¡®è¯†åˆ«ç¦»çº¿å®‰è£…çš„ç‰ˆæœ¬</p><h2 id="ä¸‰ã€å¯èƒ½çš„é—®é¢˜"><a href="#ä¸‰ã€å¯èƒ½çš„é—®é¢˜" class="headerlink" title="ä¸‰ã€å¯èƒ½çš„é—®é¢˜"></a>ä¸‰ã€å¯èƒ½çš„é—®é¢˜</h2><h3 id="1ã€ä»ä¸èƒ½è¿æ¥"><a href="#1ã€ä»ä¸èƒ½è¿æ¥" class="headerlink" title="1ã€ä»ä¸èƒ½è¿æ¥"></a>1ã€ä»ä¸èƒ½è¿æ¥</h3><p> å¦‚æœä»ç„¶è¿æ¥ä¸ä¸Š,åˆ™å¯èƒ½éœ€è¦ä¿®æ”¹<code>.vscode-server</code>æ–‡ä»¶å¤¹åŠå…¶å­ç›®å½•çš„æƒé™,ä¾‹å¦‚æƒé™æ”¹ä¸º700,å†å°è¯•è¿æ¥: </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> -R <span class="token number">700</span> /home/<span class="token variable">${user}</span>/.vscode-server/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2ã€æ£€æŸ¥ç›®å½•"><a href="#2ã€æ£€æŸ¥ç›®å½•" class="headerlink" title="2ã€æ£€æŸ¥ç›®å½•"></a>2ã€æ£€æŸ¥ç›®å½•</h3><p>æ£€æŸ¥ç›®å½•ç»“æ„æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œæœ‰çš„é”™è¯¯å¯èƒ½åªæ˜¯æ–‡ä»¶æ”¾çš„ä½ç½®é”™äº†ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">~/.vscode-server/â”œâ”€â”€ bin/<span class="token variable">${commit_id}</span>/â”œâ”€â”€ cli/â”‚   â””â”€â”€ servers/Stable-<span class="token variable">${commit_id}</span>/serverâ”œâ”€â”€ code-<span class="token variable">${commit_id}</span>â””â”€â”€ extensions/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3ã€æ£€æŸ¥æ—¥å¿—"><a href="#3ã€æ£€æŸ¥æ—¥å¿—" class="headerlink" title="3ã€æ£€æŸ¥æ—¥å¿—"></a>3ã€æ£€æŸ¥æ—¥å¿—</h3><p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œéœ€é‡æ–°å°è¯•è¿æ¥æœåŠ¡å™¨ã€‚å¦‚æœä»ç„¶å‡ºç°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹æœåŠ¡å™¨ç«¯çš„æ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚ <code>~/.vscode-server/cli/servers/Stable-${commit_id}/log.txt</code>ï¼‰ä»¥æŸ¥çœ‹é—®é¢˜å…·ä½“åŸå› </p><h2 id="å››ã€å…å¯†ç™»å½•"><a href="#å››ã€å…å¯†ç™»å½•" class="headerlink" title="å››ã€å…å¯†ç™»å½•"></a>å››ã€å…å¯†ç™»å½•</h2><p>ç”Ÿæˆ ssh ä½¿ç”¨çš„å…¬é’¥/å¯†é’¥å¯¹ï¼Œéœ€è¦ä»å®¢æˆ·ç«¯ä¸Šçš„å‘½ä»¤æç¤ºç¬¦ï¼ˆwindowsï¼šcmdã€éœ€ä¸‹è½½GITã€‘ã€linuxï¼šbashç­‰ï¼‰è¿è¡Œä»¥ä¸‹å‘½ä»¤</p><pre class="line-numbers language-undefined" data-language="undefined"><code class="language-undefined">ssh-keygen -t rsa<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¾“å…¥å‘½ä»¤æ‰§è¡Œå®Œæˆåä¼šç”Ÿæˆ<code>.ssh</code>æ–‡ä»¶å¤¹,é‡Œé¢ä¼šæœ‰è¿™ä¸¤ä¸ªæ–‡ä»¶</p><ul><li><p>id_rsa(ç§é’¥)</p></li><li><p>id_rsa.pub(å…¬é’¥)</p></li></ul><p>åœ¨æœåŠ¡å™¨ä¸Šæ·»åŠ æ–‡ä»¶å¤¹ï¼ˆéœ€å…ˆç™»å½•ä¸ŠæœåŠ¡å™¨ï¼‰<code>mkdir -p ~/.ssh</code></p><p>æ·»åŠ å…¬é’¥åˆ°è¿œç¨‹æœåŠ¡å™¨</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">å°† SSH å…¬é’¥æ·»åŠ åˆ°è¿œç¨‹æœåŠ¡å™¨ssh-copy-id <span class="token variable">${user}</span>@<span class="token variable">${server_ip}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>id_rsa.pub(å…¬é’¥)ç”Ÿæˆåï¼Œæ‰“å¼€å¤åˆ¶å†…å®¹ï¼Œæ‰“å¼€è¿œç¨‹ä¸»æœº<code>/home/${user}/.ssh/authorized_keys</code>æ–‡ä»¶,</p><p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å°±åˆ›å»ºï¼Œç„¶åç²˜è´´å¤åˆ¶çš„å…¬é’¥å†…å®¹å¹¶æ‰“å¼€</p><p>é€šè¿‡æ›´æ–° ssh é…ç½®æ–‡ä»¶è¿æ¥ä¸­çš„<code>C:\Users\${user}\.ssh\config</code>æˆ–<code>/home/${user}/.ssh/config</code>é…ç½®æ–‡ä»¶</p><p>åœ¨ä½ è¦è¿æ¥çš„Hostä¸‹é…ç½®IdentityFile,åé¢å¡«å†™id_rsa(ç§é’¥)è·¯å¾„,å¹¶ä¿å­˜:</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">Host xxx  HostName xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>xxx  Port xx  <span class="token keyword">User</span> xxx  IdentityFile <span class="token string">"C:\Users\${user}\.ssh\id_rsa"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‰‹åŠ¨åˆ›å»º /home/${user}/.ssh/authorized_keys,éœ€è¦æ›´æ”¹å…¶æƒé™:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> <span class="token number">700</span> /home/<span class="token variable">${user}</span>/.ssh<span class="token function">chmod</span> <span class="token number">600</span> /home/<span class="token variable">${user}</span>/.ssh/authorized_keys<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="äº”ã€ç¦»çº¿é…ç½®condaç¯å¢ƒ"><a href="#äº”ã€ç¦»çº¿é…ç½®condaç¯å¢ƒ" class="headerlink" title="äº”ã€ç¦»çº¿é…ç½®condaç¯å¢ƒ"></a>äº”ã€ç¦»çº¿é…ç½®condaç¯å¢ƒ</h2><p>é¦–å…ˆåœ¨å¯ä»¥è”ç½‘çš„ç”µè„‘ä¸‹è½½<code>miniconda</code>ï¼Œå¹¶é€šè¿‡<code>scp</code>çš„æ–¹å¼ä¸Šä¼ è‡³æœåŠ¡å™¨</p><p>ä¸Šä¼ å®Œæˆåï¼Œæ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤ï¼Œç»™æ–‡ä»¶å¢åŠ è¿è¡Œæƒé™å¹¶å®‰è£…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> u+x Miniconda3-latest-Linux-x86_64.sh./Miniconda3-latest-Linux-x86_64.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®‰è£…å®Œæˆåè®°å¾—ï¼š<code>source ~/.bashrc</code></p><p>åœ¨å’ŒæœåŠ¡å™¨å·®ä¸å¤šçš„ç³»ç»Ÿå’Œç³»ç»Ÿæ¶æ„ä¸‹çš„ç”µè„‘ï¼ˆæ¯”å¦‚æœåŠ¡å™¨æ˜¯Ubuntu ï¼Œ linuxç³»ç»Ÿï¼Œx86_64æ¶æ„ï¼Œé‚£ä½ è‡ªå·±çš„ç”µè„‘ä¹Ÿéœ€è¦ç±»ä¼¼ï¼‰åˆ›å»ºè‡ªå·±çš„condaç¯å¢ƒï¼Œä¸‹è½½å®‰è£…å¥½ç¯å¢ƒåŒ…ï¼Œä¿è¯ä»£ç èƒ½å¤Ÿè¿è¡Œåï¼Œå°±å¯¹è¯¥condaç¯å¢ƒè¿›è¡Œæ‰“åŒ…ã€‚</p><p>æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda <span class="token function">install</span> conda-pack <span class="token comment"># å®‰è£…conda pack</span><span class="token comment"># or</span>pip <span class="token function">install</span> conda-pack<span class="token comment"># åœ¨ä½ è‡ªå·±çš„ç”µè„‘æ‰“åŒ…ï¼Œéœ€å…³æ³¨è‡ªå·±çš„ç¯å¢ƒåç§°ï¼Œå¹¶æ›¿æ¢${env_name}éƒ¨åˆ†å­—æ®µ</span>conda pack -n <span class="token variable">${env_name}</span> -o <span class="token variable">${env_name}</span>.tar.gz<span class="token comment"># ä¸Šä¼ ä½ çš„å‹ç¼©åŒ…</span><span class="token function">scp</span> <span class="token variable">${env_name}</span>.tar.gz <span class="token variable">${user}</span>@<span class="token variable">${server_ip}</span>:~/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æœåŠ¡å™¨ä¸Šï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è§£å‹ä½ ä¸Šä¼ çš„å‹ç¼©åŒ…</span><span class="token function">mkdir</span> -p miniconda3/envs/<span class="token variable">${env_name}</span>/<span class="token function">tar</span> -xzvf <span class="token variable">${env_name}</span>.tar.gz -C miniconda3/envs/<span class="token variable">${env_name}</span>/<span class="token comment"># ä¿®å¤clearå‘½ä»¤æ— æ³•æ‰§è¡Œé—®é¢˜</span>./miniconda3/envs/<span class="token variable">${env_name}</span>/bin/python<span class="token builtin class-name">source</span> ./miniconda3/envs/<span class="token variable">${env_name}</span>/bin/activateconda-unpack<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ä½ åœ¨æœåŠ¡å™¨ä¸Šï¼Œä½¿ç”¨<code>conda info -e</code>æŒ‡ä»¤ï¼Œå³å¯çœ‹åˆ°ä½ ä¸Šä¼ çš„<code>${env_name}</code>ç¯å¢ƒäº†ï¼Œå¯ä»¥ç¦»çº¿ä½¿ç”¨è‡ªå·±é…å¥½çš„pythonç¯å¢ƒ</p><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><h3 id="1ã€scpç”¨æ³•"><a href="#1ã€scpç”¨æ³•" class="headerlink" title="1ã€scpç”¨æ³•"></a>1ã€scpç”¨æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">scp</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span class="token punctuation">[</span>æºæ–‡ä»¶<span class="token punctuation">]</span> <span class="token punctuation">[</span>ç›®æ ‡æ–‡ä»¶<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><strong>æºæ–‡ä»¶</strong>ï¼šè¦å¤åˆ¶çš„æ–‡ä»¶æˆ–ç›®å½•è·¯å¾„ã€‚</li><li><strong>ç›®æ ‡æ–‡ä»¶</strong>ï¼šå¤åˆ¶åˆ°çš„ç›®æ ‡è·¯å¾„ã€‚</li><li><strong>é€‰é¡¹</strong>ï¼šç”¨äºæ§åˆ¶ <code>scp</code> çš„è¡Œä¸ºï¼Œä¾‹å¦‚é€’å½’å¤åˆ¶ã€æŒ‡å®šç«¯å£ç­‰ã€‚</li></ul><p><strong>å¸¸ç”¨é€‰é¡¹</strong></p><ul><li><strong>-r</strong>ï¼šé€’å½’å¤åˆ¶ç›®å½•ã€‚</li><li><strong>-P</strong>ï¼šæŒ‡å®šè¿œç¨‹æœåŠ¡å™¨çš„ SSH ç«¯å£ï¼ˆé»˜è®¤æ˜¯ 22ï¼‰ã€‚</li><li><strong>-i</strong>ï¼šæŒ‡å®šç§é’¥æ–‡ä»¶è·¯å¾„ï¼ˆç”¨äºå¯†é’¥è®¤è¯ï¼‰ã€‚</li><li><strong>-C</strong>ï¼šå¯ç”¨å‹ç¼©ï¼Œé€‚åˆä¼ è¾“å¤§æ–‡ä»¶ã€‚</li><li><strong>-v</strong>ï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</li></ul><p><strong>ä»æœ¬åœ°å¤åˆ¶åˆ°è¿œç¨‹æœåŠ¡å™¨</strong>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">scp</span> file.txt <span class="token variable">${user}</span>@<span class="token variable">${remote_host}</span>:/home/<span class="token variable">${user}</span>/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>file.txt</code> æ˜¯æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚</li><li><code>${user}</code> æ˜¯è¿œç¨‹æœåŠ¡å™¨çš„ç”¨æˆ·åã€‚</li><li><code>${remote_host}</code> æ˜¯è¿œç¨‹æœåŠ¡å™¨çš„ IP åœ°å€æˆ–ä¸»æœºåã€‚</li><li><code>/home/${user}/</code> æ˜¯è¿œç¨‹æœåŠ¡å™¨çš„ç›®æ ‡è·¯å¾„ã€‚</li></ul><p><strong>ä»è¿œç¨‹æœåŠ¡å™¨å¤åˆ¶æ–‡ä»¶åˆ°æœ¬åœ°</strong></p><p>å‡è®¾ä½ æƒ³å°†è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ <code>/home/user/file.txt</code> æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°çš„å½“å‰ç›®å½•ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">scp</span> <span class="token variable">${user}</span>@<span class="token variable">${remote_host}</span>:/home/<span class="token variable">${user}</span>/file.txt <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>${user}@${remote_host}:/home/${user}/file.txt</code> æ˜¯è¿œç¨‹æ–‡ä»¶è·¯å¾„ã€‚</li><li><code>.</code> è¡¨ç¤ºå‘½ä»¤è¡Œå½“å‰çš„ç›®å½•ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> conda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pip ç¼ºå°‘æ¨¡å—æ— æ³•å®‰è£…çš„é—®é¢˜</title>
      <link href="/2025/02/26/error-pip-no-inject_securetransport/"/>
      <url>/2025/02/26/error-pip-no-inject_securetransport/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="No-module-named-â€˜pip-internal-utils-inject-securetransportâ€™"><a href="#No-module-named-â€˜pip-internal-utils-inject-securetransportâ€™" class="headerlink" title="No module named â€˜pip._internal.utils.inject_securetransportâ€™"></a>No module named â€˜pip._internal.utils.inject_securetransportâ€™</h1><p>åœ¨ä½¿ç”¨condaçš„pythonåˆ›å»ºæ–°ç¯å¢ƒåï¼Œä½¿ç”¨pipå®‰è£…å†…å®¹ã€python3.8.20ã€‘çš„æ—¶å€™ï¼Œæˆ‘å‡ºç°è¿‡ä»¥ä¸‹é—®é¢˜ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(vqvae) D:\1_thu_homework\airobot-lab\vqvae&gt;pip install -r requirements.txtTraceback (most recent call last):  File "C:\Users\ASUS\.conda\envs\vqvae\Scripts\pip-script.py", line 6, in &lt;module&gt;    from pip._internal.cli.main import main  File "C:\Users\ASUS\.conda\envs\vqvae\lib\site-packages\pip\_internal\__init__.py", line 3, in &lt;module&gt;    import pip._internal.utils.inject_securetransport  # noqaModuleNotFoundError: No module named 'pip._internal.utils.inject_securetransport'(vqvae) D:\1_thu_homework\airobot-lab\vqvae&gt;python -m pip install --upgrade pipTraceback (most recent call last):  File "C:\Users\ASUS\.conda\envs\vqvae\lib\runpy.py", line 194, in _run_module_as_main    return _run_code(code, main_globals, None,  File "C:\Users\ASUS\.conda\envs\vqvae\lib\runpy.py", line 87, in _run_code    exec(code, run_globals)  File "C:\Users\ASUS\.conda\envs\vqvae\lib\site-packages\pip\__main__.py", line 29, in &lt;module&gt;    from pip._internal.cli.main import main as _main  File "C:\Users\ASUS\.conda\envs\vqvae\lib\site-packages\pip\_internal\__init__.py", line 3, in &lt;module&gt;    import pip._internal.utils.inject_securetransport  # noqaModuleNotFoundError: No module named 'pip._internal.utils.inject_securetransport'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¸å¿ƒçš„é—®é¢˜å°±æ˜¯pipçš„æ¨¡å—ä¸è§äº†ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°å®‰è£…pipã€‚</p><p>ç½‘ä¸Šæ‰¾åˆ°äº†é è°±çš„è§£å†³æ–¹æ³•ï¼š</p><p>è¾“å…¥ä¸‹åˆ—æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">python -m ensurepip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">python get-pip.py --force-reinstall<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸€èˆ¬åœ¨æ­¤åˆ»å°±å¯ä»¥è§£å†³é—®é¢˜äº†ï¼Œå¦‚æœä½ å‡ºç°äº†ç±»ä¼¼ä¸‹åˆ—é—®é¢˜ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(vqvae) D:\1_thu_homework\airobot-lab\vqvae&gt;pip install -r requirements.txtLooking in indexes: https://pypi.org/simple, https://pypi.ngc.nvidia.comCollecting certifi==2019.3.9 (from -r requirements.txt (line 1))  Downloading certifi-2019.3.9-py2.py3-none-any.whl.metadata (2.5 kB)Collecting cffi==1.12.3 (from -r requirements.txt (line 2))  Downloading cffi-1.12.3.tar.gz (456 kB)  Preparing metadata (setup.py) ... error  error: subprocess-exited-with-error  Ã— python setup.py egg_info did not run successfully.  â”‚ exit code: 1  â•°â”€&gt; [1 lines of output]      ERROR: Can not execute `setup.py` since setuptools is not available in the build environment.      [end of output]  note: This error originates from a subprocess, and is likely not a problem with pip.error: metadata-generation-failedÃ— Encountered error while generating package metadata.â•°â”€&gt; See above for output.note: This is an issue with the package mentioned above, not pip.hint: See above for details.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘çš„è§£å†³æ–¹æ³•æ˜¯é‡è£…setuptoolsï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pip uninstall setuptoolspip install setuptools<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è‡³æ­¤ï¼Œé—®é¢˜ä¸€èˆ¬å¯ä»¥è¢«è§£å†³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ¥é”™æ’æŸ¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gazebo VMware Libcurl æŠ¥é”™</title>
      <link href="/2024/10/17/error-gazebo-ssl-vmware/"/>
      <url>/2024/10/17/error-gazebo-ssl-vmware/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="Gazebo-VMware-libcurl-æŠ¥é”™"><a href="#Gazebo-VMware-libcurl-æŠ¥é”™" class="headerlink" title="Gazebo VMware libcurl æŠ¥é”™"></a>Gazebo VMware libcurl æŠ¥é”™</h1><p>åœ¨å®‰è£…ç¼–è¯‘äº†gazeboä¹‹åï¼Œæˆ‘åœ¨Vmware æ— æ³•æ­£å¸¸å¯åŠ¨Gazebo ï¼ŒæŠ¥äº†å¦‚ä¸‹é”™è¯¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">libcurl: <span class="token punctuation">(</span><span class="token number">51</span><span class="token punctuation">)</span> SSL: no alternative certificate subject name matches target <span class="token function">host</span> name <span class="token string">'api.ignitionfuel.org'</span>VMware: vmw_ioctl_command error Invalid argument.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="1ã€libcurl-æŠ¥é”™è§£å†³"><a href="#1ã€libcurl-æŠ¥é”™è§£å†³" class="headerlink" title="1ã€libcurl æŠ¥é”™è§£å†³"></a>1ã€libcurl æŠ¥é”™è§£å†³</h2><p>æ‰¾åˆ°<code>~/.ignition/fuel/config.yaml</code>æ–‡ä»¶ä¸­çš„ <code>https://api.ignitionfuel.org</code>é“¾æ¥ï¼Œæ”¹ä¸º <code>https://api.ignitionrobotics.org</code>å³å¯ã€‚</p><h2 id="2ã€VmwareæŒ‡ä»¤éæ³•è§£å†³"><a href="#2ã€VmwareæŒ‡ä»¤éæ³•è§£å†³" class="headerlink" title="2ã€VmwareæŒ‡ä»¤éæ³•è§£å†³"></a>2ã€VmwareæŒ‡ä»¤éæ³•è§£å†³</h2><p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"export SVGA_VGPU10=0"</span> <span class="token operator">&gt;&gt;</span> ~/.bashrc<span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å³å¯è§£å†³</p>]]></content>
      
      
      <categories>
          
          <category> æŠ¥é”™æ’æŸ¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PowerShellç¦æ­¢è¿è¡Œè„šæœ¬</title>
      <link href="/2024/10/10/error-hexos/"/>
      <url>/2024/10/10/error-hexos/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="hexo-PowerShellç¦æ­¢è¿è¡Œè„šæœ¬"><a href="#hexo-PowerShellç¦æ­¢è¿è¡Œè„šæœ¬" class="headerlink" title="hexo PowerShellç¦æ­¢è¿è¡Œè„šæœ¬"></a>hexo PowerShellç¦æ­¢è¿è¡Œè„šæœ¬</h1><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>åœ¨æˆ‘å°è¯•æ‰§è¡Œ<code>hexo s</code>é¢„è§ˆåšå®¢çš„æ—¶å€™ï¼Œé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">hexo : æ— æ³•åŠ è½½æ–‡ä»¶ C:\Users\ASUS\AppData\Roaming\npm\hexo<span class="token punctuation">.</span>ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… https:<span class="token operator">/</span>go<span class="token punctuation">.</span>microsoft<span class="token punctuation">.</span>com/fwlink/?LinkID=135170 ä¸­çš„ about_Execution_Policiesã€‚æ‰€åœ¨ä½ç½® è¡Œ:1 å­—ç¬¦: 1<span class="token operator">+</span> hexo s<span class="token operator">+</span> ~~~~    <span class="token operator">+</span> CategoryInfo          : SecurityError: <span class="token punctuation">(</span>:<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>ï¼ŒPSSecurityException    <span class="token operator">+</span> FullyQualifiedErrorId : UnauthorizedAccess<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‚æ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">set-executionpolicy</span> remotesigned<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½†å‡ºç°äº†å¦‚ä¸‹ä¿¡æ¯ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">set-executionpolicy</span> : Windows PowerShell å·²æˆåŠŸæ›´æ–°ä½ çš„æ‰§è¡Œç­–ç•¥ï¼Œä½†åœ¨æ›´å…·ä½“çš„ä½œä¸šåŸŸä¸­å®šä¹‰çš„ç­–ç•¥è¦†ç›–äº†è¯¥è®¾ç½®ã€‚ç”±äºå‘ç”Ÿè¦†ç›–ï¼Œä½ çš„å¤–å£³ç¨‹åºå°†ä¿ç•™å…¶å½“å‰çš„æœ‰æ•ˆæ‰§è¡Œç­–ç•¥ Restrictedã€‚è¯·é”®å…¥â€œ<span class="token function">Get-ExecutionPolicy</span> <span class="token operator">-</span>Listâ€ä»¥æŸ¥çœ‹ä½ çš„æ‰§è¡Œç­–ç•¥è®¾ç½®ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ<span class="token function">Get-Help</span> <span class="token function">Set-ExecutionPolicy</span>â€ã€‚æ‰€åœ¨ä½ç½® è¡Œ:1 å­—ç¬¦: 1<span class="token operator">+</span> <span class="token function">set-executionpolicy</span> remotesigned<span class="token operator">+</span> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    <span class="token operator">+</span> CategoryInfo          : PermissionDenied: <span class="token punctuation">(</span>:<span class="token punctuation">)</span> <span class="token namespace">[Set-ExecutionPolicy]</span><span class="token punctuation">,</span> SecurityException    <span class="token operator">+</span> FullyQualifiedErrorId : ExecutionPolicyOverride<span class="token punctuation">,</span>Microsoft<span class="token punctuation">.</span>PowerShell<span class="token punctuation">.</span>Commands<span class="token punctuation">.</span>SetExecutionPolicyCommand<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>äºæ˜¯æ ¹æ®powershellçš„æç¤ºï¼Œæˆ‘æ‰§è¡Œ<code>Get-ExecutionPolicy -List</code>æŒ‡ä»¤ï¼Œå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">        Scope ExecutionPolicy        <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>MachinePolicy       Undefined   UserPolicy       Undefined      <span class="token keyword">Process</span>       Undefined  CurrentUser      Restricted LocalMachine    RemoteSigned<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">Set-ExecutionPolicy</span> RemoteSigned <span class="token operator">-</span>Scope <span class="token keyword">Process</span><span class="token function">Set-ExecutionPolicy</span> RemoteSigned <span class="token operator">-</span>Scope CurrentUser<span class="token function">Set-ExecutionPolicy</span> RemoteSigned <span class="token operator">-</span>Scope LocalMachine<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œå³å¯è§£å†³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ¥é”™æ’æŸ¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Powershell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS åä¸‰ã€ROSæ‰‹æŸ„é€šä¿¡</title>
      <link href="/2024/10/10/ros-13-melodic2joy/"/>
      <url>/2024/10/10/ros-13-melodic2joy/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="ROS-åä¸‰ã€ROSæ‰‹æŸ„é€šä¿¡"><a href="#ROS-åä¸‰ã€ROSæ‰‹æŸ„é€šä¿¡" class="headerlink" title="ROS åä¸‰ã€ROSæ‰‹æŸ„é€šä¿¡"></a>ROS åä¸‰ã€ROSæ‰‹æŸ„é€šä¿¡</h1><p>ç”±äºåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­æœ‰ä½¿ç”¨æ‰‹æŸ„çš„éœ€è¦ï¼Œä¸”æœŸé—´ä¹Ÿå‡ºç°äº†ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ•…åœ¨æ­¤è®°å½•ä¸€ä¸‹æ‰‹æŸ„åœ¨rosä¸Šçš„ä½¿ç”¨ï¼Œä»¥ä¾¿äºå¤§å®¶å¿«é€Ÿä¸Šæ‰‹ã€‚</p><p>åœ¨æ­¤å¼ºè°ƒä¸€ä¸‹æœ¬æ¬¡è¿è¡Œç¯å¢ƒï¼š</p><ul><li>æ“ä½œç³»ç»Ÿï¼šubuntu18.04</li><li>ROSç‰ˆæœ¬ï¼šmelodic</li><li>æ‰‹æŸ„ï¼šæˆ‘ä½¿ç”¨çš„æ˜¯æœ‰çº¿å…é©±çš„æ™®é€špcæ‰‹æŸ„</li></ul><h2 id="ä¸€ã€æ‰‹æŸ„è¿æ¥"><a href="#ä¸€ã€æ‰‹æŸ„è¿æ¥" class="headerlink" title="ä¸€ã€æ‰‹æŸ„è¿æ¥"></a>ä¸€ã€æ‰‹æŸ„è¿æ¥</h2><p>åœ¨æ‰‹æŸ„æ¥ä¸Šç”µè„‘åï¼Œåœ¨linuxå‘½ä»¤è¡Œè¾“å…¥ä¸‹è¿°è¯­å¥ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ls</span> /dev/input/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥å¾—åˆ°å„ç§è¾“å…¥è®¾å¤‡çš„ä¿¡æ¯ã€‚å¤§è‡´å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">by-id    event0  event2  event4  event6  event8  mouse0  mouse2  uinputby-path  event1  event3  event5  event7  js0     mice    mouse1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åœ¨å…¶ä¸­åªè¦æ‰¾åˆ°<code>jsX</code>ç±»å‹çš„è®¾å¤‡å³ä¸ºè¿æ¥æˆåŠŸï¼Œå¦‚<code>js0</code>ï¼Œ<code>js1</code>ç­‰ç­‰ã€‚</p><p>æŸ¥è¯¢æ‰‹æŸ„çš„æ‰§è¡Œæƒé™ï¼Œ<code>jsX</code>è¦æ¢æˆå…·ä½“çš„è®¾å¤‡ç¼–å·ï¼Œå¦‚<code>js0</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ls</span> -l /dev/input/jsX<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crw-rw-r--+ <span class="token number">1</span> root input <span class="token number">13</span>, <span class="token number">0</span> <span class="token number">10</span>æœˆ <span class="token number">10</span> <span class="token number">21</span>:00 /dev/input/js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸ºæ‰‹æŸ„æ·»åŠ æ‰§è¡Œæƒé™ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">chmod</span> a+rw /dev/input/js0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½¿ç”¨å¦‚ä¸‹è¯­å¥æµ‹è¯•æ‰‹æŸ„ï¼Œç¡®ä¿ç”¨æˆ·åœ¨ä½¿ç”¨æ‰‹æŸ„çš„æ—¶å€™ï¼Œç”µè„‘èƒ½å¤Ÿæ•è·æ‰‹æŸ„è¾“å…¥çš„ä¿¡æ¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> jstest /dev/input/js0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å½“æŒ‰ä¸‹æ‰‹æŸ„æŒ‰é’®çš„æ—¶å€™ï¼Œå‘½ä»¤è¡Œç•Œé¢èƒ½å¤Ÿè¯»åˆ°æ•°æ®ï¼Œåˆ™è¯æ˜æ‰‹æŸ„çš„è¾“å…¥æ˜¯æœ‰æ•ˆçš„ã€‚</p><h2 id="äºŒã€ä¸‹è½½é©±åŠ¨"><a href="#äºŒã€ä¸‹è½½é©±åŠ¨" class="headerlink" title="äºŒã€ä¸‹è½½é©±åŠ¨"></a>äºŒã€ä¸‹è½½é©±åŠ¨</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p>ç›´æ¥ä¸‹è½½é©±åŠ¨åŒ…</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ros-melodic-joy<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ros-melodic-joystick_driver<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åè¿è¡Œ<code>roscore</code>ï¼Œå°è¯•<code>åœ¨è¿æ¥å¥½æ‰‹æŸ„å</code>ï¼Œè¿è¡Œä¸‹è¿°å†…å®¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun joy joy_node<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ²¡æœ‰å‡ºç°ä»»ä½•å¼‚å¸¸ï¼Œæ­å–œä½ ï¼Œå¯ä»¥è¿›å…¥ç¬¬ä¸‰ä¸ªç¯èŠ‚ã€‚</p><p>å¦‚æœä½ å‘ç°è¿™ä¸ªå®‰è£…æ–¹å¼æ— æ³•æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œè¯·çœ‹æ–¹æ³•äºŒ</p><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p><a href="https://github.com/ros-drivers/joystick_drivers">https://github.com/ros-drivers/joystick_drivers</a></p><p>åœ¨ä¸Šè¿°ä»£ç ä»“ä¸‹è½½ä»£ç åŒ…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/ros-drivers/joystick_drivers<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åå¤åˆ¶åˆ°<code>/opt/ros/melodic/share/</code>ç›®å½•ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> -r joystick_drivers /opt/ros/melodic/share/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶ååœ¨è‡ªå·±çš„å·¥ä½œç©ºé—´è¿›è¡Œ<code>catkin_make</code>å³å¯</p><h2 id="ä¸‰ã€ä»£ç "><a href="#ä¸‰ã€ä»£ç " class="headerlink" title="ä¸‰ã€ä»£ç "></a>ä¸‰ã€ä»£ç </h2><p>æœ¬æ¬¡å®è·µï¼Œé‡‡ç”¨æ¸¸æˆæ‰‹æŸ„ï¼Œæ§åˆ¶å°æµ·é¾Ÿçš„è¿åŠ¨ã€‚</p><p>æœ¬æ¬¡æš‚æ—¶åªæä¾›c++çš„ä»£ç ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;geometry_msgs/Twist.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sensor_msgs/Joy.h&gt;</span></span><span class="token keyword">class</span> <span class="token class-name">TeleopTurtle</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">TeleopTurtle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token comment">// å¤„ç†æ‰‹æŸ„å‘é€è¿‡æ¥çš„ä¿¡æ¯</span>    <span class="token keyword">void</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">const</span> sensor_msgs<span class="token double-colon punctuation">::</span>Joy<span class="token double-colon punctuation">::</span>ConstPtr <span class="token operator">&amp;</span>joy<span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Subscriber sub<span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Publisher pub<span class="token punctuation">;</span>    <span class="token comment">// ç”¨æ¥æ¥æ”¶launchæ–‡ä»¶ä¸­è®¾ç½®çš„å‚æ•°ï¼Œç»‘å®šæ‰‹æŸ„æ‘‡æ†ã€è½´çš„æ˜ å°„</span>    <span class="token keyword">int</span> axis_linear<span class="token punctuation">,</span> axis_angular<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token class-name">TeleopTurtle</span><span class="token double-colon punctuation">::</span><span class="token function">TeleopTurtle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">param</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"axis_linear"</span><span class="token punctuation">,</span> axis_linear<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">param</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"axis_angular"</span><span class="token punctuation">,</span> axis_angular<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>geometry_msgs<span class="token double-colon punctuation">::</span>Twist<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/turtle1/cmd_vel"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    sub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">subscribe</span><span class="token generic class-name"><span class="token operator">&lt;</span>sensor_msgs<span class="token double-colon punctuation">::</span>Joy<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"joy"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>TeleopTurtle<span class="token double-colon punctuation">::</span>callback<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token class-name">TeleopTurtle</span><span class="token double-colon punctuation">::</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">const</span> sensor_msgs<span class="token double-colon punctuation">::</span>Joy<span class="token double-colon punctuation">::</span>ConstPtr <span class="token operator">&amp;</span>joy<span class="token punctuation">)</span><span class="token punctuation">{</span>    geometry_msgs<span class="token double-colon punctuation">::</span>Twist vel<span class="token punctuation">;</span>    <span class="token comment">// å°†æ‰‹æŸ„æ‘‡æ†è½´æ‹¨åŠ¨æ—¶å€¼çš„è¾“å‡º,èµ‹å€¼ç»™ä¹Œé¾Ÿçš„çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦</span>    vel<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x <span class="token operator">=</span> joy<span class="token operator">-&gt;</span>axes<span class="token punctuation">[</span>axis_linear<span class="token punctuation">]</span><span class="token punctuation">;</span>    vel<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z <span class="token operator">=</span> joy<span class="token operator">-&gt;</span>axes<span class="token punctuation">[</span>axis_angular<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"å½“å‰çº¿é€Ÿåº¦ä¸º:%.3lf | è§’é€Ÿåº¦ä¸º:%.3lf"</span><span class="token punctuation">,</span> vel<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x<span class="token punctuation">,</span> vel<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>    pub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>vel<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">setlocale</span><span class="token punctuation">(</span>LC_ALL<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"teleop_turtle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    TeleopTurtle teleopTurtle<span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨<code>cmakelist</code>ä¸­æ·»åŠ ç¼–è¯‘ä¿¡æ¯ï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_executable</span><span class="token punctuation">(</span>teleop_turtle src/teleop_turtle.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>teleop_turtle  <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>launchæ–‡ä»¶ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- å¯åŠ¨ä¹Œé¾ŸèŠ‚ç‚¹ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim_node<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim_node<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!-- å¯åŠ¨æˆ‘ä»¬åˆ›å»ºçš„æ‰‹æŸ„æ§åˆ¶ä¹Œé¾ŸèŠ‚ç‚¹ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teleop_turtle<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teleop_turtle<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teleop_turtle<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>         <span class="token comment">&lt;!-- å‘å‚æ•°æœåŠ¡å™¨å†™å…¥å‚æ•° --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>axis_linear<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>axis_angular<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!-- å¯åŠ¨æ‰‹æŸ„èŠ‚ç‚¹ï¼Œrespawn="true"è¡¨ç¤ºèŠ‚ç‚¹æŒ‚æ‰æ—¶ä¼šè‡ªåŠ¨é‡å¯ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">respawn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joy<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joy_node<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joystick<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åè¿›è¡Œcatkin_makeï¼Œå¦‚æœä½ æ˜¯ä½¿ç”¨æ–¹æ³•äºŒï¼Œè¦ç¡®ä¿é©±åŠ¨åŒ…èƒ½å¤Ÿä¸€å¹¶è¢«ç¼–è¯‘ï¼Œå³å¯æ­£å¸¸ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µè„‘è™šæ‹Ÿç¯å¢ƒåˆ‡æ¢</title>
      <link href="/2023/08/01/wsl&amp;hpyer-v_off_note/"/>
      <url>/2023/08/01/wsl&amp;hpyer-v_off_note/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="ç”µè„‘è™šæ‹Ÿç¯å¢ƒåˆ‡æ¢"><a href="#ç”µè„‘è™šæ‹Ÿç¯å¢ƒåˆ‡æ¢" class="headerlink" title="ç”µè„‘è™šæ‹Ÿç¯å¢ƒåˆ‡æ¢"></a>ç”µè„‘è™šæ‹Ÿç¯å¢ƒåˆ‡æ¢</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå¦‚æœè‡ªå·±çš„ç”µè„‘å¼€å¯äº†wslï¼Œä¸€éƒ¨åˆ†è™šæ‹Ÿæœºï¼ˆå¦‚ä½œè€…ç”¨ Win11 ç³»ç»Ÿå®‰è£… Win10 çš„VMwareè™šæ‹Ÿæœºï¼‰ä¼šé€ æˆæ‰“ä¸å¼€çš„æƒ…å†µã€‚æ­¤æ—¶å°±éœ€è¦æ¥å›åˆ‡æ¢ç¯å¢ƒè®¾ç½®ï¼Œä»¥ä¸‹æ˜¯è®¾ç½®çš„å†…å®¹ï¼š</p><h2 id="wsl-åˆ‡æ¢-VMwareè™šæ‹Ÿæœº"><a href="#wsl-åˆ‡æ¢-VMwareè™šæ‹Ÿæœº" class="headerlink" title="wsl åˆ‡æ¢ VMwareè™šæ‹Ÿæœº"></a>wsl åˆ‡æ¢ VMwareè™šæ‹Ÿæœº</h2><ul><li>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦</li><li>æ‰§è¡Œå‘½ä»¤ bcdedit /set hypervisorlaunchtype off</li><li>é‡å¯ï¼Œè¿è¡ŒVMwareè™šæ‹Ÿæœºå³å¯</li></ul><h2 id="VMwareè™šæ‹Ÿæœº-åˆ‡æ¢-wsl"><a href="#VMwareè™šæ‹Ÿæœº-åˆ‡æ¢-wsl" class="headerlink" title="VMwareè™šæ‹Ÿæœº åˆ‡æ¢ wsl"></a>VMwareè™šæ‹Ÿæœº åˆ‡æ¢ wsl</h2><p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">bcdedit /set hypervisorlaunchtype AutoEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -AllEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºè§†è§‰ Harrisè§’ç‚¹æ£€æµ‹</title>
      <link href="/2023/04/29/Computer-vision-1-Harris-detector/"/>
      <url>/2023/04/29/Computer-vision-1-Harris-detector/</url>
      
        <content type="html"><![CDATA[<h1>è®¡ç®—æœºè§†è§‰ Harrisè§’ç‚¹æ£€æµ‹</h1><h2 id="ä¸€ã€å‰è¨€">ä¸€ã€å‰è¨€</h2><p>è§’ç‚¹æ£€æµ‹åœ¨è§†é¢‘åˆ†æã€è®¡ç®—å…‰æµç­‰ç­‰æŠ€æœ¯ä¸Šéƒ½æœ‰å¾ˆå¤§ä½œç”¨ã€‚ Harris æ£€æµ‹å™¨æ˜¯ä¸€ä¸­æ¯”è¾ƒç»å…¸çš„è§’ç‚¹æ£€æµ‹å™¨ã€‚ä»–æ˜¯ä¸€ç§å…·æœ‰æ—‹è½¬ä¸å˜æ€§çš„æ£€æµ‹å™¨ï¼Œä¸€èˆ¬ä½¿ç”¨ç°åº¦å›¾ç‰‡æ¥åˆ†æHarrisè§’ç‚¹ã€‚</p><h2 id="äºŒã€åŸç†">äºŒã€åŸç†</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€å¼ å›¾ä¸­ä¼šæ‹¥æœ‰ä»€ä¹ˆæ ·çš„ä¿¡æ¯ï¼Ÿ</p><p>æ˜¯ä¸æ˜¯åƒç´ çš„<code>x</code>ã€<code>y</code>åæ ‡ï¼Œä»¥åŠå¯¹åº”çš„é¢œè‰²é€šé“ï¼Ÿæ¯”å¦‚RGBâ€¦â€¦</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±ç°åº¦å›¾åƒå±•å¼€è®¨è®ºã€‚å®ƒåº”è¯¥é•¿è¿™æ ·</p><p><img src="https://s2.loli.net/2023/04/28/9TvzWZeq6BJhmuN.png" alt=""></p><p>è¿™é‡Œç¬¬ä¸‰ç»´åº¦çš„ä¿¡æ¯å°±æ˜¯ç°åº¦ä¿¡æ¯ã€‚è¿™é‡Œå°±å¯ä»¥å¾ˆç›´è§‚åœ°è§‚å¯Ÿæ¢¯åº¦ä¿¡æ¯ã€‚</p><hr><p>è§’ç‚¹æ˜¯æŒ‡åœ¨æŸä¸ªå±€éƒ¨åŒºåŸŸä¸­ï¼Œæ‰€æœ‰æ–¹å‘ä¸Šå¼ºåº¦å˜åŒ–å¾ˆå¤§çš„ç‚¹ã€‚èƒ½å¤Ÿä½œä¸ºè®¡ç®—æœºè§†è§‰ä¸­é‡è¦çš„ç‰¹å¾è¿›è¡Œè€ƒé‡ã€‚</p><p><img src="https://s2.loli.net/2023/04/27/uO2TSprRmlzC9Wx.png" alt=""></p><ul><li>å·¦å›¾æ˜¯å¹³å¦åŒºåŸŸï¼Œåœ¨æ‰€æœ‰æ–¹å‘æ²¡æœ‰æ˜æ˜¾æ¢¯åº¦å˜åŒ–</li><li>ä¸­å›¾æ˜¯è¾¹ç¼˜åŒºåŸŸã€‚åœ¨æŸä¸ªæ–¹å‘æœ‰æ˜æ˜¾æ¢¯åº¦å˜åŒ–</li><li>å³å›¾æ˜¯è§’åº¦è¾¹ç¼˜ï¼Œåœ¨å„ä¸ªæ–¹å‘æ¢¯åº¦å€¼æœ‰æ˜æ˜¾å˜åŒ–</li></ul><p><img src="https://s2.loli.net/2023/04/28/aJud8eTlLtxrMfW.png" alt=""></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåªæœ‰è¿™ä¸ªå°å°çš„çª—å£å‡½æ•°åœ¨å°åŒºåŸŸç§»åŠ¨æ—¶ï¼Œx ä¸ y æ–¹å‘éƒ½æœ‰æ˜æ˜¾æ¢¯åº¦å˜åŒ–çš„æ—¶å€™ï¼Œè¿™ä¸ªç‚¹æˆ‘ä»¬å¯ä»¥è§†ä¸ºè§’ç‚¹</p><p>è€ƒè™‘è½´å¯¹é½çš„æƒ…å†µ(æ¢¯åº¦å¯ä»¥æ˜¯æ°´å¹³çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å‚ç›´çš„)</p><blockquote><p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œåªè¦æ˜¯åœ¨å›¾åƒçš„æŸä¸ªå±€éƒ¨åŒºåŸŸå†…ï¼Œxæ–¹å‘ä¸yæ–¹å‘éƒ½æœ‰æ˜æ˜¾çš„æ•°å€¼å˜åŒ–ï¼Œè¿™ä¸ªåœ°æ–¹çš„ç‚¹å°±å¯ä»¥ç®€å•ç†è§£ä¸ºè§’ç‚¹ã€‚</p><p>å¦‚æœæ˜¯åœ¨è¾¹ç¼˜çš„è¯ï¼Œå°±åªä¼šåœ¨xæˆ–yæ–¹å‘ä¸Šï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–¹å‘ä¸Šæœ‰æ˜æ˜¾å˜åŒ–</p></blockquote><hr><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸ªäºŒç»´å›¾åƒ<code>I</code>ã€ä»¥åŠä»¥ä¸€ä¸ªç‚¹åæ ‡$x_0,y_0$ä¸ºä¸­å¿ƒçš„$m\times m$å¤§å°çš„ä¸€ä¸ªçŸ©å½¢çª—å£ï¼Œå°±åƒä¸Šå›¾ä¸­æ©™è‰²å°çª—å£é‚£æ ·ã€‚</p><p>å¦‚æœæˆ‘ä»¬è¦è¯„ä¼°è¿™ä¸ªçª—å£åœ¨å°‘é‡ç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œçª—å£å†…æ‰€å‘ç”Ÿçš„å¼ºåº¦å˜åŒ–ã€‚è¿™ç§å˜åŒ–å¯ä»¥é€šè¿‡è®¡ç®—å¹³æ–¹å·®å’Œ<br>$$<br>E(u,v)=\sum_{(x,y)\in Window}w(x,y)[I(x+u,y+u)-I(x,y)]^2ï¼ˆ1ï¼‰<br>$$<br><img src="https://s2.loli.net/2023/04/27/XwfYLsCtpiRlBko.png" alt=""></p><p>å…¶ä¸­ï¼š</p><ul><li><p>$w(x,y)$æ˜¯çª—å£çš„å‡½æ•°ï¼Œå¯ä»¥æ˜¯çŸ©å½¢å‡½æ•°æˆ–é«˜æ–¯å‡½æ•°ã€‚æœ€ç®€å•æƒ…å½¢å°±æ˜¯çª—å£å†…çš„æ‰€æœ‰åƒç´ æ‰€å¯¹åº”çš„wæƒé‡ç³»æ•°å‡ä¸º1ã€‚ åé¢è®¨è®ºçš„æ—¶å€™æœ‰æ—¶ä¹Ÿä¼šç›´æ¥å–å€¼ä¸º1</p><p>ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå°†w(x,y)å‡½æ•°è®¾å®šä¸ºä»¥çª—å£ä¸­å¿ƒä¸ºåŸç‚¹çš„äºŒå…ƒæ­£æ€åˆ†å¸ƒã€‚å‚è€ƒä¸‹é¢çš„å›¾ï¼š</p><ul><li>å¦‚æœçª—å£ä¸­å¿ƒç‚¹æ˜¯è§’ç‚¹æ—¶ï¼Œç§»åŠ¨å‰ä¸ç§»åŠ¨åï¼Œè¯¥ç‚¹çš„ç°åº¦å˜åŒ–åº”è¯¥æœ€ä¸ºå‰§çƒˆï¼Œæ‰€ä»¥è¯¥ç‚¹æƒé‡ç³»æ•°å¯ä»¥è®¾å®šå¤§äº›ï¼Œè¡¨ç¤ºçª—å£ç§»åŠ¨æ—¶ï¼Œè¯¥ç‚¹åœ¨ç°åº¦å˜åŒ–è´¡çŒ®è¾ƒå¤§</li><li>è€Œç¦»çª—å£ä¸­å¿ƒ(è§’ç‚¹)è¾ƒè¿œçš„ç‚¹ï¼Œè¿™äº›ç‚¹çš„ç°åº¦å˜åŒ–å‡ è¿‘å¹³ç¼“ï¼Œè¿™äº›ç‚¹çš„æƒé‡ç³»æ•°ï¼Œå¯ä»¥è®¾å®šå°ç‚¹ï¼Œä»¥ç¤ºè¯¥ç‚¹å¯¹ç°åº¦å˜åŒ–è´¡çŒ®è¾ƒå°ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶æƒ³åˆ°ä½¿ç”¨äºŒå…ƒé«˜æ–¯å‡½æ•°æ¥è¡¨ç¤ºçª—å£å‡½æ•°</li></ul></li><li><p>$I(x+u,y+u)$æ˜¯åç§»å¼ºåº¦ã€‚ä¹Ÿå°±æ˜¯ç§»åŠ¨å‰å’Œç§»åŠ¨åçš„ç°åº¦å·®ã€‚å¼å­å–å¹³æ–¹æ˜¯ç”±äºå·®å€¼æœ‰æ­£æœ‰è´Ÿã€‚</p></li><li><p>$I(x,y)$æ˜¯åŸç‚¹å¼ºåº¦ã€‚</p></li><li><p>æ•´ä¸ª$E(u,v)$å‡½æ•°æ˜¯æˆ‘ä»¬éœ€è¦æœ€å¤§åŒ–è§’ç‚¹çš„å‡½æ•°ã€‚</p></li></ul><p><img src="https://s2.loli.net/2023/04/27/B7lZtdk4L1v5IzS.png" alt="çª—å£çš„å‡½æ•°ï¼Œå¯ä»¥æ˜¯çŸ©å½¢å‡½æ•°æˆ–é«˜æ–¯å‡½æ•°"></p><p>ä½†å¾ˆå¿«å°±å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬ç›¸åº”é€šè¿‡è§‚å¯Ÿ<code>u</code>å’Œ<code>v</code>æ¥çŸ¥é“è¿™ä¸ªç‚¹æ˜¯ä¸æ˜¯è§’ç‚¹çš„è¯ï¼Œå°±å¾—æŠŠ<code>u</code>å’Œ<code>v</code>ä»£å›å„ä¸ªè¿™ä¸ªå¼å­é‡Œé¢ï¼Œå»å–åƒç´ $I$å‡ºæ¥ï¼Œæ‰èƒ½æ±‚$E(u,v)$ã€‚</p><p><img src="https://s2.loli.net/2023/04/27/XwfYLsCtpiRlBko.png" alt="cv_1_2.png"></p><p>æˆ‘ä»¬åˆéœ€è¦ç›´æ¥çš„èƒ½å¤Ÿè§‚å¯Ÿ<code>u</code>ã€<code>v</code>å’Œ$E(u,v)$ä¹‹é—´çš„å…³ç³»ï¼Œæ¯ä¸ªåƒç´ éƒ½å»ä»£å¼å­æ¥è®¡ç®—æ˜¾å¾—å¾ˆä¸æ–¹ä¾¿ã€‚</p><p>å¦‚ä½•ç›´æ¥å»ºç«‹<code>u</code>ã€<code>v</code>å’Œ$E(u,v)$ä¹‹é—´çš„è”ç³»ï¼Ÿç”¨<strong>æ³°å‹’å±•å¼€å¼</strong>ã€‚</p><p>ç”±äºuå’Œvå¾ˆå°ï¼Œåç§»å¼·åº¦$I(x+u,y+u)$å¯ä»¥é€šè¿‡ä»¥ä¸‹<strong>ä¸€é˜¶æ³°å‹’å±•</strong>å¼€æ¥è¿‘ä¼¼ï¼š</p><p>$$<br>I(x+u,y+v)\approx I(x,y)+uI_x(x,y)+vI_y(x,y)ï¼ˆ2ï¼‰<br>$$</p><p><img src="https://s2.loli.net/2023/04/27/WlmiYAfch19yK2v.png" alt="ä¸€é˜¶æ³°å‹’å±•å¼€"></p><p>å…¶ä¸­$I_x$å’Œ$I_y$åˆ†åˆ«æ˜¯$I$åœ¨<code>x</code>å’Œ<code>y</code>æ–¹å‘ä¸Šçš„åå¯¼æ•°ã€‚æˆ‘ä»¬å¯¹å¼å­$I(x+u,y+u)$å±•å¼€ç ”ç©¶ã€‚å°†ä¸Šè¿°å¼å­ï¼ˆ2ï¼‰ä»£å…¥åˆ°å¼å­ï¼ˆ1ï¼‰ï¼Œå°±å¯ä»¥å¾—åˆ°ï¼š<br>$$<br>E(u,v)=\sum_{(x,y)\in W}w(x,y)[I(x+u,y+u)-I(x,y)]^2\\<br>\approx\sum_{(x,y)\in W}w(x,y)[I(x,y)+I_xu+I_yv-I(x,y)]^2\\<br>=\sum_{(x,y)\in W}w(x,y)[I_xu+I_yv]^2\\<br>=\sum_{(x,y)\in W}w(x,y)[u^2I_x^2+2uvI_xI_y+v^2I_y^2]ï¼ˆ3ï¼‰<br>$$<br>å¼å­ï¼ˆ3ï¼‰å¾€çŸ©é˜µçš„æ–¹å‘è¿›è¡ŒåŒ–ç®€ï¼ˆè¿™é‡ŒæŠŠ$w(x,y)$ç›´æ¥å–å€¼ä¸º1ï¼‰ï¼Œå¯å¾—ï¼š<br>$$<br>E(u,v)=\sum_{(x,y)\in W}u^2{\color{Red} \Sigma_{x,y}}I_x^2+2uv{\color{Red} \Sigma_{x,y}}I_xI_y+v^2{\color{Red} \Sigma_{x,y}}I_y^2\\=<br>\begin{bmatrix}<br>u &amp; v<br>\end{bmatrix}<br>\begin{bmatrix}<br>\sum_{x,y}I_x^2 &amp; \sum_{x,y}I_xI_y \\<br>\sum_{x,y}I_xI_y &amp; \sum_{x,y}I_y^2<br>\end{bmatrix}<br>\begin{bmatrix}<br>u \\ v<br>\end{bmatrix}<br>$$<br>ç„¶åé¡ºç†æˆç« çš„åŒ–ç®€ä¸ºå¦‚ä¸‹çŸ©é˜µå½¢å¼ï¼š<br>$$<br>E(u,v)\approx<br>\begin{bmatrix}<br>u &amp; v<br>\end{bmatrix}<br>{\color {red}M}<br>\begin{bmatrix}<br>u \\ v<br>\end{bmatrix}<br>$$<br>è¿™é‡Œé¢çš„<code>M</code>ç§°ä¸º<strong>ç»“æ„å¼ é‡</strong>ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ª$2\times 2$çš„æ ¹æ®å›¾åƒå¯¼æ•°è®¡ç®—å‡ºæ¥çš„çŸ©é˜µã€‚<code>M</code>é•¿è¿™æ ·ï¼š<br>$$<br>M = \sum_{(x,y)\in W}<br>\begin{bmatrix}<br>I_xI_x &amp; I_xI_y \\<br>I_xI_y &amp; I_yI_y<br>\end{bmatrix}\\<br>=\sum_{(x,y)\in W}<br>\begin{bmatrix}<br>I_x \\ I_y<br>\end{bmatrix}<br>\begin{bmatrix}<br>I_x &amp; I_y<br>\end{bmatrix}\\=<br>\sum\nabla I(\nabla I)^T<br>$$</p><blockquote><p>è¿™é‡Œä¸­é€”è¦æ€å‡ºä¸€ä¸ª æ¤­åœ†å‡½æ•°åœ¨çŸ©é˜µä¸Šçš„è¡¨ç¤ºæ–¹å¼ äº†ã€‚</p><p><img src="https://s2.loli.net/2023/04/28/bEy9sGg2afF1jzq.png" alt="è¿™æ˜¯ä¸€ä¸ªæ¤­åœ†"><br>$$<br>\frac{x^2}{a^2}+\frac{y^2}{b^2}=1<br>$$<br>è¿™ä¸ªå‡½æ•°å¯ä»¥æ”¹å†™æˆï¼š<br>$$<br>\frac{x^2}{(a^{-\frac12})^2}+\frac{y^2}{(b^{-\frac12})^2}=1\\<br>\begin{bmatrix}<br>x &amp; y<br>\end{bmatrix}<br>\begin{bmatrix}<br>\frac{1}{a^2} &amp; 0 \\<br>0 &amp; \frac{1}{b^2}<br>\end{bmatrix}<br>\begin{bmatrix}<br>x \\ y<br>\end{bmatrix}=1<br>$$<br>è€Œè¿™ä¸­é—´çš„è¿™ä¸ªçŸ©é˜µ$\begin{bmatrix}<br>\frac{1}{a^2} &amp; 0 \\<br>0 &amp; \frac{1}{b^2}<br>\end{bmatrix}$ï¼Œå¯ä»¥è·å–å…¶ä¸­çš„ç‰¹å¾å€¼ï¼š<br>$$<br>\left\{<br>\begin{matrix}<br>\lambda_1=\frac{1}{a^2} \\<br>\lambda_2=\frac{1}{b^2}<br>\end{matrix}\right. \\<br>$$<br>$$<br>\left\{<br>\begin{matrix}<br>a=\frac{1}{\sqrt{\lambda_1}} \\<br>b=\frac{1}{\sqrt{\lambda_2}}<br>\end{matrix}\right.<br>$$</p><p>ä»ä¸Šå¼å¯ä»¥çœ‹åˆ°ï¼Œå½“ç‰¹å¾å€¼è¶Šå¤§ï¼Œå…¶å¯¹åº”çš„æ¤­åœ†çš„åŠè½´è¦è¶ŠçŸ­</p></blockquote><p>å…³äºä¸ºä»€ä¹ˆä¸­é€”æ€å‡ºè¿™ä¹ˆä¸ªçŸ¥è¯†ç‚¹ï¼Œæˆ‘åªèƒ½è¯´ï¼š</p><p>æˆ‘ä»¬å‰é¢ç ”ç©¶çš„<code>M</code>çŸ©é˜µæ˜¯ï¼š<br>$$<br>M = \sum_{(x,y)\in W}<br>\begin{bmatrix}<br>I_xI_x &amp; I_xI_y \\<br>I_xI_y &amp; I_yI_y<br>\end{bmatrix}<br>$$<br>è€Œä»–æ˜¯å¯ä»¥è¢«æè¿°ä¸ºä¸€ä¸ªå¸¦æ—‹è½¬å‘é‡<code>R</code>çš„çŸ©é˜µ<code>M</code>ï¼š<br>$$<br>M = \sum_{(x,y)\in W}<br>\begin{bmatrix}<br>I_xI_x &amp; I_xI_y \\<br>I_xI_y &amp; I_yI_y<br>\end{bmatrix}\\=<br>R^{-1}<br>\begin{bmatrix}<br>\lambda_1 &amp; 0\\<br>0 &amp; \lambda_2<br>\end{bmatrix}R<br>$$<br>è¿™ä¸Šé¢ï¼Œè½´é•¿å—åˆ°$\lambda$å½±å“ï¼Œæ–¹å‘å—åˆ°Rçš„å½±å“ã€‚</p><img src="https://s2.loli.net/2023/04/28/3SdQUuqXLKZAVWb.png" style="zoom:67%;"><hr><p>ä¸ºäº†æ›´å¥½åœ°åˆ†æå›¾åƒå¯¼æ•°æ•°æ®çš„<strong>ä¸»è¦æˆåˆ†</strong>ï¼Œè®¾å½“æ¤­åœ†è¡¨è¾¾å¼ä¸å­˜åœ¨$I_xI_y$äº¤å‰é¡¹çš„æ—¶å€™ï¼Œæ­¤æ—¶æ¤­åœ†çš„é•¿çŸ­è½´æ°å¥½åœ¨x,yæ–¹å‘ä¸Š</p><p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‰é¢é‚£ä¸ª<code>M</code>çŸ©é˜µåŒ–æˆï¼š<br>$$<br>M=\begin{bmatrix}<br>\lambda_1 &amp; 0\\<br>0 &amp; \lambda_2<br>\end{bmatrix}<br>$$<br>ç”±æ­¤ï¼Œæˆ‘ä»¬çŸ¥é“äº†æ±‚å¾—çš„$E(u,v)$æ˜¯å¯ä»¥é€šè¿‡æ¤­åœ†çš„å½¢å¼æ¥è¡¨è¾¾çš„ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨ä¸€å¼ å›¾ï¼Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ»¤æ³¢å™¨ï¼ˆæ¯”å¦‚ç´¢è´å°”ç®—å­ï¼‰éå†ä¸€éå±€éƒ¨åŒºåŸŸã€‚</p><p>ç„¶åå°†éå†ç»Ÿè®¡åˆ°çš„æ•°æ®ç”¨æ•£ç‚¹çš„å½¢å¼ç”»ä¸Šå»ã€‚ç„¶åç”¨æ¤­åœ†å½¢å¼è¡¨ç¤ºï¼Œç»˜åˆ¶çš„å›¾åƒå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s2.loli.net/2023/04/28/fNGLRyOCiqmEXAI.png" alt=""></p><p>å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œå¹³å¦åŒºåŸŸçš„æ¢¯åº¦åŸºæœ¬æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œè¾¹ç¼˜åŒºåŸŸåªæœ‰ä¸€ä¸ªæ–¹å‘å‘ç”Ÿäº†å˜åŒ–ï¼Œè§’ç‚¹åŒºåŸŸåˆ™æ˜¯ä¸¤ä¸ªæ–¹å‘ã€‚å½“ç„¶ä¸¤ä¸ªæ–¹å‘ä¸Šæœ‰å˜åŒ–çš„ä¹Ÿå¯èƒ½æ˜¯æ–œè¾¹ç¼˜åŒºåŸŸï¼Œè¿™ä¸ªæ ¹æ®æ•£ç‚¹åˆ†å¸ƒå†³å®š</p><img src="https://s2.loli.net/2023/04/28/J9AzKn8yEtwV6Yf.png" alt="å¦‚æœÎ»1å’ŒÎ»2éƒ½å¾ˆå°ï¼Œå›¾åƒçª—å£åœ¨æ‰€æœ‰æ–¹å‘ä¸Šç§»åŠ¨éƒ½æ— æ˜æ˜¾ç°åº¦å˜åŒ–" style="zoom:67%;"><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥<strong>ä»…é€šè¿‡çŸ©é˜µMçš„ç‰¹å¾å€¼ï¼Œæ¥è¯„ä¼°å›¾åƒæ˜¯å¦å­˜åœ¨è§’ç‚¹</strong></p><p>ä½†Harrisè§’ç‚¹çš„è®¡ç®—æ–¹æ³•ç”šè‡³ä¸éœ€è¦ç”¨åˆ°ç‰¹å¾å€¼ï¼Œåªéœ€è¦è®¡ç®—ä¸€ä¸ª<strong>Harriså“åº”å€¼R</strong>è¿›è¡Œè¯„åˆ†<br>$$<br>R = \det M-k(\mathbb{trace} M)^2<br>$$<br>Î»1 å’Œ Î»2 æ˜¯çŸ©é˜µMçš„ç‰¹å¾å€¼ï¼Œkæ˜¯ä¸€ä¸ªç»éªŒå¸¸æ•°ï¼Œåœ¨èŒƒå›´ (0.04, 0.06) ä¹‹é—´ã€‚</p><p>è¿™é‡Œé¢è®¡ç®—çŸ©é˜µ<code>M</code>çš„è¡Œåˆ—å¼å’Œè¿¹ï¼Œä»£å…¥å…¬å¼å³å¯ã€‚å…¶ä¸­ï¼š<br>$$<br>\det M =\lambda_1\lambda_2\\<br>\mathbb{trace}=\lambda_1+\lambda_2<br>$$<br>æœ‰äº†è¿™ä¸ª<code>R</code>è¯„ä»·æŒ‡æ ‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è¿™ä¸ªçª—å£æ‰€åœ¨çš„åŒºåŸŸåˆ’åˆ†ä¸ºå¹³é¢ã€è¾¹ç¼˜æˆ–è§’ç‚¹ã€‚<br>$$<br>R = \det M-k(\mathbb{trace} M)^2\\<br>\left\{\begin{matrix}<br>è¾¹ç¼˜ç‚¹ &amp; R&lt;0 \\<br>å¹³å¦ç‚¹ &amp; |R|\approx 0\\<br>è§’ç‚¹ &amp; R&gt;0<br>\end{matrix}\right.\\<br>$$<br>ä¸ºäº†å¾—åˆ°æœ€ä¼˜çš„è§’ç‚¹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<u>éæå¤§å€¼æŠ‘åˆ¶</u>ã€‚</p><p>ä»Šå¤©è¿™ç¯‡ä¸æ‰“ç®—è¯¦ç»†ä»‹ç»éæå¤§æŠ‘åˆ¶ã€‚å…¶æ ¸å¿ƒæ€æƒ³å¤§è‡´ä¸ºï¼š æŠ‘åˆ¶éæå¤§å€¼çš„ç›®æ ‡ï¼ˆå»å†—ä½™ï¼‰ï¼Œä»è€Œæœç´¢å‡ºå±€éƒ¨æå¤§å€¼çš„ç›®æ ‡ï¼ˆæ‰¾æœ€ä¼˜ï¼‰ã€‚</p><h2 id="ä¸‰ã€æ€»ç»“">ä¸‰ã€æ€»ç»“</h2><p>å“ˆé‡Œæ–¯è§’ç‚¹æ£€æµ‹ä¸€èˆ¬æµç¨‹</p><p>1ã€å½©è‰²å›¾åƒè½¬åŒ–ä¸ºç°é˜¶å›¾åƒ<br>2ã€è®¡ç®—ç©ºé—´å¾®åˆ†ï¼ˆæ³°å‹’å±•å¼€ï¼‰<br>3ã€å»ºæ„ç»“æ„å¼ é‡ï¼ˆSobelç®—å­ï¼‰<br>4ã€è®¡ç®—å“ˆé‡Œæ–¯å“åº”ï¼ˆè§’ç‚¹å“åº”ï¼‰<br>5ã€éæå¤§å€¼æŠ‘åˆ¶ï¼ˆç­›é€‰ç‚¹ï¼‰</p><h2 id="å››ã€ä»£ç å®ç°">å››ã€ä»£ç å®ç°</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> cv2<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token triple-quoted-string string">'''    image: æºå›¾ç‰‡ï¼›    blocksizeï¼šçª—å£å¤§å°ï¼›    ksizeï¼šç´¢è´å°”æ¢¯åº¦è®¡ç®—çš„Kernelå¤§å°ï¼›    kï¼šè§’ç‚¹å“åº”Rçš„ç»éªŒå€¼ç³»æ•°ã€‚'''</span><span class="token keyword">def</span> <span class="token function">Harris</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> blocksize<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> ksize<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> k<span class="token operator">=</span><span class="token number">0.04</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">_Harris</span><span class="token punctuation">(</span>cov<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span>cov<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cov<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>float32<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>cov<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>cov<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                a <span class="token operator">=</span> cov<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>                b <span class="token operator">=</span> cov<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>                c <span class="token operator">=</span> cov<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>                result<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> a <span class="token operator">*</span> c <span class="token operator">-</span> b <span class="token operator">*</span> b <span class="token operator">-</span> k <span class="token operator">*</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> c<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> c<span class="token punctuation">)</span>        <span class="token keyword">return</span> result    <span class="token comment"># Sobel</span>    sobel_x <span class="token operator">=</span> cv2<span class="token punctuation">.</span>Sobel<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>CV_32F<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ksize<span class="token operator">=</span>ksize<span class="token punctuation">)</span>    sobel_y <span class="token operator">=</span> cv2<span class="token punctuation">.</span>Sobel<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>CV_32F<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> ksize<span class="token operator">=</span>ksize<span class="token punctuation">)</span>    <span class="token comment"># å­˜å‚¨Rå€¼çŸ©é˜µ</span>    cov <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>float32<span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—Ix^2,Iy^2ä¸Ix*Iy</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            cov<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> sobel_x<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> sobel_x<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span>            cov<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> sobel_x<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> sobel_y<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span>            cov<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> sobel_y<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> sobel_y<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span>    <span class="token comment"># è®¡ç®—æ¢¯åº¦å’Œ</span>    cov <span class="token operator">=</span> cv2<span class="token punctuation">.</span>boxFilter<span class="token punctuation">(</span>cov<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>blocksize<span class="token punctuation">,</span> blocksize<span class="token punctuation">)</span><span class="token punctuation">,</span> normalize<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> _Harris<span class="token punctuation">(</span>cov<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    imgc <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">r"D:\code\opencv_ws\python\mouse.jpg"</span><span class="token punctuation">)</span>    <span class="token comment"># å°†å›¾ç‰‡è½¬åŒ–ä¸ºç°åº¦å›¾</span>    img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>imgc<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">320</span><span class="token punctuation">,</span><span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    gray_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>    <span class="token comment"># Harrisè§’ç‚¹æ£€æµ‹</span>    result <span class="token operator">=</span> Harris<span class="token punctuation">(</span>gray_img<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">)</span>    <span class="token comment"># ç­›é€‰</span>    pos <span class="token operator">=</span> cv2<span class="token punctuation">.</span>goodFeaturesToTrack<span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        cv2<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>pos<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>pos<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span> thickness<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'harris detector'</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>    cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLAM 4ï¼šç›¸æœºä¸å›¾åƒ</title>
      <link href="/2023/03/03/slam-4-camera-image/"/>
      <url>/2023/03/03/slam-4-camera-image/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>SLAM 4ã€ç›¸æœºä¸å›¾åƒ</h1><h2 id="ä¸€ã€ç›¸æœºæ¨¡å‹">ä¸€ã€ç›¸æœºæ¨¡å‹</h2><h3 id="1ã€é’ˆå­”ç›¸æœºæ¨¡å‹">1ã€é’ˆå­”ç›¸æœºæ¨¡å‹</h3><p>å¯¹äºæˆåƒæ¨¡å‹æ¥è¯´ï¼Œå¤§å®¶æ˜¯å¦ç¬¬ä¸€ååº”æ˜¯é’ˆå­”æ¨¡å‹ï¼Ÿ</p><p>åœ¨ä¸€ä¸ªæš—ç®±çš„å‰æ–¹æ”¾ç€ä¸€æ”¯ç‚¹ç‡ƒçš„èœ¡çƒ›ï¼Œçƒ›å…‰é€è¿‡æš—ç®±ä¸Šçš„ä¸€ä¸ªå°å­”æŠ•å½±åœ¨æš—ç®±çš„åæ–¹å¹³é¢ä¸Šï¼Œå¹¶åœ¨è¿™ä¸ªå¹³é¢ä¸Šå½¢æˆäº†ä¸€ä¸ªå€’ç«‹çš„èœ¡çƒ›å›¾åƒã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå°å­”æ¨¡å‹èƒ½å¤ŸæŠŠä¸‰ç»´ä¸–ç•Œä¸­çš„èœ¡çƒ›æŠ•å½±åˆ°ä¸€ä¸ªäºŒç»´æˆåƒå¹³é¢ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ¨¡å‹æ¥ç®€å•ç†è§£ä¸€ä¸‹ç›¸æœºçš„æˆåƒè¿‡ç¨‹ã€‚</p><p><img src="https://s2.loli.net/2023/02/20/vDtcI14eGz8ixg3.png" alt=""></p><p>å¯¹è¿™ä¸ªç®€å•çš„é’ˆå­”æ¨¡å‹è¿›è¡Œå‡ ä½•å»ºæ¨¡å¯å¾—ï¼šè®¾ <code>Oâˆ’xâˆ’yâˆ’z</code>ä¸ºç›¸æœºåæ ‡ç³»ï¼Œæˆ‘ä»¬è®©zè½´æŒ‡å‘ç›¸æœºå‰æ–¹ï¼Œxå‘å³ï¼Œyå‘ä¸‹ã€‚<code>O</code>ä¸ºæ‘„åƒæœºçš„å…‰å¿ƒï¼Œä¹Ÿæ˜¯é’ˆå­”æ¨¡å‹ä¸­çš„é’ˆå­”ã€‚</p><p>ç°å®ä¸–ç•Œçš„ç©ºé—´ç‚¹<code>P</code>ï¼Œç»è¿‡å°å­”<code>O</code>æŠ•å½±ä¹‹åï¼Œè½åœ¨ç‰©ç†æˆåƒå¹³é¢ <code>Oâ€²âˆ’xâ€²âˆ’yâ€²</code> ä¸Šï¼Œæˆåƒç‚¹ä¸º<code>Pâ€²</code>ã€‚è®¾<code>P</code>çš„åæ ‡ä¸º $[X,Y,Z]^T$ï¼Œ<code>Pâ€²</code> ä¸º $[Xâ€²,Yâ€²,Zâ€²]^T$ï¼Œå¹¶ä¸”è®¾ç‰©ç†æˆåƒå¹³é¢åˆ°å°å­”çš„è·ç¦»ä¸º<code>f</code>(ç„¦è·)ã€‚æ ¹æ®ä¸‰è§’å½¢ç›¸ä¼¼å…³ç³»ï¼Œæœ‰ï¼š<br>$$<br>\frac Zf=-\frac{X}{X^{â€˜}}=-\frac{Y}{Y^{â€™}}<br>$$<br>å…¶ä¸­è´Ÿå·è¡¨ç¤ºæˆçš„åƒæ˜¯å€’ç«‹çš„ã€‚<strong>ä¸ºäº†ç®€åŒ–æ¨¡å‹</strong>ï¼Œæˆ‘ä»¬æŠŠæˆåƒå¹³é¢å¯¹ç§°åˆ°ç›¸æœºå‰æ–¹ï¼Œå’Œä¸‰ç»´ç©ºé—´ç‚¹ä¸€èµ·æ”¾åœ¨æ‘„åƒæœºåæ ‡ç³»çš„åŒä¸€ä¾§ï¼Œå¦‚ä¸‹å›¾ä¸­é—´çš„æ ·å­æ‰€ç¤ºã€‚</p><p><img src="https://s2.loli.net/2023/02/20/KbUESGcV9jB8FJT.png" alt="çœŸå®æˆåƒå¹³é¢ï¼Œå¯¹ç§°æˆåƒå¹³é¢ï¼Œå½’ä¸€åŒ–æˆåƒå¹³é¢å›¾ç¤º"></p><p>è¿™æ ·åšå¯ä»¥æŠŠå…¬å¼ä¸­çš„è´Ÿå·å»æ‰ï¼Œä½¿å¼å­æ›´ç®€æ´ï¼š<br>$$<br>\frac Zf=\frac{X}{X^{â€˜}}=\frac{Y}{Y^{â€™}}<br>$$<br>æ•´ç†å¾—ï¼š<br>$$<br>Xâ€™=f\frac XZ\\<br>Yâ€™=f\frac YZ<br>$$<br>å°½ç®¡ä»ç‰©ç†åŸç†æ¥è¯´ï¼Œå°å­”æˆåƒåº”è¯¥æ˜¯å€’åƒï¼Œä½†æˆ‘ä»¬å¯¹å›¾åƒä½œäº†é¢„å¤„ç†ï¼Œæ‰€ä»¥ç†è§£æˆåœ¨å¯¹ç§°å¹³é¢ä¸Šçš„åƒå¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ä¸å¼•èµ·æ­§ä¹‰çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±ä¸åŠ é™åˆ¶åœ°ç§°åä¸€ç§æƒ…å†µä¸ºé’ˆå­”æ¨¡å‹ã€‚</p><p>ä¸Šå¼æè¿°äº†ç‚¹<code>P</code>ä¸å®ƒçš„åƒä¹‹é—´çš„è”ç³»ã€‚ä¸è¿‡ï¼Œç›¸æœºæœ€ç»ˆæ˜¯è·å¾—äº†ä¸€ä¸ªä¸ªåƒç´ ï¼Œè¿™éœ€è¦å¯¹æˆåƒå¹³é¢ä¸Šè¿›è¡Œ<strong>é‡‡æ ·å’Œé‡åŒ–</strong>ã€‚æè¿°è¿™ä¸ªåƒç´ å¹³é¢<code>o-u-v</code>ï¼Œåœ¨åƒç´ å¹³é¢å³å¯å¾—åˆ°<code>P'</code>çš„åƒç´ åæ ‡$[u,v]^T$ã€‚</p><p>åƒç´ åæ ‡ç³»ï¼ˆå›¾åƒåæ ‡ç³»ï¼‰é€šå¸¸å®šä¹‰çš„æ–¹å¼ä¸ºï¼šåŸç‚¹<code>o'</code>ä½äºå›¾åƒçš„å·¦ä¸Šè§’ï¼Œuè½´å¾€å³ä¸xè½´å¹³è¡Œï¼Œvè½´å‘ä¸‹ä¸yè½´å¹³è¡Œã€‚åƒç´ åæ ‡ç³»ä¸æˆåƒå¹³é¢ä¹‹é—´ï¼Œç›¸å·®äº†<u>ä¸€ä¸ªç¼©æ”¾å’Œä¸€ä¸ªåŸç‚¹çš„å¹³ç§»</u>ã€‚</p><p>è®¾åƒç´ åæ ‡åœ¨uè½´ä¸Šç¼©æ”¾äº†$\alpha$å€ï¼Œåœ¨vè½´ä¸Šç¼©æ”¾äº†$\beta$å€ã€‚åŒæ—¶åŸç‚¹è¿˜å¹³ç§»äº†$[c_x,c_y]^T$ã€‚é‚£<code>P'</code>çš„åæ ‡ä¸åƒç´ åæ ‡$[u,v]^T$çš„å…³ç³»æ˜¯ï¼š<br>$$<br>\left\{\begin{matrix}<br>u=\alpha Xâ€™+c_x \\<br>v=\beta Yâ€™+c_y<br>\end{matrix}\right.<br>$$<br>ä»£å…¥è¿™ä¸ªå¼å­ï¼š<br>$$<br>Xâ€™=f\frac XZ\\<br>Yâ€™=f\frac YZ<br>$$<br>å¹¶æŠŠ$\alpha f$åˆå¹¶æˆ$f_x$,æŠŠ$\beta f$åˆå¹¶æˆ$f_y$ï¼Œå¯å¾—ï¼š<br>$$<br>\left\{\begin{matrix}<br>u=f\frac XZ+c_x \\<br>v=f\frac YZ+c_y<br>\end{matrix}\right.<br>$$<br>ä¸Šå¼ä¸­ï¼Œ<code>f</code>çš„å•ä½ä¸ºç±³ï¼Œ$\alpha,\beta$çš„å•ä½ä¸ºåƒç´ æ¯ç±³ï¼Œæ‰€ä»¥$f_x,f_y$å•ä½ä¸ºåƒç´ ã€‚è€Œä½¿ç”¨<strong>é½æ¬¡åæ ‡</strong>ï¼Œå†™æˆçŸ©é˜µçš„å½¢å¼ä¼šæ›´åŠ ç›´è§‚ç®€æ´ã€‚<br>$$<br>\begin{bmatrix}<br>u\\<br>v\\<br>1<br>\end{bmatrix}=<br>\frac{1}{Z}<br>\begin{bmatrix}<br>f_x &amp; 0 &amp; c_x\\<br>0 &amp; f_y &amp; c_y\\<br>0 &amp; 0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>X\\<br>Y\\<br>Z<br>\end{bmatrix}\triangleq<br>\frac{1}{Z}KP<br>$$<br>æŠŠ<code>Z</code>æŒªåˆ°å·¦è¾¹å¯å¾—ï¼š<br>$$<br>Z<br>\begin{bmatrix}<br>u\\<br>v\\<br>1<br>\end{bmatrix}=<br>\begin{bmatrix}<br>f_x &amp; 0 &amp; c_x\\<br>0 &amp; f_y &amp; c_y\\<br>0 &amp; 0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>X\\<br>Y\\<br>Z<br>\end{bmatrix}\triangleq<br>KP<br>$$<br>ä¸­é—´çš„$\begin{bmatrix}f_x &amp; 0 &amp; c_x\\0 &amp; f_y &amp; c_y\\0 &amp; 0 &amp; 1\end{bmatrix}$çŸ©é˜µç§°ä¸ºç›¸æœºçš„<strong>å†…å‚æ•°çŸ©é˜µ</strong>ï¼ˆCamera Intrinsicsï¼‰<code>K</code>ï¼Œç®€ç§°<strong>å†…å‚</strong>ã€‚ç¡®å®šè‡ªå·±ç›¸æœºå†…å‚çš„è¿‡ç¨‹å«åš<strong>æ ‡å®š</strong>ã€‚ ç°åœ¨è¿™ä¸ªæ ‡å®šä¹Ÿå¾ˆæˆç†Ÿï¼Œå¦‚<strong>å¼ æ­£å‹æ ‡å®šæ³•</strong>ã€‚</p><p>ä¸å†…å‚å¯¹åº”çš„æ˜¯<strong>å¤–å‚</strong>ï¼šå°±æ˜¯ç›¸æœºçš„ä½å§¿ã€‚ç›¸æ¯”ä¸å˜çš„å†…å‚ï¼Œå¤–å‚ä¼šéšç€ç›¸æœºè¿åŠ¨è€Œæ”¹å˜ï¼Œä¹Ÿæ˜¯SLAMä¸­å¾…ä¼°è®¡çš„ç›®æ ‡ï¼Œä»–ä»£è¡¨ç€æœºå™¨äººçš„è½¨è¿¹ã€‚</p><p>ç›¸æœºçš„ä½å§¿ç”±æ—‹è½¬çŸ©é˜µå’Œå¹³ç§»å‘é‡æ¥æè¿°ï¼Œæœ‰ï¼š<br>$$<br>ZP_{uv}=Z<br>\begin{bmatrix}<br>u\\<br>v\\<br>1<br>\end{bmatrix}=<br>K(RP_w+t)=KTP_w<br>$$</p><p>å®ƒæè¿°äº†Pçš„ä¸–ç•Œåæ ‡åˆ°åƒç´ åæ ‡çš„æ˜ å°„å…³ç³»ã€‚è¿™é‡Œç›¸æœºçš„ä½å§¿<code>R</code>ï¼Œ<code>t</code>å°±æ˜¯ç›¸æœºçš„å¤–å‚ã€‚</p><blockquote><p>*è¡¥å……ï¼šè¿™ä¸ªå¼å­<u>éšå«äº†ä¸€æ¬¡é½æ¬¡åæ ‡åˆ°éé½æ¬¡åæ ‡çš„å˜æ¢</u>ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå³ä¾§çš„$TP_w$è¡¨ç¤ºæŠŠä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ä¸‹çš„é½æ¬¡åæ ‡ï¼Œå˜æ¢åˆ°ç›¸æœºåæ ‡ç³»ä¸‹ã€‚ä¸ºäº†ä½¿å®ƒä¸<code>K</code>ç›¸ä¹˜ï¼Œéœ€è¦å–å®ƒçš„å‰ä¸‰ç»´ç»„æˆå‘é‡ï¼ˆå› ä¸º$TP_w$æœ€åä¸€ç»´ä¸º1ï¼‰ã€‚æ­¤æ—¶ï¼Œå¯¹äºè¿™ä¸ªä¸‰ç»´å‘é‡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŒ‰ç…§é½æ¬¡åæ ‡çš„æ–¹å¼ï¼ŒæŠŠæœ€åä¸€ç»´è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå¾—åˆ°äº†<code>P</code>åœ¨ç›¸æœºå½’ä¸€åŒ–å¹³é¢ä¸Šçš„æŠ•å½±ï¼š<br>$$<br>\overset{\sim}{P_c}=<br>\begin{bmatrix}<br>X\\<br>Y\\<br>Z<br>\end{bmatrix}=<br>(TP_w)_{(1:3)}\\<br>P_c=<br>\begin{bmatrix}<br>X/Z\\<br>Y/Z\\<br>1<br>\end{bmatrix}<br>$$</p><p>è¿™æ—¶$P_c$å¯ä»¥çœ‹æˆä¸€ä¸ªäºŒç»´çš„é½æ¬¡åæ ‡ï¼Œç§°ä¸º<strong>å½’ä¸€åŒ–åæ ‡</strong>ã€‚å®ƒä½äºç›¸æœºå‰æ–¹$z=1$å¤„çš„å¹³é¢ä¸Šã€‚è¯¥å¹³é¢ç§°ä¸ºå½’ä¸€åŒ–å¹³é¢ã€‚ç”±äº$P_c$ç»è¿‡å†…å‚ä¹‹åå°±å¾—åˆ°äº†åƒç´ åæ ‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠåƒç´ åæ ‡$[u,v]^T$ï¼Œçœ‹æˆå¯¹å½’ä¸€åŒ–å¹³é¢ä¸Šçš„ç‚¹è¿›è¡Œé‡åŒ–æµ‹é‡çš„ç»“æœã€‚</p></blockquote><h3 id="2ã€ç•¸å˜">2ã€ç•¸å˜</h3><p>å®é™…ä¸Šï¼Œç›¸æœºçš„å‰æ–¹æ˜¯æœ‰è£…é€é•œçš„</p><p>é€é•œå¯¹æˆåƒè¿‡ç¨‹ä¸­å…‰çº¿çš„ä¼ æ’­ä¼šäº§ç”Ÿä¸€äº›æ–°çš„å½±å“:</p><ul><li>é€é•œè‡ªèº«çš„å½¢çŠ¶å¯¹å…‰çº¿ä¼ æ’­çš„å½±å“</li><li>åœ¨æœºæ¢°ç»„è£…è¿‡ç¨‹ä¸­ï¼Œé€é•œå’Œæˆåƒå¹³é¢ä¸å¯èƒ½å®Œå…¨å¹³è¡Œï¼Œè¿™ä¹Ÿä¼šå½±å“å…‰çº¿æˆåƒæ—¶çš„ä½ç½®</li></ul><p>ç”±é€é•œå½¢çŠ¶å¼•èµ·çš„ç•¸å˜ç§°ä¹‹ä¸º<strong>å¾„å‘ç•¸å˜</strong>ã€‚</p><p>æˆ‘ä»¬å›é¡¾ä¸€ä¸‹é’ˆå­”æ¨¡å‹ä¸­ï¼Œä¸€æ¡ç›´çº¿æŠ•å½±åˆ°åƒç´ å¹³é¢ä¸Šè¿˜æ˜¯ä¸€æ¡ç›´çº¿ã€‚</p><p>å¯æ˜¯ï¼Œåœ¨å®é™…æ‹æ‘„çš„ç…§ç‰‡ä¸­ï¼Œç›¸æœºæ˜¯æœ‰é€é•œçš„ã€‚é€é•œå¾€å¾€ä½¿å¾—çœŸå®ç¯å¢ƒä¸­çš„æŸä¸€æ¡ç›´çº¿ï¼Œåœ¨å›¾ç‰‡ä¸­å˜æˆäº†æ›²çº¿ã€‚è¶Šé è¿‘å›¾åƒçš„è¾¹ç¼˜ï¼Œè¿™ç§ç°è±¡è¶Šæ˜æ˜¾ã€‚è¿™æ˜¯ç”±äºå®é™…çš„é€é•œå¾€å¾€æ˜¯ä¸­å¿ƒå¯¹ç§°çš„ï¼Œè¿™ä½¿å¾—ä¸è§„åˆ™çš„ç•¸å˜é€šå¸¸å¾„å‘å¯¹ç§°ã€‚</p><p><strong>å¾„å‘ç•¸å˜</strong>ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ¡¶å½¢ç•¸å˜å’Œæ•å½¢ç•¸å˜</p><p><img src="https://s2.loli.net/2023/02/24/tIEyD6ciplU12Ls.png" alt="å¾„å‘ç•¸å˜çš„ä¸¤ç§ç±»å‹"></p><p>æ¡¶å½¢ç•¸å˜æ˜¯ç”±äºå›¾åƒæ”¾å¤§ç‡éšç€ç¦»å…‰è½´çš„è·ç¦»å¢åŠ è€Œå‡å°ï¼Œæ•å½¢ç•¸å˜ç›¸åã€‚è¿™ä¸¤ç§ç•¸å˜ä¸­ï¼Œç©¿è¿‡å›¾åƒä¸­å¿ƒå’Œå…‰è½´æœ‰äº¤ç‚¹çš„ç›´çº¿è¿˜èƒ½ä¿æŒå½¢çŠ¶ä¸å˜ã€‚</p><hr><p>é™¤äº†é€é•œçš„å½¢çŠ¶å¯¼è‡´çš„å¾„å‘ç•¸å˜ã€‚åœ¨ç›¸æœºçš„ç»„è£…è¿‡ç¨‹ä¸­ï¼Œç”±äºä¸èƒ½ä½¿å¾—é€é•œå’Œæˆåƒé¢ä¸¥æ ¼å¹³è¡Œï¼Œä¹Ÿå®¹æ˜“å¯¼è‡´<strong>åˆ‡å‘ç•¸å˜</strong>ï¼š</p><p><img src="https://s2.loli.net/2023/02/24/Zwd9k7Biqzr8hE3.png" alt="åˆ‡å‘ç•¸å˜æ¥æºç¤ºæ„"></p><hr><p>æˆ‘ä»¬ç”¨æ›´ä¸¥æ ¼çš„æ•°å­¦å½¢å¼å¯¹ä¸¤ç§ç•¸å˜è¿›è¡Œæè¿°ï¼š</p><p>çŸ¥é“å¹³é¢ä¸Šçš„ä»»æ„ä¸€ç‚¹<code>p</code>ç¬›å¡å°”åæ ‡è¡¨ç¤ºä¸º$[x,y]^T$ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒå†™æˆæåæ ‡çš„å½¢å¼$[r,\theta]^T$</p><p>å…¶ä¸­<code>r</code>è¡¨ç¤ºç‚¹<code>p</code>ç¦»åæ ‡ç³»åŸç‚¹çš„è·ç¦»ï¼Œ<code>Î¸</code>è¡¨ç¤ºå’Œæ°´å¹³è½´çš„å¤¹è§’ã€‚</p><ul><li><p>å¾„å‘ç•¸å˜ï¼šå¯çœ‹æˆåæ ‡ç‚¹æ²¿ç€é•¿åº¦æ–¹å‘å‘ç”Ÿäº†å˜åŒ–â€”â€”å…¶è·ç¦»åŸç‚¹çš„é•¿åº¦å‘ç”Ÿäº†å˜åŒ– <code>Î´r</code> ã€‚</p></li><li><p>åˆ‡å‘ç•¸å˜ï¼šå¯çœ‹æˆåæ ‡ç‚¹æ²¿ç€åˆ‡çº¿æ–¹å‘å‘ç”Ÿäº†å˜åŒ–â€”â€”å…¶æ°´å¹³å¤¹è§’å‘ç”Ÿäº†å˜åŒ–<code>Î´Î¸</code>ã€‚</p></li></ul><h4 id="1ï¼‰ã€å¾„å‘ç•¸å˜">1ï¼‰ã€å¾„å‘ç•¸å˜</h4><p>å¯¹å¾„å‘ç•¸å˜æ¥è¯´ï¼Œæ— è®ºæ˜¯æ¡¶å½¢ç•¸å˜è¿˜æ˜¯æ•å½¢ç•¸å˜ï¼Œå®ƒä»¬éƒ½æ˜¯éšç€ç¦»ä¸­å¿ƒçš„è·ç¦»å¢åŠ è€Œå¢åŠ ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå¤šé¡¹å¼å‡½æ•°æ¥æè¿°ç•¸å˜å‰åçš„åæ ‡å˜åŒ–ã€‚è¿™ç±»ç•¸å˜å¯ä»¥ç”¨ <u>å’Œè·ä¸­å¿ƒè·ç¦»æœ‰å…³çš„äºŒæ¬¡åŠé«˜æ¬¡å¤šé¡¹å¼å‡½æ•°</u> è¿›è¡Œçº æ­£ï¼š<br>$$<br>x_{corrected}=x(1+k_1r^2+k_2r^4+k_3r^6)\\<br>y_{corrected}=y(1+k_1r^2+k_2r^4+k_3r^6)<br>$$<br>å…¶ä¸­ã€$[x,y]^T$æ˜¯è¿˜æ²¡çº æ­£çš„ç‚¹ çš„åæ ‡ ã€‚$[x_{corrected},y_{corrected}]^T$æ˜¯çº æ­£å¥½çš„åæ ‡ã€‚</p><blockquote><p>ä»–ä»¬éƒ½æ˜¯å½’ä¸€åŒ–å¹³é¢ä¸Šçš„ç‚¹ï¼Œè€Œä¸æ˜¯åƒç´ å¹³é¢çš„ç‚¹ã€‚</p></blockquote><p>ä¸Šé¢å¼å­ä¸­ï¼Œç•¸å˜çº æ­£çš„å‚æ•°è´Ÿè´£çš„åŒºåŸŸä¸åŒï¼š</p><ul><li>k1ï¼šçº æ­£å¯¹äºç•¸å˜è¾ƒå°çš„å›¾åƒä¸­å¿ƒåŒºåŸŸ</li><li>k2ï¼šçº æ­£å¯¹äºç•¸å˜è¾ƒå¤§çš„è¾¹ç¼˜åŒºåŸŸ</li><li>k3ï¼šçº æ­£ç•¸å˜è¶…å¤§çš„æ‘„åƒå¤´â€”â€”å¦‚é±¼çœ¼æ‘„åƒå¤´</li></ul><h4 id="2ï¼‰ã€åˆ‡å‘ç•¸å˜">2ï¼‰ã€åˆ‡å‘ç•¸å˜</h4><p>å¯¹äºåˆ‡å‘ç•¸å˜ï¼Œä½¿ç”¨å¦å¤–çš„ä¸¤ä¸ªå‚æ•°p1ã€p2æ¥è¿›è¡Œçº æ­£:<br>$$<br>x_{corrected}=x+2p_1xy+p_2(r^2+2x^2)\\<br>y_{corrected}=y+p_1(r^2+2y^2)+2p_2xy<br>$$<br>ä½¿ç”¨ä¸Šè¿°è¿™ä¸¤å¥—å¼å­ï¼Œä½¿ç”¨äº”ä¸ªå‚æ•°å°±å¯ä»¥å®ŒæˆçŸ«æ­£äº†ã€‚æ€»ç»“ä¸€ä¸‹æµç¨‹ï¼š</p><ol><li><p>å°†ä¸‰ç»´ç©ºé—´ç‚¹æŠ•å½±åˆ°å½’ä¸€åŒ–å›¾åƒå¹³é¢ã€‚è®¾å®ƒçš„å½’ä¸€åŒ–åæ ‡ä¸º$[x,y]^T$ã€‚</p></li><li><p>å¯¹å½’ä¸€åŒ–å¹³é¢ä¸Šçš„ç‚¹è¿›è¡Œå¾„å‘ç•¸å˜å’Œåˆ‡å‘ç•¸å˜çº æ­£<br>$$<br>x_{corrected}=x(1+k_1r^2+k_2r^4+k_3r^6)\\<br>+x+2p_1xy+p_2(r^2+2x^2)\\<br>y_{corrected}=y(1+k_1r^2+k_2r^4+k_3r^6)\\<br>+y+p_1(r^2+2y^2)+2p_2xy\\<br>$$</p></li><li><p>çº æ­£åçš„äº”ä¸ªç‚¹é€šè¿‡å†…å‚æ•°çŸ©é˜µæŠ•å½±åˆ°åƒç´ å¹³é¢ï¼Œå¾—åˆ°è¯¥ç‚¹åœ¨å›¾åƒä¸Šæ­£ç¡®çš„ä½ç½®<br>$$<br>u=f_xx_{corrected}+c_x\\<br>v=f_yy_{corrected}+c_y<br>$$</p></li></ol><p>å¯¹äºæ™®é€šç›¸æœºæ¥è¯´ï¼Œè¿™æ ·çŸ«æ­£å°±å¤Ÿäº†ã€‚æœ‰æ—¶ç”šè‡³åªéœ€è¦k1ã€p1ã€p2å°±å¤Ÿäº†</p><h4 id="3ï¼‰ã€å°ç»“">3ï¼‰ã€å°ç»“</h4><hr><p>æˆ‘ä»¬å°ç»“ä¸€ä¸‹å•ç›®ç›¸æœºçš„æˆåƒè¿‡ç¨‹ï¼š</p><ol><li><p>é¦–å…ˆï¼Œä¸–ç•Œåæ ‡ç³»ä¸‹æœ‰ä¸€ä¸ªå›ºå®šçš„ç‚¹ <em>P</em>ï¼Œä¸–ç•Œåæ ‡ä¸º$P_w$ï¼›</p></li><li><p>ç”±äºç›¸æœºåœ¨è¿åŠ¨ï¼Œå®ƒçš„è¿åŠ¨ç”±<code>R</code>,<code>t</code>æˆ–å˜æ¢çŸ©é˜µ $T\in SE(3)$æè¿°ã€‚Pçš„ç›¸æœºåæ ‡ä¸ºï¼š$\overset{\sim}{P_c}=RP_w+t$</p></li><li><p>è¿™æ—¶çš„$\overset{\sim}{P_c}$ä»æœ‰<code>X,Y,Z</code>ä¸‰ä¸ªé‡ï¼ŒæŠŠå®ƒä»¬æŠ•å½±åˆ°å½’ä¸€åŒ–å¹³é¢<code>Z=1</code>ä¸Šï¼Œå¾—åˆ°<code>P</code>çš„å½’</p></li></ol><p>ä¸€åŒ–ç›¸æœºåæ ‡ï¼š$P_c=[\frac XZ,\frac YZ,1]^T$ã€‚ <sup class="refplus-num"><a href="#ref-ji">[1]</a></sup></p><ul id="refplus" style="display:none;"><li id="ref-ji" data-num="1">[1]   æ³¨æ„åˆ° *Z* å¯èƒ½å°äº 1ï¼Œè¯´æ˜è¯¥ç‚¹ä½äºå½’ä¸€åŒ–å¹³é¢åé¢ï¼Œå®ƒå¯èƒ½ä¸ä¼šåœ¨ç›¸æœºå¹³é¢ä¸Šæˆåƒ</li></ul><p></p><ol start="4"><li>æœ€åï¼Œ<em>P</em> çš„å½’ä¸€åŒ–åæ ‡ç»è¿‡å†…å‚åï¼Œå¯¹åº”åˆ°å®ƒçš„åƒç´ åæ ‡ï¼š$P_{uv}=Kp_c$ã€‚</li></ol><p>è¿™é‡Œä¸€å…±æœ‰å››ç±»åæ ‡ç³»ï¼š</p><ul><li><p>ä¸–ç•Œåæ ‡ç³»ï¼šäººä¸ºå®šä¹‰çš„ä¸€ç§æœ€åŸå§‹çš„åŸºç¡€åæ ‡ç³»ï¼Œç”¨æ¥æè¿°ä¸–ç•Œä¸­å„ä¸ªç‰©ä½“æ‰€å¤„çš„ä½ç½®</p></li><li><p>ç›¸æœºåæ ‡ç³»ï¼šä»¥ç›¸æœºå…‰å¿ƒä¸ºåŸç‚¹ï¼Œç›¸æœºè‡ªèº«çš„åæ ‡ç³»ï¼Œæ˜¯ä¸€ä¸ªä¸‰ç»´åæ ‡ç³»</p></li><li><p>å›¾åƒåæ ‡ç³»ï¼šåœ¨ç›¸æœºçš„æˆåƒå¹³é¢ä¸Šï¼Œä¸ºäº†æè¿°ç›¸æœºåæ ‡ç³»çš„æˆåƒæƒ…å†µï¼Œæ‰€å»ºç«‹çš„äºŒç»´åæ ‡ç³»</p></li><li><p>åƒç´ åæ ‡ç³»ï¼šä»¥æˆåƒå¹³é¢å·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼Œåƒç´ å¤§å°ä¸ºåæ ‡åˆ†åº¦å€¼ï¼Œå°†å›¾åƒåæ ‡ç³»ä¸Šçš„å›¾åƒè½¬åŒ–ä¸ºåƒç´ åæ ‡ä¿¡æ¯ï¼Œæ˜¯æœ€ç»ˆè·å¾—å›¾ç‰‡çš„äºŒç»´åæ ‡ç³»</p></li></ul><h3 id="3ã€åŒç›®ç›¸æœºæ¨¡å‹">3ã€åŒç›®ç›¸æœºæ¨¡å‹</h3><p>ä»…æ ¹æ®ä¸€ä¸ªåƒç´ ï¼Œæ˜¯æ— æ³•ç¡®å®šè¿™ä¸ªç©ºé—´ç‚¹çš„å…·ä½“ä½ç½®çš„ã€‚</p><p>å› ä¸ºï¼Œä»ç›¸æœºå…‰å¿ƒåˆ°å½’ä¸€åŒ–å¹³é¢è¿çº¿ä¸Šçš„æ‰€æœ‰ç‚¹ï¼Œéƒ½å¯ä»¥æŠ•å½±è‡³è¯¥åƒç´ ä¸Šã€‚åªæœ‰å½“<code>P</code>ç¡®å®šæ—¶ï¼ˆæ¯”å¦‚é€šè¿‡åŒç›®æˆ– RGB-D ç›¸æœºï¼‰ï¼Œæˆ‘ä»¬æ‰èƒ½æ˜ç¡®åœ°çŸ¥é“å®ƒåœ¨ä¸‰ç»´ç©ºé—´çš„ä½ç½®ã€‚</p><p><img src="https://s2.loli.net/2023/02/24/FQ18bkWgLKrdfS6.png" alt=""></p><p>æµ‹é‡åƒç´ è·ç¦»ï¼ˆæˆ–æ·±åº¦ï¼‰çš„æ–¹å¼æœ‰å¾ˆå¤šç§ã€‚æ¯”å¦‚äººçœ¼ï¼šå°±å¯ä»¥æ ¹æ®å·¦å³çœ¼çœ‹åˆ°çš„æ™¯ç‰©å·®å¼‚ï¼ˆ<strong>è§†å·®</strong>ï¼‰æ¥åˆ¤æ–­ç‰©ä½“ä¸æˆ‘ä»¬çš„è·ç¦»ã€‚</p><p>åŒç›®ç›¸æœºçš„åŸç†å°±æ˜¯è¿™æ ·ã€‚é€šè¿‡åŒæ­¥é‡‡é›†å·¦å³ç›¸æœºçš„å›¾åƒï¼Œè®¡ç®—å›¾åƒé—´è§†å·®ï¼Œæ¥ä¼°è®¡æ¯ä¸€ä¸ªåƒç´ çš„æ·±åº¦ã€‚</p><p><img src="https://s2.loli.net/2023/02/24/3Cx1oYinzuW2tyM.png" alt=""></p><blockquote><p>ä¸Šå›¾æ˜¯åŒç›®ç›¸æœºçš„æˆåƒæ¨¡å‹ã€‚$O_L, O_R$ ä¸ºå·¦å³å…‰åœˆä¸­å¿ƒï¼Œè“è‰²æ¡†ä¸ºæˆåƒå¹³é¢ï¼Œ<code>f</code> ä¸ºç„¦è·ã€‚</p><p>$u_L å’Œ u_R$ ä¸ºæˆåƒå¹³é¢çš„åæ ‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæŒ‰ç…§å›¾ä¸­åæ ‡å®šä¹‰ï¼Œ$u_R$ åº”è¯¥æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥å›¾ä¸­æ ‡å‡ºçš„è·ç¦»ä¸º$âˆ’u_R$ã€‚</p></blockquote><p>åŒç›®ç›¸æœºä¸€èˆ¬ç”±å·¦çœ¼å’Œå³çœ¼ä¸¤ä¸ªæ°´å¹³æ”¾ç½®çš„ç›¸æœºç»„æˆã€‚åœ¨å·¦å³åŒç›®çš„ç›¸æœºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸¤ä¸ªç›¸æœºéƒ½çœ‹ä½œé’ˆå­”ç›¸æœºã€‚å› ä¸ºå®ƒä»¬æ˜¯æ°´å¹³æ”¾ç½®çš„ï¼Œæ„å‘³ä¸¤ä¸ªç›¸æœºçš„å…‰åœˆä¸­å¿ƒéƒ½ä½äº<code>X</code>è½´ä¸Šã€‚å®ƒä»¬çš„è·ç¦»ç§°ä¸ºåŒç›®ç›¸æœºçš„åŸºçº¿ï¼ˆBaseline, è®°ä½œ <em>b</em>ï¼‰ï¼Œæ˜¯åŒç›®çš„é‡è¦å‚æ•°ã€‚</p><p>ç°åœ¨ï¼Œè€ƒè™‘ä¸€ä¸ªç©ºé—´ç‚¹ <em>P</em>ï¼Œå®ƒåœ¨å·¦çœ¼å’Œå³çœ¼å„æˆä¸€åƒï¼Œè®°ä½œ$P_L,P_R$ã€‚ç”±äºç›¸æœºåŸºçº¿çš„å­˜åœ¨ï¼Œè¿™ä¸¤ä¸ªæˆåƒä½ç½®æ˜¯ä¸åŒçš„ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œç”±äºå·¦å³ç›¸æœºåªæœ‰åœ¨<code>x</code>è½´ä¸Šæœ‰ä½ç§»ï¼Œå› æ­¤<code>P</code>çš„åƒä¹Ÿåªåœ¨<code>x</code>è½´ï¼ˆå¯¹åº”å›¾åƒçš„<code>u</code>è½´ï¼‰ä¸Šæœ‰å·®å¼‚ã€‚æˆ‘ä»¬è®°å®ƒåœ¨å·¦ä¾§çš„åæ ‡ä¸º$u_L$ï¼Œå³ä¾§åæ ‡ä¸º$u_R$ã€‚é‚£ä¹ˆï¼Œå®ƒä»¬çš„å‡ ä½•å…³ç³»å¦‚ä¸Šå›¾å³ä¾§æ‰€ç¤ºã€‚æ ¹æ®ä¸‰è§’å½¢$P-P_L-P_R$å’Œ$P-O_L-O_R$çš„ç›¸ä¼¼å…³ç³»ï¼Œæœ‰ï¼š<br>$$<br>\frac{zâˆ’f}{z}=\frac{bâˆ’u_L+u_R}{b}<br>$$<br>æ•´ç†ä¸€ä¸‹å¾—ï¼š<br>$$<br>z=\frac{fb}{u_L-u_R}=\frac{fb}{d}\\<br>d=u_L-u_R<br>$$<br>è¿™é‡Œ<code>d</code>ä¸ºå·¦å³å›¾çš„æ¨ªåæ ‡ä¹‹å·®ï¼Œç§°ä¸º<strong>è§†å·®ï¼ˆDisparityï¼‰</strong>ã€‚æ ¹æ®è§†å·®å°±å¯ä»¥ä¼°è®¡ä¸€ä¸ªåƒç´ ç¦»ç›¸æœºçš„è·ç¦»ã€‚</p><p>è§†å·®ä¸è·ç¦»æˆåæ¯”â€”â€”è§†å·®è¶Šå¤§ï¼Œè·ç¦»è¶Šè¿‘ã€‚å¹¶ä¸”ï¼Œç”±äºè§†å·®æœ€å°ä¸ºä¸€ä¸ªåƒç´ ï¼Œæ‰€ä»¥åŒç›®çš„æ·±åº¦å­˜åœ¨ä¸€ä¸ªç†è®ºä¸Šçš„æœ€å¤§å€¼ï¼Œç”±<code>fb</code>ç¡®å®šã€‚æ‰€ä»¥è¯´ï¼Œå½“åŸºçº¿è¶Šé•¿æ—¶ï¼ŒåŒç›®æœ€å¤§èƒ½æµ‹åˆ°çš„è·ç¦»å°±ä¼šå˜è¿œï¼›åä¹‹ï¼ŒåŸºçº¿è¶ŠçŸ­ï¼Œåˆ™åªèƒ½æµ‹é‡å¾ˆè¿‘çš„è·ç¦»ã€‚</p><p>è™½ç„¶è¿™ä¸ªå…¬å¼å¾ˆç®€æ´ï¼Œä½†è§†å·®<code>d</code>æœ¬èº«çš„è®¡ç®—æ¯”è¾ƒå›°éš¾ã€‚æˆ‘ä»¬éœ€è¦ç¡®åˆ‡åœ°çŸ¥é“å·¦çœ¼å›¾åƒæŸä¸ªåƒç´ å‡ºç°åœ¨å³çœ¼å›¾åƒçš„å“ªä¸€ä¸ªä½ç½®ï¼ˆä¹Ÿå°±æ˜¯å¯¹åº”å…³ç³»ï¼‰ï¼Œè¿™ä»¶äº‹å±äºâ€œäººç±»è§‰å¾—å®¹æ˜“è€Œè®¡ç®—æœºè§‰å¾—å›°éš¾â€çš„äº‹æƒ…ã€‚å½“æˆ‘ä»¬æƒ³è®¡ç®—æ¯ä¸ªåƒç´ çš„æ·±åº¦æ—¶ï¼Œå…¶è®¡ç®—é‡ä¸ç²¾åº¦éƒ½å°†æˆä¸ºé—®é¢˜ï¼Œè€Œä¸”åªæœ‰åœ¨å›¾åƒçº¹ç†å˜åŒ–ä¸°å¯Œçš„åœ°æ–¹æ‰èƒ½è®¡ç®—è§†å·®ã€‚ç”±äºè®¡ç®—é‡çš„åŸå› ï¼ŒåŒç›®æ·±åº¦ä¼°è®¡ä»éœ€è¦ä½¿ç”¨GPUç­‰å¤§ç®—åŠ›æ¥è®¡ç®—ã€‚è¿™åœ¨åé¢ä¼šæåŠï¼Œå¯ä»¥å‚è€ƒæœ¬åšå®¢CUDAç³»åˆ—æ–‡ç« ã€‚</p><h3 id="4ã€RGB-D-ç›¸æœºæ¨¡å‹">4ã€<strong>RGB-D</strong> ç›¸æœºæ¨¡å‹</h3><p>RGB-Dç›¸æœºæ¨¡å‹èƒ½å¤Ÿä¸»åŠ¨æµ‹é‡æ¯ä¸ªåƒç´ çš„æ·±åº¦ã€‚ç›®å‰çš„RGB-Dç›¸æœºæŒ‰åŸç†å¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ol><li>é€šè¿‡<strong>çº¢å¤–ç»“æ„å…‰</strong>ï¼ˆStructured Lightï¼‰æ¥æµ‹é‡åƒç´ è·ç¦»çš„ã€‚å¦‚ Kinect 1 ä»£ã€Project Tango 1 ä»£ã€Intel RealSense ç­‰ç­‰</li></ol><p><img src="https://s2.loli.net/2023/02/24/rNxqzlFkyhnRfXi.png" alt=""></p><p>ä¸€ä¸ªRGB-Dç›¸æœºè‡³å°‘ä¼šæœ‰ä¸€ä¸ªå‘å°„å™¨å’Œä¸€ä¸ªæ¥æ”¶å™¨ã€‚</p><p>æ— è®ºæ˜¯ç»“æ„å…‰è¿˜æ˜¯ ToFï¼ŒRGB-D ç›¸æœºéƒ½éœ€è¦å‘æ¢æµ‹ç›®æ ‡å‘å°„ä¸€æŸå…‰çº¿ï¼ˆé€šå¸¸æ˜¯çº¢å¤–å…‰ï¼‰ã€‚</p><ul><li><p>åœ¨ç»“æ„å…‰åŸç†ä¸­ï¼Œç›¸æœºæ ¹æ®è¿”å›çš„ç»“æ„å…‰å›¾æ¡ˆï¼Œè®¡ç®—ç‰©ä½“ç¦»è‡ªèº«çš„è·ç¦»ã€‚</p></li><li><p>åœ¨ ToF ä¸­ï¼Œç›¸æœºå‘ç›®æ ‡å‘å°„è„‰å†²å…‰ï¼Œç„¶åæ ¹æ®å‘é€åˆ°è¿”å›ä¹‹é—´çš„å…‰æŸé£è¡Œæ—¶é—´ï¼Œç¡®å®šç‰©ä½“ç¦»è‡ªèº«çš„è·ç¦»ã€‚</p><p>ToF åŸç†å’Œæ¿€å…‰ä¼ æ„Ÿå™¨å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡æ¿€å…‰æ˜¯é€šè¿‡é€ç‚¹æ‰«ææ¥è·å–è·ç¦»ï¼Œè€Œ ToF ç›¸æœºåˆ™å¯ä»¥è·å¾—æ•´ä¸ªå›¾åƒçš„åƒç´ æ·±åº¦</p></li></ul><p>åœ¨æµ‹é‡æ·±åº¦ä¹‹åï¼ŒRGB-D ç›¸æœºèƒ½å¤Ÿå®Œæˆæ·±åº¦ä¸å½©è‰²å›¾åƒç´ ä¹‹é—´çš„é…å¯¹ï¼Œè¾“å‡ºä¸€ä¸€å¯¹åº”çš„å½©è‰²å›¾å’Œæ·±åº¦å›¾ã€‚æˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€ä¸ªå›¾åƒä½ç½®ï¼Œè¯»å–åˆ°è‰²å½©ä¿¡æ¯å’Œè·ç¦»ä¿¡æ¯ï¼Œè®¡ç®—åƒç´ çš„ 3D ç›¸æœºåæ ‡ï¼Œç”Ÿæˆç‚¹äº‘ï¼ˆPoint Cloudï¼‰ã€‚</p><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> BUTï¼ŒRGB-D ç›¸æœºæœ‰å‡ ç‚¹åŠ£åŠ¿ï¼š</p><ul><li>è¿™ç§ç±»å‹çš„å‘å°„-æ¥å—çš„æµ‹é‡æ–¹å¼ï¼Œä½¿å¾—å®ƒä½¿ç”¨èŒƒå›´æ¯”è¾ƒå—é™ã€‚</li><li>ç”¨çº¢å¤–è¿›è¡Œæ·±åº¦å€¼æµ‹é‡çš„ RGB-D ç›¸æœºï¼Œå®¹æ˜“å—åˆ°æ—¥å…‰æˆ–å…¶ä»–ä¼ æ„Ÿå™¨å‘å°„çš„çº¢å¤–å…‰å¹²æ‰°ï¼Œå› æ­¤ä¸èƒ½åœ¨å®¤å¤–ä½¿ç”¨ï¼›</li><li>åŒæ—¶ä½¿ç”¨å¤šä¸ªæ·±åº¦ç›¸æœºæ—¶ä¹Ÿä¼šç›¸äº’å¹²æ‰°ã€‚</li><li>å¯¹äºé€å°„æè´¨çš„ç‰©ä½“ï¼Œå› ä¸ºæ¥å—ä¸åˆ°åå°„å…‰ï¼Œæ‰€ä»¥æ— æ³•æµ‹é‡è¿™äº›ç‚¹çš„ä½ç½®ã€‚</li><li>RGB-D ç›¸æœºæœ¬èº«çš„æˆæœ¬è¾ƒå¤§ã€åŠŸè€—ä¹Ÿæ¯”è¾ƒé«˜ã€‚</li></ul><h2 id="äºŒã€ä»£ç ">äºŒã€ä»£ç </h2><p>ä½¿ç”¨eigenã€pangolinã€opencvç¼–å†™ã€‚ç¯å¢ƒé…ç½®å¯ä»¥ç½‘ä¸ŠæŸ¥ã€æˆ–å‚ç…§<a href="https://tuoyou-hao.github.io/2023/01/11/slam-2-code-base/">SLAM 2ã€ä»£ç åŸºç¡€</a>.</p><p>å…¶ä¸­ä»£ç çš„å›¾åƒèµ„æºå¯ä»¥ç”¨è‡ªå·±çš„å›¾ï¼Œä¹Ÿå¯ä»¥å‚è€ƒ<a href="https://github.com/gaoxiang12/slambook2">slamæºç ä»“åº“</a></p><h3 id="1ã€å›¾åƒå»ç•¸å˜">1ã€å›¾åƒå»ç•¸å˜</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token comment">// éœ€è¦ç¡®å®š5ä¸ªç•¸å˜å‚æ•° k1,k2,k3,p1,p2</span><span class="token comment">// k1,k2,k3  çº æ­£å¾„å‘ç•¸å˜</span><span class="token comment">// p1,p2     çº æ­£åˆ‡å‘ç•¸å˜</span><span class="token comment">// å›¾ç‰‡æ–‡ä»¶è·¯å¾„,è¿™é‡Œç”¨çš„ç°åº¦å›¾</span>string image_file <span class="token operator">=</span> <span class="token string">"./distorted.png"</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// ç•¸å˜å‚æ•°</span>  <span class="token keyword">double</span> k1 <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.28340811</span><span class="token punctuation">,</span> k2 <span class="token operator">=</span> <span class="token number">0.07395907</span><span class="token punctuation">,</span> p1 <span class="token operator">=</span> <span class="token number">0.00019359</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> <span class="token number">1.76187114e-05</span><span class="token punctuation">;</span>  <span class="token comment">// å†…å‚</span>  <span class="token keyword">double</span> fx <span class="token operator">=</span> <span class="token number">458.654</span><span class="token punctuation">,</span> fy <span class="token operator">=</span> <span class="token number">457.296</span><span class="token punctuation">,</span> cx <span class="token operator">=</span> <span class="token number">367.215</span><span class="token punctuation">,</span> cy <span class="token operator">=</span> <span class="token number">248.375</span><span class="token punctuation">;</span>  <span class="token comment">// å›¾åƒæ˜¯ç°åº¦å›¾ï¼ŒCV_8UC1</span>  cv<span class="token double-colon punctuation">::</span>Mat image <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span>image_file<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">int</span> rows <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">,</span> cols <span class="token operator">=</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>  cv<span class="token double-colon punctuation">::</span>Mat image_undistort <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span>rows<span class="token punctuation">,</span> cols<span class="token punctuation">,</span> CV_8UC1<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// å»ç•¸å˜ä»¥åçš„å›¾</span>  <span class="token comment">// è®¡ç®—å»ç•¸å˜åå›¾åƒçš„å†…å®¹</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> rows<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> u <span class="token operator">&lt;</span> cols<span class="token punctuation">;</span> u<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// æŒ‰ç…§å…¬å¼ï¼Œè®¡ç®—ç‚¹(u,v)å¯¹åº”åˆ°ç•¸å˜å›¾åƒä¸­çš„åæ ‡(u_distorted, v_distorted)</span>      <span class="token keyword">double</span> x <span class="token operator">=</span> <span class="token punctuation">(</span>u <span class="token operator">-</span> cx<span class="token punctuation">)</span> <span class="token operator">/</span> fx<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token punctuation">(</span>v <span class="token operator">-</span> cy<span class="token punctuation">)</span> <span class="token operator">/</span> fy<span class="token punctuation">;</span>      <span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// å½’ä¸€åŒ–å¹³é¢ä¸‹çš„ç•¸å˜ç‚¹ x_d</span>      <span class="token keyword">double</span> x_distorted <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> k1 <span class="token operator">*</span> r <span class="token operator">*</span> r <span class="token operator">+</span> k2 <span class="token operator">*</span> r <span class="token operator">*</span> r <span class="token operator">*</span> r <span class="token operator">*</span> r<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> p1 <span class="token operator">*</span> x <span class="token operator">*</span> y <span class="token operator">+</span> p2 <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">*</span> r <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// å½’ä¸€åŒ–å¹³é¢ä¸‹çš„ç•¸å˜ç‚¹ y_d</span>      <span class="token keyword">double</span> y_distorted <span class="token operator">=</span> y <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> k1 <span class="token operator">*</span> r <span class="token operator">*</span> r <span class="token operator">+</span> k2 <span class="token operator">*</span> r <span class="token operator">*</span> r <span class="token operator">*</span> r <span class="token operator">*</span> r<span class="token punctuation">)</span> <span class="token operator">+</span> p1 <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">*</span> r <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> y <span class="token operator">*</span> y<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> p2 <span class="token operator">*</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>      <span class="token comment">// å†å°†ç•¸å˜çš„å½’ä¸€åŒ–ä¸‹çš„x_d å’Œ y_d å˜ä¸ºåƒç´ åæ ‡å³å¯</span>      <span class="token keyword">double</span> u_distorted <span class="token operator">=</span> fx <span class="token operator">*</span> x_distorted <span class="token operator">+</span> cx<span class="token punctuation">;</span>      <span class="token keyword">double</span> v_distorted <span class="token operator">=</span> fy <span class="token operator">*</span> y_distorted <span class="token operator">+</span> cy<span class="token punctuation">;</span>      <span class="token comment">// èµ‹å€¼ (ä½¿ç”¨æœ€è¿‘é‚»æ’å€¼)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>u_distorted <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> v_distorted <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> u_distorted <span class="token operator">&lt;</span> cols <span class="token operator">&amp;&amp;</span> v_distorted <span class="token operator">&lt;</span> rows<span class="token punctuation">)</span> <span class="token punctuation">{</span>        image_undistort<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> v_distorted<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> u_distorted<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>       <span class="token keyword">else</span> <span class="token punctuation">{</span>        image_undistort<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment">// å±•ç¤ºå»ç•¸å˜å‰åçš„å›¾åƒ</span>  cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"distorted"</span><span class="token punctuation">,</span> image<span class="token punctuation">)</span><span class="token punctuation">;</span>  cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"undistorted"</span><span class="token punctuation">,</span> image_undistort<span class="token punctuation">)</span><span class="token punctuation">;</span>  cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>cmake</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">project</span><span class="token punctuation">(</span>imageBasics<span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>undistortImage undistortImage.cpp<span class="token punctuation">)</span><span class="token comment"># é“¾æ¥OpenCVåº“</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>undistortImage <span class="token punctuation">${</span>OpenCV_LIBS<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://s2.loli.net/2023/03/03/s985k3XCNPYbciT.png" alt=""></p><h3 id="2ã€stereoåŒç›®ç‚¹äº‘æˆåƒ">2ã€stereoåŒç›®ç‚¹äº‘æˆåƒ</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;boost/format.hpp&gt;</span>  <span class="token comment">// å­—ç¬¦ä¸²çš„æ ¼å¼åŒ–</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pangolin/pangolin.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sophus/se3.hpp&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> vector<span class="token operator">&lt;</span>Sophus<span class="token double-colon punctuation">::</span>SE3d<span class="token punctuation">,</span> Eigen<span class="token double-colon punctuation">::</span>aligned_allocator<span class="token operator">&lt;</span>Sophus<span class="token double-colon punctuation">::</span>SE3d<span class="token operator">&gt;&gt;</span> TrajectoryType<span class="token punctuation">;</span><span class="token keyword">typedef</span> Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> Vector6d<span class="token punctuation">;</span><span class="token comment">// åœ¨pangolinä¸­ç”»å›¾ï¼Œä¸æ˜¯ä»£ç çš„é‡ç‚¹</span><span class="token keyword">void</span> <span class="token function">showPointCloud</span><span class="token punctuation">(</span>    <span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Vector6d<span class="token punctuation">,</span> Eigen<span class="token double-colon punctuation">::</span>aligned_allocator<span class="token operator">&lt;</span>Vector6d<span class="token operator">&gt;&gt;</span> <span class="token operator">&amp;</span>pointcloud<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Mat<span class="token operator">&gt;</span> colorImgs<span class="token punctuation">,</span> depthImgs<span class="token punctuation">;</span>    <span class="token comment">// å½©è‰²å›¾å’Œæ·±åº¦å›¾</span>    TrajectoryType poses<span class="token punctuation">;</span>         <span class="token comment">// ç›¸æœºä½å§¿</span>    <span class="token comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯åœ¨æœ‰pose.txtçš„è·¯å¾„ä¸‹è¿è¡Œ</span>    ifstream <span class="token function">fin</span><span class="token punctuation">(</span><span class="token string">"./pose.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fin<span class="token punctuation">)</span> <span class="token punctuation">{</span>        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯·åœ¨æœ‰pose.txtçš„ç›®å½•ä¸‹è¿è¡Œæ­¤ç¨‹åº"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        boost<span class="token double-colon punctuation">::</span>format <span class="token function">fmt</span><span class="token punctuation">(</span><span class="token string">"./%s/%d.%s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å›¾åƒæ–‡ä»¶æ ¼å¼</span>        colorImgs<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fmt <span class="token operator">%</span> <span class="token string">"color"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token string">"png"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        depthImgs<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fmt <span class="token operator">%</span> <span class="token string">"depth"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token string">"pgm"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨-1è¯»å–åŸå§‹å›¾åƒ</span>        <span class="token keyword">double</span> data<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>d<span class="token operator">:</span>data<span class="token punctuation">)</span>            fin <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">;</span>        Sophus<span class="token double-colon punctuation">::</span>SE3d <span class="token function">pose</span><span class="token punctuation">(</span><span class="token class-name">Eigen</span><span class="token double-colon punctuation">::</span><span class="token function">Quaterniond</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                          <span class="token class-name">Eigen</span><span class="token double-colon punctuation">::</span><span class="token function">Vector3d</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        poses<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>pose<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// è®¡ç®—ç‚¹äº‘å¹¶æ‹¼æ¥</span>    <span class="token comment">// ç›¸æœºå†…å‚</span>    <span class="token keyword">double</span> cx <span class="token operator">=</span> <span class="token number">325.5</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> cy <span class="token operator">=</span> <span class="token number">253.5</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> fx <span class="token operator">=</span> <span class="token number">518.0</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> fy <span class="token operator">=</span> <span class="token number">519.0</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> depthScale <span class="token operator">=</span> <span class="token number">1000.0</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Vector6d<span class="token punctuation">,</span> Eigen<span class="token double-colon punctuation">::</span>aligned_allocator<span class="token operator">&lt;</span>Vector6d<span class="token operator">&gt;&gt;</span> pointcloud<span class="token punctuation">;</span>    pointcloud<span class="token punctuation">.</span><span class="token function">reserve</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è½¬æ¢å›¾åƒä¸­: "</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>        cv<span class="token double-colon punctuation">::</span>Mat color <span class="token operator">=</span> colorImgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        cv<span class="token double-colon punctuation">::</span>Mat depth <span class="token operator">=</span> depthImgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        Sophus<span class="token double-colon punctuation">::</span>SE3d T <span class="token operator">=</span> poses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> color<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> u <span class="token operator">&lt;</span> color<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> u<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">unsigned</span> <span class="token keyword">int</span> d <span class="token operator">=</span> depth<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ·±åº¦å€¼</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>d <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token comment">// ä¸º0è¡¨ç¤ºæ²¡æœ‰æµ‹é‡åˆ°</span>                                Eigen<span class="token double-colon punctuation">::</span>Vector3d point<span class="token punctuation">;</span>                point<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">/</span> depthScale<span class="token punctuation">;</span>                point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>u <span class="token operator">-</span> cx<span class="token punctuation">)</span> <span class="token operator">*</span> point<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> fx<span class="token punctuation">;</span>                point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>v <span class="token operator">-</span> cy<span class="token punctuation">)</span> <span class="token operator">*</span> point<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> fy<span class="token punctuation">;</span>                Eigen<span class="token double-colon punctuation">::</span>Vector3d pointWorld <span class="token operator">=</span> T <span class="token operator">*</span> point<span class="token punctuation">;</span>                Vector6d p<span class="token punctuation">;</span>                p<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">head</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> pointWorld<span class="token punctuation">;</span>                p<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> color<span class="token punctuation">.</span>data<span class="token punctuation">[</span>v <span class="token operator">*</span> color<span class="token punctuation">.</span>step <span class="token operator">+</span> u <span class="token operator">*</span> color<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// blue</span>                p<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> color<span class="token punctuation">.</span>data<span class="token punctuation">[</span>v <span class="token operator">*</span> color<span class="token punctuation">.</span>step <span class="token operator">+</span> u <span class="token operator">*</span> color<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// green</span>                p<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> color<span class="token punctuation">.</span>data<span class="token punctuation">[</span>v <span class="token operator">*</span> color<span class="token punctuation">.</span>step <span class="token operator">+</span> u <span class="token operator">*</span> color<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// red</span>                pointcloud<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç‚¹äº‘å…±æœ‰"</span> <span class="token operator">&lt;&lt;</span> pointcloud<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"ä¸ªç‚¹."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token function">showPointCloud</span><span class="token punctuation">(</span>pointcloud<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">showPointCloud</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Vector6d<span class="token punctuation">,</span> Eigen<span class="token double-colon punctuation">::</span>aligned_allocator<span class="token operator">&lt;</span>Vector6d<span class="token operator">&gt;&gt;</span> <span class="token operator">&amp;</span>pointcloud<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pointcloud<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Point cloud is empty!"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateWindowAndBind</span><span class="token punctuation">(</span><span class="token string">"Point Cloud Viewer"</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">768</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glEnable</span><span class="token punctuation">(</span>GL_DEPTH_TEST<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glEnable</span><span class="token punctuation">(</span>GL_BLEND<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glBlendFunc</span><span class="token punctuation">(</span>GL_SRC_ALPHA<span class="token punctuation">,</span> GL_ONE_MINUS_SRC_ALPHA<span class="token punctuation">)</span><span class="token punctuation">;</span>    pangolin<span class="token double-colon punctuation">::</span>OpenGlRenderState <span class="token function">s_cam</span><span class="token punctuation">(</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">ProjectionMatrix</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">768</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">389</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">ModelViewLookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    pangolin<span class="token double-colon punctuation">::</span>View <span class="token operator">&amp;</span>d_cam <span class="token operator">=</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">SetBounds</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> pangolin<span class="token double-colon punctuation">::</span><span class="token class-name">Attach</span><span class="token double-colon punctuation">::</span><span class="token function">Pix</span><span class="token punctuation">(</span><span class="token number">175</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1024.0f</span> <span class="token operator">/</span> <span class="token number">768.0f</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">SetHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">Handler3D</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>pangolin<span class="token double-colon punctuation">::</span><span class="token function">ShouldQuit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">glClear</span><span class="token punctuation">(</span>GL_COLOR_BUFFER_BIT <span class="token operator">|</span> GL_DEPTH_BUFFER_BIT<span class="token punctuation">)</span><span class="token punctuation">;</span>        d_cam<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glClearColor</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glPointSize</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glBegin</span><span class="token punctuation">(</span>GL_POINTS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>p<span class="token operator">:</span> pointcloud<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">glColor3d</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">255.0</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">255.0</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">255.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">glVertex3d</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">glEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">FinishFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// sleep 5 ms</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>cmake</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">find_package</span><span class="token punctuation">(</span>Pangolin REQUIRED<span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>stereoVision stereoVision.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>stereoVision <span class="token punctuation">${</span>OpenCV_LIBS<span class="token punctuation">}</span> <span class="token punctuation">${</span>Pangolin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://s2.loli.net/2023/03/03/fbR5TsUBMlxoNEz.png" alt="æ·±åº¦å›¾"></p><p><img src="https://s2.loli.net/2023/03/03/JpxSmFZwQ5WOVG4.png" alt="ç‚¹äº‘"></p><h3 id="3ã€åŒç›®è§†è§‰ã€ç‚¹äº‘æ‹¼è£…">3ã€åŒç›®è§†è§‰ã€ç‚¹äº‘æ‹¼è£…</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Core&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pangolin/pangolin.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> Eigen<span class="token punctuation">;</span><span class="token comment">// æ–‡ä»¶è·¯å¾„</span>string left_file <span class="token operator">=</span> <span class="token string">"./left.png"</span><span class="token punctuation">;</span>string right_file <span class="token operator">=</span> <span class="token string">"./right.png"</span><span class="token punctuation">;</span><span class="token comment">// å°è£…å¥½çš„åœ¨pangolinä¸­ç”»å›¾çš„å‡½æ•°ï¼Œä¸æ˜¯ä»£ç ç®—æ³•çš„é‡ç‚¹</span><span class="token keyword">void</span> <span class="token function">showPointCloud</span><span class="token punctuation">(</span>    <span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Vector4d<span class="token punctuation">,</span> Eigen<span class="token double-colon punctuation">::</span>aligned_allocator<span class="token operator">&lt;</span>Vector4d<span class="token operator">&gt;&gt;</span> <span class="token operator">&amp;</span>pointcloud<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// å†…å‚</span>    <span class="token keyword">double</span> fx <span class="token operator">=</span> <span class="token number">718.856</span><span class="token punctuation">,</span> fy <span class="token operator">=</span> <span class="token number">718.856</span><span class="token punctuation">,</span> cx <span class="token operator">=</span> <span class="token number">607.1928</span><span class="token punctuation">,</span> cy <span class="token operator">=</span> <span class="token number">185.2157</span><span class="token punctuation">;</span>    <span class="token comment">// åŸºçº¿</span>    <span class="token keyword">double</span> b <span class="token operator">=</span> <span class="token number">0.573</span><span class="token punctuation">;</span>    <span class="token comment">// è¯»å–å›¾åƒ</span>    cv<span class="token double-colon punctuation">::</span>Mat left <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span>left_file<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat right <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span>right_file<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cv<span class="token double-colon punctuation">::</span>Ptr<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>StereoSGBM<span class="token operator">&gt;</span> sgbm <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">StereoSGBM</span><span class="token double-colon punctuation">::</span><span class="token function">create</span><span class="token punctuation">(</span>        <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">32</span> <span class="token operator">*</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç¥å¥‡çš„å‚æ•°</span>    cv<span class="token double-colon punctuation">::</span>Mat disparity_sgbm<span class="token punctuation">,</span> disparity<span class="token punctuation">;</span>    sgbm<span class="token operator">-&gt;</span><span class="token function">compute</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> disparity_sgbm<span class="token punctuation">)</span><span class="token punctuation">;</span>    disparity_sgbm<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>disparity<span class="token punctuation">,</span> CV_32F<span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">16.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç”Ÿæˆç‚¹äº‘</span>    vector<span class="token operator">&lt;</span>Vector4d<span class="token punctuation">,</span> Eigen<span class="token double-colon punctuation">::</span>aligned_allocator<span class="token operator">&lt;</span>Vector4d<span class="token operator">&gt;&gt;</span> pointcloud<span class="token punctuation">;</span>    <span class="token comment">// å¦‚æœä½ çš„æœºå™¨æ…¢ï¼Œå¯ä»¥æŠŠåé¢çš„v++å’Œu++æ”¹æˆv+=2, u+=2</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> left<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> u <span class="token operator">&lt;</span> left<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> u<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>disparity<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0.0</span> <span class="token operator">||</span> disparity<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">96.0</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            Vector4d <span class="token function">point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> left<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">255.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‰ä¸‰ç»´ä¸ºxyz,ç¬¬å››ç»´ä¸ºé¢œè‰²</span>            <span class="token comment">// æ ¹æ®åŒç›®æ¨¡å‹è®¡ç®— point çš„ä½ç½®</span>            <span class="token keyword">double</span> x <span class="token operator">=</span> <span class="token punctuation">(</span>u <span class="token operator">-</span> cx<span class="token punctuation">)</span> <span class="token operator">/</span> fx<span class="token punctuation">;</span>            <span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token punctuation">(</span>v <span class="token operator">-</span> cy<span class="token punctuation">)</span> <span class="token operator">/</span> fy<span class="token punctuation">;</span>            <span class="token keyword">double</span> depth <span class="token operator">=</span> fx <span class="token operator">*</span> b <span class="token operator">/</span> <span class="token punctuation">(</span>disparity<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> x <span class="token operator">*</span> depth<span class="token punctuation">;</span>            point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> y <span class="token operator">*</span> depth<span class="token punctuation">;</span>            point<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> depth<span class="token punctuation">;</span>            pointcloud<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"disparity"</span><span class="token punctuation">,</span> disparity <span class="token operator">/</span> <span class="token number">96.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç”»å‡ºç‚¹äº‘</span>    <span class="token function">showPointCloud</span><span class="token punctuation">(</span>pointcloud<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">showPointCloud</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Vector4d<span class="token punctuation">,</span> Eigen<span class="token double-colon punctuation">::</span>aligned_allocator<span class="token operator">&lt;</span>Vector4d<span class="token operator">&gt;&gt;</span> <span class="token operator">&amp;</span>pointcloud<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pointcloud<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Point cloud is empty!"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token comment">// è®¾ç½®çª—å£</span>    pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateWindowAndBind</span><span class="token punctuation">(</span><span class="token string">"Point Cloud Viewer"</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">768</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¼€å¯æ›´æ–°æ·±åº¦ç¼“å†²åŒºçš„åŠŸèƒ½</span>    <span class="token function">glEnable</span><span class="token punctuation">(</span>GL_DEPTH_TEST<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¼€å¯æ··åˆæ¨¡å¼ã€æ··åˆå¸¸ç”¨æ¥ç»˜åˆ¶é€æ˜æˆ–åŠé€æ˜çš„ç‰©ä½“</span>    <span class="token function">glEnable</span><span class="token punctuation">(</span>GL_BLEND<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glBlendFunc</span><span class="token punctuation">(</span>GL_SRC_ALPHA<span class="token punctuation">,</span> GL_ONE_MINUS_SRC_ALPHA<span class="token punctuation">)</span><span class="token punctuation">;</span>    pangolin<span class="token double-colon punctuation">::</span>OpenGlRenderState <span class="token function">s_cam</span><span class="token punctuation">(</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">ProjectionMatrix</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">768</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">389</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">ModelViewLookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    pangolin<span class="token double-colon punctuation">::</span>View <span class="token operator">&amp;</span>d_cam <span class="token operator">=</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">SetBounds</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> pangolin<span class="token double-colon punctuation">::</span><span class="token class-name">Attach</span><span class="token double-colon punctuation">::</span><span class="token function">Pix</span><span class="token punctuation">(</span><span class="token number">175</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1024.0f</span> <span class="token operator">/</span> <span class="token number">768.0f</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">SetHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">Handler3D</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>pangolin<span class="token double-colon punctuation">::</span><span class="token function">ShouldQuit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">glClear</span><span class="token punctuation">(</span>GL_COLOR_BUFFER_BIT <span class="token operator">|</span> GL_DEPTH_BUFFER_BIT<span class="token punctuation">)</span><span class="token punctuation">;</span>        d_cam<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glClearColor</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glPointSize</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glBegin</span><span class="token punctuation">(</span>GL_POINTS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>p<span class="token operator">:</span> pointcloud<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">glColor3f</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">glVertex3d</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">glEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">FinishFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// sleep 5 ms</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¯¹å‡½æ•°<code>cv::StereoSGBM::create</code>ä»‹ç»ä¸€ä¸‹</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">static</span> Ptr<span class="token operator">&lt;</span>StereoSGBM<span class="token operator">&gt;</span> <span class="token function">create</span>    <span class="token punctuation">(</span><span class="token keyword">int</span> minDisparity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token keyword">int</span> numDisparities <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">,</span>                <span class="token keyword">int</span> blockSize <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>       <span class="token keyword">int</span> P1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token keyword">int</span> P2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token keyword">int</span> disp12MaxDiff <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token keyword">int</span> preFilterCap <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token keyword">int</span> uniquenessRatio <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>       <span class="token keyword">int</span> speckleWindowSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token keyword">int</span> speckleRange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>     <span class="token keyword">int</span> mode <span class="token operator">=</span> StereoSGBM<span class="token double-colon punctuation">::</span>MODE_SGBM<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>semi-global matchingï¼ˆSGMï¼‰æ˜¯ä¸€ç§ç”¨äºè®¡ç®—åŒç›®è§†è§‰ä¸­è§†å·®ï¼ˆdisparityï¼‰çš„åŠå…¨å±€åŒ¹é…ç®—æ³•ï¼Œ<br>åœ¨OpenCVä¸­çš„å®ç°ä¸ºsemi-global block matchingï¼ˆSGBMï¼‰</p><ul><li><p>minDisparity æœ€å°çš„å¯èƒ½çš„è§†å·®å€¼</p></li><li><p>numDisparity æ˜¯æœ€å¤§è§†å·®å‡å»æœ€å°è§†å·®</p></li><li><p>disp12MaxDiffæ˜¯å·¦å³å›¾è§†å·®æ£€æŸ¥æ‰€å…è®¸çš„æœ€å¤§çš„ä¸åŒå€¼</p></li><li><p>P1, P2ï¼šæ§åˆ¶è§†å·®å˜åŒ–å¹³æ»‘æ€§çš„å‚æ•°ã€‚P1ã€P2çš„å€¼è¶Šå¤§ï¼Œè§†å·®è¶Šå¹³æ»‘ã€‚P1æ˜¯ç›¸é‚»åƒç´ ç‚¹è§†å·®å¢/å‡ 1 æ—¶çš„æƒ©ç½šç³»æ•°ï¼›P2æ˜¯ç›¸é‚»åƒç´ ç‚¹è§†å·®å˜åŒ–å€¼å¤§äº1æ—¶çš„æƒ©ç½šç³»æ•°ã€‚P2å¿…é¡»å¤§äºP1ã€‚</p></li><li><p>preFilterCapï¼šé¢„å¤„ç†æ»¤æ³¢å™¨çš„æˆªæ–­å€¼ï¼Œé¢„å¤„ç†çš„è¾“å‡ºå€¼ä»…ä¿ç•™[-preFilterCap, preFilterCap]èŒƒå›´å†…çš„å€¼ï¼Œ</p></li><li><p>speckleWindowSizeï¼šæ£€æŸ¥è§†å·®è¿é€šåŒºåŸŸå˜åŒ–åº¦çš„çª—å£å¤§å°, å€¼ä¸º 0 æ—¶å–æ¶ˆ speckle æ£€æŸ¥ï¼Œint å‹</p></li><li><p>speckleRangeï¼šè§†å·®å˜åŒ–é˜ˆå€¼ï¼Œå½“çª—å£å†…è§†å·®å˜åŒ–å¤§äºé˜ˆå€¼æ—¶ï¼Œè¯¥çª—å£å†…çš„è§†å·®æ¸…é›¶ï¼Œint å‹</p></li><li><p>uniquenessRatioï¼šè§†å·®å”¯ä¸€æ€§ç™¾åˆ†æ¯”ï¼Œ è§†å·®çª—å£èŒƒå›´å†…æœ€ä½ä»£ä»·æ˜¯æ¬¡ä½ä»£ä»·çš„(1 + uniquenessRatio/100)å€æ—¶ï¼Œæœ€ä½ä»£ä»·å¯¹åº”çš„è§†å·®å€¼æ‰æ˜¯è¯¥åƒç´ ç‚¹çš„è§†å·®ï¼Œå¦åˆ™è¯¥åƒç´ ç‚¹çš„è§†å·®ä¸º 0</p></li></ul><p>cmake</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">find_package</span><span class="token punctuation">(</span>Sophus REQUIRED<span class="token punctuation">)</span><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">${</span>Sophus_INCLUDE_DIRS<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">find_package</span><span class="token punctuation">(</span>Pangolin REQUIRED<span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>joinMap joinMap.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>joinMap <span class="token punctuation">${</span>OpenCV_LIBS<span class="token punctuation">}</span> <span class="token punctuation">${</span>Pangolin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>pose.txtçš„æ–‡ä»¶å†…å®¹</p><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">-0.228993 0.00645704 0.0287837 -0.0004327 -0.113131 -0.0326832 0.993042-0.50237 -0.0661803 0.322012 -0.00152174 -0.32441 -0.0783827 0.942662-0.970912 -0.185889 0.872353 -0.00662576 -0.278681 -0.0736078 0.957536-1.41952 -0.279885 1.43657 -0.00926933 -0.222761 -0.0567118 0.973178-1.55819 -0.301094 1.6215 -0.02707 -0.250946 -0.0412848 0.966741<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://s2.loli.net/2023/03/03/UQPCFGt83NwEIpM.png" alt=""></p>    <style>    #refplus, #refplus li{         padding:0;        margin:0;        list-style:none;    }ï¼›    </style>    <script src="https://unpkg.com/@popperjs/core@2"></script>    <script src="https://unpkg.com/tippy.js@6"></script>    <script>    document.querySelectorAll(".refplus-num").forEach((ref) => {        let refid = ref.firstChild.href.replace(location.origin+location.pathname,'');        let refel = document.querySelector(refid);        let refnum = refel.dataset.num;        let ref_content = refel.innerText.replace(`[${refnum}]`,'');        tippy(ref, {            content: ref_content,        });    });    </script>    ]]></content>
      
      
      <categories>
          
          <category> æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¯å¢ƒé…ç½®ï¼šOpenCV(c++)</title>
      <link href="/2023/02/26/env_build_win_cv_cpp_vscode/"/>
      <url>/2023/02/26/env_build_win_cv_cpp_vscode/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>é…ç½®cpp opencv çš„ Windows vscodeç¼–è¯‘ç¯å¢ƒ</h1><blockquote><p><span class="github-emoji"><span>ğŸ”—</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f517.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> é“¾æ¥ï¼š</p><p>mingwï¼š<a href="https://pan.quark.cn/s/cb6d3cb6d4cf">https://pan.quark.cn/s/cb6d3cb6d4cf</a></p><p>opencvï¼š<a href="https://opencv.org/releases/">https://opencv.org/releases/</a></p><p>cmakeï¼š<a href="https://pan.quark.cn/s/d40f6922312c">https://pan.quark.cn/s/d40f6922312c</a></p></blockquote><p>1ã€ä¸‹è½½mingwå‹ç¼©åŒ…ï¼Œå¹¶è§£å‹mingwï¼ŒæŠŠ<code>X:\xxx\mingw64\bin</code>è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡</p><p>2ã€ä¸‹è½½opencvæºç ï¼Œå¹¶åœ¨é‚£ä¸ªç›®å½•æ—è¾¹æ–°å»ºä¸€ä¸ªbuildæ–‡ä»¶å¤¹</p><p>3ã€ä¸‹è½½cmakeï¼Œæ‰“å¼€cmakeï¼Œç¬¬ä¸€è¡Œé€‰æ‹©opencvæºç æ ¹ç›®å½•è·¯å¾„ï¼Œç¬¬äºŒè¡Œé€‰åˆšåˆšåˆ›å»ºçš„buildæ–‡ä»¶å¤¹è·¯å¾„</p><p><img src="https://s2.loli.net/2023/02/26/mhaWPpOgb4Ioz1k.png" alt=""></p><p>4ã€ç‚¹é€‰<code>Configure</code>ï¼Œåœ¨ä¸‹æ‹‰æ¡†é€‰<code>MinGW Makefiles</code>ï¼Œå•é€‰æ é€‰<code>Use default native compilers</code>ï¼Œå¼€å§‹cmakeï¼Œæ³¨æ„ï¼š</p><ul><li>å‹¾é€‰BUILD_EXAMPLESã€BUILD_opencv_worldï¼ŒWITH_OPENGL</li><li>ä¸å‹¾é€‰WITH_IPPã€WITH_MSMFå’ŒENABLE_PRECOMPILED_HEADERSï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼ŒCPU_DISPATCHé€‰ç©ºã€‚</li></ul><p>ç„¶åï¼Œç•Œé¢ä¼šçº¢ä¸€ä¸‹ï¼Œå†ç‚¹ä¸€æ¬¡<code>Configure</code>å³å¯ã€‚</p><p><img src="https://s2.loli.net/2023/02/26/X7jBS3IRe8HAWKZ.png" alt=""></p><p>5ã€åœ¨cmakeå¥½åï¼Œæ‰“å¼€cmdï¼Œcdè¿›å…¥opencvçš„buildç›®å½•ï¼Œæ‰§è¡Œ<code>MinGW32-make -j8</code>å¼€å§‹ç¼–è¯‘</p><blockquote><p>å‚æ•°jæ˜¯å¤šçº¿ç¨‹æ•°ï¼Œå¯ä»¥è§†æƒ…å†µé€‰<code>j4</code>ã€<code>j8</code>ã€<code>j16</code></p></blockquote><p>6ã€ç¼–è¯‘å¥½ä¹‹åï¼Œ<code>minGW32-make install</code>å®‰è£…ï¼Œç„¶åæ·»åŠ ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯<code>D:\code_env\opencv_460_build\bin</code></p><p>7ã€å‰å¾€vscodeï¼Œå»åº”ç”¨å•†åº—ä¸‹è½½å¾®è½¯çš„c++æ’ä»¶ï¼Œç„¶åè‡ªå·±æ‰¾ä¸ªç›®å½•æ˜¯æ”¾ä»£ç çš„ï¼Œç”¨vscodeæ‰“å¼€è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚ åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª.vscodeæ–‡ä»¶å¤¹ï¼Œå†ç»§ç»­æ–°å»ºä¸‰ä¸ª.jsonæ–‡ä»¶ï¼ˆ<code>tasks.json</code>ï¼Œ<code>launch.json</code>ï¼Œ<code>c_cpp_properties.json</code>)ã€‚</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">//c_cpp_properties</span><span class="token punctuation">{</span>    <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Win32"</span><span class="token punctuation">,</span>            <span class="token property">"includePath"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"${workspaceFolder}/**"</span><span class="token punctuation">,</span>                <span class="token string">"D:/code_env/mingw64/include/**"</span><span class="token punctuation">,</span>                <span class="token string">"D:/code_env/opencv_460_build/install/include"</span><span class="token punctuation">,</span>                <span class="token string">"D:/code_env/opencv_460_build/install/include/opencv2"</span>            <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token property">"defines"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"_DEBUG"</span><span class="token punctuation">,</span>                <span class="token string">"UNICODE"</span><span class="token punctuation">,</span>                <span class="token string">"_UNICODE"</span>            <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token property">"compilerPath"</span><span class="token operator">:</span> <span class="token string">"D:/code_env/mingw64/bin/g++.exe"</span><span class="token punctuation">,</span>            <span class="token property">"cStandard"</span><span class="token operator">:</span> <span class="token string">"c11"</span><span class="token punctuation">,</span>            <span class="token property">"cppStandard"</span><span class="token operator">:</span> <span class="token string">"c++11"</span><span class="token punctuation">,</span>            <span class="token property">"intelliSenseMode"</span><span class="token operator">:</span> <span class="token string">"windows-gcc-x64"</span>        <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">//tasks</span><span class="token punctuation">{</span><span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"2.0.0"</span><span class="token punctuation">,</span><span class="token property">"tasks"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"cppbuild"</span><span class="token punctuation">,</span><span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"opencv460"</span><span class="token punctuation">,</span> <span class="token comment">//ä»»åŠ¡åç§°ï¼Œè¦å’Œlaunch.jsonçš„"preLaunchTask"å­—æ®µå¯¹åº”</span><span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"D:/code_env/mingw64/bin/g++.exe"</span><span class="token punctuation">,</span> <span class="token comment">//ç¼–è¯‘å™¨è·¯å¾„</span><span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"-g"</span><span class="token punctuation">,</span> <span class="token comment">//æ§åˆ¶å°ç¼–è¯‘æ—¶è¾“å…¥çš„-g,è¡¨ç¤ºç”Ÿæˆè°ƒè¯•æœ‰å…³ä¿¡æ¯,ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶è°ƒè¯•</span><span class="token string">"-std=c++11"</span><span class="token punctuation">,</span><span class="token comment">// "-static",</span>        <span class="token string">"-fexec-charset=GBK"</span><span class="token punctuation">,</span><span class="token comment">// ä»¤mingwæŒ‰GBKç¼–ç â½£æˆexeâ½‚ä»¶ GBK</span>        <span class="token string">"-finput-charset=UTF-8"</span><span class="token punctuation">,</span><span class="token comment">// ä»¤mingwæŒ‰UTF-8ç¼–ç å¤„ç†ï¼ˆæ­¤å‚æ•°å¯ä»¥ä¸è®¾ç½®ï¼‰//</span><span class="token string">"${file}"</span><span class="token punctuation">,</span><span class="token comment">//è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼Œé»˜è®¤åªèƒ½ç¼–è¯‘å•ä¸ªæ–‡ä»¶</span><span class="token string">"-o"</span><span class="token punctuation">,</span> <span class="token comment">//æŒ‡å®šç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶çš„åå­—,ç¼–è¯‘ä¸åŠ  -o é»˜è®¤ç”Ÿæˆå°±æ˜¯a.exe</span><span class="token string">"${fileDirname}\\Release\\${fileBasenameNoExtension}.exe"</span><span class="token punctuation">,</span>                <span class="token string">"-I"</span><span class="token punctuation">,</span><span class="token string">"D:/code_env/opencv_460_build/install/include"</span><span class="token punctuation">,</span>                <span class="token string">"-I"</span><span class="token punctuation">,</span><span class="token string">"D:/code_env/opencv_460_build/install/include/opencv2"</span><span class="token punctuation">,</span>                <span class="token string">"-I ${fileDirname}\\..\\include"</span><span class="token punctuation">,</span><span class="token comment">//æ·»åŠ æœ¬åœ°æ–‡ä»¶çš„å¤´æ–‡ä»¶è·¯å¾„,å¦åˆ™æç¤ºå¤´æ–‡ä»¶æ‰¾ä¸åˆ°</span><span class="token string">"-L"</span><span class="token punctuation">,</span><span class="token string">"D:/code_env/opencv_460_build/bin"</span><span class="token punctuation">,</span><span class="token string">"-l"</span><span class="token punctuation">,</span><span class="token string">"libopencv_world460"</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"${workspaceFolder}"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token property">"problemMatcher"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$gcc"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"kind"</span><span class="token operator">:</span> <span class="token string">"build"</span><span class="token punctuation">,</span><span class="token property">"isDefault"</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// å¼€å¯ç¼–è¯‘å¿«æ·é”®, ctrl + shift + B</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token property">"detail"</span><span class="token operator">:</span> <span class="token string">"ç¼–è¯‘å™¨: D:/code_env/mingw64/bin/g++.exe"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">//launch</span><span class="token punctuation">{</span>    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>    <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"opencv460"</span><span class="token punctuation">,</span>            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"cppdbg"</span><span class="token punctuation">,</span>            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span>            <span class="token property">"program"</span><span class="token operator">:</span> <span class="token string">"${workspaceFolder}\\Release\\${fileBasenameNoExtension}.exe"</span><span class="token punctuation">,</span>            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token property">"stopAtEntry"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">//è¿™é‡Œå¦‚æœä¸º falseï¼Œåˆ™è¯´æ˜è°ƒè¯•ç›´æ¥è¿è¡Œã€‚ï¼ˆåä¹‹åˆ™åœæ­¢ï¼‰</span>            <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"${workspaceFolder}"</span><span class="token punctuation">,</span>            <span class="token property">"environment"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token property">"externalConsole"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//æ˜¯å¦è°ƒç”¨å¤–éƒ¨cmd</span>            <span class="token property">"MIMode"</span><span class="token operator">:</span> <span class="token string">"gdb"</span><span class="token punctuation">,</span>             <span class="token property">"miDebuggerPath"</span><span class="token operator">:</span> <span class="token string">"D:/code_env/mingw64/bin/gdb.exe"</span><span class="token punctuation">,</span>            <span class="token property">"setupCommands"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"ä¸º gdb å¯ç”¨æ•´é½æ‰“å°"</span><span class="token punctuation">,</span>                    <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"-enable-pretty-printing"</span><span class="token punctuation">,</span>                    <span class="token property">"ignoreFailures"</span><span class="token operator">:</span> <span class="token boolean">false</span>                <span class="token punctuation">}</span>            <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token property">"preLaunchTask"</span><span class="token operator">:</span> <span class="token string">"opencv460"</span>        <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå¯ä»¥å†™ä»£ç äº†</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cv<span class="token double-colon punctuation">::</span>Mat img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>VideoCapture <span class="token function">capture</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> key<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        capture <span class="token operator">&gt;&gt;</span> img<span class="token punctuation">;</span>        cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>        key<span class="token operator">=</span>cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">==</span><span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<kbd>ctrl</kbd>+<kbd>shift</kbd>+<kbd>b</kbd>è¿è¡Œã€‚æˆ–æŒ‰<kbd>F5</kbd>è¿è¡Œä¹Ÿå¯ä»¥ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå·²ç»é…ç½®å®Œæ¯•äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ML æœ´ç´ è´å¶æ–¯</title>
      <link href="/2023/02/01/ML-1-Bayes/"/>
      <url>/2023/02/01/ML-1-Bayes/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>æœ´ç´ è´å¶æ–¯</h1><h2 id="ä¸€ã€å‰ç½®çŸ¥è¯†å›é¡¾">ä¸€ã€å‰ç½®çŸ¥è¯†å›é¡¾</h2><p>é¦–å…ˆå‘¢ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“çš„<strong>æ¦‚ç‡è®º</strong>çŸ¥è¯†æœ‰ï¼š</p><ul><li><p>æ¡ä»¶æ¦‚ç‡<br>$$<br>P(A|B)=\frac{P(AB)}{P(B)}<br>$$</p></li><li><p>å…¨æ¦‚ç‡å…¬å¼<br>$$<br>P(B)=P(B|A)P(A)+P(B|Aâ€™)P(Aâ€™)<br>$$<br>å…¨æ¦‚ç‡è¡¨ç¤ºçš„æ˜¯ï¼Œè¾¾åˆ°æŸä¸ªç›®çš„çš„å¤šç§æ–¹å¼å„è‡ªæ¦‚ç‡çš„å’Œã€‚</p></li><li><p>è´å¶æ–¯å…¬å¼<br>$$<br>P(A|B)=P(A)\frac{P(B|A)}{P(B)}<br>$$</p><ul><li><p>P(A)æ˜¯Açš„"å…ˆéªŒæ¦‚ç‡"ï¼ˆPrior probabilityï¼‰ï¼Œå³<strong>Aä¸å—Bå½±å“æ—¶çš„æ¦‚ç‡</strong>ã€‚</p></li><li><p>P(B)æ˜¯Bçš„å…ˆéªŒæ¦‚ç‡</p></li><li><p>P(A|B)ç§°ä¸º"åéªŒæ¦‚ç‡"ï¼ˆPosterior probabilityï¼‰ï¼Œå³åœ¨Bäº‹ä»¶å‘ç”Ÿä¹‹åï¼Œå¯¹Aäº‹ä»¶æ¦‚ç‡çš„é‡æ–°è¯„ä¼°ã€‚</p></li><li><p>P(B|A)æ˜¯æ¡ä»¶æ¦‚ç‡ï¼Œä¹Ÿå«ä¼¼ç„¶æ¦‚ç‡ã€‚</p></li><li><p>P(B|A)/P(B)ç§°ä¸º"å¯èƒ½æ€§å‡½æ•°"ï¼ˆLikelyhoodï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªè°ƒæ•´å› å­ï¼Œä½¿å¾—é¢„ä¼°æ¦‚ç‡æ›´æ¥è¿‘çœŸå®æ¦‚ç‡ã€‚</p></li><li><p>æ‰€ä»¥ï¼Œæ¡ä»¶æ¦‚ç‡å¯ä»¥ç†è§£æˆï¼š<br>$$<br>åéªŒæ¦‚ç‡ ï¼ å…ˆéªŒæ¦‚ç‡\timesè°ƒæ•´å› å­<br>$$</p></li></ul></li></ul><hr><h2 id="äºŒã€æœ´ç´ è´å¶æ–¯æ³•">äºŒã€æœ´ç´ è´å¶æ–¯æ³•</h2><blockquote><p>æœ´ç´ è´å¶æ–¯æ³• = è´å¶æ–¯å®šç† + ç‰¹å¾æ¡ä»¶ç‹¬ç«‹ã€‚</p></blockquote><h2 id="æœ´ç´ è´å¶æ–¯åˆ†ç±»å¯¹æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒåšäº†æ¡ä»¶ç‹¬ç«‹æ€§çš„å‡è®¾ã€‚ç®€å•ç²—æš´åœ°è®¾å®šæ ·æœ¬ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ ·æœ¬çš„å‡ºç°é¡ºåºä¸ä¸Šä¸‹æ–‡å…³ç³»å¹¶ä¸å½±å“è®¡ç®—ç»“æœã€‚-P-A-B-Y-P-A-Y-cdot-P-B-Y"><strong>æœ´ç´ è´å¶æ–¯åˆ†ç±»</strong>å¯¹æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒåšäº†<strong>æ¡ä»¶ç‹¬ç«‹æ€§çš„å‡è®¾</strong>ã€‚ç®€å•ç²—æš´åœ°è®¾å®šæ ·æœ¬ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ ·æœ¬çš„å‡ºç°é¡ºåºä¸ä¸Šä¸‹æ–‡å…³ç³»å¹¶ä¸å½±å“è®¡ç®—ç»“æœã€‚<br>$$<br>P(A,B|Y)=P(A|Y)\cdot P(B|Y)<br>$$</h2><p>è®¾è¾“å…¥ç©ºé—´$\mathcal X\subseteq R^n$ä¸ºnç»´å‘é‡çš„é›†åˆï¼Œè¾“å‡ºç©ºé—´ä¸ºç±»åˆ«æ ‡ç­¾é›†åˆ$\mathcal Y={c_1,c_2,\cdots,c_n}$ï¼›</p><p>è®¾è¾“å…¥çš„ç‰¹å¾å‘é‡ä¸º$x\in\mathcal X$ï¼Œè¾“å‡ºç±»åˆ«æ ‡ç­¾$y\in\mathcal Y$ï¼ŒXæ˜¯æ»¡è¶³$\mathcal X$å®šä¹‰çš„éšæœºå‘é‡ã€‚Yä¹Ÿæ˜¯ï¼Œæ˜¯è¾“å‡ºç©ºé—´$\mathcal Y$å®šä¹‰ä¸Šçš„éšæœºå˜é‡ã€‚P(X,Y)æ˜¯Xå’ŒYçš„è”åˆåˆ†å¸ƒï¼Œåˆ™æˆ‘ä»¬è®­ç»ƒç”¨çš„æ•°æ®é›†å¯ä»¥è¿™ä¹ˆæè¿°ï¼ˆç”±P(X,Y)ç‹¬ç«‹åŒåˆ†å¸ƒäº§ç”Ÿï¼‰ï¼š<br>$$<br>T=\left\{ (x_1,y_1),(x_2,y_2),\cdots,(x_n,y_n) \right\}<br>$$<br>æœ´ç´ è´å¶æ–¯ç®—æ³•ä¸»è¦å­¦ä¹ <strong>å…ˆéªŒæ¦‚ç‡</strong>å’Œ<strong>æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ</strong>ï¼š</p><ul><li><p>å…ˆéªŒæ¦‚ç‡åˆ†å¸ƒä¸º$P(Y=c_k),k=1,2,\cdots,K$ï¼Œå¼ºè°ƒä¸€ä¸‹è¿™é‡Œçš„kæ˜¯æŒ‡ç¬¬kä¸ªç±»åˆ«</p></li><li><p>æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒä¸º$P(X=x|Y=c_k)=P(X^{(1)}=x^{(1)},\cdots,X^{(n)}=x^{(n)}|Y=c_k)$</p><p>å…¶ä¸­ï¼Œæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ$P(X=x|Y=c_k)$å¯æ˜¯æœ‰ç€æŒ‡æ•°çº§åˆ«æ•°é‡çš„å‚æ•°ï¼Œç”¨æ¥ä¼°è®¡æ˜¯å¾ˆä¸ç°å®çš„ã€‚</p><p>å‡è®¾$x^{(j)}$å¯å–å€¼æœ‰$S_j$ä¸ªï¼ˆj=1,2,3,â€¦,nï¼‰ï¼ŒYå¯å–å€¼æœ‰Kä¸ªï¼Œé‚£ä¹ˆå‚æ•°ä¸ªæ•°ä¸º$K\prod_{j=1}^kS_j$</p></li></ul><p>æœ´ç´ è´å¶æ–¯æ³•<strong>å¯¹æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ</strong>åšäº†<strong>æ¡ä»¶ç‹¬ç«‹æ€§å‡è®¾</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºçš„å‡è®¾ï¼Œæè¿°æˆæ•°å­¦è¯­è¨€å°±æ˜¯ï¼š<br>$$<br>P(X=x|Y=c_k)=P(X^{(1)}=x^{(1)},\cdots,X^{(n)}=x^{(n)}|Y=c_k)\\=<br>\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)<br>$$<br><strong>æœ´ç´ è´å¶æ–¯æ³•å®é™…ä¸Šå­¦åˆ°çš„æ˜¯ç”Ÿæˆæ•°æ®çš„æœºåˆ¶</strong>ï¼Œå±äº<strong>ç”Ÿæˆæ¨¡å‹</strong>ã€‚</p><p>æ¡ä»¶ç‹¬ç«‹å‡è®¾ç­‰äºè¯´ç”¨äºåˆ†ç±»çš„ç‰¹å¾åœ¨ç±»åˆ«ç¡®å®šçš„æ¡ä»¶ä¸‹ï¼Œéƒ½æ˜¯æ¡ä»¶ç‹¬ç«‹çš„ã€‚è¿™ä½¿å¾—æœ´ç´ è´å¶æ–¯æ³•å˜å¾—ç®€å•ï¼Œä¹Ÿå› æ­¤æŸå¤±äº†ä¸€å®šçš„å‡†ç¡®ç‡ã€‚</p><p>æœ´ç´ è´å¶æ–¯åœ¨åˆ†ç±»çš„æ—¶å€™ï¼Œå¯¹ç»™å®šçš„è¾“å…¥xé€šè¿‡å­¦ä¹ åˆ°çš„æ¨¡å‹ï¼Œè®¡ç®—åéªŒæ¦‚ç‡åˆ†å¸ƒ$P(Y=c_k|X=x)$ï¼Œå°†åéªŒæ¦‚ç‡æœ€å¤§çš„ç±»ä½œä¸ºxçš„ç±»è¾“å‡ºã€‚è¿™ä¸ªåéªŒæ¦‚ç‡è®¡ç®—æ ¹æ®è´å¶æ–¯å®šç†è¿›è¡Œçš„ï¼š<br>$$<br>P(Y=c_k|X=x)\\=<br>\frac{P(X=x|Y=c_k)P(Y=c_k)}{\sum_{k}P(X=x|Y=c_k)P(Y=c_k)}<br>$$<br>ä¸Šé¢è¿™ä¸ªå¼å­ä»£å…¥$\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)$å°±ä¼šå¾—åˆ°ï¼š<br>$$<br>P(Y=c_k|X=x)\\=<br>\frac{P(Y=c_k)\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)}{\sum_{k}P(Y=c_k)\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)}<br>$$<br>è¿™æ˜¯æœ´ç´ è´å¶æ–¯åˆ†ç±»çš„åŸºæœ¬å…¬å¼ï¼Œæ‰€ä»¥åˆ†ç±»å™¨å¯ä»¥å†™ä¸ºï¼š<br>$$<br>y=f(x)\\=<br>\arg\max_{c_k}<br>\frac{P(Y=c_k)\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)}{\sum_{k}P(Y=c_k)\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)}<br>$$<br>è®¡ç®—åéªŒæ¦‚ç‡çš„å¼å­ä¸­ï¼Œ<strong>åˆ†æ¯</strong>å¯¹æ‰€æœ‰$c_k$ç±»åˆ«<strong>éƒ½æ˜¯ç›¸åŒçš„</strong>ï¼Œæ‰€ä»¥çœç•¥å»ï¼š<br>$$<br>y=f(x)=\arg\max_{c_k}P(Y=c_k)\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)<br>$$</p><h3 id="1ã€åéªŒæ¦‚ç‡æœ€å¤§åŒ–çš„å«ä¹‰">1ã€åéªŒæ¦‚ç‡æœ€å¤§åŒ–çš„å«ä¹‰</h3><p>æœ´ç´ è´å¶æ–¯æ³•å°†æ”¶åˆ°çš„æ ·æœ¬åˆ†åˆ°åéªŒæ¦‚ç‡æœ€å¤§çš„ç±»ä¸­ï¼Œå‡è®¾æŸå¤±ç”¨çš„0-1æŸå¤±ï¼š<br>$$<br>L(Y,f(x))=<br>\left\{<br>\begin{matrix}<br>1,Y\ne f(x) \\<br>0,Y = f(x)<br>\end{matrix}\right.<br>$$<br>å¼å­é‡Œçš„f(x)æ˜¯åˆ†ç±»å†³ç­–å‡½æ•°ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æŸå¤±å‡½æ•°æ±‚ä¸ªæœŸæœ›ï¼Œå¾—åˆ°æœŸæœ›é£é™©å‡½æ•°ï¼š<br>$$<br>R_{\exp}(f)=E[L(Y,f(X))]<br>$$<br>æˆ‘ä»¬è¦æŸå¤±æœ€å°åŒ–çš„è¯ï¼Œè¿™ä¸ªæœŸæœ›é£é™©ä¹Ÿå°±è¦æœ€å°åŒ–ï¼š<br>$$<br>\min(E[L(Y,f(X))])<br>$$<br>ç”±äºæœ¬ç¯‡ä¸­è´å¶æ–¯æ–¹æ³•é‡‡ç”¨çš„æ˜¯æ¡ä»¶æ¦‚ç‡çš„å½¢å¼ï¼Œå› æ­¤è¿™é‡Œçš„æœŸæœ›ä¹Ÿåº”è¯¥æ˜¯æ¡ä»¶æœŸæœ›ã€‚</p><p>è¿™é‡Œå¤§Yæ˜¯æœ‰Kä¸ªç±»ï¼Œæ‰€ä»¥æœ‰Kä¸ªå–å€¼ã€‚</p><p>æœŸæœ›æ˜¯å¯¹P(X,Y)å–çš„ï¼Œç›®çš„æ˜¯æƒ³çŸ¥é“<code>X</code>å½’å±äº$c_k$ç±»åˆ«çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼š<br>$$<br>R_{\exp}(f)=E_X\sum_{i=1}^K[L(c_k,f(X))]P(c_k|X)<br>$$<br>ç°åœ¨ï¼Œæˆ‘ä»¬æŸå¤±æœ€å°åŒ–é—®é¢˜å°±è½¬ä¸º ä½¿è¿™ä¸ªæ¡ä»¶æœŸæœ›$R_{\exp}(f)$æœ€å°åŒ–é—®é¢˜äº†</p><p>è€Œè¦æƒ³æ¡ä»¶æœŸæœ›æœ€å°åŒ–ï¼Œåªéœ€è¦å¯¹$X=x$çš„æ¯ä¸€ä¸ªç‚¹æ±‚æœ€å°å€¼å³å¯ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å¯¹ä»»æ„ä¸€ä¸ªå°xçš„ç‚¹ï¼Œå–å®ƒå¯¹åº”çš„å†³ç­–å‡½æ•°$f(X)$ï¼Œè¿™ä¸ª$f(x)$å¯¹åº”ç€æŸä¸€ä¸ªç±»ã€‚æ€ä¹ˆé€‰è¿™ä¸ªç±»å‘¢ï¼Ÿå°±æ˜¯ä½¿æœŸæœ›é£é™©è¾¾åˆ°æœ€å°çš„æ—¶å€™å¯¹åº”çš„é‚£ä¸ªç±»ã€‚è¿™é‡Œå†™æˆ$\arg\min$å½¢å¼ï¼š<br>$$<br>f(x)=\arg\min_{y\in\mathcal Y}\sum_{k=1}^{K}L(c_k,y)P(c_k|X=x)<br>$$<br>å› ä¸ºåªæœ‰åˆ†ç±»é”™çš„æ—¶å€™æœ‰å€¼ï¼Œæ‰€ä»¥å†™æˆï¼š<br>$$<br>f(x)=\arg\min_{y\in\mathcal Y}\sum_{k=1}^{K}L(c_k,y)P(c_k|X=x)\\=<br>\arg\min_{y\in\mathcal Y}\sum_{k=1}^KP(y\ne c_k|X=x)\\=<br>\arg\min_{y\in\mathcal Y}(1-P(y=c_k|X=x))\\=<br>\arg\max_{y\in\mathcal Y}P(y=c_k|X=x)<br>$$<br>è¿™æ ·ä¸€æ¥ï¼Œæ ¹æ®<strong>æœŸæœ›é£é™©æœ€å°åŒ–</strong>å‡†åˆ™å°±å¾—åˆ°äº†<strong>åéªŒæ¦‚ç‡æœ€å¤§åŒ–å‡†åˆ™</strong>ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„æ¨æ–­æ€»ç»“æˆä¸‹é¢çš„å¼å­ï¼š<br>$$<br>f(x)=\arg\max_{c_k}P(c_k|X=x)<br>$$<br>ä¹Ÿå°±æ˜¯æœ´ç´ è´å¶æ–¯æ‰€é‡‡ç”¨çš„åŸç†</p><h2 id="ä¸‰ã€æœ´ç´ è´å¶æ–¯çš„å‚æ•°ä¼°è®¡">ä¸‰ã€æœ´ç´ è´å¶æ–¯çš„å‚æ•°ä¼°è®¡</h2><p>å› ä¸ºæœ´ç´ è´å¶æ–¯åˆ†ç±»æ³•æœ€ç»ˆä½¿ç”¨çš„æ–¹æ³•æ˜¯ï¼š<br>$$<br>y=\arg\max_{c_k}P(Y=c_k)\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)<br>$$<br>åœ¨æœ´ç´ è´å¶æ–¯ä¸­ï¼Œå­¦ä¹ æ„å‘³ç€è¦ä¼°è®¡$P(Y=c_k)$å’Œ$P(X^{(j)}=x^{(j)}|Y=c_k)$ã€‚æ˜¯æ€»ä½“ä¸­n+1ä¸ªå‚æ•°ã€‚</p><p>è¦æƒ³ä¼°è®¡è¿™äº›å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨æ ·æœ¬ï¼ˆä¹Ÿå°±æ˜¯æœºå™¨å­¦ä¹ ä¸­çš„è®­ç»ƒé›†ï¼‰æ¥è¿›è¡Œå‚æ•°ä¼°è®¡ã€‚ä¼°è®¡è¿™äº›å‚æ•°çš„è¿‡ç¨‹å°±æ˜¯æ¨¡å‹è®­ç»ƒã€‚</p><p>å¯ä»¥ä½¿ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡æ³•ä¼°è®¡ç›¸åº”çš„æ¦‚ç‡ã€‚å…ˆéªŒæ¦‚ç‡$P(Y=c_k)$çš„æå¤§ä¼¼ç„¶ä¼°è®¡æ˜¯ï¼š<br>$$<br>P(Y=c_k)=\frac{\sum_{i=1}^NI(y_i=c_k)}{N}\\<br>k=1,2,\cdots,K<br>$$<br>è®¾ç¬¬jä¸ªç‰¹å¾$x^{(j)}$å¯èƒ½å–å€¼çš„é›†åˆä¸º${a_{j1},a_{j2},\cdots,a_{jS_j}}$ï¼Œåˆ™æ¡ä»¶æ¦‚ç‡$P(X^{(j)}=a_{jl}|Y=c_k)$çš„æå¤§ä¼¼ç„¶ä¼°è®¡ä¸ºï¼š<br>$$<br>P(X^{(j)}=a_{jl}|Y=c_k)=<br>\frac{\sum_{i=1}^NI(x_i^{(j)}=a_{jl}|y_i=c_k)}{\sum_{i=1}^NI(y_i=c_k)}\\<br>k=1,2,\cdots,K\<br>j=1,2,\cdots,n\<br>l=1,2,\cdots,S_j<br>$$</p><blockquote><p>å¼å­ä¸­ï¼š</p><p>$c_k$æ˜¯ç¬¬kä¸ªç±»åˆ«ï¼Œ$c_k\in{c_1,c_2,\cdots,c_K}$</p><p>$x_i^{(j)}$æ˜¯ç¬¬<code>i</code>ä¸ªæ ·æœ¬çš„ç¬¬<code>j</code>ä¸ªç‰¹å¾ï¼›</p><p>$a_{jl}$æ˜¯ç¬¬<code>j</code>ä¸ªç‰¹å¾å¯èƒ½å–çš„ç¬¬<code>l</code>ä¸ªå€¼ï¼›</p><p><code>I</code>æ˜¯æŒ‡ç¤ºå‡½æ•°ï¼Œ$y_i=c_k$æ—¶ï¼Œå€¼ä¸º1</p><p><code>N</code>æ˜¯æ ·æœ¬æ•°é‡</p></blockquote><p>æ‰€ä»¥ä¸Šå¼ä¸­ï¼Œåˆ†æ¯å°±æ˜¯æ‰€å±ç±»åˆ«ä¸­ï¼Œæ‰€å±å®ä¾‹ç‚¹çš„ä¸ªæ•°</p><p>åˆ†å­å°±æ˜¯ç¬¬jä¸ªç‰¹å¾ç­‰äº$a_{jl}$çš„æ—¶å€™ï¼Œå¹¶ä¸”ä¹Ÿå±äº$c_k$è¿™ä¸ªç±»çš„æ—¶å€™ï¼Œå…±æœ‰å¤šå°‘ä¸ªå®ä¾‹ç‚¹</p><p>è¿™ä¿©ä¸ªæ•°ä¸€æ¯”ï¼Œå°±æ˜¯æˆ‘ä»¬è¦æ±‚å‡ºæ¥çš„æ¡ä»¶æ¦‚ç‡</p><hr><p>è¿™ä¸ªæ¡ä»¶æ¦‚ç‡æˆ‘ä»¬éœ€è¦è®¡ç®—å¤šå°‘ä¸ªï¼Ÿä¾‹å­ä¸­æœ‰å¤§<code>K</code>ä¸ªç±»åˆ«ï¼Œç®—ä¸Šä¸åŒç‰¹å¾ä¸­å„æœ‰å¤šå°‘ä¸ªé€‰æ‹©ï¼Œå¦‚ç¬¬ä¸€ä¸ªç‰¹å¾æœ‰S1ä¸ªé€‰æ‹©ï¼Œç¬¬äºŒä¸ªç‰¹å¾æœ‰S2ä¸ªã€‚ã€‚ã€‚å¯ä»¥å†™æˆå¦‚ä¸‹å½¢å¼ï¼Œè¿™å°±æ˜¯<strong>è¦è®¡ç®—çš„æ¡ä»¶æ¦‚ç‡çš„ä¸ªæ•°</strong>ï¼š<br>$$<br>K\times S_1\times S_2\times \cdots\times S_n<br>$$<br>ä½†è¿™é‡Œå…¶å®åº”è¯¥æ˜¯åŠ æ³•ï¼Œå› ä¸ºæœ´ç´ è´å¶æ–¯æœ‰äº†æ¡ä»¶ç‹¬ç«‹å‡è®¾ï¼Œæ²¡æœ‰çš„è¯å°±æ˜¯ä¹˜æ³•ã€‚ä¹Ÿå¯ä»¥çœ‹å‡ºæ¡ä»¶ç‹¬ç«‹å‡è®¾çš„ä¼˜åŒ–æœ‰å¤šå¤§ï¼š<br>$$<br>K(S_1+S_2+\cdots+S_n)<br>$$</p><h2 id="å››ã€å­¦ä¹ ä¸åˆ†ç±»ç®—æ³•">å››ã€å­¦ä¹ ä¸åˆ†ç±»ç®—æ³•</h2><p>å¯¹äºä¸€ä¸ªåˆ†ç±»é—®é¢˜æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›è¾“å…¥æ•°æ®é›†$T=\left\{ (x_1,y_1),(x_2,y_2),\cdots,(x_n,y_n) \right\}$å’Œå®ä¾‹$x=(x^{(1)}),x^{(2)}),\cdots,x^{(n)})$ï¼Œè¾“å‡ºå®ä¾‹xæ‰€å±çš„ç±»åˆ«yã€‚</p><ul><li><p>1ã€è®¡ç®—å…ˆéªŒæ¦‚ç‡å’Œæ¡ä»¶æ¦‚ç‡<br>$$<br>P(Y=c_k)=\frac{\sum_{i=1}^NI(y_i=c_k)}{N}\\<br>P(X^{(j)}=a_{jl}|Y=c_k)=<br>\frac{\sum_{i=1}^NI(x_i^{(j)}=a_{jl}|y_i=c_k)}{\sum_{i=1}^NI(y_i=c_k)}\\<br>k=1,2,\cdots,K\\<br>j=1,2,\cdots,n\\<br>l=1,2,\cdots,S_j<br>$$</p></li><li><p>2ã€å¯¹äºç»™å®šçš„å®ä¾‹$x=(x^{(1)}),x^{(2)}),\cdots,x^{(n)})^T$ï¼Œè®¡ç®—<br>$$<br>P(Y=c_k)\prod_{i=1}^{n}<br>$$</p></li><li><p>3ã€ç¡®å®šå®ä¾‹xçš„ç±»åˆ«<br>$$<br>y=\arg\max_{c_k}P(Y=c_k)\prod_{j=1}^nP(X^{(j)}=x^{(j)}|Y=c_k)<br>$$</p></li></ul><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼Œè¿™é‡Œç”¨çš„æ˜¯ã€Šæœºå™¨å­¦ä¹ æ–¹æ³•ã€‹é‡Œçš„æ —å­ï¼š</p><p><img src="https://s2.loli.net/2023/01/31/b9OoIkxuvVtneWA.png" alt=""></p><p>ç°åœ¨è¦è®¡ç®—çš„æ˜¯ç‚¹$x=(2,S)^T$çš„æ‰€å±ç±»åˆ«</p><p>æ ¹æ®ä¸Šè¡¨æˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š<br>$$<br>P(Y=1)=\frac{9}{15}<br>P(Y=-1)=\frac{6}{15}<br>$$</p><table><thead><tr><th></th><th>$X^{(1)}$</th><th>$X^{(1)}$</th><th>$X^{(1)}$</th><th>$X^{(2)}$</th><th>$X^{(2)}$</th><th>$X^{(2)}$</th></tr></thead><tbody><tr><td></td><td>1</td><td>2</td><td>3</td><td>S</td><td>M</td><td>L</td></tr><tr><td>Y=1</td><td>2/9</td><td>3/9</td><td>4/9</td><td>1/9</td><td>4/9</td><td>4/9</td></tr><tr><td>Y=-1</td><td>3/6</td><td>2/6</td><td>1/6</td><td>3/6</td><td>2/6</td><td>1/6</td></tr></tbody></table><p>å¯¹äºç»™å®šçš„$x=(2,S)^T$<br>$$<br>P(Y=1)P(X^{(1)}=2|Y=1)P(X^{(2)}=S|Y=1)\\=<br>\frac{9}{15}\times\frac{3}{9}\times\frac{1}{9}=\frac{1}{45}\\<br>P(Y=-1)P(X^{(1)}=2|Y=-1)P(X^{(2)}=S|Y=-1)\\=<br>\frac{6}{15}\times\frac{2}{6}\times\frac{3}{6}=\frac{1}{15}<br>$$<br>å› ä¸º$P(Y=-1)P(X^{(1)}=2|Y=-1)P(X^{(2)}=S|Y=-1)$ä¼°è®¡çš„å€¼æœ€å¤§ï¼Œæ‰€ä»¥y=-1</p><h2 id="äº”ã€è´å¶æ–¯ä¼°è®¡">äº”ã€è´å¶æ–¯ä¼°è®¡</h2><p>ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šå› ä¸ºæŸç±»ç»Ÿè®¡çš„æ ·æœ¬ä¸º0ç­‰åŸå› ï¼Œå¯¼è‡´çš„æ¦‚ç‡å€¼ä¸º0çš„æƒ…å†µã€‚è¿™ä¼šå½±å“åéªŒæ¦‚ç‡çš„è®¡ç®—ç»“æœï¼Œå½±å“åˆ†ç±»çš„ç»“æœ</p><p>è§£å†³è¿™ä¸€é—®é¢˜çš„åŠæ³•æ˜¯ä½¿ç”¨è´å¶æ–¯ä¼°è®¡ï¼š</p><p>å…ˆéªŒæ¦‚ç‡çš„è´å¶æ–¯ä¼°è®¡ï¼š<br>$$<br>P_\lambda(Y=c_k)=\frac{\sum_{i=1}^NI(y_i=c_k)+\lambda}{N+K\lambda}<br>$$<br>è¿™é‡Œåˆ†æ¯åŠ ä¸Š$K\lambda$æ˜¯ä¸ºäº†æ‰€æ±‚çš„æ¦‚ç‡å’Œä¸º1ï¼š<br>$$<br>\sum_{k=1}^{K}P_\lambda(Y=c_k)=1<br>$$<br>æ¡ä»¶æ¦‚ç‡çš„è´å¶æ–¯ä¼°è®¡ï¼š<br>$$<br>P_\lambda(X^{(j)}=a_{jl}|Y=c_k)=<br>\frac{\sum_{i=1}^NI(x_i^{(j)}=a_{jl}|y_i=c_k)+\lambda}{\sum_{i=1}^NI(y_i=c_k)+S_j\lambda}<br>\\\lambda\ge0<br>$$</p><p>è¿™é‡Œåˆ†æ¯åŠ ä¸Š$s_k\lambda$ä¹Ÿæ˜¯ä¸ºäº†æ‰€æ±‚æ¦‚ç‡å’Œä¸º1ï¼š<br>$$<br>\sum_{l=1}^{S_i}P_\lambda(X^{(j)}=a_{jl}|Y=c_k)=1<br>$$</p><blockquote><p>è¿™é‡Œçš„$\lambda=0$çš„æ—¶å€™ä¸ºæå¤§ä¼¼ç„¶ä¼°è®¡ï¼Œ$\lambda=1$çš„æ—¶å€™ç§°ä¸ºæ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplacian Smoothingï¼‰</p></blockquote><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼Œè¿˜æ˜¯åˆšåˆšçš„æ•°æ®ï¼š</p><p><img src="https://s2.loli.net/2023/01/31/b9OoIkxuvVtneWA.png" alt=""></p><table><thead><tr><th></th><th>$X^{(1)}$</th><th>$X^{(1)}$</th><th>$X^{(1)}$</th><th>$X^{(2)}$</th><th>$X^{(2)}$</th><th>$X^{(2)}$</th></tr></thead><tbody><tr><td></td><td>1</td><td>2</td><td>3</td><td>S</td><td>M</td><td>L</td></tr><tr><td>Y=1</td><td>3/12</td><td>4/12</td><td>5/12</td><td>2/12</td><td>5/12</td><td>5/12</td></tr><tr><td>Y=-1</td><td>4/9</td><td>3/9</td><td>2/9</td><td>4/9</td><td>3/9</td><td>2/9</td></tr></tbody></table><p>å¯¹äºç»™å®šçš„$x=(2,S)^T$<br>$$<br>P(Y=1)P(X^{(1)}=2|Y=1)P(X^{(2)}=S|Y=1)\\=<br>\frac{10}{17}\times\frac{4}{12}\times\frac{2}{12}=\frac{5}{153}=0.0327\\<br>P(Y=-1)P(X^{(1)}=2|Y=-1)P(X^{(2)}=S|Y=-1)\\=<br>\frac{7}{17}\times\frac{3}{9}\times\frac{4}{9}=\frac{28}{459}=0.0610<br>$$<br>å› ä¸º$P(Y=-1)P(X^{(1)}=2|Y=-1)P(X^{(2)}=S|Y=-1)$ä¼°è®¡çš„å€¼æœ€å¤§ï¼Œæ‰€ä»¥y=-1</p>]]></content>
      
      
      <categories>
          
          <category> æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLAM 3.5ï¼šSophusåŸºç¡€</title>
      <link href="/2023/01/16/slam-3-5-sophus/"/>
      <url>/2023/01/16/slam-3-5-sophus/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>SLAM 3.5 Sophuså®è·µ</h1><p>å‰é¢ç†è®ºè®²è¿°äº†å¾ˆå¤šï¼Œè¿™é‡Œé’ˆå¯¹æç¾¤æä»£æ•°éƒ¨åˆ†åšä¸€ä¸ªä»£ç å¼€å‘çš„è¡¥å……</p><h2 id="ä¸€ã€SophusåŸºç¡€">ä¸€ã€SophusåŸºç¡€</h2><p>å‰é¢é…ç½®ç¯å¢ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æœ‰å®‰è£…ä¸€ä¸ªSophusåº“ã€‚æä»£æ•°æœ€æ—©æå‡ºçš„æ˜¯Sophus Lieï¼Œæ‰€ä»¥è¿™ä¸ªåº“å°±å«åšSophusäº†ã€‚</p><p>ç”±äºEigenæä¾›äº†å¾ˆä¸é”™çš„å‡ ä½•æ¨¡å—ï¼Œä½†æ²¡æœ‰æä¾›æç¾¤æä»£æ•°çš„æ”¯æŒï¼Œè€Œè¿™ä¸ªSophusåº“å°±æ”¯æŒã€‚ä»–æ˜¯ç›´æ¥åŸºäºEigenåº“å¼€å‘çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–çš„ä¾èµ–åº“äº†ã€‚</p><p>ä»¥ä¸‹æ¡ˆä¾‹çš„å¤´æ–‡ä»¶ä½¿ç”¨å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cmath&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Core&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Geometry&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"sophus/se3.hpp"</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> Eigen<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å£°æ˜ä¸€ä¸ªæ—‹è½¬å‘é‡ï¼Œå¹¶å±•ç¤ºå…¶æ—‹è½¬åçš„ç»“æœï¼š</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// æ²¿Zè½´è½¬90åº¦çš„æ—‹è½¬çŸ©é˜µ</span><span class="token comment">// ä¸‰ç»´æ—‹è½¬å‘é‡å¯ä»¥ç”¨è§’è½´æ¥è¡¨ç¤ºï¼Œåˆ©ç”¨Eigenåº“çš„AngleAxisd()è§’è½´ï¼ˆæ—‹è½¬å‘é‡ï¼‰å‡½æ•°</span><span class="token comment">// ç»•ç€å•ä½æ–¹å‘å‘é‡\alpha = zè½´ï¼ˆ0ï¼Œ0ï¼Œ1ï¼‰æ—‹è½¬æ¨¡é•¿ä¸º\theta = 90Â° = pi/2ï¼Œ</span><span class="token comment">// åˆ™\phi = \theta \alpha å†è°ƒç”¨toRotationMatrix()å‡½æ•°ä»è§’è½´è¡¨ç¤ºçš„æ—‹è½¬å‘é‡è½¬æ¢ä¸ºæ—‹è½¬çŸ©é˜µ</span>Matrix3d R <span class="token operator">=</span> <span class="token function">AngleAxisd</span><span class="token punctuation">(</span>M_PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token function">Vector3d</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toRotationMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æˆ–è€…å››å…ƒæ•°</span>Quaterniond <span class="token function">q</span><span class="token punctuation">(</span>R<span class="token punctuation">)</span><span class="token punctuation">;</span>Sophus<span class="token double-colon punctuation">::</span>SO3d <span class="token function">SO3_R</span><span class="token punctuation">(</span>R<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// Sophus::SO3då¯ä»¥ç›´æ¥ä»æ—‹è½¬çŸ©é˜µæ„é€ </span>Sophus<span class="token double-colon punctuation">::</span>SO3d <span class="token function">SO3_q</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// ä¹Ÿå¯ä»¥é€šè¿‡å››å…ƒæ•°æ„é€ </span><span class="token comment">// äºŒè€…æ˜¯ç­‰ä»·çš„</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"SO(3) from matrix:\n"</span> <span class="token operator">&lt;&lt;</span> SO3_R<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"SO(3) from quaternion:\n"</span> <span class="token operator">&lt;&lt;</span> SO3_q<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"they are equal"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¾“å‡ºæ•ˆæœ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">SO(3) from matrix:2.22045e-16          -1           0          1 2.22045e-16           0          0           0           1SO(3) from quaternion:2.22045e-16          -1           0          1 2.22045e-16           0          0           0           1they are equal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><ul><li>ä½¿ç”¨å¯¹æ•°æ˜ å°„è·å¾—æä»£æ•°</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä½¿ç”¨å¯¹æ•°æ˜ å°„è·å¾—å®ƒçš„æä»£æ•°</span>Vector3d so3 <span class="token operator">=</span> SO3_R<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"so3 = "</span> <span class="token operator">&lt;&lt;</span> so3<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">// hat ä¸ºå‘é‡åˆ°åå¯¹ç§°çŸ©é˜µ</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"so3 hat=\n"</span> <span class="token operator">&lt;&lt;</span> Sophus<span class="token double-colon punctuation">::</span><span class="token class-name">SO3d</span><span class="token double-colon punctuation">::</span><span class="token function">hat</span><span class="token punctuation">(</span>so3<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">// ç›¸å¯¹çš„ï¼Œveeä¸ºåå¯¹ç§°åˆ°å‘é‡</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"so3 hat vee= "</span> <span class="token operator">&lt;&lt;</span> Sophus<span class="token double-colon punctuation">::</span><span class="token class-name">SO3d</span><span class="token double-colon punctuation">::</span><span class="token function">vee</span><span class="token punctuation">(</span>Sophus<span class="token double-colon punctuation">::</span><span class="token class-name">SO3d</span><span class="token double-colon punctuation">::</span><span class="token function">hat</span><span class="token punctuation">(</span>so3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">so3 =      0      0 1.5708so3 hat=      0 -1.5708       0 1.5708       0      -0     -0       0       0so3 hat vee=      0      0 1.5708<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><ul><li>å¢é‡æ‰°åŠ¨æ¨¡å‹çš„æ›´æ–°</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å¢é‡æ‰°åŠ¨æ¨¡å‹çš„æ›´æ–°</span>Vector3d <span class="token function">update_so3</span><span class="token punctuation">(</span><span class="token number">1e-4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å‡è®¾æ›´æ–°é‡ä¸ºè¿™ä¹ˆå¤š</span>Sophus<span class="token double-colon punctuation">::</span>SO3d SO3_updated <span class="token operator">=</span> Sophus<span class="token double-colon punctuation">::</span><span class="token class-name">SO3d</span><span class="token double-colon punctuation">::</span><span class="token function">exp</span><span class="token punctuation">(</span>update_so3<span class="token punctuation">)</span> <span class="token operator">*</span> SO3_R<span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"SO3 updated = \n"</span> <span class="token operator">&lt;&lt;</span> SO3_updated<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">SO3 updated =           0          -1           0          1           0     -0.0001     0.0001 2.03288e-20           1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></blockquote><ul><li>å¯¹SE(3)æ“ä½œæ˜¯ç±»ä¼¼çš„</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å¯¹SE(3)æ“ä½œå¤§åŒå°å¼‚</span>Vector3d <span class="token function">t</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// æ²¿Xè½´å¹³ç§»1</span>Sophus<span class="token double-colon punctuation">::</span>SE3d <span class="token function">SE3_Rt</span><span class="token punctuation">(</span>R<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// ä»R,tæ„é€ SE(3)</span>Sophus<span class="token double-colon punctuation">::</span>SE3d <span class="token function">SE3_qt</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ä»q,tæ„é€ SE(3)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"SE3 from R,t= \n"</span> <span class="token operator">&lt;&lt;</span> SE3_Rt<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"SE3 from q,t= \n"</span> <span class="token operator">&lt;&lt;</span> SE3_qt<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">// æä»£æ•°se(3) æ˜¯ä¸€ä¸ªå…­ç»´å‘é‡ï¼Œæ–¹ä¾¿èµ·è§å…ˆtypedefä¸€ä¸‹</span><span class="token keyword">typedef</span> Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> Vector6d<span class="token punctuation">;</span>Vector6d se3 <span class="token operator">=</span> SE3_Rt<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"se3 = "</span> <span class="token operator">&lt;&lt;</span> se3<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">// è§‚å¯Ÿè¾“å‡ºï¼Œä¼šå‘ç°åœ¨Sophusä¸­ï¼Œse(3)çš„å¹³ç§»åœ¨å‰ï¼Œæ—‹è½¬åœ¨å.</span><span class="token comment">// åŒæ ·çš„ï¼Œæœ‰hatå’Œveeä¸¤ä¸ªç®—ç¬¦</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"se3 hat = \n"</span> <span class="token operator">&lt;&lt;</span> Sophus<span class="token double-colon punctuation">::</span><span class="token class-name">SE3d</span><span class="token double-colon punctuation">::</span><span class="token function">hat</span><span class="token punctuation">(</span>se3<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"se3 hat vee = "</span> <span class="token operator">&lt;&lt;</span> Sophus<span class="token double-colon punctuation">::</span><span class="token class-name">SE3d</span><span class="token double-colon punctuation">::</span><span class="token function">vee</span><span class="token punctuation">(</span>Sophus<span class="token double-colon punctuation">::</span><span class="token class-name">SE3d</span><span class="token double-colon punctuation">::</span><span class="token function">hat</span><span class="token punctuation">(</span>se3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¾“å‡ºæ•ˆæœï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">SE3 from R,t= 2.22045e-16          -1           0           1          1 2.22045e-16           0           0          0           0           1           0          0           0           0           1SE3 from q,t= 2.22045e-16          -1           0           1          1 2.22045e-16           0           0          0           0           1           0          0           0           0           1se3 =  0.785398 -0.785398         0         0         0    1.5708se3 hat =         0   -1.5708         0  0.785398   1.5708         0        -0 -0.785398       -0         0         0         0        0         0         0         0se3 hat vee =  0.785398 -0.785398         0         0         0    1.5708<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><ul><li>æ›´æ–°</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// æœ€åï¼Œæ¼”ç¤ºä¸€ä¸‹æ›´æ–°</span>Vector6d update_se3<span class="token punctuation">;</span> <span class="token comment">//æ›´æ–°é‡</span>update_se3<span class="token punctuation">.</span><span class="token function">setZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">update_se3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1e-4</span><span class="token punctuation">;</span>Sophus<span class="token double-colon punctuation">::</span>SE3d SE3_updated <span class="token operator">=</span> Sophus<span class="token double-colon punctuation">::</span><span class="token class-name">SE3d</span><span class="token double-colon punctuation">::</span><span class="token function">exp</span><span class="token punctuation">(</span>update_se3<span class="token punctuation">)</span> <span class="token operator">*</span> SE3_Rt<span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"SE3 updated = "</span> <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> SE3_updated<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¾“å‡ºæ•ˆæœï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">SE3 updated = 2.22045e-16          -1           0      1.0001          1 2.22045e-16           0           0          0           0           1           0          0           0           0           1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h2 id="äºŒã€ä½¿ç”¨Sophusè¯„ä¼°è½¨è¿¹è¯¯å·®">äºŒã€ä½¿ç”¨Sophusè¯„ä¼°è½¨è¿¹è¯¯å·®</h2><p>å®é™…å·¥ç¨‹ä¸­ï¼Œéœ€è¦è¯„ä¼°ä¸€ä¸ªç®—æ³•çš„<strong>ä¼°è®¡è½¨è¿¹ä¸çœŸå®è½¨è¿¹çš„å·®å¼‚</strong>æ¥è¯„ä»·ç®—æ³•çš„ç²¾åº¦ã€‚</p><p><strong>çœŸå®è½¨è¿¹</strong>Ground Truthå¾€å¾€æ˜¯é€šè¿‡æŸäº›æ›´é«˜ç²¾åº¦çš„ç³»ç»Ÿè·å¾—**ï¼Œ**</p><p><strong>ä¼°è®¡è½¨è¿¹</strong>æ˜¯é€šè¿‡å¾…è¯„ä»·ç®—æ³•çš„è®¡ç®—å¾—åˆ°ã€‚</p><p>å¦‚ä½•è®¡ç®—ä¸¤æ¡è½¨è¿¹çš„è¯¯å·®ï¼Ÿ</p><hr><p>è€ƒè™‘ä¸€æ¡ä¼°è®¡è½¨è¿¹$T_{esti,i}$å’Œ$T_{gt,i}$ï¼Œå…¶ä¸­i=1, â€¦ , Nã€‚é‚£æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›è¯¯å·®æŒ‡æ ‡æ¥æè¿°å®ƒä»¬ä¹‹é—´çš„å·®åˆ«ã€‚</p><p>è¯¯å·®æŒ‡æ ‡æœ‰å¾ˆå¤šç§ã€‚</p><ol><li>å¸¸è§çš„<strong>ç»å¯¹è½¨è¿¹è¯¯å·®ï¼ˆAbsolute Trajectory Errorï¼ŒATEï¼‰</strong></li></ol><p>$$<br>\mathbf{ATE}_{all}=\sqrt{\frac{1}{N}\sum_{i=1}^{N}\left\| \log(T_{gt,i}^{-1}T_{esti,i}) \right\|_2^2}<br>$$</p><p>å®é™…ä¸Šæ˜¯è®¡ç®—<strong>æ¯ä¸ªä½å§¿æä»£æ•°çš„å‡æ–¹æ ¹è¯¯å·®ï¼ˆRoot-Mean-Squared Errorï¼ŒRMSEï¼‰</strong>ï¼Œå¯ä»¥åˆ»ç”»ä¸¤æ¡ä¼°è®¡çš„æ—‹è½¬å’Œå¹³ç§»è¯¯å·®ã€‚</p><ol start="2"><li><strong>è€ƒè™‘å¹³ç§»è¯¯å·®</strong>çš„ï¼Œå®šä¹‰<strong>ç»å¯¹å¹³ç§»è¯¯å·®ï¼ˆAbsolute Translational Errorï¼‰</strong></li></ol><p>$$<br>\mathbf{ATE}_{trans}=\sqrt{\frac{1}{N}\sum_{i=1}^{N}\left\| trans(T_{gt,i}^{-1}T_{esti,i}) \right\|_2^2}<br>$$</p><p>å¼å­ä¸­tran å‡½æ•°è¡¨ç¤ºå–æ‹¬å·ä¸­å…ƒç´ çš„å¹³ç§»éƒ¨åˆ†ã€‚ä»æ•´æ¡è½¨è¿¹ä¸Šçœ‹ï¼Œ</p><ol start="3"><li>è¿˜å¯ä»¥å®šä¹‰ç›¸å¯¹è¯¯å·®ï¼Œä»…è€ƒè™‘iæ—¶åˆ»åˆ°i+â–³tæ—¶åˆ»çš„è¿åŠ¨ï¼Œé‚£ä¹ˆ**ç›¸å¯¹ä½å§¿è¯¯å·®ï¼ˆRelative Pose Errorï¼ŒRPEï¼‰**å¯ä»¥å®šä¹‰ä¸º</li></ol><p>$$<br>\mathbf{RPE}_{all}=\sqrt{\frac{1}{N-\Delta t}\sum_{i=1}^{N-\Delta t}\left\| \log\left( (T_{gt,i}^{-1}T_{gt,i+\Delta t})^{-1}(T_{esti,i}^{-1}T_{esti,i+\Delta t})\right)^\vee \right\|_2^2}<br>$$</p><ol start="4"><li>åŒæ ·çš„ï¼Œä¹Ÿå¯ä»¥åªå–å¹³ç§»éƒ¨åˆ†ï¼š</li></ol><p>$$<br>\mathbf{RPE}_{trans}=\sqrt{\frac{1}{N-\Delta t}\sum_{i=1}^{N-\Delta t}\left\| trans\left( (T_{gt,i}^{-1}T_{gt,i+\Delta t})^{-1}(T_{esti,i}^{-1}T_{esti,i+\Delta t})\right)^\vee \right\|_2^2}<br>$$</p><p>ä½¿ç”¨Sophusæä»£æ•°åº“å¯ä»¥å®ç°è¿™éƒ¨åˆ†è½¨è¿¹è¯¯å·®çš„è¯„ä¼°ã€‚é¦–å…ˆéœ€è¦å‡†å¤‡æ•°æ®ï¼Œè¿™é‡Œä½¿ç”¨SLAMåå››è®²æºç ä¸­å·²ç»ç»™å‡ºäº†çœŸå®è½¨è¿¹ groundtruth.txt å’Œ ä¼°è®¡è½¨è¿¹ estimate.txtï¼Œä¸‹é¢è¯»å–ä¸¤æ¡è½¨è¿¹æ•°æ®åï¼Œé€šè¿‡Sophusè®¡ç®—è½¨è¿¹é—´è¯¯å·®ï¼Œç„¶åæ˜¾ç¤ºåœ¨Pangolinçª—å£ä¸­ã€‚</p><p>æ‰€éœ€å‰ç½®å®šä¹‰çš„ä¸€äº›å†…å®¹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pangolin/pangolin.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sophus/se3.hpp&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> Sophus<span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token comment">//çœŸå®è½¨è¿¹è·¯å¾„</span>string groundtruth_file <span class="token operator">=</span> <span class="token string">"./example/groundtruth.txt"</span><span class="token punctuation">;</span><span class="token comment">//ä¼°è®¡è½¨è¿¹è·¯å¾„</span>string estimated_file <span class="token operator">=</span> <span class="token string">"./example/estimated.txt"</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">DrawTrajectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> TrajectoryType <span class="token operator">&amp;</span>gt<span class="token punctuation">,</span> <span class="token keyword">const</span> TrajectoryType <span class="token operator">&amp;</span>esti<span class="token punctuation">)</span><span class="token punctuation">;</span>TrajectoryType <span class="token function">ReadTrajectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆå§‹åŒ–SE(3)</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">TrajectoryType <span class="token function">ReadTrajectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span>  ifstream <span class="token function">fin</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ‰“å¼€è½¨è¿¹æ•°æ®æ–‡ä»¶</span>  TrajectoryType trajectory<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fin<span class="token punctuation">)</span> <span class="token punctuation">{</span>    cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"trajectory "</span> <span class="token operator">&lt;&lt;</span> path <span class="token operator">&lt;&lt;</span> <span class="token string">" not found."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> trajectory<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>fin<span class="token punctuation">.</span><span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// è½¨è¿¹æ•°æ®txtæ–‡ä»¶ä¸­æ¯ä¸€è¡Œè¡¨ç¤ºç”±æ—¶é—´æˆ³ã€å¹³ç§»å‘é‡ã€æ—‹è½¬å››å…ƒæ•°æ„æˆçš„ä¸€ä¸ªç›¸æœºwiä½å§¿</span>    <span class="token keyword">double</span> time<span class="token punctuation">,</span> tx<span class="token punctuation">,</span> ty<span class="token punctuation">,</span> tz<span class="token punctuation">,</span> qx<span class="token punctuation">,</span> qy<span class="token punctuation">,</span> qz<span class="token punctuation">,</span> qw<span class="token punctuation">;</span>    fin <span class="token operator">&gt;&gt;</span> time <span class="token operator">&gt;&gt;</span> tx <span class="token operator">&gt;&gt;</span> ty <span class="token operator">&gt;&gt;</span> tz <span class="token operator">&gt;&gt;</span> qx <span class="token operator">&gt;&gt;</span> qy <span class="token operator">&gt;&gt;</span> qz <span class="token operator">&gt;&gt;</span> qw<span class="token punctuation">;</span>    <span class="token comment">// ä½¿ç”¨è½¨è¿¹æ•°æ®ä¸­çš„æ—‹è½¬å››å…ƒæ•°å’Œå¹³ç§»å‘é‡æ¥åˆå§‹åŒ–ä¸€ä¸ªç‰¹æ®Šæ¬§å¼ç¾¤SE(3)</span>    Sophus<span class="token double-colon punctuation">::</span>SE3d <span class="token function">p1</span><span class="token punctuation">(</span><span class="token class-name">Eigen</span><span class="token double-colon punctuation">::</span><span class="token function">Quaterniond</span><span class="token punctuation">(</span>qw<span class="token punctuation">,</span> qx<span class="token punctuation">,</span> qy<span class="token punctuation">,</span> qz<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Eigen</span><span class="token double-colon punctuation">::</span><span class="token function">Vector3d</span><span class="token punctuation">(</span>tx<span class="token punctuation">,</span> ty<span class="token punctuation">,</span> tz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å°†ä½¿ç”¨æç¾¤è¡¨ç¤ºçš„å½“å‰ç›¸æœºä½å§¿å­˜å…¥è½¨è¿¹å˜é‡ä¸­</span>    trajectory<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> trajectory<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>è®¡ç®—</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//å®šä¹‰ä¸€ä¸ªç‰¹æ®Šæ¬§å¼ç¾¤SE(3)çš„vectorå®¹å™¨ï¼Œå¹¶å–ä¸ªåˆ«å</span><span class="token keyword">typedef</span> vector<span class="token operator">&lt;</span>Sophus<span class="token double-colon punctuation">::</span>SE3d<span class="token punctuation">,</span> Eigen<span class="token double-colon punctuation">::</span>aligned_allocator<span class="token operator">&lt;</span>Sophus<span class="token double-colon punctuation">::</span>SE3d<span class="token operator">&gt;&gt;</span> TrajectoryType<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// è·å–è½¨è¿¹æ•°æ®</span>  TrajectoryType groundtruth <span class="token operator">=</span> <span class="token function">ReadTrajectory</span><span class="token punctuation">(</span>groundtruth_file<span class="token punctuation">)</span><span class="token punctuation">;</span>  TrajectoryType estimated <span class="token operator">=</span> <span class="token function">ReadTrajectory</span><span class="token punctuation">(</span>estimated_file<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ£€æµ‹è¯»å–çš„è½¨è¿¹æ•°æ®æ˜¯å¦æ­£å¸¸</span>  <span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">!</span>groundtruth<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>estimated<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">assert</span><span class="token punctuation">(</span>groundtruth<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> estimated<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç®—æ¯ä¸ªä½å§¿æä»£æ•°çš„å‡æ–¹æ ¹è¯¯å·® RMSE (Root Mean Squared Error)</span>  <span class="token comment">// ä¹Ÿå°±æ˜¯ç»å¯¹è½¨è¿¹è¯¯å·® ATE (Absolute Trajectory Error)</span>  <span class="token keyword">double</span> rmse <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> estimated<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// è·å–è½¨è¿¹ä¸­æ¯ä¸ªç›¸æœºå½“å‰çš„ä¼°è®¡ä½å§¿å’ŒçœŸå®ä½å§¿æ•°æ®</span>    Sophus<span class="token double-colon punctuation">::</span>SE3d p1 <span class="token operator">=</span> estimated<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> groundtruth<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// æ ¹æ®æ¯ä¸ªçœŸå®æ•°æ®å’Œä¼°è®¡æ•°æ®ä¹‹é—´çš„ä½å§¿æä»£æ•°çš„å‡æ–¹æ ¹è¯¯å·®å…¬å¼RMSEï¼ˆä¹Ÿå°±æ˜¯ç»å¯¹è½¨è¿¹è¯¯å·®è®¡ç®—å…¬å¼ATEï¼‰</span>    <span class="token comment">// çœŸå®ä½å§¿çš„å˜æ¢çŸ©é˜µTçš„é€†ä¸ä¼°è®¡ä½å§¿çš„å˜æ¢çŸ©é˜µç›¸ä¹˜ï¼Œå–å¯¹æ•°æ˜ å°„è®¡ç®—ä½å§¿æä»£æ•°å¹¶å½’ä¸€åŒ–</span>    <span class="token keyword">double</span> error <span class="token operator">=</span> <span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> p1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">norm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç´¯åŠ è½¨è¿¹ä¸­æ¯ä¸ªç›¸æœºä½å§¿æä»£æ•°è¯¯å·®çš„å¹³æ–¹</span>    rmse <span class="token operator">+=</span> error <span class="token operator">*</span> error<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment">// å¹³å‡å€¼</span>  rmse <span class="token operator">=</span> rmse <span class="token operator">/</span> <span class="token keyword">double</span><span class="token punctuation">(</span>estimated<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ ¹å·</span>  rmse <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>rmse<span class="token punctuation">)</span><span class="token punctuation">;</span>  cout <span class="token operator">&lt;&lt;</span> <span class="token string">"RMSE = "</span> <span class="token operator">&lt;&lt;</span> rmse <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token function">DrawTrajectory</span><span class="token punctuation">(</span>groundtruth<span class="token punctuation">,</span> estimated<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ç»˜åˆ¶Pangolin</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">DrawTrajectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> TrajectoryType <span class="token operator">&amp;</span>gt<span class="token punctuation">,</span> <span class="token keyword">const</span> TrajectoryType <span class="token operator">&amp;</span>esti<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// åˆ›å»ºä¸€ä¸ªåä¸ºTrajectory Viewerçš„3Då¯è§†åŒ–çª—å£ï¼Œå¤§å°ä¸º1024 x 768</span>  pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateWindowAndBind</span><span class="token punctuation">(</span><span class="token string">"Trajectory Viewer"</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">768</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¼€å¯æ›´æ–°æ·±åº¦ç¼“å†²åŒºçš„åŠŸèƒ½ï¼Œæ˜¾ç¤º3Dæ•ˆæœçš„æ—¶å€™éœ€è¦æ‰“å¼€ï¼Œæ ¹æ®ç›®æ ‡çš„è¿œè¿‘è‡ªåŠ¨éšè—è¢«é®æŒ¡çš„æ¨¡å‹</span>  <span class="token function">glEnable</span><span class="token punctuation">(</span>GL_DEPTH_TEST<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¼€å¯é¢œè‰²æ··åˆæ¨¡å¼ï¼Œè®©ç‰©ä½“æ˜¾ç¤ºå…·æœ‰åŠé€æ˜æ•ˆæœ</span>  <span class="token function">glEnable</span><span class="token punctuation">(</span>GL_BLEND<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è®¾ç½®é¢œè‰²RGBAæ··åˆå› å­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæºå› å­ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç›®æ ‡å› å­</span>  <span class="token function">glBlendFunc</span><span class="token punctuation">(</span>GL_SRC_ALPHA<span class="token punctuation">,</span> GL_ONE_MINUS_SRC_ALPHA<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// åˆ›å»ºç›¸æœºè§†å›¾</span>  pangolin<span class="token double-colon punctuation">::</span>OpenGlRenderState <span class="token function">s_cam</span><span class="token punctuation">(</span>      <span class="token comment">//è®¾ç½®ç›¸æœºå†…å‚ï¼ˆç›¸æœºåˆ†è¾¨ç‡ã€ç„¦è·ã€ç›¸æœºå…‰å¿ƒï¼‰ä»¥åŠæœ€è¿‘æœ€è¿œè·ç¦»</span>      pangolin<span class="token double-colon punctuation">::</span><span class="token function">ProjectionMatrix</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">768</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">389</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token comment">// è®¾ç½®è§†è§’ï¼Œåœ¨ä¸–ç•Œåæ ‡(0, -0.1, -1.8)å¤„è§‚å¯Ÿåæ ‡åŸç‚¹(0, 0, 0)</span>      <span class="token comment">// å¹¶è®¾ç½®Yè½´æœä¸Š(0, -1, 0)</span>      pangolin<span class="token double-colon punctuation">::</span><span class="token function">ModelViewLookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// åˆ›å»ºäº¤äº’è§†å›¾</span>  pangolin<span class="token double-colon punctuation">::</span>View <span class="token operator">&amp;</span>d_cam <span class="token operator">=</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">SetBounds</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> pangolin<span class="token double-colon punctuation">::</span><span class="token class-name">Attach</span><span class="token double-colon punctuation">::</span><span class="token function">Pix</span><span class="token punctuation">(</span><span class="token number">175</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1024.0f</span> <span class="token operator">/</span> <span class="token number">768.0f</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">SetHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">Handler3D</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>pangolin<span class="token double-colon punctuation">::</span><span class="token function">ShouldQuit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æ¸…ç©ºé¢œè‰²å’Œæ·±åº¦ç¼“å­˜ï¼Œä¸ºé»˜è®¤å€¼</span>    <span class="token function">glClear</span><span class="token punctuation">(</span>GL_COLOR_BUFFER_BIT <span class="token operator">|</span> GL_DEPTH_BUFFER_BIT<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ¿€æ´»ç›¸æœºè§†å›¾</span>    d_cam<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºç™½è‰²</span>    <span class="token function">glClearColor</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®çº¿æ¡å®½åº¦ä¸º2</span>    <span class="token function">glLineWidth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> gt<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">//è®¾ç½®çœŸå®è½¨è¿¹çš„çº¿æ®µé¢œè‰²ä¸ºè“è‰²</span>      <span class="token function">glColor3f</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//å¼€å§‹ç”»çº¿</span>      <span class="token function">glBegin</span><span class="token punctuation">(</span>GL_LINES<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//è·å–çœŸå®è½¨è¿¹ä¸­ç¬¬ i æ—¶åˆ»å’Œç¬¬ i+1 æ—¶åˆ»ç”¨æç¾¤SE(3)è¡¨ç¤ºçš„ä½å§¿</span>      <span class="token keyword">auto</span> p1 <span class="token operator">=</span> gt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> gt<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">//å–å‡ºç¬¬ i æ—¶åˆ»ä½å§¿çš„å¹³ç§»å‘é‡ï¼Œä½œä¸ºè¯¥çº¿æ®µèµ·ç‚¹çš„é¡¶ç‚¹åæ ‡</span>      <span class="token function">glVertex3d</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p1<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p1<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//å–å‡ºç¬¬ i+1 æ—¶åˆ»ä½å§¿çš„å¹³ç§»å‘é‡ï¼Œä½œä¸ºè¯¥çº¿æ®µç»ˆç‚¹çš„é¡¶ç‚¹åæ ‡</span>      <span class="token function">glVertex3d</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p2<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p2<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//ç”»çº¿ç»“æŸ</span>      <span class="token function">glEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//éå†ä¼°è®¡è½¨è¿¹ä¸­çš„æ‰€æœ‰ä½å§¿æ•°æ®</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> esti<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">//è®¾ç½®ä¼°è®¡çš„è½¨è¿¹çº¿æ®µä¸ºçº¢è‰²</span>      <span class="token function">glColor3f</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//å¼€å§‹ç”»çº¿</span>      <span class="token function">glBegin</span><span class="token punctuation">(</span>GL_LINES<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//è·å–ä¼°è®¡è½¨è¿¹ä¸­ç¬¬ i æ—¶åˆ»å’Œç¬¬ i+1 æ—¶åˆ»ç”¨æç¾¤SE(3)è¡¨ç¤ºçš„ä½å§¿</span>      <span class="token keyword">auto</span> p1 <span class="token operator">=</span> esti<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> esti<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">//å–å‡ºç¬¬ i æ—¶åˆ»ä½å§¿çš„å¹³ç§»å‘é‡ï¼Œä½œä¸ºè¯¥çº¿æ®µèµ·ç‚¹çš„é¡¶ç‚¹åæ ‡</span>      <span class="token function">glVertex3d</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p1<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p1<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//å–å‡ºç¬¬ i+1 æ—¶åˆ»ä½å§¿çš„å¹³ç§»å‘é‡ï¼Œä½œä¸ºè¯¥çº¿æ®µç»ˆç‚¹çš„é¡¶ç‚¹åæ ‡</span>      <span class="token function">glVertex3d</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p2<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p2<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//ç”»çº¿ç»“æŸ</span>      <span class="token function">glEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//äº¤æ¢å¸§å’Œå¤„ç†äº‹ä»¶</span>    pangolin<span class="token double-colon punctuation">::</span><span class="token function">FinishFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ç¡çœ 5æ¯«ç§’</span>    <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœï¼š</p><p><img src="https://s2.loli.net/2023/01/16/6u5cFt2ITHRaB7h.png" alt=""></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLAM 3ï¼šæç¾¤æä»£æ•°</title>
      <link href="/2023/01/16/slam-3-Lie-group-Lie-algebra/"/>
      <url>/2023/01/16/slam-3-Lie-group-Lie-algebra/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>SLAM 3ï¼šæç¾¤æä»£æ•°</h1><h2 id="ä¸€ã€æç¾¤">ä¸€ã€æç¾¤</h2><p>åœ¨ç¬¬ä¸€ç¯‡SLAMæ–‡ç« ä¸­ï¼Œä»‹ç»äº†æ—‹è½¬çŸ©é˜µä¸å˜æ¢çŸ©é˜µï¼Œ ä»‹ç»äº†è‹¥å¹²ç§æè¿°ä¸‰ç»´ä¸–ç•Œåˆšä½“è¿åŠ¨çš„æ–¹å¼ ã€‚ é™¤äº†ç”¨å®ƒä»¬æ¥æè¿°ç›¸æœºçš„ä½å§¿ä¹‹å¤–ï¼Œè¿˜è¦å¯¹å®ƒä»¬è¿›è¡Œ<strong>ä¼°è®¡</strong>å’Œ<strong>ä¼˜åŒ–</strong>ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥æè¿°ä¸º<strong>ä»€ä¹ˆæ ·çš„ç›¸æœºä½å§¿æœ€ç¬¦åˆå½“å‰è§‚æµ‹æ•°æ®</strong>ã€‚è€Œå…¸å‹çš„åšæ³•å°±æ˜¯å°†å…¶æ„å»ºæˆä¸€ä¸ªä¼˜åŒ–é—®é¢˜æ¥æ±‚è§£ã€‚</p><p>å…¶ä¸­æˆ‘ä»¬è®¨è®ºäº†ä¸‰ç»´æ—‹è½¬çŸ©é˜µæ„æˆ<strong>ç‰¹æ®Šæ­£äº¤ç¾¤SO(3)</strong> ï¼Œè€Œå˜æ¢çŸ©é˜µæ„æˆ<strong>ç‰¹æ®Šæ¬§æ°ç¾¤SE(3)</strong>ï¼Œæˆ‘ä»¬æŠŠå®ƒçš„æè¿°æ¬è¿‡æ¥ï¼š<br>$$<br>SO(3)=\left \{ R \in \mathbb R ^{3 \times 3} | RR^T=I,det(R)=1\right \}<br>\\<br>SE(3)=\left \{<br>T=<br>\begin{bmatrix}<br>R &amp; t\\<br>0^T &amp; 1<br>\end{bmatrix}<br>\in<br>\mathbb R^{4 \times 4} |<br>R\in SO(3),t\in \mathbb R^3<br>\right \}<br>$$<br>ç¾¤çš„æ¦‚å¿µä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡ŒæŠŠä¸Šä¸€ç¯‡å¯¹ç¾¤çš„ä»‹ç»ä¹Ÿæ¬åˆ°è¿™é‡Œæ¥ï¼š</p><blockquote><p>ç¾¤æ˜¯ä¸€ç§é›†åˆåŠ ä¸Šä¸€ç§è¿ç®—çš„ä»£æ•°ç»“æ„ï¼Œå¦‚æœé›†åˆä¸ºAï¼Œè¿ç®—ä¸º+ï¼Œé‚£ä¹ˆå¯ä»¥è®°ä¸ºç¾¤G=ï¼ˆA , +ï¼‰ã€‚ç¾¤è¦æ±‚è¿™ä¸ªè¿ç®—è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p><p>å°é—­æ€§ï¼š$\forall a,b \in A,a1 \cdot a2 \in A $</p><p>ç»“åˆå¾‹ï¼š$\forall a,b,c \in A,(a1 \cdot a2)\cdot a3=a1 \cdot (a2 \cdot a3)$</p><p>å¹ºå…ƒï¼š$\exists a0 \in A,s.t. \forall a\in A,a_{0}\cdot a=a\cdot a_{0}=a$</p><p>é€†ï¼š$\forall a \in A,\exists a^{-1} \in A, s.t.: a\cdot a^{-1}=a_{0}$</p><p>å¯ä»¥å·§è®°ä¸ºï¼šå°ç»“å¹ºé€†ï¼ˆå‡¤å§è¦ä½ ï¼‰</p><blockquote><p>å®åœ¨ä¸å¥½ç†è§£çš„è¯ï¼Œå¯ä»¥æŠŠç¾¤ç±»æ¯”æˆä¸€ä¸ªé­”æ–¹ï¼Œé­”æ–¹çš„æ—‹è½¬å°±æ˜¯è¿ç®—ï¼Œå¾—åˆ°çš„è¿ç®—ç»“æœï¼ˆé›†åˆä¸­çš„å…ƒç´ ä»¬ï¼‰å°±æ˜¯æ—‹è½¬é­”æ–¹åï¼Œé­”æ–¹ä¸Šé¢æ•´ä½“çš„é¢œè‰²åˆ†å¸ƒã€‚</p><p>é­”æ–¹ä¸€å…±å°±é‚£äº›é¢œè‰²æ’åˆ—ç»„åˆï¼ŒæŠŠæ‰€æœ‰é­”æ–¹é¢œè‰²åˆ†å¸ƒçš„æ’åˆ—ç»„åˆé›†åˆèµ·æ¥ï¼Œå°±æ˜¯æ•´ä¸ªé›†åˆï¼Œåœ¨æ»¡è¶³ â€œæ—‹è½¬â€ è¿™ä¸ªè¿ç®—çš„å‰æä¸‹ï¼Œè¿™äº›é›†åˆå°±æ„æˆç¾¤ï¼ˆå› ä¸ºå¦‚æœä½ é€‰æ‹©æŠŠé­”æ–¹æ‹†å¼€è¿™ä¸ªè¿ç®—ï¼Œé‚£å¾—åˆ°çš„ä¸€å®šæ˜¯æ•£æˆä¸€ç‰‡çš„æ–¹å—ï¼Œè¯¥çŠ¶æ€å°±ä¸åœ¨ä¸Šè¿°é­”æ–¹ä¾‹å­çš„é›†åˆå†…ï¼‰</p></blockquote><p>æ˜“å¾—ï¼Œæ—‹è½¬çŸ©é˜µé›†åˆå’ŒçŸ©é˜µä¹˜æ³•æ„æˆç¾¤ï¼Œåé¢è¦ä»‹ç»çš„å˜æ¢çŸ©é˜µ<code>SE(n)</code>å’ŒçŸ©é˜µä¹˜æ³•ä¹Ÿæ„æˆç¾¤ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæ‰èƒ½ç§°ä»–ä»¬ä¸ºæ—‹è½¬çŸ©é˜µç¾¤å’Œå˜æ¢çŸ©é˜µç¾¤ã€‚</p><p><strong>æç¾¤</strong>æ˜¯æŒ‡å…·æœ‰è¿ç»­ï¼ˆå…‰æ»‘ï¼‰æ€§è´¨çš„ç¾¤ã€‚</p><ul><li><p>åƒæ•´æ•°ç¾¤$\left \langle \mathbb Z,+ \right \rangle $å°±æ˜¯ç¦»æ•£çš„ï¼Œå¹¶ä¸æ˜¯æç¾¤ã€‚</p></li><li><p>åƒSO(n)ï¼ŒSE(n)ï¼Œåœ¨å®æ•°ç©ºé—´ä¸Šæ˜¯è¿ç»­çš„ï¼Œ<strong>æˆ‘ä»¬å¯ä»¥ç¨å¾®æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªåˆšä½“åœ¨ç©ºé—´ä¸­è¿ç»­çš„æ—‹è½¬ï¼Œæ‰€ä»¥è¿™ç§ç®—æ˜¯æç¾¤</strong>.éœ€è¦å¥½å¥½ç†è§£ã€‚</p></li></ul></blockquote><p>çŸ©é˜µå¸¸è§çš„ç¾¤æœ‰ï¼š</p><ul><li>ä¸€èˆ¬çº¿æ€§ç¾¤GL(n)ï¼šæŒ‡nÃ—nçš„å¯é€†çŸ©é˜µï¼Œå¯¹çŸ©é˜µä¹˜æ³•æ„æˆç¾¤</li><li>ç‰¹æ®Šæ­£äº¤ç¾¤SO(n)ï¼šå°±æ˜¯æ—‹è½¬çŸ©é˜µç¾¤ï¼ŒSO(2)å’ŒSO(3)æ˜¯æœ€å¸¸è§</li><li>ç‰¹æ®Šæ¬§æ°ç¾¤SE(n)ï¼šnç»´æ¬§æ°å˜æ¢ï¼ŒSE(2)å’ŒSE(3)æ˜¯æœ€å¸¸è§</li></ul><blockquote><p>æ’ä¸€å¥ï¼Œå¦‚æœè¶³å¤Ÿç»†å¿ƒçš„è¯ï¼Œå¯ä»¥å‘ç°æ—‹è½¬çŸ©é˜µã€å˜æ¢çŸ©é˜µï¼Œ<strong>ä»–ä»¬å¯¹åŠ æ³•æ˜¯ä¸å°é—­çš„</strong>ã€‚æ¢å¥è¯è¯´ï¼Œå¯¹ä»»æ„ä¸¤ä¸ª<strong>æ—‹è½¬çŸ©é˜µR</strong>ã€æˆ–<strong>å˜æ¢çŸ©é˜µT</strong>è¿›è¡ŒçŸ©é˜µæ„ä¹‰ä¸Šçš„ç›¸åŠ ï¼Œ<strong>å¾—åˆ°çš„ä¸å†æ˜¯ä¸€ä¸ªæ—‹è½¬çŸ©é˜µæˆ–å˜æ¢çŸ©é˜µ</strong>ï¼š<br>$$<br>R_1+R_2\notin SO(3) \\<br>T_1+T_2\notin SE(3)<br>$$<br>ä¸è¿‡å‘¢ï¼Œä»–ä»¬åœ¨ä¹˜æ³•ä¸Šæ˜¯å°é—­çš„<br>$$<br>R_1R_2\in SO(3) \\<br>T_1T_2\in SE(3)<br>$$</p></blockquote><p>åœ¨SLAMç›¸æœºå§¿æ€ä¼°è®¡ä¸­ï¼ŒSO(3)ä¸SE(3)æ˜¯å¾ˆé‡è¦çš„ï¼Œæ‰€ä»¥æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦è¿˜æ˜¯è®¨è®ºè¿™ä¸¤ä¸ªç¾¤ã€‚</p><h2 id="äºŒã€æä»£æ•°">äºŒã€æä»£æ•°</h2><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬ä»SO(3)å¼€å§‹è®¨è®ºï¼Œå¼•å‡ºSO(3)çš„æä»£æ•°$\mathfrak{so}(3)$</p><h3 id="0ã€çŸ©é˜µæ±‚å¯¼">0ã€çŸ©é˜µæ±‚å¯¼</h3><h4 id="1ï¼‰æ ‡é‡å‡½æ•°å¯¹å‘é‡æ±‚å¯¼">1ï¼‰æ ‡é‡å‡½æ•°å¯¹å‘é‡æ±‚å¯¼</h4><p>è®¾xä¸ºå‘é‡ï¼Œè®¾$x\in \mathbb{R}^m$ï¼Œæ˜¯ä¸ªåˆ—å‘é‡ï¼Œé‚£ä¹ˆï¼š<br>$$<br>\frac{df}{dx}=\left [ \frac{df}{dx_1} ,\frac{df}{dx_2},\cdots,\frac{df}{dx_m}\right ] \in \mathbb{R}^m<br>$$<br>ä¸€èˆ¬ç§°è¿™ç§$\frac{df}{dx_1}$ä¸º<strong>æ¢¯åº¦</strong>æˆ–<strong>Jacobian</strong></p><h4 id="2ï¼‰å‘é‡å‡½æ•°å¯¹å‘é‡æ±‚å¯¼">2ï¼‰å‘é‡å‡½æ•°å¯¹å‘é‡æ±‚å¯¼</h4><p>è®¾F(x)ä¸ºä¸€ä¸ªå‘é‡å‡½æ•°ï¼š<br>$$<br>F(x)=\left [  f_1(x),f_2(x),\cdots,f_n(x) \right]<br>$$<br>å…¶ä¸­æ¯ä¸€ä¸ªfnéƒ½æ˜¯ä¸€ä¸ªè‡ªå˜é‡ä¸ºå‘é‡ï¼Œå–å€¼ä¸ºæ ‡é‡çš„å‡½æ•°ã€‚<br>$$<br>\frac{\partial F }{\partial x^T}=<br>\begin{bmatrix}<br>\frac{\partial f_1}{x^T} \\<br>\vdots \\<br>\frac{\partial f_n}{x^T}<br>\end{bmatrix}=<br>\begin{bmatrix}<br>\frac{\partial f_1}{x_1} &amp; \frac{\partial f_1}{x_2} &amp; \cdots &amp; \frac{\partial f_1}{x_m}\\<br>\frac{\partial f_2}{x_1} &amp; \frac{\partial f_2}{x_2} &amp; \cdots &amp; \frac{\partial f_2}{x_m}\\<br>\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\<br>\frac{\partial f_n}{x_1} &amp; \frac{\partial f_n}{x_2} &amp; \cdots &amp; \frac{\partial f_n}{x_m}<br>\end{bmatrix}<br>\in \mathbb{R}^{n\times m}<br>$$<br>ä¹Ÿå°±æ˜¯å†™æˆåˆ—å‘é‡å‡½æ•°å¯¹è¡Œå‘é‡æ±‚å¯¼çš„å½¢å¼ï¼Œå¾—åˆ°ä¸€ä¸ªnÃ—mçš„é›…å¯æ¯”çŸ©é˜µã€‚å…¸å‹çš„å†™æ³•å¦‚ä¸‹ï¼š<br>$$<br>\frac{\partial Ax}{\partial x^T}=A<br>$$<br>åä¹‹ï¼Œä¸€ä¸ªè¡Œå‘é‡ä¹Ÿå¯ä»¥å¯¹åˆ—å‘é‡æ±‚å¯¼ï¼Œç»“æœä¸ºä¹‹å‰çš„è½¬ç½®ï¼š<br>$$<br>\frac{\partial F^T}{\partial x}=\left( \frac{\partial F}{\partial x^T} \right)^T<br>$$<br>æœ¬ç³»åˆ—æ–‡ç« ä¹ æƒ¯ä½¿ç”¨åˆ—å‘é‡å‡½æ•°å¯¹è¡Œå‘é‡æ±‚å¯¼çš„å½¢å¼ï¼Œä¸å¼•èµ·æ­§ä¹‰çš„å‰æä¸‹å¿½ç•¥å…¶åˆ†æ¯ä¸Šå‘é‡çš„è½¬ç½®ç¬¦å·ã€‚</p><h3 id="1ã€æä»£æ•°çš„å¼•å‡º">1ã€æä»£æ•°çš„å¼•å‡º</h3><p>è€ƒè™‘ä»»æ„æ—‹è½¬çŸ©é˜µï¼Œæˆ‘ä»¬çŸ¥é“ï¼š<br>$$<br>RR^T=I<br>$$<br>ç°åœ¨ï¼ŒRæ˜¯æŸä¸€åªç›¸æœº<span class="github-emoji"><span>ğŸ“·</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4f7.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>çš„æ—‹è½¬ï¼Œä»–ä¼šéšç€æ—¶é—´å˜åŒ–ï¼Œè€Œè¿ç»­çš„å˜åŒ–ã€‚æˆ‘ä»¬å£°æ˜ä¸€ä¸ªå‡½æ•°<code>R(t)</code>ï¼Œè¡¨ç¤ºç›¸æœºéšç€æ—¶é—´çš„æ¨ç§»è€Œè½¬æ¥è½¬å»ã€‚</p><p>ä»–è¿˜æ˜¯ä¸€ä¸ªæ—‹è½¬çŸ©é˜µå¯¹å˜›ï¼Ÿæˆ‘ä»¬è®°ä¸ºï¼š</p><p>$$<br>R(t)R(t)^T=I<br>$$<br>å¥½ï¼Œæ¥ä¸‹æ¥åœ¨ç­‰å¼ä¸¤è¾¹å¯¹<strong>æ—¶é—´</strong>æ±‚å¯¼ï¼Œæ ¹æ®æ±‚å¯¼æ³•åˆ™å¾—ï¼š<br>$$<br>\dot{R}(t)R(t)^T+R(t)\dot{R}(t)^T=0<br>\\<br>\dot{R}(t)R(t)^T=-\left( R(t)\dot{R}(t)^T \right)^T<br>$$<br>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œ$\dot{R}(t)R(t)^T$æ˜¯ä¸€ä¸ªåå¯¹ç§°çŸ©é˜µã€‚æˆ‘ä»¬åœ¨ç¬¬ä¸€ç¯‡ä»‹ç»å‰ç§¯çš„æ—¶å€™ï¼Œä»‹ç»åˆ°<code>^</code>ç¬¦å·ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªçŸ©é˜µå˜æˆåå¯¹ç§°çŸ©é˜µã€‚</p><p>é‚£åŒç†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿ä»»æ„ä¸€ä¸ªåå¯¹ç§°çŸ©é˜µæ‰¾åˆ°å…¶å¯¹åº”çš„çŸ©é˜µï¼š<br>$$<br>a^{\wedge} = A =<br>\begin{bmatrix}<br>0 &amp; -a_{3} &amp; a_{2}\\<br>a_{3} &amp; 0 &amp; -a_{1}\\<br>-a_{2} &amp; a_{1} &amp; 0<br>\end{bmatrix}<br>;A^{\vee} = a<br>$$<br>æ‰€ä»¥ï¼Œå¯¹äº$\dot{R}(t)R(t)^T$è¿™ä¸€ä¸ªåå¯¹ç§°çŸ©é˜µæ¥è¯´ï¼ŒæŒ‰é“ç†ä¸Šè¯´æ˜¯å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªä¸‰ç»´å‘é‡$\phi(t)\in\mathbb{R}^3$ä¸ä¹‹ç›¸å¯¹åº”ï¼š<br>$$<br>\dot{R}(t)R(t)^T=\phi(t)^{\wedge}<br>$$<br>ç„¶åç­‰å¼ä¸¤è¾¹å³ä¹˜ä¸€ä¸ªR(t)ï¼Œå› ä¸ºRæ˜¯æ­£äº¤çŸ©é˜µï¼š<br>$$<br>\dot{R}(t)R(t)^TR(t)=\phi(t)^{\wedge}R(t)\\<br>\dot{R}(t)=<br>\begin{bmatrix}<br>0 &amp; -\phi_{3} &amp; \phi_{2}\\<br>\phi_{3} &amp; 0 &amp; -\phi_{1}\\<br>-\phi_{2} &amp; \phi_{1} &amp; 0<br>\end{bmatrix}<br>R(t)<br>\\â€œ(å¼å­ä¸€)â€<br>$$<br>ç”±ä¸Šå¯çœ‹å‡ºï¼Œæ¯å¯¹æ—‹è½¬çŸ©é˜µæ±‚ä¸€æ¬¡å¯¼æ•°ï¼Œåªéœ€è¦<strong>å·¦ä¹˜</strong>ä¸€ä¸ª$\phi(t)^{\wedge}$å³å¯ã€‚</p><p>è€ƒè™‘åˆ°t0=0æ—¶ï¼Œè®¾æ—‹è½¬çŸ©é˜µ<code>R(0)=I</code>ï¼ŒæŒ‰ç…§å¯¼æ•°å®šä¹‰ï¼Œå¯ä»¥æŠŠR(t)åœ¨t=0é™„è¿‘è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€ï¼š<br>$$<br>R(t)\approx R(t_0)+\dot{R}(t_0)(t-t_0)\\<br>=I+\phi(t_0)^{\wedge}(t)<br>$$<br>è‹¥æ±‚t=t1æ—¶çš„å§¿æ€ï¼š<br>$$<br>R(t_1)=I+\phi(t_0)^{\wedge}(t_1)<br>$$<br>â€‹æ­¤<code>R(t1)</code>ä»£è¡¨<code>t0</code>åˆ°<code>t1</code>çš„å˜æ¢ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œ$\phi$åæ˜ äº†Rçš„å¯¼æ•°æ€§è´¨ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºï¼šå®ƒåœ¨SO(3)åŸç‚¹é™„è¿‘çš„æ­£åˆ‡ç©ºé—´(Tangent Space)ä¸Šã€‚</p><p>åŒæ—¶åœ¨t0é™„è¿‘ï¼Œè®¾$\phi$ä¿æŒä¸ºå¸¸æ•°$\phi(t_0)=\phi_0$ï¼Œé‚£æ ¹æ®ä¸Šé¢æ ‡æ³¨çš„**ï¼ˆå¼å­ä¸€ï¼‰**çš„å…¬å¼å¯å¾—ï¼š<br>$$<br>\dot{R}(t)R(t)^TR(t)=\phi(t)^{\wedge}R(t)\\<br>\dot{R}(t)=\phi_0(t)^{\wedge}R(t)\\<br>$$<br>ä¸Šå¼å­æ˜¯ä¸€ä¸ªå…³äºRçš„å¾®åˆ†æ–¹ç¨‹ï¼Œä¸”æœ‰åˆå§‹å€¼<code>R(0)=I</code>ï¼Œè§£å¾—ï¼š<br>$$<br>R(t)=\exp(\phi^{\wedge}t)=e^{\phi^{\wedge}t}<br>$$<br>ä¸Šå¼å¯ä»¥çœ‹å‡ºï¼šæ—‹è½¬çŸ©é˜µ R ä¸åå¯¹ç§°çŸ©é˜µ$\phi^{\wedge}t$ ï¼Œæ˜¯é€šè¿‡æŒ‡æ•°å‡½æ•° expè”ç³»åœ¨ä¸€èµ·ã€‚</p><h3 id="2ã€æä»£æ•°çš„å®šä¹‰">2ã€æä»£æ•°çš„å®šä¹‰</h3><p><strong>æ¯ä¸ªæç¾¤éƒ½æœ‰ä¸ä¹‹å¯¹åº”çš„æä»£æ•°</strong></p><p>æä»£æ•°æè¿°äº†æç¾¤çš„å±€éƒ¨æ€§è´¨ï¼Œæ˜¯å•ä½å…ƒé™„è¿‘çš„æ­£åˆ‡ç©ºé—´ã€‚ä¸€èˆ¬çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>æä»£æ•°ç”±ä¸€ä¸ªé›†åˆ$\mathbb{V}$ï¼Œä¸€ä¸ªæ•°åŸŸ$\mathbb{F}$ï¼Œå’Œä¸€ä¸ªäºŒå…ƒè¿ç®—ç¬¦$[\otimes]$ç»„æˆã€‚</p><p>å¦‚æœä»–ä»¬æ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼Œåˆ™ç§°$(\mathbb{V},\mathbb{F},[\otimes ])$ä¸ºä¸€ä¸ªæä»£æ•°ï¼Œè®°ä½œ$\mathfrak{g} $</p><ol><li><p><strong>å°é—­æ€§</strong>ï¼š$\forall X,Y\in\mathbb{V},[X\otimes  Y]\in \mathbb{V}$</p></li><li><p><strong>åŒçº¿æ€§</strong>ï¼šå¯¹$\forall X,Y,Z\in \mathbb V,z,b\in \mathbb F$ï¼Œæœ‰<br>$$<br>[aX+bY \otimes Z]=a[X\otimes Z]+b\left[Y\otimes Z\right]<br>\\<br>\left[Z \otimes aX+bY\right]=a[Z\otimes X]+b[Z\otimes Y]<br>$$</p></li><li><p><strong>è‡ªåæ€§</strong>ï¼šè‡ªå·±ä¸è‡ªå·±è¿ç®—ä¸º0ï¼š<br>$$<br>\forall X\in\mathbb V,[X\otimes X]=0<br>$$</p></li><li><p><strong>é›…å…‹æ¯”ç­‰ä»·</strong>ï¼š<br>$$<br>\forall X,Y,Z\in\mathbb V\\<br>,[X\otimes[Y\otimes Z]]+<br>[Y\otimes[Z\otimes X]]+<br>[Z\otimes[X\otimes Y]]=0<br>$$</p></li></ol><p>å…¶ä¸­è¿™ä¸ªäºŒé™¢è¿ç®—ç¬¦ä¹Ÿç§°ä¸º<strong>ææ‹¬å·</strong>ã€‚ç›¸æ¯”ç¾¤ä¸­è¾ƒä¸ºç®€å•çš„äºŒå…ƒè¿ç®—ï¼Œææ‹¬å·ä¸»è¦æ˜¯è¡¨è¾¾äº†ä¸¤è€…ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>ä»–ä¸è¦æ±‚ç»“åˆå¾‹ï¼Œè¦æ±‚çš„æ˜¯å…ƒç´ å’Œè‡ªå·±è¿›è¡Œææ‹¬å·è¿ç®—åçš„ç»“æœä¸º0.</p><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼šä¸‰ç»´å‘é‡å®šä¹‰çš„å‰ä¹˜è¿ç®—å°±æ˜¯ä¸€ç§ææ‹¬å·ï¼Œæ‰€ä»¥$\mathfrak{g}=(\mathbb R^3,\mathbb R,\times) $æ„æˆäº†ä¸€ä¸ªæä»£æ•°ã€‚</p></blockquote><h3 id="3ã€æä»£æ•°so-3">3ã€æä»£æ•°so(3)</h3><blockquote><p>ä¸ºäº†æ–¹ä¾¿ï¼Œso(3)å’Œ$\mathfrak{so}(3)$æè¿°çš„æ˜¯åŒä¸ªä¸œè¥¿</p></blockquote><p>å‰é¢æåˆ°çš„é‚£ä¸ªä¸‰ç»´å‘é‡$\phi$ï¼Œäº‹å®ä¸Šæ˜¯ä¸€ç§æä»£æ•°ã€‚SO(3)å¯¹åº”çš„æä»£æ•°æ˜¯å®šä¹‰åœ¨$\mathbb{R}^3$ä¸Šçš„å‘é‡ã€‚æ¯ä¸€ä¸ª$\phi$éƒ½å¯ä»¥ç”Ÿæˆä¸€ä¸ªåå¯¹ç§°çŸ©é˜µï¼š<br>$$<br>\Phi=\phi^{\wedge}=<br>\begin{bmatrix}<br>0 &amp; -\phi_{3} &amp; \phi_{2}\\<br>\phi_{3} &amp; 0 &amp; -\phi_{1}\\<br>-\phi_{2} &amp; \phi_{1} &amp; 0<br>\end{bmatrix}<br>\in\mathbb R^{3\times3}<br>$$<br>åœ¨æ­¤å®šä¹‰ä¸‹ï¼Œä¸¤ä¸ªå‘é‡Î¦1ä¸Î¦2ï¼Œçš„ææ‹¬å·ä¸ºï¼š<br>$$<br>[\phi_1\otimes\phi_2]=(\phi_1^{\wedge}\phi_2^{\wedge}-\phi_2^{\wedge}\phi_1^{\wedge})^{\vee}<br>\\=(\Phi_1\Phi_2-\Phi_2\Phi_1)^{\vee}<br>$$<br>ç”±äºå‘é‡$\phi$ä¸åå¯¹ç§°çŸ©é˜µæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œ å› æ­¤<strong>æä»£æ•° so(3) æ˜¯ä¸‰ç»´å‘é‡ç»„æˆçš„é›†åˆï¼Œå…¶å…ƒç´ æ˜¯ä¸‰ç»´å‘é‡æˆ–è€…ä¸‰ç»´åå¯¹ç§°çŸ©é˜µï¼Œ<strong>ç›¸å½“äº</strong>æ—‹è½¬å‘é‡å°±æ˜¯æä»£æ•°</strong>ï¼š<br>$$<br>\mathfrak{so}(3)=\left\{\phi\in\mathbb R^3,\Phi=\phi^{\wedge}\in\mathbb R^{3\times 3}\right\}<br>$$<br>è€Œæä»£æ•°$\mathfrak{so}(3)$å’Œæç¾¤$SO(3)$ä¹‹é—´çš„å…³ç³»æ˜¯é€šè¿‡æŒ‡æ•°æ˜ å°„ç»™å®šçš„ï¼š<br>$$<br>R=\exp(\phi^{\wedge})<br>$$</p><p>å…³äºæŒ‡æ•°æ˜ å°„åé¢ä¼šæœ‰ä¸€ä¸ªæ±‡æ€»ï¼Œè¿™é‡Œè¿˜è¦é¡ºä¾¿ä»‹ç»ä¸€ä¸‹SE(3)å¯¹åº”çš„æä»£æ•°se(3)ã€‚</p><h3 id="4ã€æä»£æ•°se-3">4ã€æä»£æ•°se(3)</h3><blockquote><p>ä¸ºäº†æ–¹ä¾¿ï¼Œse(3)å’Œ$\mathfrak{se}(3)$æè¿°çš„æ˜¯åŒä¸ªä¸œè¥¿</p></blockquote><p>å¯¹äºSE(3)ï¼Œä¹Ÿæœ‰å¯¹åº”çš„æä»£æ•°$\mathfrak{se}(3)$ï¼Œå®ƒä½äº$\mathbb{R}^6$ç©ºé—´ä¸­ï¼š<br>$$<br>\mathfrak{se}(3)=\left\{ \xi =<br>\begin{bmatrix}<br>\rho \\<br>\phi<br>\end{bmatrix}<br>\in \mathbb R^6<br>,\rho\in\mathbb R^3,\phi\in\mathfrak{so}(3),<br>\xi^{\wedge}=<br>\begin{bmatrix}<br>\phi^{\wedge} &amp; \rho \\<br>0^T &amp; 0<br>\end{bmatrix}<br>\in\mathbb{R}^{4\times 4}<br>\right\}<br>$$<br>å˜æ¢çŸ©é˜µçš„æä»£æ•°$\mathfrak{se}(3)$çš„å…ƒç´ $\xi$ï¼Œæ˜¯ä¸€ä¸ªå…­ç»´å‘é‡ã€‚å‰ä¸‰ç»´æ˜¯å¹³ç§»å‘é‡ï¼Œè®°ä½œ$\rho$ï¼Œåä¸‰ç»´æ˜¯æ—‹è½¬å‘é‡ï¼Œè®°ä½œ$\phi$ï¼Œå®é™…ä¸Šå°±æ˜¯æä»£æ•°$\mathfrak{so}(3)$ã€‚</p><blockquote><p>å¹¶ä¸”ï¼Œåœ¨æä»£æ•°se(3)ä¸­ï¼Œè¿™é‡Œçš„ç¬¦å·<code>^</code><strong>ä¸å†å…·æœ‰åå¯¹ç§°</strong>çš„æ„æ€ï¼Œè€Œæ˜¯ç”¨æ¥è¡¨ç¤º<strong>å°†ä¸€ä¸ªå…­ç»´å‘é‡è½¬ä¸ºå››ç»´çŸ©é˜µ</strong>çš„æ„æ€</p><p>$\wedge$ æŒ‡ä»£ â€œä»å‘é‡åˆ°çŸ©é˜µâ€œï¼Œ$\vee$æŒ‡ä»£ â€ä»çŸ©é˜µåˆ°å‘é‡â€œ</p></blockquote><p>$$<br>\xi^{\wedge}=<br>\begin{bmatrix}<br>\phi^{\wedge} &amp; \rho \\<br>0^T &amp; 0<br>\end{bmatrix}<br>$$</p><p>æ‰€ä»¥å˜æ¢çŸ©é˜µçš„æä»£æ•°å¯ä»¥ç†è§£ä¸ºï¼Œç”±ä¸€ä¸ª<strong>å¹³ç§»</strong>å’Œä¸€ä¸ª<strong>æ—‹è½¬çŸ©é˜µæä»£æ•° è¡¨ç¤ºçš„æ—‹è½¬å‘é‡</strong>æ„æˆçš„å‘é‡ã€‚</p><p>åŒæ ·çš„ï¼Œæä»£æ•°se(3)ä¹Ÿæœ‰ç±»ä¼¼äºso(3)æä»£æ•°çš„ææ‹¬å·ï¼š<br>$$<br>\left[ \xi_1 \otimes\xi_2\right]=(\xi_1^{\wedge}\xi_2^{\wedge}-\xi_2^{\wedge}\xi_1^{\wedge})^{\vee}<br>$$</p><h2 id="ä¸‰ã€æŒ‡æ•°ä¸å¯¹æ•°æ˜ å°„">ä¸‰ã€æŒ‡æ•°ä¸å¯¹æ•°æ˜ å°„</h2><h3 id="1ã€SO-3-ä¸ŠæŒ‡æ•°æ˜ å°„">1ã€SO(3)ä¸ŠæŒ‡æ•°æ˜ å°„</h3><p>æœ‰äº†æä»£æ•°å’Œæç¾¤çš„æ˜ å°„å…³ç³»ï¼Œæˆ‘ä»¬è¦å¦‚ä½•è®¡ç®—exp(Î¦^)ï¼Ÿæ˜¾ç„¶ä»–æ˜¯ä¸€ä¸ªçŸ©é˜µçš„æŒ‡æ•°ï¼Œåœ¨æç¾¤æä»£æ•°ä¸­ï¼Œç§°ä¸ºæŒ‡æ•°æ˜ å°„</p><p>ä»»æ„çŸ©é˜µçš„æŒ‡æ•°æ˜ å°„å¯ä»¥å†™æˆä¸€ä¸ªæ³°å‹’å±•å¼€ï¼Œä½†æ˜¯åªæœ‰åœ¨æ”¶æ•›çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰ç»“æœï¼Œå…¶ç»“æœè¿˜æ˜¯ä¸€ä¸ªçŸ©é˜µï¼š<br>$$<br>\exp(A)=\sum_{n=0}^{\infty}\frac{1}{n!}A^n\\<br>=I+A^{\wedge}+\frac{1}{2!}A^2+\frac{1}{3!}A^3+\cdots<br>$$<br>åŒæ ·çš„ï¼Œå¯¹$\mathfrak{so}(3)$ä¸­ä»»æ„å…ƒç´ $\phi$ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å…¶æŒ‡æ•°æ˜ å°„ï¼š<br>$$<br>\exp(\phi^{\wedge})=\sum^{\infty}_{n=0}\frac{1}{n!}(\phi^{\wedge})\\<br>=I+\phi^{\wedge}+\frac{1}{2!}(\phi^{\wedge})^2+\frac{1}{3!}(\phi^{\wedge})^3+\cdots<br>$$<br>è¿™é‡Œå‡ºç°äº†æ— ç©·å¤šæŒ‡æ•°å¹‚ï¼Œéœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹å¼ä½¿å¾—æŒ‡æ•°æ˜ å°„çš„è®¡ç®—ç®€åŒ–</p><p>ç”±äº$\phi$æ˜¯ä¸‰ç»´å‘é‡ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§æ­¤æ–¹å¼å®šä¹‰å®ƒçš„æ¨¡é•¿Î¸ä¸æ–¹å‘å‘é‡aï¼ˆ$\left | a \right | = \sqrt{a_1^2+a_2^2+a_3^2}=1 $ï¼‰ã€‚å› æ­¤ä¸‰ç»´å‘é‡å¯ä»¥ç”¨æ¨¡é•¿å’Œæ–¹å‘ä¸¤ä¸ªå€¼è¡¨ç¤ºï¼Œäºæ˜¯æœ‰$\phi=\theta a$ã€‚</p><p>å¯¹äºa^ï¼Œæœ‰ä»¥ä¸‹ä¸¤æ¡æ€§è´¨ï¼š</p><ul><li><p>æ€§è´¨ä¸€<br>$$<br>a^{\wedge}a^{\wedge}=<br>\begin{bmatrix}<br>0 &amp; -a_3 &amp; a_2 \\<br>a_3 &amp; 0 &amp;-a_1 \\<br>-a_2 &amp; a_1 &amp; 0<br>\end{bmatrix}<br>\begin{bmatrix}<br>0 &amp; -a_3 &amp; a_2 \\<br>a_3 &amp; 0 &amp;-a_1 \\<br>-a_2 &amp; a_1 &amp; 0<br>\end{bmatrix}\\=<br>\begin{bmatrix}<br>-a_2^2-a_3^2 &amp; a_1a_2 &amp; a_1a_3 \\<br>a_1a_2 &amp; -a_1^2-a_3^2 &amp; a_2a_3 \\<br>a_1a_3 &amp; a_2a_3 &amp; -a_1^2-a_2^2<br>\end{bmatrix}\\=<br>\begin{bmatrix}<br>a_1^2-1 &amp; a_1a_2 &amp; a_1a_3 \\<br>a_1a_2 &amp; a_2^2-1 &amp; a_2a_3 \\<br>a_1a_3 &amp; a_2a_3 &amp; a_3^2-1<br>\end{bmatrix}\\=<br>\begin{bmatrix}<br>a_1a_1 &amp; a_1a_2 &amp; a_1a_3 \\<br>a_1a_2 &amp; a_2a_2 &amp; a_2a_3 \\<br>a_1a_3 &amp; a_2a_3 &amp; a_3a_3<br>\end{bmatrix}-<br>\begin{bmatrix}<br>1 &amp; 0 &amp; 0\\<br>0 &amp; 1 &amp; 0\\<br>0 &amp; 0 &amp; 1<br>\end{bmatrix}\\=<br>\begin{bmatrix}<br>a_1\\<br>a_2\\<br>a_3<br>\end{bmatrix}<br>\begin{bmatrix}<br>a_1 &amp; a_2 &amp; a_3<br>\end{bmatrix}-I\\=<br>aa^T-I\<br>I=aa^T-a^{\wedge}a^{\wedge}<br>$$<br>ä¸Šè¿°æ¨å¯¼è¿‡ç¨‹åˆ©ç”¨äº†å•ä½æ–¹å‘å‘é‡é•¿åº¦ä¸º1</p></li><li><p>æ€§è´¨äºŒï¼Œå‚è€ƒæ€§è´¨ä¸€çš„ç»“è®ºï¼š<br>$$<br>a^{\wedge}a^{\wedge}a^{\wedge}=(aa^T-I)a^{\wedge}=<br>aa^Ta^{\wedge}-a^{\wedge}\\=<br>\begin{bmatrix}<br>a_1a_1 &amp; a_1a_2 &amp; a_1a_3 \\<br>a_1a_2 &amp; a_2a_2 &amp; a_2a_3 \\<br>a_1a_3 &amp; a_2a_3 &amp; a_3a_3<br>\end{bmatrix}<br>\begin{bmatrix}<br>0 &amp; -a_3 &amp; a_2 \\<br>a_3 &amp; 0 &amp;-a_1 \\<br>-a_2 &amp; a_1 &amp; 0<br>\end{bmatrix}-<br>\begin{bmatrix}<br>0 &amp; -a_3 &amp; a_2 \\<br>a_3 &amp; 0 &amp;-a_1 \\<br>-a_2 &amp; a_1 &amp; 0<br>\end{bmatrix}\\=<br>\begin{bmatrix}<br>a_1a_2a_3-a_1a_2a_3 &amp; a_1a_1a_3-a_1a_1a_3 &amp; a_1a_1a_2-a_1a_1a_2\\<br>a_2a_2a_3-a_2a_2a_3 &amp; a_1a_2a_3-a_1a_2a_3 &amp; a_1a_2a_2-a_1a_2a_2\\<br>a_2a_3a_3-a_2a_2a_3 &amp; a_1a_3a_3-a_1a_1a_3 &amp; a_1a_2a_3-a_1a_2a_3<br>\end{bmatrix}\\-<br>\begin{bmatrix}<br>0 &amp; -a_3 &amp; a_2 \\<br>a_3 &amp; 0 &amp;-a_1 \\<br>-a_2 &amp; a_1 &amp; 0<br>\end{bmatrix}\\=<br>\begin{bmatrix}<br>0 &amp; -a_3 &amp; a_2 \\<br>a_3 &amp; 0 &amp;-a_1 \\<br>-a_2 &amp; a_1 &amp; 0<br>\end{bmatrix}\\=<br>-a^{\wedge}<br>$$</p></li></ul><p>é€šè¿‡è§‚å¯Ÿä¸Šè¿°å¼å­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ€»ç»“å¾—å‡ºä»¥ä¸‹å¼å­ï¼š<br>$$<br>a^{\wedge}a^{\wedge}a^{\wedge}a^{\wedge}=-a^{\wedge}a^{\wedge}\\<br>a^{\wedge}a^{\wedge}a^{\wedge}a^{\wedge}a^{\wedge}=-a^{\wedge}a^{\wedge}a^{\wedge}=a^{\wedge}<br>$$<br>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼š<br>$$<br>e^{\phi^{\wedge}}=e^{\theta a}=\sum^{\infty}_{n=0}\frac{1}{n!}(\theta a^{\wedge})^n\\=<br>I+\theta a^{\wedge}+\frac{1}{2!}(\theta a^{\wedge})^2+\frac{1}{3!}(\theta a^{\wedge})^3+\cdots\\=<br>I+\theta a^{\wedge}+\frac{\theta^2}{2!}(a^{\wedge})^2+\frac{\theta^3}{3!}(a^{\wedge})^3+\cdots\\=<br>I+\theta a^{\wedge}+\frac{\theta^2}{2!}a^{\wedge}a^{\wedge}+\frac{\theta^3}{3!}a^{\wedge}a^{\wedge}a^{\wedge}+\cdots<br>$$<br>å°†ä¸Šè¿°æ€§è´¨ä¸€$I=aa^T-a^{\wedge}a^{\wedge}$å’Œæ€§è´¨äºŒ$a^{\wedge}a^{\wedge}a^{\wedge}=-a^{\wedge}$ä»£å…¥ä¸Šå¼ï¼Œè¿›è¡Œåå¤åµŒå¥—å¯å¾—ï¼š<br>$$<br>e^{\phi^{\wedge}}=aa^T-a^{\wedge}a^{\wedge}+\theta a^{\wedge}+\frac{\theta^2}{2!}a^{\wedge}a^{\wedge}-\frac{\theta^3}{3!}a^{\wedge}-\frac{\theta^4}{4!}a^{\wedge}a^{\wedge}\\+\frac{\theta^5}{5!}a^{\wedge}+\frac{\theta^6}{6!}a^{\wedge}a^{\wedge}-\frac{\theta^7}{7!}a^{\wedge}+\cdots<br>\\=<br>aa^T+(\theta-\frac{\theta^3}{3!}+\frac{\theta^5}{5!}-\frac{\theta^7}{7!}+\cdots)a^{\wedge}<br>\\-(1-\frac{\theta^2}{2!}+\frac{\theta^4}{4!}-\frac{\theta^6}{6!}+\frac{\theta^8}{8!}+\cdots)a^{\wedge}a^{\wedge}<br>$$<br>è€Œå…¶ä¸­$(\theta-\frac{\theta^3}{3!}+\frac{\theta^5}{5!}-\frac{\theta^7}{7!}+\cdots)$å’Œ$(1-\frac{\theta^2}{2!}+\frac{\theta^4}{4!}-\frac{\theta^6}{6!}+\frac{\theta^8}{8!}+\cdots)$åˆ†åˆ«æ˜¯<strong>ä¸‰è§’å‡½æ•°sin(a)å’Œcos(a)çš„æ³°å‹’å±•å¼€</strong>ï¼Œå› æ­¤å¯å¾—ï¼š<br>$$<br>e^{\phi^{\wedge}}=<br>aa^T+(\theta-\frac{\theta^3}{3!}+\frac{\theta^5}{5!}-\frac{\theta^7}{7!}+\cdots)a^{\wedge}<br>\\-(1-\frac{\theta^2}{2!}+\frac{\theta^4}{4!}-\frac{\theta^6}{6!}+\frac{\theta^8}{8!}+\cdots)a^{\wedge}a^{\wedge}\\=<br>I+a^{\wedge}a^{\wedge}+\sin\theta a^{\wedge}-\cos\theta a^{\wedge}\\=<br>(1-\cos\theta)a^{\wedge}a^{\wedge}+I+\sin\theta a^{\wedge}\\=<br>(1-\cos\theta)(aa^T-I)+I+\sin\theta a^{\wedge}\\=<br>(\cos\theta-1)I+(1-\cos\theta)aa^T+I+\sin\theta a^{\wedge}\\=<br>\cos\theta I+(1-\cos\theta)aa^T+\sin\theta a^{\wedge}<br>$$<br>èªæ˜çš„ä½ é©¬ä¸Šå°±èƒ½è”æƒ³åˆ°ç¬¬ä¸€ç¯‡æˆ‘ä»¬è®¨è®ºè¿‡çš„<strong>ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼</strong>ã€‚è¿™è¯´æ˜ï¼Œæä»£æ•°so(3)å°±æ˜¯æ—‹è½¬å‘é‡ç»„æˆçš„å‘é‡ç©ºé—´ï¼Œè€Œè¿™é‡Œçš„<strong>æŒ‡æ•°æ˜ å°„å…³ç³»å°±æ˜¯ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼</strong>ã€‚</p><p>é€šè¿‡å®ƒä»¬ï¼Œæˆ‘ä»¬æŠŠso(3)ä¸­ä»»æ„ä¸€ä¸ªå‘é‡å¯¹åº”ä¸€ä¸ªä½äºSO(3)ä¸­çš„æ—‹è½¬çŸ©é˜µã€‚åä¹‹ï¼Œè‹¥å®šä¹‰<strong>ä¸æŒ‡æ•°æ˜ å°„å¯¹åº”çš„å¯¹æ•°æ˜ å°„</strong>ï¼Œä¹Ÿèƒ½æŠŠSO(3)ä¸­çš„å…ƒç´ å¯¹åº”åˆ°so(3)ä¸­ï¼š<br>$$<br>\phi=\ln\left (R\right )^{\vee}=\left( \sum^{\infty}_{n=0}(R-I)^{(n+1)} \right)^{\vee}<br>$$<br>ç”¨æ³°å‹’å±•å¼€æ±‚è§£æŒºéº»çƒ¦çš„ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯å¦‚<a href="https://tuoyou-hao.github.io/2022/08/02/slam-1-Fundamentals-of-three-dimensional-space-mathematics/#4%E3%80%81%E6%97%8B%E8%BD%AC%E5%90%91%E9%87%8F">ç¬¬ä¸€ç¯‡</a>æåˆ°çš„<strong>åˆ©ç”¨æ—‹è½¬çŸ©é˜µçš„è¿¹tr()çš„æ€§è´¨æ±‚è§£æ—‹è½¬è§’ä¸æ—‹è½¬è½´</strong>ã€‚ä¹Ÿå°±æ˜¯å¯¹è½¬è§’å–ä¸¤è¾¹çš„è¿¹ï¼Œç„¶ååŒ–ç®€è®¡ç®—ã€‚è¿‡ç¨‹åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œè¿™é‡Œåªç»™å‡ºæœ€åè®¡ç®—ç»“æœäº†ï¼š<br>$$<br>\theta=\arccos\frac{tr\left (R\right )-1}{2}<br>$$</p><h3 id="2ã€SE-3-ä¸ŠæŒ‡æ•°æ˜ å°„">2ã€SE(3)ä¸ŠæŒ‡æ•°æ˜ å°„</h3><p>å¯¹äºå˜æ¢çŸ©é˜µç‰¹æ®Šæ¬§æ°ç¾¤ï¼š<br>$$<br>SE(3)=\left \{ T=<br>\begin{bmatrix}<br>R &amp; t\\<br>0^{T} &amp; 1<br>\end{bmatrix}<br>\in \mathbb R^{4 \times 4} |<br>R\in SO(3),t\in \mathbb R^{3}<br>\right \}<br>$$<br>å¯¹åº”çš„æä»£æ•°ï¼š<br>$$<br>\mathfrak{se}(3)=\left\{ \xi =<br>\begin{bmatrix}<br>\rho \\<br>\phi<br>\end{bmatrix}<br>\in \mathbb R^6<br>,\rho\in\mathbb R^3,\phi\in\mathfrak{so}(3),<br>\xi^{\wedge}=<br>\begin{bmatrix}<br>\phi^{\wedge} &amp; \rho \\<br>0^T &amp; 0<br>\end{bmatrix}<br>\in\mathbb{R}^{4\times 4}<br>\right\}<br>$$<br>æ¨¡ä»¿ä¸Šè¿°æä»£æ•°so(3)çš„å…ƒç´ çš„æŒ‡æ•°æ˜ å°„æ¨å¯¼è¿‡ç¨‹ï¼Œæä»£æ•°se(3)çš„<strong>æŒ‡æ•°æ˜ å°„è¯æ˜</strong>å¦‚ä¸‹ï¼š</p><p>å·²çŸ¥<br>$$<br>\xi^{\wedge}=<br>\begin{bmatrix}<br>\phi^{\wedge}&amp;\rho\\<br>0^T&amp;0<br>\end{bmatrix}<br>$$<br>æœ‰ï¼š<br>$$<br>(\xi^{\wedge})^2=\xi^{\wedge}\xi^{\wedge}=<br>\begin{bmatrix}<br>\phi^{\wedge}&amp;\rho\\<br>0^T&amp;0<br>\end{bmatrix}<br>\begin{bmatrix}<br>\phi^{\wedge}&amp;\rho\\<br>0^T&amp;0<br>\end{bmatrix}=<br>\begin{bmatrix}<br>(\phi^{\wedge})^2&amp;\phi^{\wedge}\rho\\<br>0^T&amp;0<br>\end{bmatrix}\\<br>(\xi^{\wedge})^3=\xi^{\wedge}\xi^{\wedge}\xi^{\wedge}=<br>\begin{bmatrix}<br>\phi^{\wedge}&amp;\rho\\<br>0^T&amp;0<br>\end{bmatrix}<br>\begin{bmatrix}<br>\phi^{\wedge}&amp;\rho\\<br>0^T&amp;0<br>\end{bmatrix}<br>\begin{bmatrix}<br>\phi^{\wedge}&amp;\rho\\<br>0^T&amp;0<br>\end{bmatrix}=<br>\begin{bmatrix}<br>(\phi^{\wedge})^3&amp;(\phi^{\wedge})^2\rho\\<br>0^T&amp;0<br>\end{bmatrix}<br>$$<br>æ€»ç»“è§„å¾‹å¾—ï¼š<br>$$<br>(\xi^{\wedge})^n=<br>\begin{bmatrix}<br>(\phi^{\wedge})^n&amp;(\phi^{\wedge})^{(n-1)}\rho\\<br>0^T&amp;0<br>\end{bmatrix}<br>$$<br>æ¥ç€æˆ‘ä»¬è®¨è®ºè¦æ±‚çš„æŒ‡æ•°æ˜ å°„å¼å­ï¼š<br>$$<br>e^{\xi^{\wedge}}=\sum_{n=0}^{\infty}\frac{1}{n!}(\xi^{\wedge})^n\\<br>=I_{4\times 4}+\sum_{n=1}^{\infty}\frac{1}{n!}(\xi^{\wedge})^n\\=<br>\begin{bmatrix}<br>I_{3\times 3}&amp;0\\<br>0^T&amp;1<br>\end{bmatrix}+<br>\sum_{n=1}^{\infty}\frac{1}{n!}<br>\begin{bmatrix}<br>(\phi^{\wedge})^n&amp;(\phi^{\wedge})^{(n-1)}\rho\\<br>0^T&amp;0<br>\end{bmatrix}\\=<br>\begin{bmatrix}<br>\sum_{n=0}^{\infty}\frac{1}{n!}(\phi^{\wedge})^n&amp;\sum_{n=1}^{\infty}\frac{1}{n!}(\phi^{\wedge})^{(n-1)}\rho\\<br>0^T&amp;1<br>\end{bmatrix}\\=<br>\begin{bmatrix}<br>\sum_{n=0}^{\infty}\frac{1}{n!}(\phi^{\wedge})^n&amp;\sum_{n=0}^{\infty}\frac{1}{(n+1)!}(\phi^{\wedge})^{n}\rho\\<br>0^T&amp;1<br>\end{bmatrix}<br>$$<br>å› æ­¤ï¼š<br>$$<br>e^{\xi^{\wedge}}=<br>\begin{bmatrix}<br>\sum_{n=0}^{\infty}\frac{1}{n!}(\phi^{\wedge})^n&amp;\sum_{n=0}^{\infty}\frac{1}{(n+1)!}(\phi^{\wedge})^{n}\rho\\<br>0^T&amp;1<br>\end{bmatrix}\triangleq<br>\begin{bmatrix}<br>R &amp; J\rho \\<br>0^T &amp; 1<br>\end{bmatrix}=T<br>$$<br>å…¶ä¸­ï¼ŒæŒ‡æ•°æ˜ å°„å·¦ä¸Šè§’Rä¸ºæ—‹è½¬çŸ©é˜µï¼Œæ˜¯æç¾¤SO(3)ä¸­çš„å…ƒç´ <br>$$<br>R=\sum_{n=0}^{\infty}\frac{1}{n!}(\phi^{\wedge})^n<br>$$<br>ä¸ç‰¹æ®Šæ¬§æ°å˜æ¢ç¾¤å¯¹åº”æä»£æ•°se(3)çš„æ—‹è½¬éƒ¨åˆ†$\phi$ç›¸å¯¹åº”ã€‚</p><hr><p>å³ä¸Šè§’<code>J</code>çš„éƒ¨åˆ†çš„å…·ä½“å†…å®¹ä¸ä¸Šè¿°SO(3)ä¸ŠæŒ‡æ•°æ˜ å°„è¯æ˜è¿‡ç¨‹ç±»ä¼¼ï¼Œä¹Ÿè¿›è¡Œæ³°å‹’å±•å¼€ï¼Œå¹¶åŒæ ·åœ°ï¼Œä¸‰ç»´å‘é‡$\phi$çš„æ¨¡é•¿ä¸º$\theta$ï¼Œå•ä½æ–¹å‘å‘é‡ä¸ºaï¼Œåˆ™$\phi=\theta a$ã€‚<br>$$<br>J = \sum_{n=0}^{\infty}\frac{1}{(n+1)!}(\phi^{\wedge})^n\\=<br>I+\frac{\theta}{2!}a^{\wedge}+\frac{\theta^2}{3!}(a^{\wedge})^2<br>+\frac{\theta^3}{4!}(a^{\wedge})^3+\frac{\theta^4}{5!}(a^{\wedge})^4<br>+\cdots\\=<br>I+\frac{\theta}{2!}a^{\wedge}+\frac{\theta^2}{3!}(a^{\wedge})^2<br>-\frac{\theta^3}{4!}a^{\wedge}-\frac{\theta^4}{5!}(a^{\wedge})^2<br>+\cdots\\=<br>I+(\frac{\theta}{2!}-\frac{\theta^3}{4!}+\cdots)a^{\wedge}+<br>(\frac{\theta^2}{3!}-\frac{\theta^4}{5!}+\cdots)(a^{\wedge})^2<br>\\=<br>I+\frac{1}{\theta}(\frac{\theta^2}{2!}-\frac{\theta^4}{4!}+\cdots)a^{\wedge}+<br>\frac{1}{\theta}(\frac{\theta^3}{3!}-\frac{\theta^5}{5!}+\cdots)(a^{\wedge})^2<br>$$<br>è€Œå…¶ä¸­ä¸‰è§’å‡½æ•°sin(a)å’Œcos(a)çš„æ³°å‹’å±•å¼€:<br>$$<br>\sin\theta=\theta-\frac{\theta^3}{3!}+\frac{\theta^5}{5!}-\frac{\theta^7}{7!}+\cdots\\<br>\cos\theta=1-\frac{\theta^2}{2!}+\frac{\theta^4}{4!}-\frac{\theta^6}{6!}+\frac{\theta^8}{8!}+\cdots<br>$$<br>æ‰€ä»¥ï¼š<br>$$<br>\theta-\sin\theta=\frac{\theta^3}{3!}+\frac{\theta^5}{5!}-\frac{\theta^7}{7!}+\cdots\\<br>1-\cos\theta=\frac{\theta^2}{2!}+\frac{\theta^4}{4!}-\frac{\theta^6}{6!}+\frac{\theta^8}{8!}+\cdots<br>$$<br>ç”¨æ¥ä»£å…¥ä¸Šå¼å¾—ï¼š<br>$$<br>J = \sum_{n=0}^{\infty}\frac{1}{(n+1)!}(\phi^{\wedge})^n\\=<br>I+\frac{1}{\theta}(\frac{\theta^2}{2!}-\frac{\theta^4}{4!}+\cdots)a^{\wedge}+<br>\frac{1}{\theta}(\frac{\theta^3}{3!}-\frac{\theta^5}{5!}+\cdots)(a^{\wedge})^2\\=<br>I+\frac{1-\cos\theta}{\theta}a^{\wedge}+\frac{\theta-\sin\theta}{\theta}(a^{\wedge})^2<br>$$<br>åˆå› ä¸ºå‰é¢æåˆ°çš„<strong>æ€§è´¨ä¸€</strong>ï¼š<br>$$<br>I=aa^T-a^{\wedge}a^{\wedge}\\<br>aa^T=a^{\wedge}a^{\wedge}-I<br>$$<br>ä»£å…¥å¾—ï¼š<br>$$<br>J = \sum_{n=0}^{\infty}\frac{1}{(n+1)!}(\phi^{\wedge})^n\\=<br>I+\frac{1}{\theta}(\frac{\theta^2}{2!}-\frac{\theta^4}{4!}+\cdots)a^{\wedge}+<br>\frac{1}{\theta}(\frac{\theta^3}{3!}-\frac{\theta^5}{5!}+\cdots)(a^{\wedge})^2\\=<br>I+\frac{1-\cos\theta}{\theta}a^{\wedge}+\frac{\theta-\sin\theta}{\theta}(a^{\wedge}a^{\wedge}-I)<br>\\=<br>\frac{\sin\theta}{\theta}I+\frac{1-\cos\theta}{\theta}a^{\wedge}+\frac{\theta-\sin\theta}{\theta}aa^T<br>$$</p><p>å› æ­¤æä»£æ•°å³ä¸Šè§’$\xi^{\wedge}$çš„å¹³ç§»éƒ¨åˆ†ç»è¿‡çŸ©é˜µçš„æŒ‡æ•°æ˜ å°„æ“ä½œåï¼Œè¿›è¡Œäº†ä»¥<code>J</code>ä¸ºç³»æ•°çš„çº¿æ€§å˜æ¢ã€‚</p><p>ç›¸ååœ°ï¼Œæ ¹æ®å˜æ¢çŸ©é˜µTæƒ³æ±‚å‡ºå¯¹åº”æä»£æ•°so(3)ä¸Šçš„å‘é‡ï¼Œå¯ä»¥ä»Tå·¦ä¸Šè§’çš„æ—‹è½¬çŸ©é˜µæ¥è®¡ç®—æ—‹è½¬å‘é‡ï¼ŒTå³ä¸Šè§’æ»¡è¶³ï¼š<br>$$<br>t=J\rho<br>$$<br>ç”±äº J å¯ä»¥ç”± Î¦ å¾—åˆ°ï¼Œæ‰€ä»¥è¿™é‡Œçš„ Ï ä¹Ÿå¯ä»¥ç”±è¯¥çº¿æ€§æ–¹ç¨‹å¾—åˆ°ã€‚</p><p>ç»¼ä¸Šï¼Œå…¶å¯¹åº”å…³ç³»æ±‡æ€»åœ¨ä¸‹æ–¹äº†ï¼š</p><p><img src="https://s2.loli.net/2023/01/14/sqChYOwQ9cvl5Va.png" alt="SO(3) SE(3) so(3) se(3)å¯¹åº”å…³ç³»"></p><h2 id="å››ã€æä»£æ•°æ±‚å¯¼ä¸æ‰°åŠ¨æ¨¡å‹">å››ã€æä»£æ•°æ±‚å¯¼ä¸æ‰°åŠ¨æ¨¡å‹</h2><h3 id="1ã€BCHå…¬å¼ä¸è¿‘ä¼¼å½¢å¼ï¼š">1ã€BCHå…¬å¼ä¸è¿‘ä¼¼å½¢å¼ï¼š</h3><p>ä½¿ç”¨æä»£æ•°çš„ä¸€å¤§åŠ¨æœºæ˜¯è¿›è¡Œä¼˜åŒ–ï¼Œè€Œåœ¨ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå¯¼æ•°æ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>ç”±äºSO(3) SE(3)ä¸Šæç¾¤æä»£æ•°ä¹‹é—´å­˜åœ¨ä¸€å¯¹ä¸€çš„è½¬æ¢å…³ç³»</p><p>é‚£å½“æç¾¤ä¸­å®Œæˆä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜æ—¶å€™ï¼Œå¯¹åº”æä»£æ•°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ ä»¥åŠæä»£æ•°ä¸­å®Œæˆä¸¤ä¸ªå‘é‡å…ƒç´ çš„ç›¸åŠ çš„ç»“æœï¼Œå¯¹åº”åˆ°æç¾¤ä¸­æ˜¯ä¸æ˜¯ä¸¤ä¸ªçŸ©é˜µçš„ä¹˜ç§¯ï¼Ÿ</p><p>ä¹Ÿå°±æ˜¯$e^{\phi_1^{\wedge}}e^{\phi_2^{\wedge}}=e^{(\phi_1+\phi_2)^{\wedge}}$æ˜¯å¦æˆç«‹ã€‚</p><p>å½“$\theta_1,\theta_2$æ˜¯æ ‡é‡æ•°å­—çš„æ—¶å€™ï¼Œè¿™ä¸ªç­‰å¼æˆç«‹ã€‚ä½†å½“ä»–ä»¬æ˜¯çŸ©é˜µçš„æ—¶å€™ï¼Œå°±å˜æˆäº†çŸ©é˜µçš„æŒ‡æ•°å‡½æ•°ï¼Œè¿™ä¸ªç­‰å¼æ˜¯ä¸æˆç«‹çš„ï¼š<br>$$<br>\ln(e^{\phi_!^{\wedge}}e^{\phi_2^{\wedge}})^{\vee}\ne\phi_1+\phi_2<br>$$<br>ä¸¤ä¸ªæä»£æ•°æŒ‡æ•°æ˜ å°„æˆç»©çš„å®Œæ•´å½¢å¼ï¼Œç”± <strong>(Baker-Campbell-Hausdorff, BCH)<strong>å…¬å¼ç»™å‡ºï¼Œæ˜¯ç¾¤è®ºå’Œé‡å­åŠ›å­¦ä¸­å¸¸ç”¨çš„å…¬å¼ä¹‹ä¸€ï¼Œå…¶å±•å¼€å¼çš„å‰å‡ é¡¹ä¸ºï¼š<br>$$<br>\ln(e^{A}e^{B})=A+B+\frac{1}{2}[A,B]+\frac{1}{12}[A,[A,B]]-\frac{1}{12}[A,[A,B]]+\cdots<br>$$<br>ä¸Šå¼å³ä¾§çš„<code>[]</code>ç¬¦å·æ˜¯</strong>ä¸¤ä¸ªçŸ©é˜µä¹‹é—´çš„ææ‹¬å·è¿ç®—</strong>ï¼Œå¯ä»¥çœ‹å‡ºä¸¤ä¸ªçŸ©é˜µæŒ‡æ•°çš„ä¹˜ç§¯ï¼Œä¼šäº§ç”Ÿå¾ˆå¤šææ‹¬å·ç»„æˆçš„ä½™é¡¹ã€‚</p><p>ç‰¹åˆ«çš„ï¼Œè€ƒè™‘SO(3)ä¸Šçš„æä»£æ•°$\ln(e^{\phi_1^{\wedge}})$ï¼Œå½“$\phi_1$æˆ–$\phi_2$å…¶ä¸­ä¸€ä¸ªæ˜¯å€¼éå¸¸å°çš„å‘é‡çš„æ—¶å€™ï¼Œé‚£ä¹ˆå…¬å¼å³ä¾§äºŒæ¬¡ä»¥ä¸Šçš„ä½™é¡¹å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚å› æ­¤<strong>BCHå…¬å¼å¯ä»¥è¿‘ä¼¼è¡¨è¾¾ä¸º</strong>ï¼š<br>$$<br>\ln(e^{\phi_!^{\wedge}}e^{\phi_2^{\wedge}})^{\vee}\approx<br>\begin{cases}<br>J_l(\phi_2)^{-1}\phi_1+\phi_2,å½“\phi_1ä¸ºå°é‡ \\<br>J_r(\phi_1)^{-1}\phi_2+\phi_1,å½“\phi_2ä¸ºå°é‡<br>\end{cases}<br>$$</p><ul><li><p>ç¬¬ä¸€ç§æƒ…å†µæ˜¯ï¼Œå½“æ—‹è½¬çŸ©é˜µR2ï¼ˆå…¶å¯¹åº”çš„æä»£æ•°ä¸ºÎ¦2ï¼‰ï¼Œå·¦ä¹˜ä¸€ä¸ªå¾ˆå°çš„æ—‹è½¬çŸ©é˜µR1ï¼ˆå…¶å¯¹åº”çš„æä»£æ•°ä¸ºÎ¦1ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥è¿‘ä¼¼çœ‹åšï¼Œåœ¨åŸæœ‰çš„æä»£æ•°Î¦2åŸºç¡€ä¸ŠåŠ ä¸€é¡¹$J_l(\phi_2)^{-1}\phi_1$</p></li><li><p>ç¬¬äºŒç§æƒ…å†µæ˜¯ï¼Œå³ä¹˜ä¸€ä¸ªæ¯”è¾ƒå°çš„å¾®å°ä½ç§»çš„æƒ…å†µ</p></li><li><p>ç¬¬ä¸€ç§æ˜¯<strong>å·¦ä¹˜BCHè¿‘ä¼¼</strong>ï¼Œç¬¬äºŒç§æ˜¯<strong>å³ä¹˜BCHè¿‘ä¼¼</strong>ï¼Œå¯¹åº”<strong>å·¦ä¹˜æ¨¡å‹</strong>å’Œ<strong>å³ä¹˜æ¨¡å‹</strong></p></li></ul><p>è¿™é‡Œçš„å·¦ä¹˜BCHè¿‘ä¼¼ä¸­çš„é›…å…‹æ¯”$j_l$å°±æ˜¯ç¬¬ä¸‰èŠ‚ä¸­ï¼Œæä»£æ•°å‘é‡$\xi$çš„æŒ‡æ•°æ˜ å°„$e^{\xi^{\wedge}}=\begin{bmatrix}R &amp; J\rho\\0^{T} &amp; 1\end{bmatrix}$ã€‚</p><p>ä»¤$\phi$çš„æ¨¡é•¿ä¸º$\theta$ï¼Œå•ä½æ–¹å‘å‘é‡ä¸ºaï¼Œåˆ™$\phi=\theta a$ï¼Œå³ä¸Šè§’çš„é‚£ä¸ªé›…å…‹æ¯”çŸ©é˜µç»è¿‡æ³°å‹’å±•å¼€åå¯å¾—ï¼š<br>$$<br>J_l=J=\sum_{n=0}^{\infty}\frac{1}{(n+1)!}(\phi^{\wedge})^n<br>\\=<br>\frac{\sin\theta}{\theta}I+\frac{1-\cos\theta}{\theta}a^{\wedge}+\frac{\theta-\sin\theta}{\theta}aa^T<br>$$</p><p>å†å–å…¶é€†ï¼š<br>$$<br>J_l^{-1}=\frac{\theta}{2}\cot\frac{\theta}{2}I-\frac{\theta}{2}a^{\wedge}+(1-\frac{\theta}{2}\cot\frac{\theta}{2})aa^T<br>$$<br>è€Œå³ä¹˜é›…å…‹æ¯”ä»…éœ€è¦å¯¹è‡ªå˜é‡å–è´Ÿå·å³å¯ï¼š<br>$$<br>J_r(\phi)=J_l(-\phi)<br>$$<br>è¿™æ ·ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¨è®ºæç¾¤ä¹˜æ³•ä¸æä»£æ•°åŠ æ³•çš„å…³ç³»äº†ã€‚</p><hr><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œè¿™é‡Œå’±é‡æ–°è®¨è®ºä¸€ä¸‹BCHè¿‘ä¼¼çš„æ„ä¹‰ï¼š</p><p>å‡å®šå¯¹æŸä¸ªæ—‹è½¬Rï¼Œå¯¹åº”çš„æä»£æ•°ä¸ºÎ¦ï¼Œæˆ‘ä»¬ç»™ä»–å·¦ä¹˜ä¸€ä¸ªå¾®å°æ—‹è½¬ï¼Œè®°ä½œâ–³Rï¼Œå¯¹åº”çš„æä»£æ•°ä¸ºâ–³Î¦ã€‚</p><p>é‚£ä¹ˆï¼Œåœ¨æç¾¤ä¸Šï¼Œå¾—åˆ°çš„ç»“æœä¸ºä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜<code>â–³RÂ·R</code>ï¼Œé‚£ä¹ˆå¯¹åº”çš„æä»£æ•°â–³Î¦ä¸ºå°é‡ã€‚æ ¹æ®<strong>å·¦ä¹˜BCHè¿‘ä¼¼</strong>ï¼Œä¸º$J_l(\phi)^{-1}\Delta \phi+\phi$ï¼ˆåœ¨å¾®é‡æ—‹è½¬å‰å·¦ä¹˜ä¸€ä¸ªé›…å…‹æ¯”çŸ©é˜µçš„é€†ï¼‰ã€‚åˆå¹¶èµ·æ¥çš„è¯ï¼Œä¸¤ä¸ªæä»£æ•°æŒ‡æ•°æ˜ å°„ä¹˜ç§¯çš„å®Œæ•´å½¢å¼å¯ä»¥å†™æˆï¼šï¼ˆå¤æ‚å¼å­å†™åœ¨eæŒ‡æ•°ä¸Šé¢æ˜¾å¾—å¥½å°å•Šçœ‹ä¸æ¸…ã€‚ã€‚ã€‚ï¼‰<br>$$<br>e^{\Delta\phi^{\wedge}}e^{\phi^{\wedge}}=\exp{\left((\phi+J_l^{-1}(\phi)\Delta\phi)^{\wedge}\right)}<br>$$<br>å¦‚æœå¾®é‡æ—‹è½¬åœ¨ä¸Šå¼å·¦è¾¹çš„å³ä¾§ï¼Œå°±é‡‡ç”¨<strong>å³ä¹˜è¿‘ä¼¼</strong>ï¼Œ<br>$$<br>e^{\phi^{\wedge}}e^{\Delta\phi^{\wedge}}=\exp{\left((\phi+J_r^{-1}(\phi)\Delta\phi)^{\wedge}\right)}<br>$$<br>åä¹‹ï¼Œè‹¥æˆ‘ä»¬åœ¨æä»£æ•°ä¸Šè¿›è¡ŒåŠ æ³•ï¼Œè®©ä¸€ä¸ªÎ¦åŠ ä¸Šâ–³Î¦ï¼Œé‚£ä¹ˆå¯ä»¥è¿‘ä¼¼ä¸ºæç¾¤ä¸Šå¸¦å·¦å³é›…å…‹æ¯”çš„ä¹˜æ³•ï¼š<br>$$<br>e^{(\phi+\Delta\phi)^{\wedge}}=e^{(J_l\Delta\phi)^{\wedge}}e^{\phi^{\wedge}}=e^{\phi^{\wedge}}e^{(J_r\Delta\phi)^{\wedge}}<br>$$<br>ä¸Šå¼ä¸ºæä»£æ•°åšå¾®ç§¯åˆ†æ‰“åŸºç¡€ç”¨çš„ã€‚</p><p>åŒæ ·çš„ï¼Œåœ¨ç‰¹æ®Šæ¬§æ°ç¾¤SE(3)ä¹Ÿæœ‰ç±»ä¼¼çš„BCHè¿‘ä¼¼ï¼š<br>$$<br>e^{\Delta\xi^\wedge}e^{\xi^\wedge}\approx\exp\left((\mathcal{J} _l^{-1}\Delta\xi+\xi)^\wedge\right)<br>$$<br>è‹¥å¾®é‡é€‰é€†è½¬æ­£åœ¨ä¸Šå¼å·¦è¾¹çš„å³ä¾§ï¼Œåˆ™é‡‡ç”¨<strong>å³ä¹˜è¿‘ä¼¼</strong>ï¼š<br>$$<br>e^{\xi^\wedge}e^{\Delta\xi^\wedge}\approx\exp\left((\mathcal{J} _r^{-1}\Delta\xi+\xi)^\wedge\right)<br>$$<br>å› ä¸ºè¿™é‡Œ${\mathcal{J_l}}$çš„å½¢å¼æ¯”è¾ƒå¤æ‚ï¼Œå®ƒæ˜¯ä¸€ä¸ª6Ã—6çš„ä¸€ä¸ªçŸ©é˜µï¼Œç”±äºå¾ˆå¤æ‚ï¼Œåç»­ä¹Ÿä¸å’‹ç”¨åˆ°ï¼Œæƒ³äº†è§£å¯ä»¥çœ‹çœ‹è¿™æœ¬ä¹¦ä¸­å¼å­ï¼ˆ7.82ï¼‰ä¸ï¼ˆ7.83ï¼‰</p><p><span class="github-emoji"><span>ğŸ”–</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f516.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>  <a href="https://www.semanticscholar.org/paper/State-Estimation-for-Robotics-Barfoot/7d29c8cee358616004bdfbdbce6019d49abd6f2c">T. Barfoot, â€œState estimation for robotics: A matrix lie group approach,â€ 2016. </a></p><h3 id="2ã€SO-3-ä¸Šçš„æä»£æ•°æ±‚å¯¼">2ã€SO(3)ä¸Šçš„æä»£æ•°æ±‚å¯¼</h3><p>åœ¨SLAMä¸­ï¼Œéœ€è¦ä¼°è®¡ä¸€ä¸ªç›¸æœºçš„ä½ç½®å’Œå§¿æ€ï¼Œä½å§¿ç”±æç¾¤ç‰¹æ®Šæ­£äº¤ç¾¤SO(3) ä¸Šçš„æ—‹è½¬çŸ©é˜µæˆ–è€…æç¾¤ç‰¹æ®Šæ¬§å¼ç¾¤SE(3) ä¸Šçš„å˜æ¢çŸ©é˜µè¿›è¡Œæè¿°çš„ã€‚</p><p>è®¾æœºå™¨äººæŸä¸ªæ—¶åˆ»çš„ä½å§¿ä¸º<code>T</code>ï¼Œå®ƒè§‚å¯Ÿåˆ°ä¸€ä¸ªä¸–ç•Œåæ ‡ï¼Œä½äº<code>p</code>ç‚¹ï¼Œè¿˜äº§ç”Ÿäº†ä¸€ä¸ªæ•°æ®<code>z</code>ï¼Œé‚£ä¹ˆï¼Œç”±åæ ‡å˜æ¢çš„å…³ç³»å¯å¾—ï¼š<br>$$<br>z=Tp+w<br>$$<br><code>w</code>ä¸ºéšæœºçš„å™ªå£°ï¼Œç”±äºå™ªå£°çš„å­˜åœ¨ï¼Œè§‚æµ‹æ•°æ®çš„ç»“æœ<code>z</code>ä¸€èˆ¬æ¥è¯´ä¸å¯èƒ½ç²¾ç¡®çš„æ»¡è¶³<code>z=Tp</code>çš„å…³ç³»ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šè®¡ç®—ç†æƒ³çš„è§‚è‰²ä¸å®é™…æ•°æ®çš„è¯¯å·®ï¼š<br>$$<br>error=z-Tp<br>$$<br>å‡è®¾ä¸€å…±æœ‰<code>N</code>ä¸ªè¿™æ ·çš„è·¯æ ‡ç‚¹(Landmarks)å’Œè§‚æµ‹æ•°æ®(Observation)ï¼Œå°±ä¼šæœ‰<code>N</code>ä¸ªè¯¯å·®å…¬å¼ï¼Œè®¡ç®—å‡º<code>N</code>ä¸ªç»“æœã€‚</p><p>é‚£ä¹ˆå¯¹äºæœºå™¨äººè¿›è¡Œä½å§¿ä¼°è®¡ï¼Œç›¸å½“äºè¦æ‰¾ä¸€ä¸ªæœ€ä¼˜çš„<code>T</code>ï¼Œä½¿å¾—æ•´ä½“è¯¯å·®æœ€å°åŒ–ï¼š<br>$$<br>\min_{T}J(T)=\sum_{i=1}^{N}\left|z_i-Tp_i\right|^2_2<br>$$<br>è¦æ±‚è§£è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦è®¡ç®—ç›®æ ‡å‡½æ•°<code>J</code>å…³äºå˜æ¢çŸ©é˜µ<code>T</code>çš„å¯¼æ•°äº†ï¼Œå…·ä½“ç®—æ³•åé¢å†è¯´å§ï¼Œè¿™é‡Œçš„é‡ç‚¹åœ¨äºï¼Œ<strong>æˆ‘ä»¬ç»å¸¸ä¼šæ„å»ºä¸ä½å§¿æœ‰å…³çš„å‡½æ•°ï¼Œç„¶åè°ˆè®ºè¯¥å‡½æ•°å…³äºä½å§¿çš„å¯¼æ•°ï¼Œç”¨ä»¥è°ƒæ•´å½“å‰çš„ä¼°è®¡å€¼</strong>ã€‚</p><p>butï¼ŒSO(3)å’ŒSE(3)å¯¹äºåŠ æ³•è¿ç®—æ˜¯ä¸å°é—­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ä¸¤ä¸ªæ—‹è½¬çŸ©é˜µç›¸åŠ å°±ä¸å†æ˜¯æ—‹è½¬çŸ©é˜µäº†</strong>ï¼Œå› æ­¤å¦‚æœéœ€è¦åœ¨æç¾¤ä¸Šè¿›è¡Œåç»­çš„ä¼˜åŒ–ï¼Œéœ€è¦åŠ ä¸Šä¸å°‘çº¦æŸæ¡ä»¶ï¼Œæ¯”å¦‚è¯´æ—‹è½¬çŸ©é˜µçš„æ­£äº¤æ€§å•¦ï¼Œè¡Œåˆ—å¼ä¸º1ç­‰ç­‰ï¼Œç»™ä¼˜åŒ–è¿‡ç¨‹æ·»ä¸å°‘å µã€‚è€Œæä»£æ•°æ˜¯ç”±å‘é‡ç»„æˆçš„ï¼Œèƒ½å¤Ÿè¿›è¡Œè‰¯å¥½çš„åŠ æ³•è¿ç®—ã€‚</p><p>æ‰€ä»¥è¯´ï¼Œè§£å†³æ±‚å¯¼é—®é¢˜çš„æ€è·¯ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p><ul><li>ç”¨æä»£æ•°è¡¨ç¤ºå§¿æ€ï¼Œç„¶å<strong>æ ¹æ®æä»£æ•°åŠ æ³•å¯¹æä»£æ•°æ±‚å¯¼</strong>ï¼Œå¯¹åº”<u>æä»£æ•°çš„æ±‚å¯¼æ¨¡å‹</u></li><li>å¯¹æç¾¤<strong>å·¦ä¹˜</strong>æˆ–<strong>å³ä¹˜</strong>å¾®å°æ‰°åŠ¨ï¼Œç„¶å<strong>å¯¹è¿™ä¸ªæ‰°åŠ¨æ±‚å¯¼</strong>ï¼Œç§°ä¸ºå·¦æ‰°åŠ¨å’Œå³æ‰°åŠ¨æ¨¡å‹ï¼Œå¯¹åº”<u>æ‰°åŠ¨æ¨¡å‹</u></li></ul><h3 id="3ã€æä»£æ•°æ±‚å¯¼">3ã€æä»£æ•°æ±‚å¯¼</h3><p>é¦–å…ˆè€ƒè™‘SO(3)çš„æƒ…å†µã€‚å‡è®¾æˆ‘ä»¬å¯¹ä¸€ä¸ªç©ºé—´ç‚¹<code>p</code>è¿›è¡Œæ—‹è½¬ï¼Œå¾—åˆ°<code>Rp</code>ï¼Œç°åœ¨ï¼Œè¦è®¡ç®—æ—‹è½¬ä¹‹åçš„ç‚¹åæ ‡ç›¸å¯¹äºæ—‹è½¬çš„å¯¼æ•°ï¼Œ<font style="background:yellow"><s>æˆ‘ä»¬ç®€å•è®°ä¸ºï¼š</s></font><br>$$<br>\frac{\partial (Rp)}{\partial R}<br>$$<br><font style="background:yellow">è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¸èƒ½æŒ‰ç…§çŸ©é˜µå¾®åˆ†æ¥å®šä¹‰å¯¼æ•°ï¼Œåªæ˜¯ä¸€ä¸ªä¾¿äºç†è§£çš„è®°å·</font></p><p>ç”±äºSO(3)æ²¡æœ‰åŠ æ³•ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¼æ•°æ²¡åŠæ³•æŒ‰ç…§å¯¼æ•°çš„å®šä¹‰è¿›è¡Œè®¡ç®—ã€‚è®¾<code>R</code>å¯¹åº”çš„æä»£æ•°ä¸ºÎ¦ï¼Œæˆ‘ä»¬å»è®¡ç®—ï¼š<br>$$<br>\frac{\partial (Rp)}{\partial R}=<br>\frac{\partial e^{\phi^{\wedge}}p}{\partial R}<br>=\lim_{\delta\phi\to0}\frac{e^{(\phi+\delta\phi)^{\wedge}}p-e^{\phi^{\wedge}}p}{\delta\phi}<br>$$<br><strong>ä¸¥æ ¼æŒ‰ç…§çŸ©é˜µå¾®åˆ†æ¥è¯´ï¼Œæ™ºèƒ½é‚±è¡Œå‘é‡å…³äºåˆ—å‘é‡çš„å¯¼æ•°ï¼Œç»“æœä¸ºä¸€ä¸ªçŸ©é˜µã€‚è¿™é‡Œå†™æˆåˆ—å‘é‡å¯¹åˆ—å‘é‡çš„å¯¼æ•°ï¼Œå¯ä»¥è®¤ä¸ºå…ˆå¯¹åˆ†å­è¿›è¡Œè½¬ç½®ï¼Œå†å¯¹æœ€åç»“æœè¿›è¡Œè½¬ç½®ï¼Œè¿™æ ·ä½¿å¾—å…¬å¼ç®€æ´æ˜“è¯»ï¼Œä¸ç„¶å°±å¾—ä¸ºæ¯è¡Œçš„åˆ†å­åŠ ä¸€ä¸ªè½¬ç½®ç¬¦å·</strong></p><p>ç”±äºæŒ‡æ•°å‡½æ•°exp(x)çš„æ³°å‹’å±•å¼€ä¸ºï¼š<br>$$<br>e^X=1+X+\frac{X^2}{2!}+\frac{X^3}{3!}+\cdots<br>$$<br>ç”±äºè¿™é‡Œçš„æŒ‡æ•°éƒ¨åˆ†ä¸ºçŸ©é˜µï¼Œä¸”$\Delta\phi\to0$ï¼Œå› æ­¤æ³°å‹’çº§æ•°å±•å¼€å¼äºŒæ¬¡ä»¥ä¸Šçš„é«˜é˜¶é¡¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼š<br>$$<br>e^{(J_l\Delta\phi)\wedge}=\sum_{n=0}^{\infty}\frac{1}{n!}((J_l\Delta\phi)^\wedge)<br>\\=<br>I+(J_l\Delta\phi)^\wedge<br>+<br>\frac{((J_l\Delta\phi)^\wedge)^2}{2!}<br>+<br>\frac{((J_l\Delta\phi)^\wedge)^3}{3!}<br>+\cdots<br>\approx I+(J_l\Delta\phi)^\wedge<br>$$<br>ä»£å…¥ä¸Šå¼å¯å¾—ï¼š<br>$$<br>\frac{\partial (Rp)}{\partial R}=<br>\frac{\partial e^{\phi^{\wedge}}p}{\partial R}<br>=\lim_{\delta\to0}\frac{e^{(\phi+\delta\phi)^{\wedge}}p-e^{\phi^{\wedge}}p}{\delta\phi}<br>\\\approx<br>\lim_{\delta\phi\to 0}<br>\frac{(I+(J_l\Delta\phi)^\wedge)e^{\phi^{\wedge}}p-e^{\phi^{\wedge}}p}{\delta\phi}<br>\\=<br>\lim_{\delta\phi\to 0}<br>\frac{(J_l\Delta\phi)^\wedge e^{\phi^{\wedge}}p}{\delta\phi}<br>$$<br>åˆ°è¿™é‡Œï¼Œåœ¨åˆ©ç”¨å‰ä¹˜å’Œåå¯¹ç§°çŸ©é˜µçš„æ€§è´¨.</p><p>å› ä¸º$(J_l\Delta\phi)^\wedge$æ˜¯åå¯¹ç§°çŸ©é˜µï¼Œ$e^{\phi^{\wedge}}p$æ˜¯ä¸€ä¸ªå‘é‡ï¼Œä¸¤ä¸ªå‘é‡ aï¼Œbç›¸å‰ä¹˜ç­‰ä»·äºå‘é‡çš„åå¯¹ç§°çŸ©é˜µä¹˜å‘é‡$a\times b=a^{\wedge}b$ã€‚è€Œç”±äºå‰ä¹˜è¿ç®—æ˜¯ä¸æ»¡è¶³äº¤æ¢å¾‹çš„ï¼Œä¸¤ä¸ªå‘é‡äº’æ¢ä½ç½®çš„æ—¶å€™è¦åŠ ä¸ªè´Ÿå·:<br>$$<br>a\times b=-b\times a<br>$$<br>æ‰€ä»¥ï¼Œä¸Šå¼å¯ä»¥è°ƒæ•´ä¸ºï¼š<br>$$<br>\frac{\partial e^{\phi^{\wedge}}p}{\partial R}=<br>\lim_{\delta\phi\to 0}<br>\frac{(J_l\Delta\phi)^\wedge e^{\phi^{\wedge}}p}{\delta\phi}<br>\\=<br>\lim_{\delta\phi\to 0}<br>\frac{(J_l\Delta\phi)\times (e^{\phi^{\wedge}}p)}{\delta\phi}<br>\\=<br>\lim_{\delta\phi\to 0}<br>\frac{-(e^{\phi^{\wedge}}p)\times(J_l\Delta\phi)}{\delta\phi}<br>\\=<br>\lim_{\delta\phi\to 0}<br>\frac{-(e^{\phi^{\wedge}}p) ^\wedge (J_l\Delta\phi)}{\delta\phi}<br>$$<br>ç”±å¯¼æ•°å®šä¹‰å¯å¾—ï¼š<br>$$<br>\frac{\partial e^{\phi^{\wedge}}p}{\partial R}=<br>\lim_{\delta\phi\to 0}<br>\frac{-(e^{\phi^{\wedge}}p) ^\wedge (J_l\Delta\phi)}{\delta\phi}=<br>-(Rp)^\wedge J_l<br>$$<br>è¯åˆ°è¿™é‡Œï¼Œå°±å¾—åˆ°äº†æ—‹è½¬åç‚¹ <code>Rp</code> ç›¸å¯¹äºæä»£æ•°çš„å¯¼æ•°ï¼Œç»“æœä¸­å­˜åœ¨ä¸€ä¸ªå·¦é›…å…‹æ¯”çŸ©é˜µ<code>Jl</code>ï¼Œè®¡ç®—è¯¥çŸ©é˜µæ¯”è¾ƒéº»çƒ¦ä¸€ç‚¹ï¼Œéœ€è¦ä»‹ç»æ‰°åŠ¨æ¨¡å‹æ¥ç»™å‡ºæ›´ç®€å•çš„æä»£æ•°æ±‚å¯¼æ–¹æ³•ã€‚</p><h3 id="4ã€å·¦ä¹˜æ‰°åŠ¨æ¨¡å‹">4ã€å·¦ä¹˜æ‰°åŠ¨æ¨¡å‹</h3><p>å¦ä¸€ç§æä»£æ•°çš„æ±‚å¯¼æ–¹å¼æ˜¯å¯¹æ—‹è½¬çŸ©é˜µè¿›è¡Œä¸€æ¬¡æ‰°åŠ¨â–³Rï¼Œç„¶åçœ‹ç»“æœä¸­ç›¸å¯¹äºè¯¥æ‰°åŠ¨çš„å˜åŒ–ç‡ã€‚</p><p>è¿™ä¸ªæ‰°åŠ¨å¯ä»¥ä¹˜å·¦è¾¹æˆ–å³è¾¹ï¼Œç»“æœä¼šæœ‰ç‚¹å·®åˆ«ã€‚</p><p>æˆ‘ä»¬ä»¥å·¦æ‰°åŠ¨ä¸ºä¾‹ï¼š</p><p>è®¾å·¦æ‰°åŠ¨<code>â–³R</code>å¯¹åº”çš„æä»£æ•° Î´Ï†ï¼Œç„¶åå¯¹è¯¥æä»£æ•° Î´Ï† è¿›è¡Œæ±‚å¯¼ã€‚æ ¹æ®å¯¼æ•°å®šä¹‰ï¼š<br>$$<br>\frac{\partial (Rp)}{\partial R}=<br>\frac{\partial(\Delta RR_p)}{\partial (\Delta R)}=<br>\frac{\partial(e^{(\delta\varphi)^\wedge}e^{\phi^{\wedge}}p)}{\partial (\delta\varphi)}<br>\\=<br>\lim_{\delta\varphi\to0}\frac{e^{(\delta\varphi)^\wedge} e^{\phi^\wedge}p-e^0e^{\phi^{\wedge}}p}{\delta\varphi-0}<br>\\\approx<br>\lim_{\delta\varphi\to0}\frac{(I+(\delta\varphi)^\wedge)e^{\phi^{\wedge}}p-e^{\phi^{\wedge}}p}{\delta\varphi}<br>\\=<br>\lim_{\delta\varphi\to0}\frac{(\delta\varphi)^\wedge(e^{\phi^\wedge}p)}{\delta\varphi}<br>\\=<br>\lim_{\delta\varphi\to0}\frac{-(e^{\phi^\wedge}p)^\wedge (\delta\varphi)}{\delta\varphi}<br>\\=<br>-(e^{\phi^\wedge}p)^\wedge=-(Rp)^\wedge<br>$$<br>ç›¸æ¯”è¾ƒå¯¹æ—‹è½¬çŸ©é˜µå¯¹åº”çš„æä»£æ•°ç›´æ¥è¿›è¡Œæ±‚å¯¼ï¼Œè¿™é‡Œå¯¹æ‰°åŠ¨æ¨¡å‹çš„æ±‚å¯¼å°‘äº†ä¸€ä¸ªé›…å„æ¯”çŸ©é˜µçš„è®¡ç®—ï¼Œå¤§å¤§çš„ç®€ä¾¿äº†æ±‚å¯¼çš„è¿‡ç¨‹ï¼Œæ›´åŠ æ–¹ä¾¿ä½¿ç”¨ã€‚</p><h3 id="5ã€SE-3-ä¸Šçš„æä»£æ•°æ±‚å¯¼">5ã€SE(3)ä¸Šçš„æä»£æ•°æ±‚å¯¼</h3><p>è¿™é‡Œä¸å†æ˜¯ç›´æ¥å¯¹æä»£æ•°æ±‚å¯¼ï¼Œå› ä¸ºæ‰°åŠ¨æ¨¡å‹æ±‚å¯¼æ›´åŠ ç®€ä¾¿å®ç”¨ï¼Œç›´æ¥ç»™å‡ºç‰¹æ®Šæ¬§å¼ç¾¤ä¸Šå·¦ä¹˜æˆ–è€…å³ä¹˜å¾®å°çš„æ‰°åŠ¨ï¼Œå†å¯¹è¯¥æ‰°åŠ¨è¿›è¡Œæ±‚å¯¼(å·¦å³æ‰°åŠ¨æ¨¡å‹)</p><p>å‡è®¾ä¸‰ç»´ç©ºé—´ç‚¹pç»è¿‡ä¸€æ¬¡ç‰¹æ®Šæ¬§å¼ç¾¤SE(3)ä¸­çš„å˜æ¢çŸ©é˜µ$T\in\mathbb{R}^{4\times 4}$ï¼ˆæ—‹è½¬+å¹³ç§»ï¼‰ï¼Œå…¶å¯¹åº”æä»£æ•°so(3)ä¸Šçš„å…­ç»´å‘é‡$\xi\in\mathbb{R}^6$ï¼Œè¯¥ç©ºé—´ç‚¹ç»è¿‡å˜æ¢åçš„ç‚¹åæ ‡ä¸ºTpï¼ˆpä¸ºé½æ¬¡åæ ‡$p=\begin{bmatrix}\bar{p}\\1\end{bmatrix}$ï¼‰,ç›¸å¯¹äºå˜æ¢Tçš„å¯¼æ•°ï¼Œç”±äºæç¾¤ä¸Šæ— æ³•æŒ‰ç…§å¯¼æ•°çš„å®šä¹‰è¿›è¡Œè®¡ç®—ï¼Œè½¬ä¸ºç›´æ¥ç»™å˜æ¢Tå¢åŠ ä¸€ä¸ªå¾®å°æ‰°åŠ¨$\Delta T=e^{(\delta\xi)^\wedge}$ï¼Œåˆ™æ‰°åŠ¨é¡¹çš„æä»£æ•°ä¸º$\delta\xi=\begin{bmatrix}\delta\rho \\delta\phi\end{bmatrix}$ã€‚<br>$$<br>\frac{\partial (Tp)}{\partial T}=<br>\frac{\partial(\Delta TT_p)}{\partial (\Delta T)}=<br>\frac{\partial(e^{(\delta\xi)^\wedge}e^{\xi^{\wedge}}p)}{\partial (\delta\xi)}<br>\\=<br>\lim_{\delta\xi\to0}\frac{e^{(\delta\xi)^\wedge} e^{\xi^\wedge}p-e^0e^{\xi^{\wedge}}p}{\delta\xi-0}<br>$$<br>ç»§ç»­åˆ©ç”¨æŒ‡æ•°å‡½æ•°çš„æ³°å‹’å±•å¼€ä»£å…¥ï¼š<br>$$<br>\lim_{\delta\xi\to0}\frac{e^{(\delta\xi)^\wedge} e^{\xi^\wedge}p-e^0e^{\xi^{\wedge}}p}{\delta\xi-0}<br>\\\approx<br>\lim_{\delta\xi\to0}\frac{(I+(\delta\xi)^\wedge)e^{\xi^{\wedge}}p-e^{\xi^{\wedge}}p}{\delta\xi}<br>\\=<br>\lim_{\delta\xi\to0}\frac{(\delta\xi)^\wedge(e^{\xi^\wedge}p)}{\delta\xi}<br>$$</p><p>ç”±äºè¿™é‡Œå˜æ¢çŸ©é˜µä¸­çš„ç¬¦å·<code>^</code>ä¸æ˜¯åå¯¹ç§°çš„æ„æ€ï¼Œè€Œæ˜¯â€œ<strong>å…­ç»´å‘é‡è½¬æ¢ä¸ºå››ç»´çŸ©é˜µ</strong>â€çš„æ„æ€ï¼Œæˆ‘ä»¬å‰é¢æœ‰æåˆ°çš„ï¼Œæ‰€ä»¥è¿™é‡Œ<strong>ä¸èƒ½ç»§ç»­åˆ©ç”¨å‰ç§¯çš„æ€§è´¨è¿›è¡Œæ¨å¯¼äº†</strong>.<br>$$<br>ç”±äº\delta\xi=<br>\begin{bmatrix}\delta\rho \\\delta\phi\end{bmatrix},<br>(\delta\xi)^\wedge=<br>\begin{bmatrix}<br>\delta\phi^\wedge &amp; \delta\rho\\<br>0^T &amp; 0<br>\end{bmatrix}<br>\\<br>e^{\xi^\wedge}=Tp=<br>\begin{bmatrix}<br>R &amp; J\rho \\<br>0^T &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}\bar{p}\\1\end{bmatrix}=<br>\begin{bmatrix}<br>R\bar{p}+J\rho\\<br>1<br>\end{bmatrix}<br>\\=<br>\lim_{\delta\xi\to0}\frac{(\delta\xi)^\wedge(e^{\xi^\wedge}p)}{\delta\xi}<br>\\=<br>\lim_{\delta\xi\to0}\frac{<br>\begin{bmatrix}<br>\delta\xi &amp; \delta\rho \\<br>0^T &amp; 0<br>\end{bmatrix}<br>\begin{bmatrix}<br>R\bar{p}+J\rho\\<br>1<br>\end{bmatrix}<br>}{\delta\xi}<br>\\=<br>\lim_{\delta\rho\to0,\delta\phi\to0}<br>\frac{<br>\begin{bmatrix}<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho\\<br>1<br>\end{bmatrix}<br>}{<br>\begin{bmatrix}<br>\delta\rho\\<br>\delta\phi<br>\end{bmatrix}<br>}<br>$$</p><p>ä¸Šå¼ä¸ºçŸ©é˜µé™¤æ³•ï¼Œåˆ†å­æ˜¯ 4Ã—1 çš„è¡Œå‘é‡ï¼Œåˆ†æ¯æ˜¯ 1Ã—6 çš„åˆ—å‘é‡ï¼Œç»“æœåº”è¯¥æ˜¯ 4Ã—6 çš„çŸ©é˜µï¼Œè¿™é‡Œæ¶‰åŠåˆ°çŸ©é˜µæ±‚å¯¼é¡ºåºçš„é—®é¢˜ï¼Œæ¯”å¦‚å‡è®¾<code>a,b,x,y</code>éƒ½æ˜¯åˆ—å‘é‡ï¼Œé‚£ä¹ˆçŸ©é˜µæ±‚å¯¼çš„å†™æ³•å¦‚ä¸‹ï¼š<br>$$<br>\frac{\mathrm{d}<br>\begin{bmatrix}<br>a\\b<br>\end{bmatrix}<br>}{\mathrm{d}<br>\begin{bmatrix}<br>x\\y<br>\end{bmatrix}<br>}=<br>\left(<br>\frac{\mathrm{d}<br>\begin{bmatrix}<br>a,b<br>\end{bmatrix}^T<br>}{\mathrm{d}<br>\begin{bmatrix}<br>x\\y<br>\end{bmatrix}<br>}<br>\right)=<br>\begin{bmatrix}<br>\frac{\mathrm{d}a}{\mathrm{d}x} &amp;<br>\frac{\mathrm{d}b}{\mathrm{d}x}\\<br>\frac{\mathrm{d}a}{\mathrm{d}y} &amp;<br>\frac{\mathrm{d}b}{\mathrm{d}y}\\<br>\end{bmatrix}^T=<br>\begin{bmatrix}<br>\frac{\mathrm{d}a}{\mathrm{d}x} &amp;<br>\frac{\mathrm{d}a}{\mathrm{d}y}\\<br>\frac{\mathrm{d}b}{\mathrm{d}x} &amp;<br>\frac{\mathrm{d}b}{\mathrm{d}y}\\<br>\end{bmatrix}<br>$$<br>å› æ­¤ä¸Šå¼ä¸­çš„çŸ©é˜µé™¤æ³•ä¹Ÿå¯ä»¥è¿™æ ·æ“ä½œ:<br>$$<br>ä»¤da=\delta\phi(R\bar{p}+Jp)+\delta\rho,db=0^T,dx=\delta\rho,dy=\delta\phi<br>\\<br>\lim_{\delta\rho\to0,\delta\phi\to0}<br>\frac{<br>\begin{bmatrix}<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho\\<br>1<br>\end{bmatrix}<br>}{<br>\begin{bmatrix}<br>\delta\rho\\<br>\delta\phi<br>\end{bmatrix}<br>}<br>\\=<br>\lim_{\delta\rho\to0,\delta\phi\to0}<br>\begin{bmatrix}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\rho}<br>&amp;<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\phi}<br>\\<br>0^T &amp; 0^T<br>\end{bmatrix}<br>\\=<br>\begin{bmatrix}<br>\lim_{\delta\rho\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\rho}<br>&amp;<br>\lim_{\delta\phi\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\phi}<br>\\<br>0^T &amp; 0^T<br>\end{bmatrix}<br>$$<br>ç”±äºè¯¥çŸ©é˜µå·¦ä¸Šè§’çš„$\delta\phi^{\wedge}(R\bar{p}+J\rho)$éƒ¨åˆ†ä¸$\delta\rho$æ— å…³ï¼Œå¸¸é‡å…³äº$\delta\rho$çš„å¯¼æ•°ä¸º0ï¼Œæ‰€ä»¥æœ‰ï¼š<br>$$<br>\lim_{\delta\rho\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\rho} =I<br>$$<br>åŒç†ï¼Œå³ä¸Šè§’çš„$\delta\rho$ä¸$\delta\phi$æ— å…³ï¼Œå…¶å…³äº$\delta\phi$çš„å¯¼æ•°ä¸º0ï¼š<br>$$<br>\lim_{\delta\phi\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\phi}=<br>\lim_{\delta\phi\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)<br>}{\delta\phi}<br>$$<br>åˆ°äº†è¿™é‡Œï¼Œç¬¦å·<code>^</code>å°±æ˜¯åå¯¹ç§°çŸ©é˜µçš„æ„æ€äº†ï¼Œç›´æ¥ç”¨å‰ç§¯å’Œåå¯¹ç§°ç¬¦å·çš„æ€§è´¨å¯å¾—ï¼š<br>$$<br>\lim_{\delta\phi\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\phi}<br>\\=<br>\lim_{\delta\phi\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)<br>}{\delta\phi}<br>\\=<br>\lim_{\delta\phi\to0}<br>\frac{<br>-(R\bar{p}+J\rho)^{\wedge}\delta\phi<br>}{\delta\phi}<br>\\=<br>-(R\bar p+J\rho)^{\wedge}<br>$$<br>æœ€ç»ˆè¿™ä¸¤é¡¹ä»£å›å»ï¼Œå¯å¾—ï¼š<br>$$<br>\begin{bmatrix}<br>\lim_{\delta\rho\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\rho}<br>&amp;<br>\lim_{\delta\phi\to0}<br>\frac{<br>\delta\phi^{\wedge}(R\bar{p}+J\rho)+\delta\rho<br>}{\delta\phi}<br>\\<br>0^T &amp; 0^T<br>\end{bmatrix}<br>\\=<br>\begin{bmatrix}<br>I &amp; -(R\bar p+J\rho)^{\wedge}\\<br>0^T &amp; 0^T<br>\end{bmatrix}<br>$$<br>å¯ä»¥ä½¿ç”¨ç¬¦å·$\odot $æ¥è¡¨ç¤ºä¸Šè¿°ç»“è®ºï¼š<br>$$<br>(Tp)^\odot =<br>\begin{bmatrix}<br>I &amp; -(R\bar p+J\rho)^{\wedge}\\<br>0^T &amp; 0^T<br>\end{bmatrix}_{4\times6}<br>$$<br>è¿™ä¸ªç¬¦å·$\odot $çš„å‡ ä½•æ„ä¹‰æ˜¯ï¼šä¸‰ç»´ç©ºé—´ç‚¹çš„å…¶æ¬¡åæ ‡$p=\begin{bmatrix}\bar{p}\\1\end{bmatrix}$è¿›è¿‡ä¸€æ¬¡å˜æ¢Tä¹‹åï¼Œå˜æˆäº†ä¸€ä¸ª4Ã—6çš„çŸ©é˜µã€‚</p><p>æ­å–œä½ åšæŒçœ‹åˆ°è¿™é‡Œ<span class="github-emoji"><span>ğŸ‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼Œæˆ‘ä»¬å®Œæˆäº†æç¾¤æä»£æ•°ä¸Šç›¸å…³çš„å¾®åˆ†è®¡ç®—<span class="github-emoji"><span>ğŸ‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><h2 id="äº”ã€ç›¸ä¼¼å˜æ¢ç¾¤ä¸æä»£æ•°">äº”ã€ç›¸ä¼¼å˜æ¢ç¾¤ä¸æä»£æ•°</h2><blockquote><p>è¿™é‡Œæ˜¯ä¸ºäº† â€œç®€å•â€ è¡¥å……ä¸€ä¸‹æœ‰å…³<strong>å•ç›®è§†è§‰ä¸­ä½¿ç”¨çš„ç›¸ä¼¼å˜æ¢ç¾¤Sim(3)</strong>ï¼Œä»¥åŠå¯¹åº”çš„æä»£æ•°$\mathfrak{sim}(3)$ã€‚åªå¯¹åŒç›®SLAMæˆ–RGB-D SLAMæ„Ÿå…´è¶£å¯ä»¥å…ˆè·³è¿‡~</p></blockquote><p>è¿™é‡Œéœ€è¦å…ˆè¯´æ˜ä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯å•ä¸ªæ‘„åƒå¤´å›ºå®šä½çš„è¯ï¼Œæ˜¯æ²¡åŠæ³•ä¼°è®¡äº‹ç‰©çš„è·ç¦»çš„ã€‚å¥½æ¯”å•åªçœ¼ç›æ˜¯æ— æ³•ç›´æ¥è·å–æ·±åº¦ä¿¡æ¯</p><p><img src="https://s2.loli.net/2023/01/15/6lTZ9swFoYvtEbx.png" alt="å•ç›®è§†è§‰ï¼Œä¸çŸ¥é“æ·±åº¦ï¼Œæ‰‹ä¸­æ˜¯ç¯®çƒè¿˜æ˜¯æœˆçƒï¼Ÿ"></p><p>å•ç›®ç›¸æœºä¸è®ºè¿œè¿‘ï¼Œçœ‹åˆ°çš„å›¾åƒä¿¡æ¯æ˜¯ä¸€æ ·çš„ï¼Œè¿™å¯¹å»ºå›¾å¾ˆä¸åˆ©ï¼Œæˆ‘ä»¬å…ˆç§°ä¹‹ä¸º<strong>å°ºåº¦ä¸ç¡®å®šæ€§</strong>ï¼Œå…·ä½“ä¼šåœ¨åç»­æ–‡ç« ä»‹ç»ã€‚</p><p>å¹¶ä¸”ï¼Œä»…é ç›¸æœºé‡Œç¨‹è®¡ä¼°è®¡è½¨è¿¹ï¼Œå°†ä¸å¯é¿å…å‡ºç°ç´¯è®¡æ¼‚ç§»ï¼Œç®€å•è¯´å°±æ˜¯åœ°å›¾å»ºæ­ªäº†ã€‚è¿™ä¸ªè¿˜éœ€è¦åç«¯ä¼˜åŒ–å’Œå›ç¯æ£€æµ‹æ¥çŸ«æ­£ã€‚è¿™ä¸ªä¹Ÿæ˜¯åç»­å†è¯´ã€‚</p><hr><p>æ‰€ä»¥è¯´ï¼Œå¦‚æœåœ¨å•ç›®SLAMä¸­ä½¿ç”¨SE(3)è¡¨ç¤ºä½å§¿ï¼Œé‚£ä¹ˆç”±äºå°ºåº¦ä¸ç¡®å®šæ€§ä¸å°ºåº¦æ¼‚ç§»ï¼Œæ•´ä¸ªSLAMè¿‡ç¨‹ä¸­çš„å°ºåº¦ä¼šå‘ç”Ÿä¸€äº›å˜æ¢ï¼Œè¿™åœ¨SE(3)ä¸­æ²¡åŠæ³•ä½“ç°å‡ºæ¥ã€‚</p><p>å•ç›®æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæ˜¾ç¤ºåœ°å°†å°ºåº¦å› å­è¡¨è¾¾å‡ºæ¥ã€‚ç”¨æ•°å­¦è¯­è¨€æ¥è¯´çš„è¯å°±æ˜¯ï¼Œå¯¹äºä½äºç©ºé—´ç‚¹pï¼Œåœ¨ç›¸æœºåæ ‡ç³»ä¸‹è¦ç»è¿‡ä¸€ä¸ª<strong>ç›¸ä¼¼å˜æ¢</strong><br>$$<br>Pâ€™=<br>\begin{bmatrix}<br>sR &amp; t\\<br>0^T &amp; 1<br>\end{bmatrix}<br>p=<br>sRp+t<br>$$<br>åœ¨ç›¸ä¼¼å˜æ¢ä¸­ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå°ºåº¦sè¡¨è¾¾å‡ºæ¥äº†ã€‚å®ƒåŒæ—¶ä½œç”¨åœ¨pçš„ä¸‰ä¸ªåæ ‡ä¸Šï¼Œå¯¹pè¿›è¡Œäº†ä¸€æ¬¡ç¼©æ”¾ã€‚ä¸SO(3)å’ŒSE(3)ç›¸ä¼¼ï¼Œç›¸ä¼¼å˜æ¢ä¹Ÿå¯¹çŸ©é˜µä¹˜æ³•æ„æˆç¾¤ï¼Œå«åš<strong>ç›¸ä¼¼å˜æ¢ç¾¤Sim(3)</strong>.<br>$$<br>Sim(3)=<br>\left\{<br>S=<br>\begin{bmatrix}<br>sR &amp; t\\<br>0^T &amp; 1<br>\end{bmatrix}<br>\in\mathbb{R}^{4\times 4}<br>\right\}<br>$$<br>åŒæ ·çš„ï¼ŒSim(3)ä¹Ÿæœ‰å¯¹åº”çš„æä»£æ•°ã€æŒ‡æ•°æ˜ å°„ã€å¯¹æ•°æ˜ å°„ç­‰ç­‰ã€‚æä»£æ•°sim(3)å…ƒç´ æ˜¯ä¸€ä¸ª7ç»´çš„å‘é‡$\zeta$ã€‚å®ƒå‰6ç»´ä¸se(3)ç›¸åŒï¼Œå°±æ˜¯æœ€åå¤šä¸€é¡¹$\sigma$ã€‚<br>$$<br>\mathfrak{sim}(3)<br>\left\{<br>\zeta|\zeta=<br>\begin{bmatrix}<br>\rho\\\phi\\\sigma<br>\end{bmatrix}<br>\in\mathbb R^7,<br>\zeta^\wedge=<br>\begin{bmatrix}<br>\sigma I+\phi^{\wedge} &amp; \rho \\<br>0^T &amp; 0<br>\end{bmatrix}\in\mathbb R^{4\times4}<br>\right\}<br>$$<br>å®ƒæ¯”se(3)å¤šäº†ä¸€é¡¹Ïƒï¼Œå…³è”Sim(3)ä¸sim(3)çš„ä»æ˜¯æŒ‡æ•°æ˜ å°„ä¸å¯¹æ•°æ˜ å°„ã€‚</p><p>æŒ‡æ•°æ˜ å°„ï¼š<br>$$<br>e^{(\zeta^{\wedge})}=<br>\begin{bmatrix}<br>e^\rho e^{\phi^\wedge} &amp; J_s\rho\\<br>0^T &amp; 1<br>\end{bmatrix}<br>$$<br>å…¶ä¸­Jçš„å½¢å¼ä¸ºï¼š<br>$$<br>J=\frac{e^\sigma-1}{\sigma}I+<br>\frac{\sigma e^\sigma\sin\theta+(1-e^\rho\cos\theta)\theta}{\sigma^2+\theta^2}a^\wedge<br>\\+(\frac{e^\sigma-1}{\sigma}-<br>\frac{\sigma (e^\sigma\cos\theta-1)+(e^\sigma\sin\theta)\theta}{\sigma^2+\theta^2}<br>)a^\wedge a^\wedge<br>$$<br>å¯¹äºæä»£æ•°$\zeta$ï¼Œå®ƒä¸æç¾¤çš„å¯¹åº”å…³ç³»ä¸ºï¼š<br>$$<br>s=e^\sigma,R=e^{\phi^\wedge},t=J_s\rho<br>$$<br>æ—‹è½¬éƒ¨åˆ†ä¸Šæ˜¯å’ŒSO(3)ä¸€è‡´çš„ã€‚å¹³ç§»éƒ¨åˆ†ï¼Œåœ¨se(3)ä¸­éœ€è¦ä¹˜ä¸€ä¸ªé›…å…‹æ¯”$\mathcal J$ï¼Œè€Œç›¸ä¼¼å˜æ¢çš„é›…å…‹æ¯”æ›´å¤æ‚ã€‚</p><p>å¯¹äºå°ºåº¦å› å­ï¼Œå¯ä»¥çœ‹åˆ°æç¾¤ä¸­çš„så³ä¸ºæä»£æ•°ä¸­çš„Ïƒçš„æŒ‡æ•°å‡½æ•°ã€‚</p><hr><p>Sim(3)çš„BCHè¿‘ä¼¼ä¸SE(3)æ˜¯ç±»ä¼¼çš„ã€‚å­˜åœ¨å¾®åˆ†æ¨¡å‹å’Œæ‰°åŠ¨æ¨¡å‹ä¸¤ç§æ–¹å¼ï¼Œè€Œæ‰°åŠ¨æ¨¡å‹ç›¸è¾ƒæ¥è¯´æ¯”è¾ƒç®€å•ï¼Œä»¥ä¸‹æ˜¯ç»“æœï¼š</p><p>è®¾ç»™ç›¸ä¼¼å˜æ¢<code>Sp</code>å·¦ä¾§ä¸€ä¸ªå°æ‰°åŠ¨$\exp(\zeta^\wedge)$ï¼Œå¹¶æ±‚<code>Sp</code>å¯¹äºæ‰°åŠ¨çš„å¯¼æ•°ã€‚å› ä¸ºSpæ˜¯4ç»´çš„é½æ¬¡åæ ‡ï¼Œ$\zeta$åˆ™æ˜¯7ç»´å‘é‡ï¼Œæ‰€ä»¥å¯¼æ•°åº”è¯¥æ˜¯4Ã—7çš„é›…å…‹æ¯”ã€‚æ–¹ä¾¿æœŸé—´ï¼Œè®°å½•<code>Sp</code>çš„å‰3ç»´ç»„æˆå‘é‡<code>q</code>ï¼Œé‚£ä¹ˆï¼š<br>$$<br>\frac{\partial Sp}{\partial\zeta}=<br>\begin{bmatrix}<br>I &amp; -q^\wedge &amp; q\\<br>0^T &amp; 0^T &amp; 0<br>\end{bmatrix}<br>$$</p><blockquote><p>æœ¬ç¯‡ä»‹ç»çš„å†…å®¹æœ‰ç‚¹å¤ªå¤šäº†ï¼Œå…³äºæç¾¤æä»£æ•°çš„ä»£ç å®ç°Sophusæˆ‘ä»¬æ”¾åœ¨ä¸‹ä¸€ç« åšä¸€ä¸ªç®€å•åœ°è¡¥å……</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLAM 2ï¼šä»£ç åŸºç¡€</title>
      <link href="/2023/01/11/slam-2-code-base/"/>
      <url>/2023/01/11/slam-2-code-base/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>SLAM 2ã€ä»£ç åŸºç¡€</h1><blockquote><p>å‚è€ƒè¿™ä¸ªé“¾æ¥ä¸‹çš„å®‰è£…è·¯å¾„ï¼š<a href="https://github.com/gaoxiang12/slambook2/tree/master/3rdparty">https://github.com/gaoxiang12/slambook2/tree/master/3rdparty</a></p></blockquote><h2 id="ä¸€ã€å®‰è£…ç¯å¢ƒ">ä¸€ã€å®‰è£…ç¯å¢ƒ</h2><h3 id="å®‰è£…Eigen">å®‰è£…Eigen</h3><p>Eigenæœ‰æ•ˆæ”¯æŒçº¿æ€§ä»£æ•°ï¼ŒçŸ©é˜µå’ŒçŸ¢é‡è¿ç®—ï¼Œæ•°å€¼åˆ†æåŠå…¶ç›¸å…³çš„ç®—æ³•ã€‚</p><p>å®‰è£…ï¼š</p><p><code>sudo apt install libeigen3-dev</code></p><h3 id="å®‰è£…Pangolin">å®‰è£…Pangolin</h3><p>Pangolinæ˜¯SLAMå¸¸ç”¨çš„åº“ä¹‹ä¸€ï¼Œä¸»è¦ç”¨äºSLAMç³»ç»Ÿçš„å¯è§†åŒ–ã€‚å®ƒæ˜¯åŸºäºOpenGLçš„ï¼Œä¸»è¦ä¼˜åŠ¿åœ¨äºä½¿ç”¨æ¯”OpenGLç®€å•</p><p>ä½¿ç”¨tar -zxvfè§£å‹Pangolinèµ„æºåŒ…ï¼Œå¹¶å…ˆä¸‹è½½ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt install doxygensudo apt install libglew-dev# å¦‚æœåœ¨åç»­å®‰è£…æ­¥éª¤ï¼Œè¿˜æŠ¥é”™ç¼ºä»€ä¹ˆï¼Œå°±ç™¾åº¦ä¸€ä¸‹å®‰è£…ä¸€ä¸‹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å‘½ä»¤è¡Œcdåˆ°è§£å‹å¥½çš„Pangolinæ–‡ä»¶å¤¹å†…ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd Pangolinmkdir build &amp;&amp; cd buildcmake -DCPP11_NO_BOOST=1 ..makesudo make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶ï¼Œå¦‚æœä½ æœ‰å‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">: error: â€˜PixelFormatâ€™ does not name a type; did you mean â€˜AVPixelFormatâ€™?     PixelFormat     fmtdst;     ^~~~~~~~~~~     AVPixelFormat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>éœ€è¦å‰å¾€Pangolin/srcåº•ä¸‹ï¼Œä¿®æ”¹é‡Œé¢çš„CMakeListsï¼Œä»ç¬¬266è¡Œå¼€å§‹ï¼Œæ³¨é‡Šä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">find_package</span><span class="token punctuation">(</span>FFMPEG QUIET<span class="token punctuation">)</span><span class="token comment"># if(BUILD_PANGOLIN_VIDEO AND FFMPEG_FOUND)</span><span class="token comment">#   set(HAVE_FFMPEG 1)</span><span class="token comment">#   list(APPEND INTERNAL_INC  ${FFMPEG_INCLUDE_DIRS} )</span><span class="token comment">#   list(APPEND LINK_LIBS ${FFMPEG_LIBRARIES} )</span><span class="token comment">#   list(APPEND HEADERS ${INCDIR}/video/drivers/ffmpeg.h)</span><span class="token comment">#   list(APPEND SOURCES video/drivers/ffmpeg.cpp)</span><span class="token comment">#   message(STATUS "ffmpeg Found and Enabled")</span><span class="token comment"># endif()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ é™¤å¹¶é‡æ–°å»ºç«‹ä¸€ä¸ªbuildæ–‡ä»¶å¤¹ï¼Œé‡å¤ä¸Šè¿°ç¼–è¯‘å®‰è£…æ­¥éª¤å³å¯ã€‚</p><h3 id="å®‰è£…ceres">å®‰è£…ceres</h3><p>ceresæ˜¯åŒg2oä¸€æ ·ï¼Œè¿ç”¨åœ¨slamå‰ç«¯æˆ–åç«¯ï¼Œå¯¹ç›¸æœºä½å§¿å’Œè·¯æ ‡ç‚¹è¿›è¡Œéçº¿æ€§å¯»ä¼˜çš„ç®—æ³•ï¼Œç‰¹åˆ«é€‚ç”¨äºè§£å†³åç«¯Boundle Adjustment (BA)é—®é¢˜ã€‚</p><p>cereså¯èƒ½éœ€è¦çš„ä¾èµ–é¡¹æœ‰ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt-get install liblapack-dev libsuitesparse-dev libcxsparse3 libgflags-dev libgoogle-glog-dev libgtest-dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>tar -zxvfè§£å‹ç¨‹åºåŒ…ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ceres-solvermkdir build &amp;&amp; cd buildcmake ..makesudo make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å®‰è£…gtsam">å®‰è£…gtsam</h3><p>GTSAMï¼ˆGeorgia Tech Smoothing and Mappingï¼‰æ˜¯åŸºäºå› å­å›¾çš„C++åº“ï¼Œå¯ä»¥è§£å†³slamå’Œsfmçš„é—®é¢˜ï¼Œå½“ç„¶å®ƒä¹Ÿå¯ä»¥è§£å†³ç®€å•æˆ–è€…æ›´åŠ å¤æ‚çš„<code>ä¼°è®¡</code>é—®é¢˜ã€‚<br>å› å­å›¾æ˜¯ä¸€ç§å›¾æ¨¡å‹ï¼Œéå¸¸é€‚åˆäºå¤æ‚çš„ä¼°è®¡é—®é¢˜çš„å»ºæ¨¡ï¼Œæ¯”å¦‚SLAMæˆ–è€…æ˜¯SFM( Structure from Motion)ã€‚è´å¶æ–¯ç½‘ç»œå±äºä¸€ç§æ— ç¯å›¾æ¨¡å‹</p><p>å®‰è£…gtsamä¹‹å‰éœ€è¦ç¡®ä¿boostæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ã€‚å‘æ¯”è¾ƒå¤šï¼Œæœ‰éœ€è¦å¯ä»¥å‚è€ƒ<a href="https://www.boost.org/">boostå®˜ç½‘</a></p><p>tar -zxvfè§£å‹gtsamç¨‹åºåŒ…ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake">cd gtsam-<span class="token number">4.0.2</span>mkdir build &amp;&amp; cd buildcmake ..makesudo make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å®‰è£…Sophus">å®‰è£…Sophus</h3><p>Eigenåº“æä¾›äº†é›†åˆæ¨¡å—ï¼Œä½†æ²¡æœ‰æä¾›æä»£æ•°çš„æ”¯æŒã€‚ä¸€ä¸ªè¾ƒå¥½çš„æç¾¤å’Œæä»£æ•°çš„åº“æ˜¯Sophusåº“ï¼Œå®ƒå¾ˆå¥½çš„æ”¯æŒäº†SO(3),so(3),SE(3)å’Œse(3)ã€‚Sophusåº“æ˜¯åŸºäºEigenåŸºç¡€ä¸Šå¼€å‘çš„ï¼Œç»§æ‰¿äº†Eigenåº“ä¸­çš„å®šä¹‰çš„å„ä¸ªç±»ã€‚å› æ­¤åœ¨ä½¿ç”¨Eigenåº“ä¸­çš„ç±»æ—¶ï¼Œæ—¢å¯ä»¥ä½¿ç”¨Eigenå‘½åç©ºé—´ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Sophuså‘½åç©ºé—´ã€‚</p><p>Sophusä¾èµ–fmtçš„ï¼Œæ‰€ä»¥éœ€è¦å…ˆå®‰è£…fmt</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">git clone  https://github.com/fmtlib/fmt.gitcd fmtmkdir buildcd buildcmake ..makesudo make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæ‰å®‰è£…Sophusã€‚è¿™Sophusæºç ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼Œå‰å¾€<code>Sophus/sophus/so2.cpp</code>ï¼Œå¯¹ç¬¬30è¡Œå¼€å§‹çš„åœ°æ–¹åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token class-name">SO2</span><span class="token double-colon punctuation">::</span><span class="token function">SO2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// unit_complex_.real() = 1.;</span>  <span class="token comment">// unit_complex_.imag() = 0.;</span>  unit_complex_<span class="token punctuation">.</span><span class="token function">real</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  unit_complex_<span class="token punctuation">.</span><span class="token function">imag</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå†æŒ‰è§„çŸ©ç¼–è¯‘å®‰è£…</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd Sophusmkdir buildcd buildcmake -Wno-dev ..makesudo make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å®‰è£…g2o">å®‰è£…g2o</h3><p>g2oæ˜¯ä¸€ä¸ªé€šç”¨å›¾ä¼˜åŒ–ç®—æ³•åº“ã€‚ ç›®å‰ä¸»æµçš„SLAMç ”ç©¶åŸºæœ¬éƒ½æ˜¯åŸºäºå›¾ä¼˜åŒ–çš„</p><p>å…ˆå®‰è£…ä¸€äº›ä¾èµ–</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt-get install qt5-qmake qt5-default libqglviewer-dev-qt5 libsuitesparse-dev libcxsparse3 libcholmod3 libqglviewer-dev-qt4 libqt4-dev qt4-qmake libqglviewer-headers <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…g2o</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd g2omkdir buildcd buildcmake ..makesudo make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä¸­é€”å‡ºç°æ‰¾ä¸åˆ°GLçš„æŠ¥é”™ï¼Œå¯ä»¥æ›¿æ¢ g2o/cmake_modulesé‡Œé¢çš„ FindQGLViewer.cmakeæ–‡ä»¶ï¼Œèƒ½å¤Ÿæ‰¾åˆ° libqglviewer</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment"># Need to find both Qt{4,5} and QGLViewer if the QQL support is to be built</span><span class="token function">FIND_PACKAGE</span><span class="token punctuation">(</span>Qt4 COMPONENTS QtCore QtXml QtOpenGL QtGui<span class="token punctuation">)</span><span class="token function">IF</span><span class="token punctuation">(</span><span class="token operator">NOT</span> Qt4_FOUND<span class="token punctuation">)</span><span class="token function">FIND_PACKAGE</span><span class="token punctuation">(</span>Qt5 QUIET COMPONENTS Core Xml OpenGL Gui Widgets<span class="token punctuation">)</span><span class="token function">IF</span><span class="token punctuation">(</span><span class="token operator">NOT</span> Qt4_FOUND <span class="token operator">AND</span> <span class="token operator">NOT</span> Qt5_FOUND<span class="token punctuation">)</span><span class="token function">MESSAGE</span><span class="token punctuation">(</span><span class="token string">"Qt{4,5} not found. Install it and set Qt{4,5}_DIR accordingly"</span><span class="token punctuation">)</span><span class="token function">IF</span> <span class="token punctuation">(</span><span class="token variable">WIN32</span><span class="token punctuation">)</span><span class="token function">MESSAGE</span><span class="token punctuation">(</span><span class="token string">"  In Windows, Qt5_DIR should be something like C:/Qt/5.4/msvc2013_64_opengl/lib/cmake/Qt5"</span><span class="token punctuation">)</span><span class="token function">ENDIF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">ENDIF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">ENDIF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">FIND_PATH</span><span class="token punctuation">(</span>QGLVIEWER_INCLUDE_DIR qglviewer.h    /usr/include/QGLViewer    /opt/local/include/QGLViewer    /usr/local/include/QGLViewer    /sw/include/QGLViewer    <span class="token variable">ENV</span> QGLVIEWERROOT  <span class="token punctuation">)</span><span class="token keyword">find_library</span><span class="token punctuation">(</span>QGLVIEWER_LIBRARY_RELEASE  NAMES qglviewer-qt4 qglviewer QGLViewer QGLViewer2 QGLViewer-qt5  PATHS /usr/lib        /usr/local/lib        /opt/local/lib        /sw/lib        <span class="token variable">ENV</span> QGLVIEWERROOT        <span class="token variable">ENV</span> LD_LIBRARY_PATH        <span class="token variable">ENV</span> LIBRARY_PATH  PATH_SUFFIXES QGLViewer QGLViewer/release<span class="token punctuation">)</span><span class="token keyword">find_library</span><span class="token punctuation">(</span>QGLVIEWER_LIBRARY_DEBUG  NAMES dqglviewer dQGLViewer dQGLViewer2 QGLViewerd2 QGLViewer-qt5  PATHS /usr/lib        /usr/local/lib        /opt/local/lib        /sw/lib        <span class="token variable">ENV</span> QGLVIEWERROOT        <span class="token variable">ENV</span> LD_LIBRARY_PATH        <span class="token variable">ENV</span> LIBRARY_PATH  PATH_SUFFIXES QGLViewer QGLViewer/release<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>QGLVIEWER_LIBRARY_RELEASE<span class="token punctuation">)</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>QGLVIEWER_LIBRARY_DEBUG<span class="token punctuation">)</span>    <span class="token keyword">set</span><span class="token punctuation">(</span>QGLVIEWER_LIBRARY optimized <span class="token punctuation">${</span>QGLVIEWER_LIBRARY_RELEASE<span class="token punctuation">}</span> debug <span class="token punctuation">${</span>QGLVIEWER_LIBRARY_DEBUG<span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">else</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">set</span><span class="token punctuation">(</span>QGLVIEWER_LIBRARY <span class="token punctuation">${</span>QGLVIEWER_LIBRARY_RELEASE<span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">include</span><span class="token punctuation">(</span>FindPackageHandleStandardArgs<span class="token punctuation">)</span><span class="token function">find_package_handle_standard_args</span><span class="token punctuation">(</span>QGLVIEWER DEFAULT_MSG  QGLVIEWER_INCLUDE_DIR QGLVIEWER_LIBRARY<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œå¦‚æœä½ è¿è¡Œä»£ç é‡åˆ°è¯¸å¦‚æ­¤ç±»çš„é”™è¯¯ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">undefined symbol: _ZN3g2o27OptimizationAlgorithmDoglegC1EPNS_15BlockSolverBaseE<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é‚£æ˜¯å› ä¸ºåº“æ²¡è¿æ¥å¥½ï¼Œå‘½ä»¤è¡Œè¿è¡Œä»¥ä¸‹è¯­å¥å¯ä»¥è§£å†³ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">export LD_LIBRARY_PATH=./lib<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="äºŒã€ä»£ç åŸºç¡€">äºŒã€ä»£ç åŸºç¡€</h2><p>è¿™é‡Œåªå…ˆä»‹ç»<code>Eigen</code>å’Œ<code>Pangolin</code>çš„åŸºç¡€ï¼Œå…¶ä»–éƒ¨åˆ†åœ¨åç»­å†è¯¦ç»†å±•å¼€ã€‚</p><p>å‚è€ƒç¬¬ä¸€ç¯‡slam<a href="https://tuoyou-hao.github.io/2022/08/02/slam-1-Fundamentals-of-three-dimensional-space-mathematics/">ä¸‰ç»´åˆšä½“è¿åŠ¨åŸºç¡€</a>ï¼Œä»¥é‡Œé¢æ›¾ä»‹ç»è¿‡çš„æ•°å­¦åŸç†ä¸ºå­¦ä¹ åŸºç¡€ã€‚</p><h3 id="EigenåŸºæœ¬ç±»å‹">EigenåŸºæœ¬ç±»å‹</h3><p>ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°ä»¥ä¸‹å‡ ä¸ªå¤´æ–‡ä»¶ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token comment">// Eigenéƒ¨åˆ† </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Core&gt;</span></span><span class="token comment">// ç¨ å¯†çŸ©é˜µçš„ä»£æ•°è¿ç®—ï¼ˆé€†ï¼Œç‰¹å¾å€¼ç­‰ï¼‰</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Dense&gt;</span></span><span class="token comment">// è®¡æ—¶ç”¨</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ctime&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MATRIX_SIZE</span> <span class="token expression"><span class="token operator">=</span> <span class="token number">50</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°ä¸­ï¼šç”³æ˜ä¸€ä¸ªçŸ©é˜µï¼Œå¸¸ç”¨ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// Eigen ä¸­æ‰€æœ‰å‘é‡å’ŒçŸ©é˜µéƒ½æ˜¯Eigen::Matrixï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ã€‚å®ƒçš„å‰ä¸‰ä¸ªå‚æ•°ä¸ºï¼šæ•°æ®ç±»å‹ï¼Œè¡Œï¼Œåˆ—</span><span class="token comment">// å£°æ˜ä¸€ä¸ª2*3çš„floatçŸ©é˜µ</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">&gt;</span> matrix_23<span class="token punctuation">;</span><span class="token comment">// Eigen é€šè¿‡ typedef æä¾›äº†è®¸å¤šå†…ç½®ç±»å‹ï¼Œä¸è¿‡åº•å±‚ä»æ˜¯Eigen::Matrix</span><span class="token comment">// ä¾‹å¦‚ Vector3d å®è´¨ä¸Šæ˜¯ Eigen::Matrix&lt;double, 3, 1&gt;ï¼Œä¹Ÿå°±æ˜¯ä¸‰ç»´å‘é‡</span>Eigen<span class="token double-colon punctuation">::</span>Vector3d v_3d<span class="token punctuation">;</span><span class="token comment">// è¿™æ˜¯ä¸€æ ·çš„å†™æ³•</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&gt;</span> matrix_31<span class="token punctuation">;</span><span class="token comment">// Matrix3d å®é™…ä¸Šæ˜¯ Eigen::Matrix&lt;double, 3, 3&gt;</span>Eigen<span class="token double-colon punctuation">::</span>Matrix3d matrix_33<span class="token punctuation">;</span><span class="token comment">// çŸ©é˜µåˆå§‹åŒ–ä¸ºé›¶</span>matrix_33 <span class="token operator">=</span> Eigen<span class="token double-colon punctuation">::</span><span class="token class-name">Matrix3d</span><span class="token double-colon punctuation">::</span><span class="token function">Zero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¦‚æœä¸ç¡®å®šçŸ©é˜µå¤§å°ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€å¤§å°çš„çŸ©é˜µ</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span>Eigen<span class="token double-colon punctuation">::</span>Dynamic<span class="token punctuation">,</span>Eigen<span class="token double-colon punctuation">::</span>Dynamic<span class="token operator">&gt;</span> matrix_dynamic<span class="token punctuation">;</span><span class="token comment">// æ›´ç®€å•çš„æ–¹å¼</span>Eigen<span class="token double-colon punctuation">::</span>MatrixXd matrix_x<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•°æ®åˆå§‹åŒ–ï¼Œå¯ä»¥ç›´æ¥ç”¨<code>&lt;&lt;</code>çš„æ–¹å¼èµ‹å€¼æˆ–è®¿é—®ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// è¾“å…¥æ•°æ®ï¼ˆåˆå§‹åŒ–ï¼‰</span>matrix_23 <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"matrix_23:\n"</span> <span class="token operator">&lt;&lt;</span> matrix_23 <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span class="token comment">// ç”¨()è®¿é—®çŸ©é˜µä¸­çš„å…ƒç´ </span>std<span class="token double-colon punctuation">::</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"ç”¨()è®¿é—®çŸ©é˜µä¸­çš„å…ƒç´ "</span><span class="token operator">&lt;&lt;</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        std<span class="token double-colon punctuation">::</span>cout<span class="token operator">&lt;&lt;</span><span class="token function">matrix_23</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>cout<span class="token operator">&lt;&lt;</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸åŒå‘é‡æˆ–çŸ©é˜µå¯èƒ½æœ‰ç±»å‹ä¸Šçš„ä¸åŒï¼Œåœ¨Eigené‡Œä½ ä¸èƒ½æ··åˆä¸¤ç§ä¸åŒç±»å‹çš„çŸ©é˜µï¼Œè¿™æ˜¯é”™è¯¯ç¤ºèŒƒï¼š<br>Eigen::Matrix&lt;double, 2, 1&gt; result_wrong_type = matrix_23 * v_3d;</p><p>è½¬æ¢ç±»å‹éœ€è¦ç”¨æ˜¾å¼è½¬æ¢ï¼Œå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// çŸ©é˜µå’Œå‘é‡ç›¸ä¹˜ï¼ˆå®é™…ä¸Šè¿˜æ˜¯çŸ©é˜µå’ŒçŸ©é˜µï¼‰</span>v_3d <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>matrix_33 <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">;</span><span class="token comment">// Eigené‡Œçš„ä¸åŒç±»å‹ä¹‹é—´éœ€è¦ç±»å‹è½¬æ¢ï¼Œè¦ç”¨æ˜¾å¼è½¬æ¢çš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&gt;</span> result_1 <span class="token operator">=</span> matrix_23<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> v_3d<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"result1:\n"</span><span class="token operator">&lt;&lt;</span>result_1<span class="token operator">&lt;&lt;</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&gt;</span> result_2 <span class="token operator">=</span> matrix_23 <span class="token operator">*</span> matrix_31<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"result2:\n"</span><span class="token operator">&lt;&lt;</span>result_2<span class="token operator">&lt;&lt;</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŸºæœ¬è¿ç®—ä¸¾ä¾‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä¸€äº›ç®€å•çš„è¿ç®—ä¸¾ä¾‹</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">&gt;</span> Rmatrix_33<span class="token punctuation">;</span>Rmatrix_33 <span class="token operator">=</span> Eigen<span class="token double-colon punctuation">::</span><span class="token class-name">Matrix3d</span><span class="token double-colon punctuation">::</span><span class="token function">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Random Matrix:\n"</span><span class="token operator">&lt;&lt;</span>Rmatrix_33<span class="token operator">&lt;&lt;</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> Rmatrix_33<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>      <span class="token comment">// è½¬ç½®</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> Rmatrix_33<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>            <span class="token comment">// å„å…ƒç´ å’Œ</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> Rmatrix_33<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>          <span class="token comment">// è¿¹</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token operator">*</span>Rmatrix_33 <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>               <span class="token comment">// æ•°ä¹˜</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> Rmatrix_33<span class="token operator">+</span>Rmatrix_33 <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>        <span class="token comment">// åŠ å‡</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> Rmatrix_33<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>        <span class="token comment">// é€†</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> Rmatrix_33<span class="token punctuation">.</span><span class="token function">determinant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token comment">// è¡Œåˆ—å¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çŸ©é˜µç‰¹å¾å€¼è®¡ç®—ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ç‰¹å¾å€¼ </span><span class="token comment">// Eigen::SelfAdjointEigenSolver</span><span class="token comment">// å®å¯¹ç§°çŸ©é˜µå¯ä»¥ä¿è¯å¯¹è§’åŒ–æˆåŠŸ</span>Eigen<span class="token double-colon punctuation">::</span>SelfAdjointEigenSolver<span class="token operator">&lt;</span>Eigen<span class="token double-colon punctuation">::</span>Matrix3d<span class="token operator">&gt;</span> <span class="token function">eigen_solver</span> <span class="token punctuation">(</span> matrix_33<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>matrix_33 <span class="token punctuation">)</span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Eigen values = \n"</span> <span class="token operator">&lt;&lt;</span> eigen_solver<span class="token punctuation">.</span><span class="token function">eigenvalues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Eigen vectors = \n"</span> <span class="token operator">&lt;&lt;</span> eigen_solver<span class="token punctuation">.</span><span class="token function">eigenvectors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§£æ–¹ç¨‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// è§£æ–¹ç¨‹</span><span class="token comment">// æ±‚è§£ matrix_NN * x = v_Nd æ–¹ç¨‹</span><span class="token comment">// Nçš„å¤§å°åœ¨å‰è¾¹çš„å®é‡Œå®šä¹‰ï¼Œå®ƒç”±éšæœºæ•°ç”Ÿæˆ</span><span class="token comment">// ç›´æ¥æ±‚é€†è‡ªç„¶æ˜¯æœ€ç›´æ¥çš„ï¼Œä½†æ˜¯æ±‚é€†è¿ç®—é‡å¤§</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span>MATRIX_SIZE<span class="token punctuation">,</span>MATRIX_SIZE<span class="token operator">&gt;</span> matrix_NN<span class="token punctuation">;</span>matrix_NN <span class="token operator">=</span> Eigen<span class="token double-colon punctuation">::</span><span class="token class-name">MatrixXd</span><span class="token double-colon punctuation">::</span><span class="token function">Random</span><span class="token punctuation">(</span>MATRIX_SIZE<span class="token punctuation">,</span> MATRIX_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span>MATRIX_SIZE<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&gt;</span> v_Nd<span class="token punctuation">;</span>v_Nd <span class="token operator">=</span> Eigen<span class="token double-colon punctuation">::</span><span class="token class-name">MatrixXd</span><span class="token double-colon punctuation">::</span><span class="token function">Random</span><span class="token punctuation">(</span>MATRIX_SIZE<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ±‚é€†ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">clock_t time_stt <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¡æ—¶ç”¨</span><span class="token comment">// ç›´æ¥æ±‚é€† inverse</span>Eigen<span class="token double-colon punctuation">::</span>Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span>MATRIX_SIZE<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> matrix_NN<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>v_Nd<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span><span class="token string">"time use in normal inverse is: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>time_stt<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>CLOCKS_PER_SEC <span class="token operator">&lt;&lt;</span> <span class="token string">"ms"</span><span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span class="token comment">// é€šå¸¸ç”¨çŸ©é˜µåˆ†è§£æ¥æ±‚ï¼Œä¾‹å¦‚QRåˆ†è§£ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤š</span><span class="token comment">// colPivHouseholderQr</span>time_stt <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>x <span class="token operator">=</span> matrix_NN<span class="token punctuation">.</span><span class="token function">colPivHouseholderQr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">solve</span><span class="token punctuation">(</span>v_Nd<span class="token punctuation">)</span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span><span class="token string">"time use in Qr decomposition is: "</span> <span class="token operator">&lt;&lt;</span><span class="token number">1000</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>time_stt<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>CLOCKS_PER_SEC <span class="token operator">&lt;&lt;</span><span class="token string">"ms"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Cmake">Cmake</h3><p>Cmakeæ˜¯ï¼ˆè·¨å¹³å°çš„ï¼‰å®‰è£…ç¼–è¯‘å·¥å…·ï¼Œ å¯ä»¥ç”¨ç®€å•çš„è¯­å¥æ¥æè¿°æ‰€æœ‰å¹³å°çš„å®‰è£…(ç¼–è¯‘è¿‡ç¨‹) ã€‚<code>æœ¬ç¯‡åªå…ˆä»‹ç»ç®€å•çš„cmakeè¯­æ³•</code>ã€‚</p><p>æ—¢ç„¶æ˜¯é¢å‘ç¼–è¯‘ï¼Œå°±éœ€è¦æœ‰ç¨‹åºç”¨æ¥ç¼–è¯‘ã€‚ä»¥ä¸‹æ˜¯ä¸¾ä¾‹çš„ä¸‰ä¸ªc++ç¨‹åºï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// hello.cpp</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv <span class="token punctuation">)</span><span class="token punctuation">{</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"Hello Pokemon!"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥åŠå¯ä»¥ç”¨åº“çš„æ–¹å¼ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// libHello.cpp</span><span class="token comment">// è¿™æ˜¯ä¸€ä¸ªåº“æ–‡ä»¶</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">printHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"Hello SLAM"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”å¤´æ–‡ä»¶ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// libHello.h</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">LIBHELLOSLAM_H_</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LIBHELLOSLAM_H_</span></span><span class="token comment">// ä¸Šé¢çš„å®å®šä¹‰æ˜¯ä¸ºäº†é˜²æ­¢é‡å¤å¼•ç”¨è¿™ä¸ªå¤´æ–‡ä»¶è€Œå¼•èµ·çš„é‡å®šä¹‰é”™è¯¯</span><span class="token keyword">void</span> <span class="token function">printHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨è¿™ä¸ªåº“æ–‡ä»¶ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// useHello.cpp</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"libHello.h"</span></span><span class="token comment">// ä½¿ç”¨ libHelloSLAM.h ä¸­çš„ printHello() å‡½æ•°</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv <span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">printHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ‰äº†ä¸Šè¿°ç¨‹åºï¼Œç°åœ¨æ¥å†™CMakeLists</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment"># å£°æ˜è¦æ±‚çš„ cmake æœ€ä½ç‰ˆæœ¬</span><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span> <span class="token property">VERSION</span> <span class="token number">2.8</span> <span class="token punctuation">)</span><span class="token comment"># å£°æ˜ä¸€ä¸ª cmake å·¥ç¨‹</span><span class="token keyword">project</span><span class="token punctuation">(</span> Hello <span class="token punctuation">)</span><span class="token comment"># è®¾ç½®ç¼–è¯‘æ¨¡å¼</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token variable">CMAKE_BUILD_TYPE</span> <span class="token string">"Debug"</span> <span class="token punctuation">)</span><span class="token comment"># æ·»åŠ ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº</span><span class="token comment"># è¯­æ³•ï¼šadd_executable( ç¨‹åºå æºä»£ç æ–‡ä»¶ ï¼‰</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span> hello hello.cpp <span class="token punctuation">)</span><span class="token comment"># æ·»åŠ ä¸€ä¸ªåº“</span><span class="token keyword">add_library</span><span class="token punctuation">(</span> libhello libHello.cpp <span class="token punctuation">)</span><span class="token comment"># å…±äº«åº“</span><span class="token keyword">add_library</span><span class="token punctuation">(</span> libhello_shared <span class="token namespace">SHARED</span> libHello.cpp <span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span> useHello useHello.cpp <span class="token punctuation">)</span><span class="token comment"># å°†åº“æ–‡ä»¶é“¾æ¥åˆ°å¯æ‰§è¡Œç¨‹åºä¸Š</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span> useHello libhello_shared <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–è¯‘çš„æ—¶å€™ï¼Œå»ºè®®å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼Œå°†æºç å’Œç¼–è¯‘æ–‡ä»¶åŒºåˆ†å¼€æ¥ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir build &amp;&amp; cd bulidcmake ..make<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æœ¬ä»£ç ç”Ÿæˆçš„æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">CMakeCache.txt  CMakeFiles  cmake_install.cmake  hello  liblibhello.a  liblibhello_shared.so  Makefile  useHello<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿è¡Œæ•ˆæœè¯·è‡ªè¡ŒåŠ¨æ‰‹éªŒè¯</p><hr><p>ç°åœ¨æ¥ç¼–å†™Eigenä»£ç æ‰€éœ€çš„CMakeListsï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment"># å£°æ˜è¦æ±‚çš„ cmake æœ€ä½ç‰ˆæœ¬</span><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span> <span class="token property">VERSION</span> <span class="token number">2.8</span> <span class="token punctuation">)</span><span class="token comment"># å£°æ˜ä¸€ä¸ª cmake å·¥ç¨‹</span><span class="token keyword">project</span><span class="token punctuation">(</span> Eigen_learn <span class="token punctuation">)</span><span class="token comment"># è®¾ç½®ç¼–è¯‘æ¨¡å¼</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token variable">CMAKE_BUILD_TYPE</span> <span class="token string">"Release"</span> <span class="token punctuation">)</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token variable">CMAKE_CXX_FLAGS</span> <span class="token string">"-O3"</span> <span class="token punctuation">)</span><span class="token comment"># æ·»åŠ Eigenå¤´æ–‡ä»¶</span><span class="token keyword">include_directories</span><span class="token punctuation">(</span> <span class="token string">"/usr/include/eigen3"</span> <span class="token punctuation">)</span><span class="token comment"># æ·»åŠ ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº</span><span class="token comment"># è¯­æ³•ï¼šadd_executable( ç¨‹åºå æºä»£ç æ–‡ä»¶ ï¼‰</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span> Eigen_learn EigenMatrix.cpp <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­<code>set( CMAKE_CXX_FLAGS "-O3" )</code>æ˜¯æŒ‡å®šäº†g++ï¼Œå¹¶é€‰æ‹©äº†ä¼˜åŒ–é€‰é¡¹ã€‚</p><blockquote><p>O0é€‰é¡¹ä¸è¿›è¡Œä»»ä½•ä¼˜åŒ–ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°½é‡çš„ç¼©çŸ­ç¼–è¯‘æ¶ˆè€—ï¼ˆæ—¶é—´ï¼Œç©ºé—´ï¼‰ï¼Œæ­¤æ—¶ï¼Œdebugä¼šäº§å‡ºå’Œç¨‹åºé¢„æœŸçš„ç»“æœã€‚å½“ç¨‹åºè¿è¡Œè¢«æ–­ç‚¹æ‰“æ–­ï¼Œæ­¤æ—¶ç¨‹åºå†…çš„å„ç§å£°æ˜æ˜¯ç‹¬ç«‹çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä»»æ„çš„ç»™å˜é‡èµ‹å€¼ï¼Œæˆ–è€…åœ¨å‡½æ•°ä½“å†…æŠŠç¨‹åºè®¡æ•°å™¨æŒ‡åˆ°å…¶ä»–è¯­å¥,ä»¥åŠä»æºç¨‹åºä¸­ ç²¾ç¡®åœ°è·å–ä½ æœŸå¾…çš„ç»“æœ.</p><p>O1ä¼˜åŒ–ä¼šæ¶ˆè€—å°‘å¤šçš„ç¼–è¯‘æ—¶é—´ï¼Œå®ƒä¸»è¦å¯¹ä»£ç çš„åˆ†æ”¯ï¼Œå¸¸é‡ä»¥åŠè¡¨è¾¾å¼ç­‰è¿›è¡Œä¼˜åŒ–ã€‚</p><p>O2ä¼šå°è¯•æ›´å¤šçš„å¯„å­˜å™¨çº§çš„ä¼˜åŒ–ä»¥åŠæŒ‡ä»¤çº§çš„ä¼˜åŒ–ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘æœŸé—´å ç”¨æ›´å¤šçš„å†…å­˜å’Œç¼–è¯‘æ—¶é—´ã€‚</p><p>O3åœ¨O2çš„åŸºç¡€ä¸Šè¿›è¡Œæ›´å¤šçš„ä¼˜åŒ–ï¼Œä¾‹å¦‚ä½¿ç”¨ä¼ªå¯„å­˜å™¨ç½‘ç»œï¼Œæ™®é€šå‡½æ•°çš„å†…è”ï¼Œä»¥åŠé’ˆå¯¹å¾ªç¯çš„æ›´å¤šä¼˜åŒ–ã€‚</p></blockquote><h3 id="Eigenå‡ ä½•æ¨¡å—">Eigenå‡ ä½•æ¨¡å—</h3><p>è¿™é‡Œç›´æ¥ä¸Šä»£ç ï¼Œä¸€äº›è¦ç‚¹æ•´ç†åœ¨æ³¨é‡Šäº†ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Core&gt;</span></span><span class="token comment">// Eigen å‡ ä½•æ¨¡å—</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Geometry&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// Eigen/Geometry æ¨¡å—æä¾›äº†å„ç§æ—‹è½¬å’Œå¹³ç§»çš„è¡¨ç¤º</span>    <span class="token comment">// 3D æ—‹è½¬çŸ©é˜µç›´æ¥ä½¿ç”¨ Matrix3d æˆ– Matrix3f</span>    <span class="token comment">// Identity() åˆå§‹ä¸€ä¸ªå•ä½çŸ©é˜µ</span>    Eigen<span class="token double-colon punctuation">::</span>Matrix3d rotation_matrix <span class="token operator">=</span> Eigen<span class="token double-colon punctuation">::</span><span class="token class-name">Matrix3d</span><span class="token double-colon punctuation">::</span><span class="token function">Identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ—‹è½¬å‘é‡ä½¿ç”¨ AngleAxis, å®ƒåº•å±‚ä¸ç›´æ¥æ˜¯Matrixï¼Œä½†è¿ç®—å¯ä»¥å½“ä½œçŸ©é˜µï¼ˆå› ä¸ºé‡è½½äº†è¿ç®—ç¬¦ï¼‰</span>    <span class="token comment">// æ²¿ Z è½´æ—‹è½¬ 45 åº¦</span>    <span class="token comment">// #define M_PI 3.14159265358979323846</span>    Eigen<span class="token double-colon punctuation">::</span>AngleAxisd <span class="token function">rotation_vector</span> <span class="token punctuation">(</span>M_PI<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token class-name">Eigen</span><span class="token double-colon punctuation">::</span><span class="token function">Vector3d</span> <span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// coutçš„ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œè§„å®šå°æ•°åä¿ç•™å‡ ä½ï¼Œå¦‚3ä½çš„å†™æ³•å¦‚ä¸‹ï¼š    </span>    cout<span class="token punctuation">.</span><span class="token function">precision</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç”¨.matrix()è½¬æ¢æˆçŸ©é˜µ</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"rotation matrix =\n"</span><span class="token operator">&lt;&lt;</span>rotation_vector<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>                    <span class="token comment">// ä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼</span>    rotation_matrix <span class="token operator">=</span> rotation_vector<span class="token punctuation">.</span><span class="token function">toRotationMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"toRotationMatrix =\n"</span><span class="token operator">&lt;&lt;</span> rotation_matrix <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>      <span class="token comment">// ç”¨ AngleAxis å¯ä»¥è¿›è¡Œåæ ‡å˜æ¢</span>    Eigen<span class="token double-colon punctuation">::</span>Vector3d <span class="token function">v</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Eigen<span class="token double-colon punctuation">::</span>Vector3d v_rotated <span class="token operator">=</span> rotation_vector <span class="token operator">*</span> v<span class="token punctuation">;</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"(1,0,0) after rotation = "</span><span class="token operator">&lt;&lt;</span>v_rotated<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token comment">// æˆ–è€…ç”¨æ—‹è½¬çŸ©é˜µ</span>    v_rotated <span class="token operator">=</span> rotation_matrix <span class="token operator">*</span> v<span class="token punctuation">;</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"(1,0,0) after rotation = "</span><span class="token operator">&lt;&lt;</span>v_rotated<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token comment">// æ¬§æ‹‰è§’: å¯ä»¥å°†æ—‹è½¬çŸ©é˜µç›´æ¥è½¬æ¢æˆæ¬§æ‹‰è§’</span>    <span class="token comment">// ZYXé¡ºåºï¼Œå³roll pitch yawé¡ºåº</span>    <span class="token comment">// pitchæ˜¯å›´ç»•Xè½´æ—‹è½¬ï¼Œä¿¯ä»°è§’</span>    <span class="token comment">// yaw  æ˜¯å›´ç»•Yè½´æ—‹è½¬ï¼Œåèˆªè§’</span>    <span class="token comment">// roll æ˜¯å›´ç»•Zè½´æ—‹è½¬ï¼Œç¿»æ»šè§’</span>    Eigen<span class="token double-colon punctuation">::</span>Vector3d euler_angles <span class="token operator">=</span> rotation_matrix<span class="token punctuation">.</span><span class="token function">eulerAngles</span> <span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>     cout<span class="token operator">&lt;&lt;</span><span class="token string">"yaw pitch roll = "</span><span class="token operator">&lt;&lt;</span>euler_angles<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token comment">// æ¬§æ°å˜æ¢çŸ©é˜µä½¿ç”¨ Eigen::Isometry</span>    <span class="token comment">// å¯¹äºä»¿å°„å’Œå°„å½±å˜æ¢ï¼Œä½¿ç”¨ Eigen::Affine3dã€Eigen::Projective3d</span>    <span class="token comment">// è™½ç„¶ç§°ä¸º3dï¼Œå®è´¨ä¸Šæ˜¯4ï¼Š4çš„çŸ©é˜µ</span>    Eigen<span class="token double-colon punctuation">::</span>Isometry3d T <span class="token operator">=</span> Eigen<span class="token double-colon punctuation">::</span><span class="token class-name">Isometry3d</span><span class="token double-colon punctuation">::</span><span class="token function">Identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æŒ‰ç…§rotation_vectorè¿›è¡Œæ—‹è½¬</span>    T<span class="token punctuation">.</span><span class="token function">rotate</span> <span class="token punctuation">(</span> rotation_vector <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æŠŠå¹³ç§»å‘é‡è®¾æˆ(1,3,4)</span>    T<span class="token punctuation">.</span><span class="token function">pretranslate</span> <span class="token punctuation">(</span> <span class="token class-name">Eigen</span><span class="token double-colon punctuation">::</span><span class="token function">Vector3d</span> <span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Transform matrix = \n"</span> <span class="token operator">&lt;&lt;</span> T<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token comment">// ç”¨å˜æ¢çŸ©é˜µè¿›è¡Œåæ ‡å˜æ¢</span>    <span class="token comment">// ç›¸å½“äºR*v+t</span>    Eigen<span class="token double-colon punctuation">::</span>Vector3d v_transformed <span class="token operator">=</span> T<span class="token operator">*</span>v<span class="token punctuation">;</span>                                  cout<span class="token operator">&lt;&lt;</span><span class="token string">"v tranformed = "</span><span class="token operator">&lt;&lt;</span>v_transformed<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token comment">// å››å…ƒæ•°</span>    <span class="token comment">// å¯ä»¥ç›´æ¥æŠŠAngleAxisèµ‹å€¼ç»™å››å…ƒæ•°ï¼Œåä¹‹äº¦ç„¶</span>    Eigen<span class="token double-colon punctuation">::</span>Quaterniond q <span class="token operator">=</span> <span class="token class-name">Eigen</span><span class="token double-colon punctuation">::</span><span class="token function">Quaterniond</span> <span class="token punctuation">(</span> rotation_vector <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ³¨æ„coeffsçš„é¡ºåºæ˜¯(x,y,z,w),wä¸ºå®éƒ¨ï¼Œå‰ä¸‰è€…ä¸ºè™šéƒ¨</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"quaternion = \n"</span><span class="token operator">&lt;&lt;</span>q<span class="token punctuation">.</span><span class="token function">coeffs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>       <span class="token comment">// ä¹Ÿå¯ä»¥æŠŠæ—‹è½¬çŸ©é˜µèµ‹ç»™å®ƒ</span>    q <span class="token operator">=</span> <span class="token class-name">Eigen</span><span class="token double-colon punctuation">::</span><span class="token function">Quaterniond</span> <span class="token punctuation">(</span> rotation_matrix <span class="token punctuation">)</span><span class="token punctuation">;</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"quaternion = \n"</span><span class="token operator">&lt;&lt;</span> q<span class="token punctuation">.</span><span class="token function">coeffs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token comment">// ä½¿ç”¨å››å…ƒæ•°æ—‹è½¬ä¸€ä¸ªå‘é‡ï¼Œä½¿ç”¨é‡è½½çš„ä¹˜æ³•å³å¯</span>    v_rotated <span class="token operator">=</span> q<span class="token operator">*</span>v<span class="token punctuation">;</span> <span class="token comment">// æ³¨æ„æ•°å­¦ä¸Šæ˜¯qvq^{-1}</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"(1,0,0) after rotation = "</span><span class="token operator">&lt;&lt;</span>v_rotated<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>     <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”çš„cmakeä¸ºï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span> <span class="token property">VERSION</span> <span class="token number">2.8</span> <span class="token punctuation">)</span><span class="token keyword">project</span><span class="token punctuation">(</span> Eigen_Geo_learn <span class="token punctuation">)</span><span class="token comment"># æ·»åŠ Eigenå¤´æ–‡ä»¶</span><span class="token keyword">include_directories</span><span class="token punctuation">(</span> <span class="token string">"/usr/include/eigen3"</span> <span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span> eigenGeometry EigneGeometry.cpp <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Pangolin">Pangolin</h3><p>å‚è€ƒå¦‚ä¸‹ä»£ç ï¼Œæ³¨æ„çœ‹å…¶ä¸­çš„æ³¨é‡Šï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pangolin/pangolin.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// åˆ›å»ºåç§°ä¸ºâ€œMainâ€çš„GUIçª—å£ï¼Œå°ºå¯¸ä¸º640Ã—640</span>    pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateWindowAndBind</span><span class="token punctuation">(</span><span class="token string">"Main"</span><span class="token punctuation">,</span><span class="token number">640</span><span class="token punctuation">,</span><span class="token number">480</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¯åŠ¨æ·±åº¦æµ‹è¯•</span>    <span class="token function">glEnable</span><span class="token punctuation">(</span>GL_DEPTH_TEST<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿç›¸æœºè§†å›¾</span>    pangolin<span class="token double-colon punctuation">::</span>OpenGlRenderState <span class="token function">s_cam</span><span class="token punctuation">(</span>pangolin<span class="token double-colon punctuation">::</span><span class="token function">ProjectionMatrix</span><span class="token punctuation">(</span><span class="token number">640</span><span class="token punctuation">,</span><span class="token number">480</span><span class="token punctuation">,</span><span class="token number">420</span><span class="token punctuation">,</span><span class="token number">420</span><span class="token punctuation">,</span><span class="token number">320</span><span class="token punctuation">,</span><span class="token number">320</span><span class="token punctuation">,</span><span class="token number">0.2</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pangolin<span class="token double-colon punctuation">::</span><span class="token function">ModelViewLookAt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> pangolin<span class="token double-colon punctuation">::</span>AxisY<span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºäº¤äº’è§†å›¾</span>    pangolin<span class="token double-colon punctuation">::</span>Handler3D <span class="token function">handler</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//äº¤äº’ç›¸æœºè§†å›¾å¥æŸ„</span>    pangolin<span class="token double-colon punctuation">::</span>View<span class="token operator">&amp;</span> d_cam <span class="token operator">=</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">SetBounds</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">640.0f</span><span class="token operator">/</span><span class="token number">480.0f</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">SetHandler</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>pangolin<span class="token double-colon punctuation">::</span><span class="token function">ShouldQuit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">// æ¸…ç©ºé¢œè‰²å’Œæ·±åº¦ç¼“å­˜</span>        <span class="token function">glClear</span><span class="token punctuation">(</span>GL_COLOR_BUFFER_BIT <span class="token operator">|</span> GL_DEPTH_BUFFER_BIT<span class="token punctuation">)</span><span class="token punctuation">;</span>        d_cam<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åœ¨åŸç‚¹ç»˜åˆ¶ä¸€ä¸ªç«‹æ–¹ä½“</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">glDrawColouredCube</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç»˜åˆ¶åæ ‡ç³»</span>       <span class="token function">glLineWidth</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glBegin</span> <span class="token punctuation">(</span> GL_LINES <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glColor3f</span> <span class="token punctuation">(</span> <span class="token number">0.8f</span><span class="token punctuation">,</span><span class="token number">0.f</span><span class="token punctuation">,</span><span class="token number">0.f</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glColor3f</span><span class="token punctuation">(</span> <span class="token number">0.f</span><span class="token punctuation">,</span><span class="token number">0.8f</span><span class="token punctuation">,</span><span class="token number">0.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glColor3f</span><span class="token punctuation">(</span> <span class="token number">0.2f</span><span class="token punctuation">,</span><span class="token number">0.2f</span><span class="token punctuation">,</span><span class="token number">1.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">glEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¿è¡Œå¸§å¾ªç¯ä»¥æ¨è¿›çª—å£äº‹ä»¶</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">FinishFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€éœ€çš„CMakeListsä¸ºï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">find_package</span><span class="token punctuation">(</span>Pangolin REQUIRED<span class="token punctuation">)</span><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">${</span>Pangolin_INCLUDE_DIRS<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>HelloPangolin main.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>HelloPangolin <span class="token punctuation">${</span>Pangolin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€ç»ˆæ•ˆæœå›¾ä¸­ï¼Œå¯ä»¥é€šè¿‡æ‹–åŠ¨ç”»é¢ä¸æŒ‰åŠ¨é¼ æ ‡æ»šè½®çš„æ–¹å¼å®ç°åŸºæœ¬çš„å¹³ç§»æ—‹è½¬åŠŸèƒ½</p><hr><p>æ¥ä¸‹æ¥å‚è€ƒå¦‚ä¸‹ä»£ç ï¼ŒæŠŠç‰©ä½“æ—‹è½¬ä¸å¹³ç§»çš„æè¿°ä¹Ÿå±•ç¤ºå‡ºæ¥äº†ï¼Œä»¥ä¸‹æ˜¯å¤´æ–‡ä»¶éƒ¨åˆ†ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iomanip&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Core&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Eigen/Geometry&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> Eigen<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pangolin/pangolin.h&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ºäº†è®¡ç®—æ—‹è½¬çŸ©é˜µã€é€‰è½¬å‘é‡ã€å››å…ƒæ•°ï¼Œé‡Œé¢é‡è½½è¿‡äº†è¿ç®—ç¬¦ã€‚ä¸»è¦æ˜¯ä¸ºäº†ä¾¿äºä¹¦å†™ä¸uiå±•ç¤ºï¼Œå…¶å±•ç¤ºæ•ˆæœå¯ä»¥çœ‹æ–‡æœ«çš„æ’å›¾ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡ŒæŠŠé‡è½½çš„éƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">struct</span> <span class="token class-name">RotationMatrix</span><span class="token punctuation">{</span>    Matrix3d matrix <span class="token operator">=</span> <span class="token class-name">Matrix3d</span><span class="token double-colon punctuation">::</span><span class="token function">Identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span> ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> RotationMatrix<span class="token operator">&amp;</span> r <span class="token punctuation">)</span> <span class="token punctuation">{</span>    out<span class="token punctuation">.</span><span class="token function">setf</span><span class="token punctuation">(</span>ios<span class="token double-colon punctuation">::</span>fixed<span class="token punctuation">)</span><span class="token punctuation">;</span>    Matrix3d matrix <span class="token operator">=</span> r<span class="token punctuation">.</span>matrix<span class="token punctuation">;</span>    out<span class="token operator">&lt;&lt;</span><span class="token char">'='</span><span class="token punctuation">;</span>    out<span class="token operator">&lt;&lt;</span><span class="token string">"["</span><span class="token operator">&lt;&lt;</span><span class="token function">setprecision</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"],"</span>    <span class="token operator">&lt;&lt;</span> <span class="token string">"["</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"],"</span>    <span class="token operator">&lt;&lt;</span> <span class="token string">"["</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span><span class="token function">matrix</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> out<span class="token punctuation">;</span><span class="token punctuation">}</span>istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> RotationMatrix<span class="token operator">&amp;</span> r <span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> in<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">struct</span> <span class="token class-name">TranslationVector</span><span class="token punctuation">{</span>    Vector3d trans <span class="token operator">=</span> <span class="token function">Vector3d</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> TranslationVector<span class="token operator">&amp;</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>    out<span class="token operator">&lt;&lt;</span><span class="token string">"=["</span><span class="token operator">&lt;&lt;</span>t<span class="token punctuation">.</span><span class="token function">trans</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token char">','</span><span class="token operator">&lt;&lt;</span>t<span class="token punctuation">.</span><span class="token function">trans</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token char">','</span><span class="token operator">&lt;&lt;</span>t<span class="token punctuation">.</span><span class="token function">trans</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> out<span class="token punctuation">;</span><span class="token punctuation">}</span>istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span> istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> TranslationVector<span class="token operator">&amp;</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> in<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">struct</span> <span class="token class-name">QuaternionDraw</span><span class="token punctuation">{</span>    Quaterniond q<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> QuaternionDraw quat <span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">auto</span> c <span class="token operator">=</span> quat<span class="token punctuation">.</span>q<span class="token punctuation">.</span><span class="token function">coeffs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    out<span class="token operator">&lt;&lt;</span><span class="token string">"=["</span><span class="token operator">&lt;&lt;</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span>c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span>c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span>c<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> out<span class="token punctuation">;</span><span class="token punctuation">}</span>istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> <span class="token keyword">const</span> QuaternionDraw quat<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> in<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv <span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// åˆ›å»ºåç§°ä¸ºâ€œvisualize geometryâ€çš„GUIçª—å£ï¼Œå°ºå¯¸ä¸º1000Ã—600</span>    pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateWindowAndBind</span> <span class="token punctuation">(</span> <span class="token string">"visualize geometry"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">600</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¯åŠ¨æ·±åº¦æµ‹è¯•</span>    <span class="token function">glEnable</span> <span class="token punctuation">(</span> GL_DEPTH_TEST <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿç›¸æœºè§†å›¾</span>    pangolin<span class="token double-colon punctuation">::</span>OpenGlRenderState <span class="token function">s_cam</span> <span class="token punctuation">(</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">ProjectionMatrix</span> <span class="token punctuation">(</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">ModelViewLookAt</span> <span class="token punctuation">(</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>pangolin<span class="token double-colon punctuation">::</span>AxisY <span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> <span class="token keyword">int</span> UI_WIDTH <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºäº¤äº’è§†å›¾</span>    pangolin<span class="token double-colon punctuation">::</span>View<span class="token operator">&amp;</span> d_cam <span class="token operator">=</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">SetBounds</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> pangolin<span class="token double-colon punctuation">::</span><span class="token class-name">Attach</span><span class="token double-colon punctuation">::</span><span class="token function">Pix</span><span class="token punctuation">(</span>UI_WIDTH<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1000.0f</span><span class="token operator">/</span><span class="token number">600.0f</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">SetHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> pangolin<span class="token double-colon punctuation">::</span><span class="token function">Handler3D</span><span class="token punctuation">(</span>s_cam<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// SetHandler,äº¤äº’ç›¸æœºè§†å›¾å¥æŸ„ </span>        <span class="token comment">// ui,è®¾ç½®éœ€è¦æ˜¾ç¤ºçš„å€¼</span>    pangolin<span class="token double-colon punctuation">::</span>Var<span class="token operator">&lt;</span>RotationMatrix<span class="token operator">&gt;</span> <span class="token function">rotation_matrix</span><span class="token punctuation">(</span><span class="token string">"ui.R"</span><span class="token punctuation">,</span> <span class="token function">RotationMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pangolin<span class="token double-colon punctuation">::</span>Var<span class="token operator">&lt;</span>TranslationVector<span class="token operator">&gt;</span> <span class="token function">translation_vector</span><span class="token punctuation">(</span><span class="token string">"ui.t"</span><span class="token punctuation">,</span> <span class="token function">TranslationVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pangolin<span class="token double-colon punctuation">::</span>Var<span class="token operator">&lt;</span>TranslationVector<span class="token operator">&gt;</span> <span class="token function">euler_angles</span><span class="token punctuation">(</span><span class="token string">"ui.rpy"</span><span class="token punctuation">,</span> <span class="token function">TranslationVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pangolin<span class="token double-colon punctuation">::</span>Var<span class="token operator">&lt;</span>QuaternionDraw<span class="token operator">&gt;</span> <span class="token function">quaternion</span><span class="token punctuation">(</span><span class="token string">"ui.q"</span><span class="token punctuation">,</span> <span class="token function">QuaternionDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pangolin<span class="token double-colon punctuation">::</span><span class="token function">CreatePanel</span><span class="token punctuation">(</span><span class="token string">"ui"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">SetBounds</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> pangolin<span class="token double-colon punctuation">::</span><span class="token class-name">Attach</span><span class="token double-colon punctuation">::</span><span class="token function">Pix</span><span class="token punctuation">(</span>UI_WIDTH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token operator">!</span>pangolin<span class="token double-colon punctuation">::</span><span class="token function">ShouldQuit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">// æ¸…ç©ºé¢œè‰²å’Œæ·±åº¦ç¼“å­˜</span>        <span class="token function">glClear</span><span class="token punctuation">(</span> GL_COLOR_BUFFER_BIT <span class="token operator">|</span> GL_DEPTH_BUFFER_BIT <span class="token punctuation">)</span><span class="token punctuation">;</span>                d_cam<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span> s_cam <span class="token punctuation">)</span><span class="token punctuation">;</span>                pangolin<span class="token double-colon punctuation">::</span>OpenGlMatrix matrix <span class="token operator">=</span> s_cam<span class="token punctuation">.</span><span class="token function">GetModelViewMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Matrix<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">&gt;</span> m <span class="token operator">=</span> matrix<span class="token punctuation">;</span>        <span class="token comment">// m = m.inverse();</span>        RotationMatrix R<span class="token punctuation">;</span>         <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                R<span class="token punctuation">.</span><span class="token function">matrix</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        rotation_matrix <span class="token operator">=</span> R<span class="token punctuation">;</span>                TranslationVector t<span class="token punctuation">;</span>        t<span class="token punctuation">.</span>trans <span class="token operator">=</span> <span class="token function">Vector3d</span><span class="token punctuation">(</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span>trans <span class="token operator">=</span> <span class="token operator">-</span>R<span class="token punctuation">.</span>matrix<span class="token operator">*</span>t<span class="token punctuation">.</span>trans<span class="token punctuation">;</span>        translation_vector <span class="token operator">=</span> t<span class="token punctuation">;</span>                TranslationVector euler<span class="token punctuation">;</span>        euler<span class="token punctuation">.</span>trans <span class="token operator">=</span> R<span class="token punctuation">.</span>matrix<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eulerAngles</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        euler_angles <span class="token operator">=</span> euler<span class="token punctuation">;</span>                QuaternionDraw quat<span class="token punctuation">;</span>        quat<span class="token punctuation">.</span>q <span class="token operator">=</span> <span class="token function">Quaterniond</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>        quaternion <span class="token operator">=</span> quat<span class="token punctuation">;</span>                <span class="token function">glColor3f</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åœ¨åŸç‚¹ç»˜åˆ¶ä¸€ä¸ªç«‹æ–¹ä½“</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">glDrawColouredCube</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç»˜åˆ¶åæ ‡ç³»</span>        <span class="token function">glLineWidth</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glColor3f</span> <span class="token punctuation">(</span> <span class="token number">0.8f</span><span class="token punctuation">,</span><span class="token number">0.f</span><span class="token punctuation">,</span><span class="token number">0.f</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glBegin</span> <span class="token punctuation">(</span> GL_LINES <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glColor3f</span><span class="token punctuation">(</span> <span class="token number">0.f</span><span class="token punctuation">,</span><span class="token number">0.8f</span><span class="token punctuation">,</span><span class="token number">0.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glColor3f</span><span class="token punctuation">(</span> <span class="token number">0.2f</span><span class="token punctuation">,</span><span class="token number">0.2f</span><span class="token punctuation">,</span><span class="token number">1.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glVertex3f</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">glEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// è¿è¡Œå¸§å¾ªç¯ä»¥æ¨è¿›çª—å£äº‹ä»¶</span>        pangolin<span class="token double-colon punctuation">::</span><span class="token function">FinishFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”çš„cmakeæ–‡ä»¶</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span> <span class="token property">VERSION</span> <span class="token number">2.8</span> <span class="token punctuation">)</span><span class="token keyword">project</span><span class="token punctuation">(</span> visualizeGeometry <span class="token punctuation">)</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_FLAGS</span> <span class="token string">"-std=c++11"</span><span class="token punctuation">)</span><span class="token comment"># æ·»åŠ Eigenå¤´æ–‡ä»¶</span><span class="token keyword">include_directories</span><span class="token punctuation">(</span> <span class="token string">"/usr/include/eigen3"</span> <span class="token punctuation">)</span><span class="token comment"># æ·»åŠ Pangolinä¾èµ–</span><span class="token keyword">find_package</span><span class="token punctuation">(</span> Pangolin <span class="token punctuation">)</span><span class="token keyword">include_directories</span><span class="token punctuation">(</span> <span class="token punctuation">${</span>Pangolin_INCLUDE_DIRS<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span> visualizeGeometry visualizeGeometry.cpp <span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span> visualizeGeometry <span class="token punctuation">${</span>Pangolin_LIBRARIES<span class="token punctuation">}</span> <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæ•ˆæœ</p><p><img src="https://s2.loli.net/2023/01/11/Q5NEFdchpP2vJOZ.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dpkg Error Code 1</title>
      <link href="/2023/01/10/error-linux-sub-process-dpkg/"/>
      <url>/2023/01/10/error-linux-sub-process-dpkg/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>Sub-process /usr/bin/dpkg returned an error code (1)è§£å†³åŠæ³•</h1><p>å®‰è£…ä¸€äº›ç”¨apt-getä¸‹è½½çš„ç¨‹åºçš„æ—¶å€™ï¼Œæˆ‘å‡ºç°è¿‡ä»¥ä¸‹é—®é¢˜ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Do you want to continue? [Y/n] Setting up sysstat (11.6.1-1ubuntu0.2) ...dpkg: error processing package sysstat (--configure): installed sysstat package post-installation script subprocess returned error exit status 10Errors were encountered while processing: sysstatE: Sub-process /usr/bin/dpkg returned an error code (1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç½‘ä¸Šæ‰¾åˆ°äº†é è°±çš„è§£å†³æ–¹æ³•ï¼š</p><p>å°†infoæ–‡ä»¶å¤¹æ”¹åï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo mv /var/lib/dpkg/info /var/lib/dpkg/info.bk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ–°å»ºä¸€ä¸ªinfoæ–‡ä»¶å¤¹</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo mkdir /var/lib/dpkg/info<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…ä¿®å¤</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt-get updatesudo apt-get install -f <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ“ä½œåï¼Œinfoæ–‡ä»¶å¤¹ä¸‹ä¼šæœ‰ä¸€äº›æ–‡ä»¶ï¼Œç§»åŠ¨ä¸€ä¸‹ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo mv /var/lib/dpkg/info/* /var/lib/dpkg/info.bk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ æ‰è¿™ä¸ªæ–°çš„infoæ–‡ä»¶å¤¹</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo rm -rf /var/lib/dpkg/info<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¢å¤åŸæœ‰çš„infoæ–‡ä»¶å¤¹åç§°</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo mv /var/lib/dpkg/info.bk /var/lib/dpkg/info<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ°è¿™é‡Œï¼Œé—®é¢˜å·²ç»å¯ä»¥è§£å†³äº†</p>]]></content>
      
      
      <categories>
          
          <category> æŠ¥é”™æ’æŸ¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022å¹´åº¦æ€»ç»“</title>
      <link href="/2023/01/01/Newyear_Summary_2022/"/>
      <url>/2023/01/01/Newyear_Summary_2022/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>2022 å¹´åº¦æ€»ç»“</h1><h2 id="åšå®¢ç¯‡">åšå®¢ç¯‡</h2><p>è‡ª3æœˆè¿™ä¸ªåšå®¢å»ºç«‹ä»¥æ¥ï¼Œç«™ç‚¹æ€»å­—æ•°è¾¾åˆ°äº†91.2kã€‚å…¶ä¸­å†™äº†ä¸¤ç¯‡æ–°æ‰‹å‘çš„æ–‡ç« ï¼Œå®Œæˆäº†æ•´ä¸ªROS1çš„å…¥é—¨ç³»åˆ—ï¼Œç„¶åâ€¦â€¦å…¶ä»–ç³»åˆ—â€¦â€¦éƒ½åªå¼€äº†ä¸ªå¤´<span class="github-emoji"><span>ğŸ˜–</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f616.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><img src="https://s2.loli.net/2022/12/03/EmtRe27DchAIrSa.png" alt="æˆªæ­¢2022å¹´å‘çš„æ–‡ç« ç»Ÿè®¡"></p><p>å¹¶ä¸”ï¼Œè¯¸å¦‚è®¡ç®—æœºç»„æˆã€æ“ä½œç³»ç»Ÿç­‰CSçš„æ–‡ç« ï¼Œå¤§æ¦‚æˆ–è®¸è¦å¾ˆä¹…éƒ½ä¸æ›´æ–°äº†ã€‚é¦–å…ˆè¿™äº›æ˜¯æˆ‘æœ¬ç§‘æœŸé—´çš„ä¸€äº›è€ƒè¯•ç§‘ç›®ï¼Œå¤§éƒ¨åˆ†å†…å®¹éƒ½å¾ˆå¤šæœ€åéƒ½æ¥ä¸åŠå†™å®Œï¼Œæœ‰çš„ç”šè‡³ç±»ä¼¼SQLç­‰è¯¾ç¨‹å› ä¸ºç–«æƒ…ç¼˜æ•…ï¼ŒæŠŠè€ƒè¯•å˜æˆäº†è¯¾ç¨‹è®ºæ–‡ï¼Œæ‰€ä»¥æˆ‘å°±æ›´å†™ä¸å®Œäº†ã€‚ï¼ˆæ•°æ®åº“çš„è®ºæ–‡æœ‰ä¸¤ä¸ªå¤§æ–¹å‘ï¼šæ•°æ®åº“ä¸çŸ¥è¯†å›¾è°±ã€æ•°æ®åº“ä¼˜åŒ–ï¼Œè¯¸ä½æœ‰ä»€ä¹ˆæƒ³æ³•ä¹ˆï¼Ÿï¼‰</p><p>ä½†sqlè¯­å¥ç¬¬ä¸‰ç¯‡æˆ‘è¿˜æ˜¯å†™äº†4kå¤šå­—çš„ï¼Œç­‰å‡æœŸæˆ‘æœ‰ç©ºäº†æˆ–è®¸å•Šï¼Œä¼šå†è¡¥å‘ä¸Šæ¥ï¼Œæ„Ÿè§‰ä¸å‘æœ‰ç‚¹å¤ªå¯æƒœäº†ã€‚ä½†åç»­æ–‡ç« å¤§æ¦‚ç‡ä¹Ÿæ˜¯ä¸ä¼šå†å†™äº†ï¼Œé™¤éæˆ‘åç»­æœ‰æ—¶é—´æœ‰æœºä¼šæ¥è§¦åˆ°openGaussï¼Œæˆ–è®¸è¿˜ä¼šå†™ä¸€ç‚¹ã€‚</p><hr><p>ä¸è¿‡å‘¢ï¼Œåœ¨SLAMæ–¹å‘ã€CUDAç³»åˆ—æˆ‘æ˜¯ä¼šç»§ç»­å†™çš„ï¼Œé™†é™†ç»­ç»­åœ°å†™ï¼Œä»¥åŠæˆ‘æƒ³å¼€å‡ ä¸ªæ–°çš„ä¸“æ ï¼Œå¤§æ¦‚åŒ…æ‹¬æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ã€æ•°å­—å›¾åƒå¤„ç†ã€è®¡ç®—æœºè§†è§‰ã€è‡ªç„¶è¯­è¨€å¤„ç†å‡ ä¸ªæ–¹å‘ï¼Œéƒ½ä¼šä»å…¥é—¨å­¦ä¹ çº§åˆ«å¼€å§‹ï¼Œä¸è¿‡é‰´äºæœºå™¨å­¦ä¹ å’Œæ•°å­—å›¾åƒå¤„ç†éƒ½æ˜¯æˆ‘ä»Šå¹´çš„è¯¾ï¼Œï¼ˆè€ƒè™‘åˆ°å†…å·çš„æ•ˆç‡ï¼Œï¼‰æˆ–è®¸è¿™ä¸¤ä¸ªæ ç›®æ›´æ–°çš„ä¼šæ…¢ä¸€ä¸¢ä¸¢ä¸¢ä¸¢ä¸¢ä¸¢â€¦â€¦ ä¸»è¦æ˜¯æå¥½æ·±åº¦å­¦ä¹ å¯¹æˆ‘ç°é˜¶æ®µæ¥è¯´æ¯”è¾ƒé‡è¦ä¸€äº›ã€‚</p><p>æˆ‘ä¼šæŠŠå­¦ä¹ è¿‡ç¨‹ä¸­çš„ç–‘é—®ä¹Ÿå¥½ã€éš¾ç‚¹ä¹Ÿå¥½ã€éƒ½å°½æˆ‘æ‰€èƒ½ä»¥æœ€ç²¾ç‚¼çš„æ–¹å¼ã€æœ€å¥½ææ‡‚çš„æ–¹å¼è®°å½•ä¸‹æ¥ã€‚ä¸è¿‡ä»–ä»¬çš„æ€§è´¨å…¶å®åªæ˜¯å­¦ä¹ ç¬”è®°ï¼Œéš¾å…ä¼šæœ‰ç–æ¼çš„åœ°æ–¹ï¼Œæˆ‘ä¹Ÿä¸€å®šä¼šæŠŠæŸ¥åˆ°çš„ç›¸å…³ä¸“ä¸šé“¾æ¥å†™åœ¨åšå®¢é‡Œé¢ï¼Œä¾›å‚è€ƒã€‚</p><p>è¿™ä¸ªæ—¶å€™æˆ‘å°±åœ¨æƒ³ï¼Œè¦æ˜¯æˆ‘çš„è¯„è®ºåŠŸèƒ½ä¹Ÿèƒ½ç”¨å°±å¥½äº†ï¼Œå¯ä»¥ä¸€èµ·è®¨è®ºæŠ€æœ¯å†…å®¹ã€‚å¯æƒœvercelæœåŠ¡åœ¨å¤§é™†ç”±DNSæ±¡æŸ“çš„é—®é¢˜ã€‚è¿™å°±æ„å‘³ç€å…¶ä»–åœ°åŒºè¿˜æ˜¯èƒ½ç”¨è¿™ä¸ªè¯„è®ºåŠŸèƒ½çš„ï¼Œddddï¼Œä½†è¢«æ±¡æŸ“è¿‡çš„åœ°åŒºå°±ä¸è¡Œï¼Œç”¨ä¸äº†è¯„è®ºåŠŸèƒ½ã€‚è¦å˜›æˆ‘å°±å¾—ç§Ÿä¸ªæœåŠ¡å™¨ä¸­è½¬ä¸€ä¸‹ï¼Œè¦å˜›å°±è¦ç­‰vercelåƒsmmså›¾åºŠä¸€æ ·å¼„ä¸ªåœ¨ä¸­å›½å¤‡æ¡ˆå¥½çš„åŸŸåã€‚æˆ‘ç°é˜¶æ®µæ˜¯ä¸æ‰“ç®—ç§ŸæœåŠ¡å™¨ï¼Œå› ä¸ºæœåŠ¡å™¨å¼„æ¥å¼„å»å¥½éº»çƒ¦ï¼Œè€Œä¸”æˆ‘ä¹Ÿæ²¡æ—¶é—´ã€æ²¡æ‰“ç®—ä¸“é—¨å¼„è¿™ä¹ˆä¸ªä¸œè¥¿ï¼Œä¸»è¦æ˜¯ç°é˜¶æ®µæˆ‘ç ”ç©¶çš„å†…å®¹ä¹Ÿä¸éœ€è¦é«˜åº¦ä¾èµ–æˆ‘çš„æœåŠ¡å™¨ï¼Œç­‰æœ‰åˆšéœ€çš„æ—¶å€™å†ç”³è¯·ä¸€ä¸ªã€‚æ‰€ä»¥ï¼Œç´¢æ€§å°±å…ˆè¿™æ ·å§ï¼ˆæ‘†çƒ‚ï¼‰ï¼Œæˆ‘éš”ä¸‰å·®äº”å»çœ‹çœ‹æœ‰æ²¡æœ‰æ–°çš„è¯„è®ºå°±å¥½äº†ã€‚è¯„è®ºæ•°æ®åº“å•Šä»€ä¹ˆçš„ç›®å‰çœ‹æ¥ä¸€åˆ‡å·¥ä½œæ˜¯æ­£å¸¸çš„ã€‚</p><h2 id="è§„åˆ’ç¯‡">è§„åˆ’ç¯‡</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šå‘å¸ƒå…³äºæ·±åº¦å­¦ä¹ ã€SLAMæ–¹å‘çš„æ–‡ç« ï¼Œå¯¹äº2023å¹´çš„æœŸæœ›ï¼Œé¦–å…ˆæ˜¯æˆ‘æƒ³æ²‰ä¸‹å¿ƒæ¥å¥½å¥½åœ°ã€ç³»ç»Ÿåœ°å­¦å­¦é‚£äº›æˆ‘è¿˜æ²¡æŒæ¡çš„æŠ€æœ¯ï¼Œç»ƒç‚¹çœŸåŠŸå¤«ã€‚ä»¥åŠå¸Œæœ›æ–°çš„ä¸€å¹´èƒ½å¤Ÿå¤šå¤šå‘ä¸€äº›é«˜è´¨é‡çš„åšå®¢ï¼Œå¸Œæœ›èƒ½å¤Ÿæœ‰å®åŠ›å»å‘ä¸€äº›é¡¶çº§è®ºæ–‡çš„ä»‹ç»è§£è¯´æ–‡ç« ã€‚</p><h2 id="é¢˜å¤–è¯">é¢˜å¤–è¯</h2><p>åŸæœ¬æˆ‘è¿˜å†™äº†å¾ˆå¤šå…¶ä»–çš„æ€»ç»“ï¼Œæ€»ç»“äº†2022çš„ä¸€äº›è´Ÿèƒ½é‡ä»¥åŠä¸€äº›æˆæœæ”¶è·ã€‚è½¬å¿µä¸€æƒ³ï¼Œè¯¥ç¿»é¡µçš„å†…å®¹å°±è¯¥ç¿»é¡µå•¦ï¼Œ2022å¹´å¤§å®¶æ˜¯è¿‡çš„æŒºç´¯çš„ï¼Œä½†æ˜¯å’¬å’¬ç‰™ä¹Ÿç»ˆäºæŒºè¿‡æ¥äº†ã€‚ä¸ç®¡å¥½çš„åçš„ï¼Œä¹Ÿæ— éœ€è¿‡å¤šæ²‰æµ¸åœ¨å¾€äº‹ä¸­ã€‚å¯’å‡æˆ‘å°±ç»™è‡ªå·±å¥½å¥½æ”¾ä¸ªå‡ï¼Œç„¶åæ–°çš„ä¸€å¹´ç»§ç»­åŠ æ²¹<span class="github-emoji"><span>ğŸ‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> é—²èŠ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²èŠ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL 2ï¼šå…³ç³»æ•°æ®åº“</title>
      <link href="/2022/11/18/DataBase-2/"/>
      <url>/2022/11/18/DataBase-2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>æ•°æ®åº“2ã€å…³ç³»æ•°æ®åº“</h1><h2 id="ä¸€ã€å…³ç³»æ•°æ®ç»“æ„">ä¸€ã€å…³ç³»æ•°æ®ç»“æ„</h2><h3 id="1ã€å…³ç³»">1ã€å…³ç³»</h3><blockquote><p>å…³ç³»ã€å°±æ˜¯è¡¨ã€‚ä¸€å¼ æ‰å¹³çš„äºŒç»´è¡¨</p></blockquote><ul><li>å•ä¸€çš„æ•°æ®ç»“æ„â€”â€”å…³ç³»</li></ul><p>æ˜¾ç¤ºæ—¶é—´çš„å®ä½“ä»¥åŠå®ä½“ä¹‹é—´çš„å„ç§è”ç³»å†›ç”¨å…³ç³»æ¥æ ‡è¯†</p><ul><li>é€»è¾‘ç»“æ„â€”â€”äºŒç»´è¡¨</li></ul><p>ä»ç”¨æˆ·è§’åº¦æ¥è¯´ï¼Œå…³ç³»æ¨¡å‹ä¸­æ•°æ®çš„é€»è¾‘ç»“æ„æ˜¯ä¸€å¼ äºŒç»´è¡¨</p><h4 id="1-åŸŸ-domain">1): åŸŸ domain</h4><p>åŸŸæ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„å€¼çš„é›†åˆ</p><p>è‡ªç„¶æ•°ã€è¯ä¹¦ã€å®æ•°ã€ç”·å¥³æ€§åˆ«ã€æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²é›†åˆâ€¦â€¦éƒ½æ˜¯åŸŸ</p><h4 id="2-ç¬›å¡å°”ç§¯-cartesian-product">2): ç¬›å¡å°”ç§¯ cartesian product</h4><p>ç»™ä¸€ç»„åŸŸ$D_1 D_2 â€¦ D_n$ï¼Œæ¯ä¸ªDå°±æ˜¯ä¸€ä¸ªé›†åˆã€‚</p><ul><li>æ‰€æœ‰åŸŸçš„æ‰€æœ‰å–å€¼çš„ä¸€ä¸ªç»„åˆ</li><li>ä¸èƒ½é‡å¤</li></ul><p>è¿™äº›åŸŸçš„ç¬›å¡å°”ç§¯å¯ä»¥åˆ—æˆä¸€å¼ äºŒç»´è¡¨ï¼Œå…¶æ•°å­¦è¯­è¨€å¦‚ä¸‹ï¼š<br>$$<br>D_1\times D_2\times \cdots \times D_n\<br>={(d_1,d_2,\cdots,d_n)|d_i\in D_i,i=1,2,\cdots,n}<br>$$<br>å…¶ä¸­ï¼Œæ¯ä¸€ä¸ªå…ƒç´ $(d_1,d_2,\cdots,d_n)$å«åšä¸€ä¸ª<strong>nå…ƒç»„ï¼ˆn tupleï¼‰</strong>ï¼Œå¯ä»¥ç®€ç§°ä¸ºå…ƒç»„</p><p>å…ƒç´ ä¸­æ¯ä¸€ä¸ªå€¼diå«åšä¸€ä¸ª<strong>åˆ†é‡ï¼ˆcomponentï¼‰</strong></p><blockquote><p>ä¸€ä¸ªåŸŸå…è®¸çš„ä¸åŒå–å€¼ä¸ªæ•°ç§°ä¸ºè¿™ä¸ªåŸŸçš„<strong>åŸºæ•°ï¼ˆCardinal numberï¼‰</strong></p></blockquote><h2 id="å¦‚æœ-D-i-i-1-2-cdots-n-ä¸ºæœ‰é™é›†ï¼ŒåŸºæ•°-m-i-i-1-2-cdots-n-ï¼Œåˆ™-D-1-times-D-2-times-cdots-times-D-n-çš„åŸºæ•°Mä¸º-M-sum-n-i-1-m-i">å¦‚æœ$D_i (i=1,2,\cdots,n)$ä¸ºæœ‰é™é›†ï¼ŒåŸºæ•°$m_i (i=1,2,\cdots,n)$ï¼Œåˆ™$D_1\times D_2\times \cdots \times D_n$çš„åŸºæ•°Mä¸º:<br>$$<br>M = \sum^{n}_{i=1}m_i<br>$$</h2><p>æ˜¯ä¸æ˜¯æœ‰ç‚¹çœ‹æ™•äº†ï¼Ÿä¸¾ä¸ªä¾‹å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å°±èƒ½çœ‹æ‡‚äº†ï¼š</p><p>è¿™é‡Œåˆ—ä¸‰ä¸ªåŸŸ</p><p>D1=å¯¼å¸ˆ={è€åˆ˜ï¼Œè€é™ˆ}</p><p>D2=ä¸“ä¸š={äººå·¥æ™ºèƒ½ï¼Œè½¯ä»¶å·¥ç¨‹}</p><p>D3=å­¦ç”Ÿ={å°åˆ˜ï¼Œå°é™ˆ}</p><p>D1xD2xD3çš„ç¬›å¡å°”ç§¯å°±å¯ä»¥åˆ—ä¸ºä¸€å¼ è¡¨ï¼š</p><table><thead><tr><th>å¯¼å¸ˆ</th><th>ä¸“ä¸š</th><th></th></tr></thead><tbody><tr><td>è€åˆ˜</td><td>äººå·¥æ™ºèƒ½</td><td>å°åˆ˜</td></tr><tr><td>è€åˆ˜</td><td>äººå·¥æ™ºèƒ½</td><td>å°é™ˆ</td></tr><tr><td>è€åˆ˜</td><td>è½¯ä»¶å·¥ç¨‹</td><td>å°åˆ˜</td></tr><tr><td>è€åˆ˜</td><td>è½¯ä»¶å·¥ç¨‹</td><td>å°é™ˆ</td></tr><tr><td>è€é™ˆ</td><td>äººå·¥æ™ºèƒ½</td><td>å°åˆ˜å®</td></tr><tr><td>è€é™ˆ</td><td>äººå·¥æ™ºèƒ½</td><td>å°é™ˆ</td></tr><tr><td>è€é™ˆ</td><td>è½¯ä»¶å·¥ç¨‹</td><td>å°åˆ˜</td></tr><tr><td>è€é™ˆ</td><td>è½¯ä»¶å·¥ç¨‹</td><td>å°é™ˆ</td></tr></tbody></table><p>è¯¥ç¬›å¡å°”ç§¯çš„åŸºæ•°ä¸º2x2x2=8ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªç¬›å¡å°”ç§¯ä¸€å…±æœ‰8ä¸ªå…ƒç»„ã€‚</p><p>è€é™ˆã€äººå·¥æ™ºèƒ½ã€è½¯ä»¶å·¥ç¨‹ã€å°åˆ˜â€¦â€¦å°±æ˜¯åˆ†é‡</p><h4 id="3-å…³ç³»-relation">3): å…³ç³» relation</h4><h5 id="1-å…³ç³»">(1) å…³ç³»</h5><p>$D_1\times D_2\times \cdots \times D_n$çš„å­é›†å«åšåœ¨åŸŸD1ï¼ŒD2ï¼Œâ€¦ï¼ŒDnä¸Šçš„å…³ç³»ï¼Œè¡¨ç¤ºä¸º  R(D1,D2,â€¦,Dn)</p><p>è¿™é‡ŒRè¡¨ç¤ºå…³ç³»çš„åå­—ï¼Œnæ˜¯å…³ç³»çš„ç›®æˆ–<strong>åº¦(degree)</strong></p><h5 id="2-å…ƒç»„">(2) å…ƒç»„</h5><p>å…³ç³»ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å…³ç³»ä¸­çš„å…ƒç»„ï¼Œé€šå¸¸ç”¨tè¡¨ç¤º</p><ul><li>n=1æ—¶ï¼Œè¯¥å…³ç³»ä¸ºä¸€å…ƒå…³ç³»æˆ–å•å…ƒå…³ç³»ï¼ˆunary relationï¼‰</li><li>n=2æ—¶ï¼Œè¯¥å…³ç³»ä¸ºäºŒå…ƒå…³ç³»(binary relation)</li></ul><p>å…³ç³»æ˜¯ç¬›å¡å°”ç§¯çš„æœ‰é™å­é›†ï¼Œæ‰€ä»¥å…³ç³»ä¹Ÿæ˜¯ä¸€å¼ äºŒç»´è¡¨</p><ul><li>è¡¨çš„æ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªå…ƒç»„</li><li>è¡¨çš„æ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªåŸŸ</li></ul><h5 id="3-å±æ€§">(3) å±æ€§</h5><p>å› ä¸ºåŸŸå¯ä»¥ç›¸åŒï¼Œä¸ºäº†åŒºåˆ†ï¼Œç»™åˆ—èµ·ä¸ªæ–°åå­—ï¼šå±æ€§(attribute)</p><p><font style="color:red">nç›®å…³ç³»å¿…æœ‰nä¸ªå±æ€§</font></p><h5 id="4-ç ">(4) ç </h5><ul><li><p>å€™é€‰ç  Candidate key</p><p>è‹¥å…³ç³»ä¸­çš„æŸä¸€å±æ€§ç»„çš„å€¼èƒ½å”¯ä¸€çš„è¡¨ç¤ºä¸€ä¸ªå…ƒç»„(å…¶å­é›†ä¸èƒ½)ï¼Œå°±ç§°è¯¥å±æ€§ä¸ºé‚£ä¸ªç»„çš„å€™é€‰ç </p><ul><li>ç®€å•çš„æƒ…å†µï¼šå€™é€‰ç åªåŒ…å«ä¸€ä¸ªå±æ€§</li></ul></li><li><p>å…¨ç  ALL-key</p><p>æœ€æç«¯çš„æƒ…å†µï¼šå…³ç³»æ¨¡å¼çš„æ‰€æœ‰å±æ€§ç»„æ˜¯è¿™ä¸ªå…³ç³»æ¨¡å¼çš„å€™é€‰ç ï¼Œç§°ä¸ºå…¨ç </p></li><li><p>ä¸»ç </p><p>è‹¥ä¸€ä¸ªå…³ç³»æœ‰å¤šä¸ªå€™é€‰ç ï¼Œåˆ™é€‰å®šå…¶ä¸­ä¸€ä¸ªä¸º<strong>ä¸»ç ï¼ˆPrimary keyï¼‰</strong></p><p>å€™é€‰ç çš„è¯¸å±æ€§ç§°ä¸ºä¸»å±æ€§ï¼ˆprime attributeï¼‰</p><p>ä¸åŒ…å«åœ¨ä»»ä½•å€™é€‰ç ä¸­çš„å±æ€§ç§°ä¸ºéä¸»å±æ€§ï¼ˆNon-Prime attributeï¼‰</p><p>D1,D2,â€¦,Dnçš„ç¬›å¡å°”ç§¯çš„æŸä¸ªè‡ªå·±æ‰æœ‰å®é™…å«ä¹‰</p><p>eg: ç¬›å¡å°”ç§¯ä»‹ç»éƒ¨åˆ†çš„è¡¨æ ¼ï¼Œå¹¶æ²¡æœ‰å®é™…çš„æ„ä¹‰ï¼Œå–å‡ºæœ‰å®é™…æ„ä¹‰çš„å…ƒç»„æ¥æ„é€ å…³ç³»</p><p>è®¾å…³ç³»SAP(supervisor,speciality,postgraduate)ï¼Œ</p><table><thead><tr><th>supervisor</th><th>speciality</th><th>postgraduate</th></tr></thead><tbody><tr><td>è€åˆ˜</td><td>äººå·¥æ™ºèƒ½</td><td>å°åˆ˜</td></tr><tr><td>è€é™ˆ</td><td>è½¯ä»¶å·¥ç¨‹</td><td>å°é™ˆ</td></tr></tbody></table><p>ç”±äºè¿™é‡Œçš„ç¨‹åºæˆ‘ä»¬å‡å®šäººåä¸ºä¸ä¼šé‡åï¼Œæ‰€ä»¥postgraduateå±æ€§çš„æ¯ä¸€ä¸ªå€¼éƒ½å”¯ä¸€æ ‡è¯†äº†ä¸€ä¸ªå…ƒç»„ï¼Œå› æ­¤å¯ä»¥ä½œä¸ºSAPå…³ç³»çš„ä¸»ç ã€‚</p></li></ul><h5 id="5-ä¸‰ç±»å…³ç³»">(5) ä¸‰ç±»å…³ç³»</h5><ul><li><p>åŸºæœ¬å…³ç³»ï¼ˆåŸºæœ¬è¡¨æˆ–åŸºè¡¨ï¼‰</p><p>å®é™…å­˜åœ¨çš„è¡¨ï¼Œæ˜¯å®é™…å­˜å‚¨çš„é€»è¾‘è¡¨ç¤º</p></li><li><p>æŸ¥è¯¢è¡¨</p><p>æŸ¥è¯¢å¯¹åº”ç»“æœçš„è¡¨</p></li><li><p>è§†å›¾è¡¨</p><p>æœ‰åŸºæœ¬è¡¨æˆ–å…¶ä»–è¯•å›¾è¡¨å¯¼å‡ºçš„è¡¨ï¼Œæ˜¯è™šè¡¨ï¼Œä¸å¯¹åº”å®é™…å­˜å‚¨çš„æ•°æ®</p></li></ul><hr><p>ç”±äºç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬å¯¹ç¬›å¡å°”ç§¯çš„å®šä¹‰ï¼Œå…³ç³»å¯ä»¥æ˜¯ä¸€ä¸ªæ— é™é›†åˆã€‚ä¸”ç”±äºç»„æˆç¬›å¡å°”ç§¯çš„åŸŸä¸æ»¡è¶³äº¤æ¢å¾‹ï¼Œå½“å…³ç³»ä½œä¸ºå…³ç³»æ•°æ®æ¨¡å‹çš„æ•°æ®ç»“æ„æ—¶ï¼Œéœ€è¦ç»™äºˆå¦‚ä¸‹çš„é™å®šä¸æ‰©å……ï¼š</p><ol><li>æ— é™å…³ç³»åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œç°æ‹Ÿå®šçš„å…³ç³»æ•°æ®æ¨¡å‹ä¸­çš„å…³ç³»å¿…é¡»æ˜¯æœ‰é™é›†åˆ</li><li>é€šè¿‡ä¸ºå…³ç³»çš„æ¯ä¸€ä¸ªåˆ—é™„åŠ ä¸€ä¸ªå±æ€§åçš„æ–¹æ³•ï¼Œå–æ¶ˆå…³ç³»å±æ€§çš„æœ‰åºæ€§ã€‚</li></ol><p>é€šè¿‡ä¸Šè¿°è¯´æ˜ï¼ŒåŸºæœ¬å…³ç³»æœ‰ä»¥ä¸‹å…­æ¡æ€§è´¨ï¼š</p><ul><li><p><font style="color:red">åˆ—æ˜¯åŒè´¨çš„(homogeneous)</font></p><p>æ¯ä¸€åˆ—çš„åˆ†é‡æ˜¯åŒä¸€ç±»å‹çš„æ•°æ®ï¼Œæ¥è‡ªåŒä¸ªåŸŸ</p></li><li><p><font style="color:red">ä¸åŒçš„åˆ—å¯å‡ºè‡ªåŒä¸€ä¸ªåŸŸ</font></p><ul><li>å…¶ä¸­çš„æ¯ä¸€åˆ—ä¸ºä¸€ä¸ªå±æ€§</li><li>ä¸åŒçš„å±æ€§è¦ç»™ä¸ä¸åŒçš„å±æ€§å</li></ul></li><li><p><font style="color:red">ä»»æ„ä¸¤ä¸ªå…ƒç»„çš„å€™é€‰ç ä¸èƒ½å–åŒä¸ªå€¼</font></p><p>ä¹Ÿå°±æ˜¯å…ƒç»„ä¸èƒ½é‡å¤</p></li><li><p><font style="color:red">åˆ—çš„é¡ºåºæ— æ‰€è°“</font>ï¼Œåˆ—çš„æ¬¡åºå¯ä»¥ä»»æ„äº¤æ¢</p></li><li><p><font style="color:red">è¡Œçš„é¡ºåºæ— æ‰€è°“</font>ï¼Œè¡Œçš„æ¬¡åºå¯ä»¥ä»»æ„äº¤æ¢</p></li><li><p><font style="color:red">åˆ†é‡å¿…é¡»å–åŸå­å€¼</font></p><p>ä¹Ÿå°±æ˜¯æ¯ä¸ªåˆ†é‡éƒ½å¿…é¡»æ˜¯ä¸å¯åˆ†çš„æ•°æ®é¡¹ï¼Œæ˜¯<strong>æœ€åŸºæœ¬çš„ä¸€æ¡</strong></p></li></ul><h3 id="2ã€å…³ç³»æ¨¡å¼">2ã€å…³ç³»æ¨¡å¼</h3><p>æ•°æ®åº“ä¸­è¦åŒºåˆ†<strong>å‹</strong>å’Œ<strong>å€¼</strong>ã€‚å…³ç³»æ•°æ®åº“ä¸­ï¼Œå…³ç³»æ¨¡å¼æ˜¯<font style="background:yellow">å‹</font>,å…³ç³»æ˜¯<font style="background:yellow">å€¼</font>ã€‚å…³ç³»æ¨¡å¼æ˜¯å¯¹å…³ç³»çš„æè¿°ã€‚</p><p>å…³ç³»æ˜¯å…ƒç»„çš„é›†åˆï¼Œå› æ­¤ï¼š</p><ul><li><p>å…³ç³»æ¨¡å¼æ˜¯è¿™ä¸ªå…ƒç»„é›†åˆçš„ç»“æ„ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>å“ªäº›å±æ€§æ„æˆ</li><li>å±æ€§æ¥è‡ªäºå“ªäº›åŸŸ</li><li>å±æ€§ä¸åŸŸä¹‹é—´çš„æ˜ åƒå…³ç³»ã€‚</li></ul></li><li><p>éœ€è¦å®Œæ•´çš„çº¦æŸæ¡ä»¶</p></li></ul><p>å…³ç³»æ¨¡å¼å¯ä»¥å½¢å¼åŒ–åœ°è¡¨ç¤ºä¸ºï¼š</p><p><font style="background:yellow">R( U , D , DOM , F )</font></p><ul><li><p>R        å…³ç³»å</p></li><li><p>U        ç»„æˆè¯¥å…³ç³»çš„å±æ€§åé›†åˆ</p></li><li><p>D        Uä¸­å±æ€§æ‰€æ¥è‡ªçš„åŸŸ</p></li><li><p>DOM å±æ€§å‘åŸŸçš„æ˜ åƒé›†åˆ</p></li><li><p>F        å±æ€§é—´æ•°æ®çš„ä¾èµ–å…³ç³»çš„é›†åˆ</p></li></ul><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><ul><li><p>å¯¼å¸ˆå’Œç ”ç©¶ç”Ÿå‡ºè‡ªåŒä¸€ä¸ªåŸŸâ€”â€”äºº</p></li><li><p>å–ä¸åŒçš„å±æ€§åï¼Œå¹¶åœ¨æ¨¡å¼ä¸­è¯´æ˜ä»–ä»¬åˆ†åˆ«å‡ºè‡ªå“ªä¸ªåŸŸï¼ˆå®šä¹‰å±æ€§å‘åŸŸçš„æ˜ åƒï¼‰</p><p>DOM(SUPERVISOR-PERSON)</p><p>= DOM(POSTGRADUATE-PERSON)</p><p>= PERSON</p></li></ul><hr><p>å…³ç³»æ¨¡å¼é€šå¸¸å¯ä»¥ç®€å•è®°ä¸ºï¼š</p><p>R(U) æˆ– R(A1,A2,â€¦,An)</p><ul><li>R   è¿˜æ˜¯æŒ‡å…³ç³»å</li><li>A1,A2,â€¦,An   å±æ€§å</li><li>åŸŸååŠå±æ€§å‘åŸŸçš„æ˜ åƒå¸¸å¸¸ç›´æ¥è¯´å˜›ä¸ºå±æ€§çš„ç±»å‹ã€é•¿åº¦</li></ul><h4 id="å…³ç³»æ¨¡å¼ä¸å…³ç³»">å…³ç³»æ¨¡å¼ä¸å…³ç³»</h4><ul><li><p>å…³ç³»æ¨¡å¼ï¼š</p><ul><li>å¯¹å…³ç³»çš„æè¿°</li><li>é™æ€çš„ã€ç¨³å®šçš„</li></ul></li><li><p>å…³ç³»</p><ul><li>å…³ç³»æ¨¡å¼åœ¨æŸä¸€æ—¶åˆ»çš„çŠ¶æ€æˆ–å†…å®¹</li><li>åŠ¨æ€çš„ã€éšæ—¶é—´ä¸çŸ­å˜åŒ–çš„</li></ul></li><li><p>å…³ç³»æ¨¡å¼å’Œå…³ç³»å¾€å¾€ç»Ÿç§°ä¸ºå…³ç³»</p><p>é€šå¸¸é€šè¿‡ä¸Šä¸‹æ–‡åŠ ä»¥åŒºåˆ«</p></li></ul><h3 id="3ã€å…³ç³»æ•°æ®åº“">3ã€å…³ç³»æ•°æ®åº“</h3><p>åœ¨ä¸€ä¸ªç»™å®šçš„åº”ç”¨é¢†åŸŸä¸­ï¼Œæ‰€æœ‰å…³ç³»çš„é›†åˆæ„æˆä¸€ä¸ªå…³ç³»æ•°æ®åº“</p><ul><li><p>å‹</p><p>å…³ç³»æ•°æ®åº“æ¨¡å¼ï¼Œæ˜¯å¯¹åº”å…³ç³»æ•°æ®åº“çš„æè¿°</p></li><li><p>å€¼</p><p>å…³ç³»æ¨¡å¼åœ¨æŸä¸€æ—¶åˆ»å¯¹åº”çš„å…³ç³»çš„é›†åˆï¼Œé€šå¸¸ç§°ä¸ºå…³ç³»æ•°æ®åº“</p></li></ul><h3 id="4ã€å…³ç³»æ¨¡å‹çš„å­˜å‚¨ç»“æ„">4ã€å…³ç³»æ¨¡å‹çš„å­˜å‚¨ç»“æ„</h3><p>å…³ç³»æ•°æ®åº“çš„ç‰©ç†ç»„ç»‡</p><ul><li>æœ‰çš„å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ä¸€ä¸ªè¡¨å¯¹åº”ä¸€ä¸ªæ“ä½œç³»ç»Ÿæ–‡ä»¶ï¼Œå°†ç‰©ç†æ•°æ®ç»„ç»‡äº¤ç»™æ“ä½œç³»ç»Ÿå®Œæˆã€‚</li><li>æœ‰çš„å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä»æ“ä½œç³»ç»Ÿé‚£ç”³è¯·è‹¥å¹²ä¸ªå¤§çš„æ–‡ä»¶ï¼Œè‡ªå·±åˆ’åˆ†æ–‡ä»¶ç©ºé—´ã€ç»„ç»‡è¡¨ã€ç´¢å¼•ç­‰å­˜å‚¨ç»“æ„ï¼Œå¹¶è¿›è¡Œå­˜å‚¨ç®¡ç†</li></ul><h2 id="äºŒã€å…³ç³»æ“ä½œ">äºŒã€å…³ç³»æ“ä½œ</h2><p>å¸¸è§çš„å…³ç³»æ“ä½œ</p><ul><li>æŸ¥è¯¢æ“ä½œï¼šé€‰æ‹©ã€æŠ•å½±ã€è¿æ¥ã€é™¤ã€å¹¶ã€äº¤ã€å·®ã€ç¬›å¡å°”ç§¯</li><li>æ•°æ®æ›´æ–°ï¼šæ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹</li></ul><p>å…³ç³»æ“ä½œçš„ç‰¹ç‚¹</p><ul><li>é›†åˆæ“ä½œæ–¹å¼ï¼šæ“ä½œçš„å¯¹è±¡å’Œç»“æœéƒ½æ˜¯ç»“åˆï¼Œä»¥æ­¤ä¸€é›†åˆçš„æ–¹å¼</li></ul><p>å…³ç³»ä»£æ•°è¯­è¨€</p><ul><li>ç”¨å¯¹å…³ç³»çš„è¿ç®—æ¥è¡¨è¾¾æŸ¥è¯¢è¦æ±‚</li><li>ä»£è¡¨ï¼šISBL</li></ul><p>å…³ç³»æ¼”ç®—è¯­è¨€ï¼šç”¨è°“è¯æ¥è¡¨è¾¾æŸ¥è¯¢è¦æ±‚</p><ul><li>å…ƒç»„å…³ç³»æ¼”ç®—è¯­è¨€<ul><li>è°“è¯å˜å…ƒçš„åŸºæœ¬å¯¹è±¡æ˜¯å…ƒç»„å˜é‡</li><li>ä»£è¡¨ï¼šAPLHAã€QUEL</li></ul></li><li>åŸŸå…³ç³»æ¼”ç®—è¯­è¨€<ul><li>è°“è¯è¾¹å…³çš„åŸºæœ¬å¯¹è±¡æ˜¯åŸŸå˜é‡</li><li>ä»£è¡¨ï¼šQBE</li></ul></li></ul><p>å…·æœ‰å…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—åŒé‡ç‰¹ç‚¹çš„è¯­è¨€</p><ul><li>ä»£è¡¨ï¼šSQL (Structured Query Language)</li></ul><h2 id="ä¸‰ã€å…³ç³»çš„å®Œæ•´æ€§">ä¸‰ã€å…³ç³»çš„å®Œæ•´æ€§</h2><blockquote><p>å®ä½“å®Œæ•´æ€§ã€å‚ç…§å®Œæ•´æ€§ã€ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§éƒ½éƒ½å¿…é¡»æ»¡è¶³æ‰è¡Œ</p></blockquote><p>å…³ç³»çš„ä¸‰ç±»å®Œæ•´æ€§çº¦æŸ</p><ul><li>å®ä½“å®Œæ•´æ€§å’Œå‚ç…§å®Œæ•´æ€§<ul><li>å…³ç³»æ¨¡å‹å¿…é¡»æ»¡è¶³çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶ç§°ä¸ºå…³ç³»çš„ä¸¤ä¸ªä¸å˜æ€§ï¼Œåº”è¯¥ç”±å…³ç³»ç³»ç»Ÿè‡ªåŠ¨æ”¯æŒ</li></ul></li><li>ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§<ul><li>åº”ç”¨é¢†åŸŸéœ€è¦éµå¾ªçš„çº¦æŸæ¡ä»¶ï¼Œä½“ç°äº†å…·ä½“é¢†åŸŸä¸­çš„è¯­ä¹‰çº¦æŸ</li></ul></li></ul><h3 id="1ã€å®ä½“å®Œæ•´æ€§">1ã€å®ä½“å®Œæ•´æ€§</h3><blockquote><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸»å±æ€§ä¸èƒ½å–ç©ºå€¼</p></blockquote><p>è§„åˆ™ï¼šå®ä½“å®Œæ•´æ€§è§„åˆ™ Entity Integrity</p><ul><li><p>è‹¥å±æ€§Aæ˜¯åŸºæœ¬å…³ç³»Rçš„<strong>ä¸»å±æ€§</strong>ï¼Œåˆ™å±æ€§A<strong>ä¸èƒ½å–ç©ºå€¼</strong></p></li><li><p>ç©ºå€¼å°±æ˜¯â€œä¸çŸ¥é“â€ï¼Œâ€œä¸å­˜åœ¨â€æˆ–â€œæ— æ„ä¹‰â€çš„å€¼</p></li><li><p>è¯´æ˜ï¼š</p><ul><li><p>å®ä½“å®Œæ•´æ€§è§„åˆ™æ˜¯é’ˆå¯¹åŸºæœ¬å…³ç³»è€Œè¨€çš„ã€‚</p><p>ä¸€ä¸ªåŸºæœ¬è¡¨é€šå¸¸å¯¹åº”ç°å®æ—¶é—´çš„ä¸€ä¸ªå®ä½“é›†</p></li><li><p>ç°å®ä¸–ç•Œä¸­çš„å®ä½“æ˜¯å¯ä»¥åŒºåˆ†çš„ï¼Œå³ä»–ä»¬å…·æœ‰æŸç§å”¯ä¸€æ€§æ ‡è¯†ã€‚</p></li><li><p>å…³ç³»æ¨¡å‹ä¸­ä»¥ä¸»ç ä½œä¸ºå”¯ä¸€æ€§æ ‡è¯†</p></li><li><p>ä¸»ç ä¸­çš„å±æ€§å³ä¸»å±æ€§ä¸èƒ½å–ç©ºå€¼</p><p>ä¸»å±æ€§å–ç©ºå€¼ï¼Œå°±è¯´æ˜å­˜åœ¨æŸä¸ªä¸å¯æ ‡è¯†çš„å®ä½“ï¼Œå³å­˜åœ¨ä¸å¯åŒºåˆ†çš„å®ä½“ï¼Œä¸ç¬¬2ç‚¹ç›¸çŸ›ç›¾ï¼Œï¼Œå› æ­¤è¿™ä¸ªè§„åˆ™ç§°ä¸ºå®ä½“å®Œæ•´æ€§</p></li></ul></li></ul><h3 id="2ã€å‚ç…§å®Œæ•´æ€§">2ã€å‚ç…§å®Œæ•´æ€§</h3><h4 id="1-å…³ç³»é—´çš„å¼•ç”¨">1): å…³ç³»é—´çš„å¼•ç”¨</h4><p>åœ¨å…³ç³»æ¨¡å‹ä¸­å®ä½“åŠå®ä½“ä¹‹é—´çš„è”ç³»éƒ½æ˜¯ç”¨å…³ç³»æ¥æè¿°çš„ï¼Œè‡ªç„¶å­˜åœ¨ç€å…³ç³»ä¸å…³ç³»é—´çš„å¼•ç”¨ã€‚</p><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼š</p><p>å¯¹äºå­¦ç”Ÿæ¥è¯´ï¼Œå­¦å·å°±æ˜¯å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæ˜¯ä¸»ç </p><p>åœ¨ç­çº§ä¸­ï¼Œç­é•¿å¯¹äºå­¦ç”Ÿæ˜¯â€œå¤–ç â€ï¼Œå¼•ç”¨äº†æœ¬å…³ç³»çš„â€œå­¦å·â€ï¼Œä¸”ç­é•¿å¿…é¡»æ˜¯ç¡®å®å­˜åœ¨çš„å­¦ç”Ÿçš„å­¦å·</p><h4 id="2-å¤–ç ">2): å¤–ç </h4><p>è®¾Fæ˜¯åŸºæœ¬å…³ç³»Rçš„ä¸€ä¸ªæˆ–ä¸€ç»„å±æ€§ï¼Œä½†ä¸æ˜¯å…³ç³»Rçš„ç ï¼Œè‹¥Fä¸åŸºæœ¬å…³ç³»Sçš„ä¸»ç Ksç›¸å¯¹åº”ï¼Œåˆ™ç§°Fæ˜¯Rçš„å¤–ç </p><p>è¯´äººè¯å°±æ˜¯ï¼Œæ•°æ®åº“ä¸­å¦‚æœä¸€ä¸ªå…³ç³»ä¸­çš„ä¸€ä¸ªå±æ€§æ˜¯å¦ä¸€ä¸ªå…³ç³»ä¸­çš„ä¸»ç ï¼Œè¿™ä¸ªå±æ€§å°±æ˜¯å¤–ç ã€‚</p><p>åŸºæœ¬å…³ç³»Rç§°ä¸ºå‚ç…§å…³ç³»</p><p>åŸºæœ¬å…³ç³»Sç§°ä¸ºè¢«å‚ç…§å…³ç³»æˆ–ç›®æ ‡å…³ç³»</p><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼š</p><p>å­¦ç”Ÿå…³ç³»çš„â€œä¸“ä¸šå·â€ä¸ä¸“ä¸šå…³ç³»çš„ä¸»ç â€œä¸“ä¸šå·â€ç›¸å¯¹åº”</p><ul><li><p>â€œä¸“ä¸šå·â€å±æ€§æ˜¯å­¦ç”Ÿçš„å¤–ç </p></li><li><p>ä¸“ä¸šå…³ç³»æ˜¯è¢«å‚ç…§å…³ç³»ï¼Œå­¦ç”Ÿå…³ç³»æ˜¯å‚ç…§å…³ç³»</p><pre class="mermaid">  graph LRa(å­¦ç”Ÿå…³ç³») --&gt;|ä¸“ä¸šå·|b(ä¸“ä¸šå…³ç³»)</pre></li></ul><h4 id="3-å‚ç…§å®Œæ•´æ€§è§„åˆ™">3): å‚ç…§å®Œæ•´æ€§è§„åˆ™</h4><p>è§„åˆ™ï¼šè‹¥å±æ€§/å±æ€§ç»„Fæ˜¯åŸºæœ¬å…³ç³»Rçš„å¤–ç ï¼Œå®ƒä¸åŸºæœ¬å…³ç³»Sçš„ä¸»ç Ksç›¸å¯¹åº”ï¼ˆRå’ŒSå¯èƒ½æ˜¯ç›¸åŒçš„ï¼‰ï¼Œåˆ™å¯¹äºRä¸­æ¯ä¸ªå…ƒç»„åœ¨Fä¸Šçš„å€¼å¿…é¡»ä¸ºä»¥ä¸‹å…¶ä¸­ä¹‹ä¸€ï¼š</p><ul><li>ç©ºå€¼ï¼ˆFçš„æ¯ä¸ªå±æ€§å€¼éƒ½ä¸ºç©ºå€¼ï¼‰</li><li>ç­‰äºSä¸­æŸä¸ªå…ƒç»„çš„ä¸»ç å€¼</li></ul><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼š</p><p>å­¦ç”Ÿå…³ç³»ä¸­æ¯ä¸ªå…ƒç»„çš„ â€œä¸“ä¸šå·â€ å±æ€§åªå–ä¸¤ç±»å€¼</p><ul><li>ç©ºå€¼ï¼Œè¿˜æ²¡ç»™è¿™ä¸ªå­¦ç”Ÿåˆ†é…ä¸“ä¸š</li><li>éç©ºå€¼ï¼Œè¿™ä¸ªå€¼å¾—æ˜¯ä¸“ä¸šå…³ç³»ä¸­æŸä¸ªâ€œä¸“ä¸šå·â€å€¼ï¼Œæ¯•ç«Ÿä¸å¯èƒ½ç»™å­¦ç”Ÿåˆ†é…ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„ä¸“ä¸š</li></ul><h3 id="3ã€ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§">3ã€ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§</h3><p>é’ˆå¯¹æŸä¸€å…·ä½“å…³ç³»æ•°æ®åº“çš„<font style="background:yellow">çº¦æŸæ¡ä»¶</font>ï¼Œå®ƒåæ˜ æŸä¸€å…·ä½“åº”ç”¨æ‰€æ¶‰åŠçš„æ•°æ®  å¿…é¡»æ»¡è¶³çš„è¯­ä¹‰è¦æ±‚ã€‚</p><p>ä¾‹å¦‚è¦æ±‚æŸä¸ªå±æ€§å¿…é¡»å»å–å”¯ä¸€å€¼ï¼ŒæŸä¸ªéä¸»å±æ€§ä¹Ÿä¸èƒ½å–ç©ºå€¼ï¼ŒæŸä¸ªå±æ€§çš„å–å€¼èŒƒå›´åœ¨0-100ä¹‹é—´â€¦â€¦</p><p>å…³ç³»æ¨¡å‹åº”æä¾›å®šä¹‰å’Œæ£€éªŒè¿™ç±»å®Œæ•´æ€§çš„æœºåˆ¶ï¼Œä»¥ä¾¿ç”¨ç»Ÿä¸€çš„ã€ç³»ç»Ÿçš„æ–¹æ³•æ¥å¤„ç†å®ƒä»¬ï¼Œè€Œä¸éœ€ç”¨ç¨‹åºæ¥æ‰¿æ‹…è¿™ä¸ªåŠŸèƒ½ã€‚</p><h2 id="å››ã€å…³ç³»ä»£æ•°">å››ã€å…³ç³»ä»£æ•°</h2><blockquote><p>å…³ç³»ä»£æ•°æ˜¯ä¸€ç§æŠ½è±¡çš„æŸ¥è¯¢è¯­è¨€ï¼Œå®ƒç”¨<strong>å¯¹å…³ç³»çš„</strong>è¿ç®—æ¥è¡¨è¾¾æŸ¥è¯¢</p></blockquote><p>å…³ç³»ä»£æ•°</p><ul><li>è¿ç®—å¯¹è±¡æ˜¯å…³ç³»</li><li>è¿ç®—ç»“æœä¹Ÿä¸ºå…³ç³»</li><li>å…³ç³»ä»£æ•°çš„è¿ç®—ç¬¦æœ‰ä¸¤ç±»<ul><li>é›†åˆè¿ç®—ç¬¦</li><li>ä¸“é—¨çš„å…³ç³»è¿ç®—ç¬¦</li></ul></li></ul><p>ä¼ ç»Ÿçš„é›†åˆè¿ç®—æ˜¯ä»å…³ç³»çš„ â€œæ°´å¹³â€ æ–¹å‘ï¼ˆè¡Œçš„è§’åº¦ï¼‰è¿›è¡Œçš„</p><p><font style="background:yellow">ä¸“é—¨çš„å…³ç³»è¿ç®—ä¸ä»…æ¶‰åŠè¡Œã€è¿˜æ¶‰åŠåˆ—</font></p><table><thead><tr><th>ç±»åˆ«</th><th>è¿ç®—ç¬¦</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>é›†åˆè¿ç®—ç¬¦</td><td>âˆ©</td><td>äº¤</td></tr><tr><td></td><td>-</td><td>å·®</td></tr><tr><td></td><td>âˆª</td><td>å¹¶</td></tr><tr><td></td><td>x</td><td>ç¬›å¡å°”ç§¯</td></tr><tr><td>ä¸“é—¨çš„å…³ç³»è¿ç®—ç¬¦</td><td>Ïƒ</td><td>é€‰æ‹©</td></tr><tr><td></td><td>Ï€</td><td>æŠ•å½±</td></tr><tr><td></td><td>â–·â—</td><td>è¿æ¥</td></tr><tr><td></td><td>Ã·</td><td>é™¤</td></tr></tbody></table><h3 id="1ã€ä¼ ç»Ÿçš„é›†åˆè¿ç®—">1ã€ä¼ ç»Ÿçš„é›†åˆè¿ç®—</h3><p>å…ˆè§„å®šRå’ŒSä¸¤ä¸ªè¡¨ï¼š</p><ul><li>å…·æœ‰ç›¸åŒçš„ç›®nï¼ˆå³ä¸¤ä¸ªå…³ç³»éƒ½æœ‰nä¸ªå±æ€§ï¼‰</li><li>ç›¸åº”çš„å±æ€§å–è‡ªåŒä¸€ä¸ªåŸŸ</li></ul><table><thead><tr><th>R</th><th>A</th><th>B</th><th>C</th><th>S</th><th>A</th><th>B</th><th>C</th></tr></thead><tbody><tr><td></td><td>a1</td><td>b1</td><td>c1</td><td></td><td>a1</td><td>b2</td><td>c2</td></tr><tr><td></td><td>a1</td><td>b2</td><td>c2</td><td></td><td>a1</td><td>b3</td><td>c2</td></tr><tr><td></td><td>a2</td><td>b2</td><td>c1</td><td></td><td>a2</td><td>b2</td><td>c1</td></tr></tbody></table><h4 id="RâˆªS">RâˆªS</h4><p>ä»ä¸ºnç›®å…³ç³»<br>$$<br>R\cup S={t|t\in R\vee t\in S}<br>$$</p><table><thead><tr><th>RâˆªS</th><th>A</th><th>B</th><th>C</th></tr></thead><tbody><tr><td></td><td>a1</td><td>b1</td><td>c1</td></tr><tr><td></td><td>a1</td><td>b2</td><td>c2</td></tr><tr><td></td><td>a2</td><td>b2</td><td>c1</td></tr><tr><td></td><td>a1</td><td>b3</td><td>c2</td></tr></tbody></table><h4 id="R-S">R - S</h4><table><thead><tr><th>R-S</th><th>A</th><th>B</th><th>C</th></tr></thead><tbody><tr><td></td><td>a1</td><td>b1</td><td>c1</td></tr></tbody></table><h4 id="Râˆ©S">Râˆ©S</h4><table><thead><tr><th>Râˆ©S</th><th>A</th><th>B</th><th>C</th></tr></thead><tbody><tr><td></td><td>a1</td><td>b2</td><td>c2</td></tr><tr><td></td><td>a2</td><td>b2</td><td>c1</td></tr></tbody></table><h4 id="RxS">RxS</h4><p>ä¸¥æ ¼æ¥è¯´åº”è¯¥æ˜¯å¹¿ä¹‰çš„ç¬›å¡å°”ç§¯</p><p>Rï¼šnç›®å…³ç³»ï¼Œk1ä¸ªå…ƒç»„</p><p>Sï¼šmç›®å…³ç³»ï¼Œk2ä¸ªå…ƒç»„</p><p>RxS</p><ul><li><p>åˆ— ï¼ˆn+mï¼‰åˆ—å…ƒç»„çš„é›†åˆ</p><ul><li>å…ƒç»„çš„å‰nåˆ—æ˜¯å…³ç³»Rçš„ä¸€ä¸ªå…ƒç»„</li><li>åmåˆ—æ˜¯å…³ç³»Sçš„ä¸€ä¸ªå…ƒç»„</li></ul></li><li><p>è¡Œï¼šk1 x k2ä¸ªå…ƒç»„</p><ul><li>$$<br>R \times S = {\stackrel\frown{t_rt_s}|t_r\in R\wedge t_s\in S}<br>$$</li></ul></li></ul><p><img src="https://s2.loli.net/2022/11/11/bcxUEKQLTsgz4HM.png" alt=""></p><h3 id="2ã€ä¸“é—¨çš„å…³ç³»è¿ç®—">2ã€ä¸“é—¨çš„å…³ç³»è¿ç®—</h3><p>å¼•å…¥çš„è®°å·ï¼š</p><ul><li><p>(1) Rï¼ŒtâˆˆRï¼Œt[Ai]</p><p>è®¾å…³ç³»æ¨¡å¼ä¸ºR(A1,A2,â€¦,An)</p><p>å…³ç³»è®¾ä¸ºR</p><p>tâˆˆRè¡¨ç¤ºtæ˜¯Rçš„ä¸€ä¸ªå…ƒç»„</p><p>t[Ai]è¡¨ç¤ºå…ƒç»„Tä¸­ç›¸åº”äºå±æ€§Aiçš„ä¸€ä¸ªåˆ†é‡</p></li><li><p>(2) A , t[A] , $\overline{A}$</p><p>è‹¥$A={A_{1k},A_{2k},â€¦,A_{ik}}$ï¼Œå…¶ä¸­$A_{1k},A_{2k},â€¦,A_{ik}$æ˜¯A1ï¼ŒA2ï¼Œâ€¦ï¼ŒAnä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™Aç§°ä¸ºå±æ€§åˆ—æˆ–å±æ€§ç»„ã€‚</p><p>$t[A]=(t[A_{i1}],t[A_{i2}],\cdots ,t[A_{ik}])$è¡¨ç¤ºå…ƒç»„tåœ¨å±æ€§åˆ—ä¸Šå„ä¸ªåˆ†é‡çš„é›†åˆ</p><p>$\overline{A}$è¡¨ç¤ºA1ï¼ŒA2ï¼Œâ€¦ï¼ŒAnä¸­å»æ‰$A_{1k},A_{2k},â€¦,A_{ik}$åå‰©ä¸‹çš„å±æ€§ç»„ã€‚</p></li><li><p>(3) $\stackrel\frown{t_rt_s}$</p><p>Rä¸ºnç›®å…³ç³»ï¼ŒSä¸ºmç›®å…³ç³»</p><p>trâˆˆRï¼ŒtsâˆˆSï¼Œ $\stackrel\frown{t_rt_s}$ç§°ä¸ºå…ƒç»„çš„è¿æ¥</p><p>$\stackrel\frown{t_rt_s}$æ˜¯ä¸€ä¸ªn+måˆ—çš„å…ƒç»„ï¼Œå‰nä¸ªåˆ†é‡ä¸ºRä¸­çš„ä¸€ä¸ªnå…ƒç»„ï¼Œåmä¸ªåˆ†é‡ä¸ºSä¸­çš„ä¸€ä¸ªmå…ƒç»„</p></li><li><p>(4) è±¡é›†Zx</p><p>ç»™å®šä¸€ä¸ªå…³ç³»R(X,Z)ï¼ŒXå’ŒZä¸ºå±æ€§ç»„</p><p>å½“t[X]=xæ—¶ï¼Œxåœ¨Rä¸­çš„è±¡é›†ï¼ˆImages Setï¼‰ä¸ºï¼š<br>$$<br>Z_x={t[Z]|t\in,t[X]=x}<br>$$<br>å®ƒè¡¨ç¤ºRä¸­å±æ€§ç»„Xä¸Šå€¼ä¸ºxçš„å„ä¸ªå…ƒç»„åœ¨Zä¸Šåˆ†é‡çš„é›†åˆ</p><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ã€æœ‰ä¸ªè¡¨Rï¼š</p><table><thead><tr><th>x1</th><th>Z1</th></tr></thead><tbody><tr><td>x1</td><td>Z2</td></tr><tr><td>x1</td><td>Z3</td></tr><tr><td>x2</td><td>Z2</td></tr><tr><td>x2</td><td>Z3</td></tr><tr><td>x3</td><td>Z1</td></tr><tr><td>x3</td><td>Z3</td></tr></tbody></table><ul><li><p>x1åœ¨Rä¸­çš„è±¡é›†</p><p>Zx1={Z1ï¼ŒZ2ï¼ŒZ3}</p></li><li><p>x2åœ¨Rä¸­çš„è±¡é›†</p><p>Zx2={Z2ï¼ŒZ3}</p></li><li><p>x3åœ¨Rä¸­çš„è±¡é›†</p><p>Zx3={Z1ï¼ŒZ3}</p></li></ul></li></ul><h4 id="1-é€‰æ‹©">1): é€‰æ‹©</h4><p>é€‰æ‹©åˆç§°ä¸ºé™åˆ¶(Restriction)</p><p>é€‰æ‹©è¿ç®—ç¬¦çš„å«ä¹‰</p><ul><li><p>åœ¨å…³ç³»Rä¸­é€‰æ‹©æ»¡è¶³ç»™å®šæ¡ä»¶çš„å„ä¸ªå…ƒç»„<br>$$<br>\sigma_FÂ®={t|t\in R\wedge F(t)=â€˜Trueâ€™}<br>$$</p></li><li><p>F: é€‰æ‹©æ¡ä»¶ï¼Œæ˜¯ä¸€ä¸ªé€»è¾‘è¡¨è¾¾å¼ï¼Œå–å€¼ä¸º True æˆ– False</p><ul><li>åŸºæœ¬å½¢å¼æ˜¯ï¼šX1 Î¸ Y1</li><li>Î¸ è¡¨ç¤ºæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå¯ä»¥æ˜¯ï¼ã€â‰¥ã€ï¼œã€â‰¤ã€= â€¦â€¦</li></ul></li><li><p>é€‰æ‹©è¿ç®—æ˜¯ä»è¡Œçš„è§’åº¦è¿›è¡Œè¿ç®—</p><p><img src="https://s2.loli.net/2022/11/11/FH6swUhOZ1a7lDC.png" alt=""></p></li></ul><h4 id="2-æŠ•å½±">2): æŠ•å½±</h4><p>ä»Rä¸­é€‰å‡ºè‹¥å¹²å±æ€§åˆ—ç»„æˆæ–°çš„å…³ç³»<br>$$<br>\Pi_AÂ®={t[A]|t\in R}<br>$$<br>æŠ•å½±æ“ä½œä¸»è¦æ˜¯ä»åˆ—çš„è§’åº¦è¿›è¡Œè¿ç®—</p><p><img src="https://s2.loli.net/2022/11/11/N1ZpHXLnUmckVBw.png" alt=""></p><p>æŠ•å½±åä¸ä»…å–æ¶ˆäº†åŸå…³ç³»ä¸­çš„æŸäº›åˆ—ï¼Œè€Œä¸”è¿˜å¯èƒ½å–æ¶ˆæŸäº›å…ƒç»„ï¼ˆé¿å…é‡å¤è¡Œï¼‰</p><p>å¯ä»¥çœ‹åˆ°ï¼Œè±¡é›†çš„æœ¬è´¨æ˜¯ä¸€æ¬¡é€‰æ‹©è¿ç®—å’Œä¸€æ¬¡æŠ•å½±è¿ç®—ã€‚</p><h4 id="3-è¿æ¥">3): è¿æ¥</h4><p>è¿æ¥ä¹Ÿç§°ä¸ºÎ¸è¿æ¥</p><p>è¿æ¥è¿ç®—ä¸­</p><ul><li>ä»ä¸¤ä¸ªå…³ç³»çš„ç¬›å¡å°”ç§¯ä¸­é€‰å–å±æ€§è§æ»¡è¶³ä¸€å®šæ¡ä»¶çš„å…ƒç»„<br>$$<br>R \underset{A\theta B}{\Join}S={\stackrel\frown{t_rt_s}|t_r\in R \wedge t_S \in S\wedge t_r[A]\theta t_s[B]}<br>$$</li></ul><h5 id="1-ä¸¤ç§å¸¸ç”¨çš„è¿æ¥è¿ç®—">(1) ä¸¤ç§å¸¸ç”¨çš„è¿æ¥è¿ç®—</h5><ul><li><p>ç­‰å€¼è¿æ¥ï¼ˆequijoinï¼‰</p><ul><li><p>Î¸ä¸º â€œ=â€ çš„è¿æ¥è¿ç®—ï¼Œå°±ç§°ä¸ºç­‰å€¼è¿ç®—</p></li><li><p>ä»å…³ç³»Rå’ŒSçš„å¹¿ä¹‰ç¬›å¡å°”ç§¯ä¸­é€‰å–Aã€Bå±æ€§ç›¸ç­‰çš„é‚£äº›å…ƒç»„ï¼Œè¡¨ç¤ºæ–¹å¼ä¸ºï¼š<br>$$<br>R \underset{A\theta B}{\Join}S={\stackrel\frown{t_rt_s}|t_r\in R \wedge t_S \in S\wedge t_r[A]= t_s[B]}<br>$$</p></li></ul></li><li><p>è‡ªç„¶è¿æ¥ï¼ˆNatureal joinï¼‰</p><ul><li><p>è‡ªç„¶è¿æ¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç­‰å€¼è¿æ¥</p><ul><li>ä¸¤ä¸ªå…³ç³»ä¸­è¿›è¡Œæ¯”è¾ƒçš„åˆ†é‡å¿…é¡»æ˜¯ç›¸åŒçš„å±æ€§ç»„</li><li>åœ¨ç»“æœä¸­é‡å¤çš„å±æ€§åˆ—è¦å»æ‰</li></ul></li><li><p>è‡ªç„¶è¿æ¥çš„å«ä¹‰</p><ul><li>Rå’ŒSå…·æœ‰ç›¸åŒçš„å±æ€§ç»„B<br>$$<br>R {\Join}S={\stackrel\frown{t_rt_s}[U-B]|t_r\in R \wedge t_S \in S\wedge t_r[B]= t_s[B]}<br>$$</li></ul></li></ul></li></ul><hr><p>ä¸€èˆ¬çš„è¿æ¥æ“ä½œæ˜¯ä»è¡Œçš„è§’åº¦è¿›è¡Œè¿ç®—</p><p><img src="https://s2.loli.net/2022/11/13/8ScUvBuh2LWEIGg.png" alt=""></p><p>è‡ªç„¶è¿æ¥è¿˜éœ€è¦å–æ¶ˆé‡å¤åˆ—ï¼Œæ‰€ä»¥æ˜¯åŒæ—¶ä»è¡Œå’Œåˆ—çš„è§’åº¦è¿›è¡Œè¿ç®—</p><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><blockquote><p>è¯è¯´æˆ‘ä»¬ä¸¾äº†å¥½å¤šä¸ªæ —å­ï¼Œå¸Œæœ›èƒ½å¤Ÿä¾¿äºç†è§£å§</p></blockquote><img src="https://s2.loli.net/2022/11/13/zwLHW2R5tm8eX6B.png" alt="DB-2-5.png" style="zoom:67%;"><p>é¦–å…ˆæœ‰ä¸¤ä¸ªè¡¨æ ¼ï¼Œç”¨Markdownç”»è¿™ç§æœ‰ç‚¹å¤ªéº»çƒ¦äº†ï¼Œç›´æ¥ç”¨å›¾å§</p><p>ä¸€èˆ¬çš„è¿æ¥$R \underset{C&lt;E}{\Join}S$çš„ç»“æœå¦‚ä¸‹ï¼Œæ»¡è¶³C&lt;Eå³å¯è¿æ¥ï¼š</p><img src="https://s2.loli.net/2022/11/13/JCVXqAtWzFR68U5.png" style="zoom:67%;"><p>ç­‰å€¼è¿æ¥$R \underset{R.B=S.B}{\Join}S$çš„ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°Rè¡¨Bå€¼å’ŒSè¡¨Bå€¼ç›¸åŒæ‰èƒ½è¿æ¥</p><img src="https://s2.loli.net/2022/11/13/23pl1us7PFemAGj.png" style="zoom:67%;"><p>è‡ªç„¶è¿æ¥ï¼Œé‡å¤çš„å±æ€§åˆ—å°±æ²¡æœ‰äº†ã€‚ ä¸Šé¢çš„ç­‰å€¼è¿æ¥è¿›è¡Œæ¯”è¾ƒçš„éƒ½æ˜¯Bå±æ€§ï¼Œ ä½†è¿˜å¯ä»¥è¿›è¡ŒR.B = S.Eç­‰å€¼è¿æ¥ï¼Œ è€Œè‡ªç„¶è¿æ¥åªèƒ½æ˜¯åŒåå±æ€§ç»„</p><img src="https://s2.loli.net/2022/11/13/CYtw9ueE6ZlmJ2R.png" alt="DB-2-8.png" style="zoom:67%;"><p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼š</p><ol><li><p>ç­‰å€¼è¿æ¥å¿…é¡»è¦æœ‰ç­‰å€¼çš„æ¡ä»¶ï¼Œå½“æ¡ä»¶ä¸åŒæ—¶è¿æ¥çš„ç»“æœä¹Ÿä¸ç›¸åŒï¼Œä¸¤ä¸ªå…³ç³»å¯ä»¥æ²¡æœ‰ç›¸åŒçš„å±æ€§åˆ—</p></li><li><p>è‡ªç„¶è¿æ¥å¿…é¡»è¦æœ‰ç›¸åŒçš„å±æ€§åˆ—æ‰èƒ½è¿›è¡Œï¼Œå³ç­‰å€¼è¿æ¥ä¹‹åè¦å»é™¤ç›¸åŒçš„å±æ€§åˆ—</p></li></ol><h5 id="2-æ‚¬æµ®å…ƒç»„ï¼ˆDangling-tupleï¼‰">(2) æ‚¬æµ®å…ƒç»„ï¼ˆDangling tupleï¼‰</h5><p>ä¸¤ä¸ªå…³ç³»Rå’ŒSåœ¨åšè‡ªç„¶è¿æ¥æ—¶ï¼Œå…³ç³»Rä¸­æŸäº›å…ƒç»„æœ‰å¯èƒ½åœ¨Sä¸­ä¸å­˜åœ¨å…¬å…±å±æ€§ä¸Šå€¼ç›¸ç­‰çš„å…ƒç»„ï¼Œä»è€Œé€ æˆRä¸­è¿™äº›å…ƒç»„åœ¨æ“ä½œæ—¶è¢«èˆå¼ƒäº†ï¼Œè¿™äº›è¢«èˆå¼ƒçš„å…ƒç»„ç§°ä¸ºæ‚¬æµ®å…ƒç»„ã€‚</p><h5 id="3-å¤–è¿æ¥ï¼ˆOuter-Joinï¼‰">(3) å¤–è¿æ¥ï¼ˆOuter Joinï¼‰</h5><ul><li>å¦‚æœæŠŠæ‚¬æµ®å…ƒç»„ä¹Ÿä¿å­˜åœ¨ç»“æœå…³ç³»ä¸­ï¼Œè€Œåœ¨å…¶ä»–å±æ€§ä¸Šå¡« ç©ºå€¼(NULL)ï¼Œå°±å«åšå¤–è¿æ¥</li><li>å·¦å¤–è¿æ¥ï¼šåªä¿ç•™å·¦è¾¹å…³ç³»Rä¸­çš„æ‚¬æµ®å…ƒç»„</li><li>å³å¤–è¿æ¥ï¼šåªä¿ç•™å³è¾¹å…³ç³»Sä¸­çš„æ‚¬æµ®å…ƒç»„</li></ul><p><img src="https://s2.loli.net/2022/11/13/1CQ3aSO2DNPvYwR.png" alt=""></p><p>ä¸Šé¢Rå’ŒSç”Ÿæˆçš„å¤–è¿æ¥è¡¨ä¸ºï¼š</p><p><img src="https://s2.loli.net/2022/11/13/MosfAw5yzFcupbS.png" alt=""></p><p>å·¦å¤–è¿æ¥ä¸å³å¤–è¿æ¥å°±åˆ†åˆ«å¦‚ä¸‹ï¼ˆç©ºç¼ºå…ƒç´ å°±ç”¨NULLè¡¥ä¸Šï¼‰ï¼š</p><p><img src="https://s2.loli.net/2022/11/13/b9dVwtilBgxDCXz.png" alt=""></p><h4 id="4-é™¤è¿ç®—">4): é™¤è¿ç®—</h4><p>ç»™å®šå…³ç³»Rï¼ˆX,Yï¼‰å’ŒSï¼ˆY,Zï¼‰ï¼Œå…¶ä¸­X Y Zä¸ºå±æ€§ç»„</p><ol><li><p>Rä¸­çš„Y &amp; Sä¸­çš„Yå¯ä»¥ç”±ä¸åŒçš„å±æ€§åï¼Œä½†æ˜¯è¦å‡ºè‡ªç›¸åŒçš„åŸŸé›†</p></li><li><p>Rä¸Sçš„é™¤æ³•è¿ç®—å¾—åˆ°ä¸€ä¸ªæ–°çš„å…³ç³»Pï¼ˆXï¼‰</p></li><li><p>Pæ˜¯Rä¸­æ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„å…ƒç»„åœ¨Xå±æ€§åˆ—ä¸Šçš„æŠ•å½±</p></li><li><p>å…ƒç»„åœ¨Xä¸Šåˆ†é‡xçš„è±¡é›†YxåŒ…å«Såœ¨Yä¸ŠæŠ•å½±çš„é›†åˆï¼Œè®°ä½œï¼š<br>$$<br>R \div S={t_r[X] | t_r\in R \wedge \Pi_Y(S)\subseteq Y_X}<br>$$<br>Yx: xåœ¨Rä¸­çš„è±¡é›†ï¼Œ$x=t_r[X]$ã€‚</p></li></ol><hr><p>é™¤è¿ç®—æ˜¯åŒæ—¶ä»è¡Œå’Œåˆ—è¿›è¡Œè¿ç®—çš„</p><p><img src="https://s2.loli.net/2022/11/18/wX2eK1HQi6CSlpx.png" alt=""></p><p><img src="https://s2.loli.net/2022/11/18/IvoTlwWmU68psdS.png" alt=""></p><p>é™¤æ³•å…·ä½“è®¡ç®—æ­¥éª¤ï¼š</p><ul><li>è®¡ç®—$\Pi_Y(S)$ï¼Œå°†ç»“æœè®°ä¸ºSy</li><li>è®¡ç®—$\Pi_XÂ®$ï¼Œå°†ç»“æœè®°ä¸ºRx</li><li>éå†Rxä¸­æ¯ä¸€ä¸ªå…ƒç´ aï¼Œè®¡ç®—aåœ¨å…³ç³»Rä¸­çš„<strong>è±¡é›†</strong>ï¼Œå¾—åˆ°Ya</li><li>åˆ¤æ–­Syæ˜¯å¦ä¸ºYaçš„å­é›†<ul><li>æ˜¯ï¼šå°†aåŠ å…¥åˆ°ç»“æœä¸­</li><li>ä¸æ˜¯ï¼šéå†ä¸‹ä¸€ä¸ªå…ƒç´ </li></ul></li></ul><img src="https://s2.loli.net/2022/11/18/PXtwsMY7EHcRC91.png" style="zoom:80%;"><img src="https://s2.loli.net/2022/11/18/1ZIidLysngXJBV2.png" style="zoom:80%;">]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL 1ï¼šæ¦‚å¿µ</title>
      <link href="/2022/11/10/DataBase-1/"/>
      <url>/2022/11/10/DataBase-1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>æ•°æ®åº“ 1ã€åŸºç¡€</h1><h2 id="ä¸€ã€åŸºæœ¬æ¦‚å¿µ">ä¸€ã€åŸºæœ¬æ¦‚å¿µ</h2><p>æ•°æ®çš„å››ä¸ªåŸºæœ¬æ¦‚å¿µï¼š</p><ul><li>æ•°æ®ï¼ˆdataï¼‰</li><li>æ•°æ®åº“ï¼ˆdatabaseï¼‰</li><li>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰</li><li>æ•°æ®åº“ç³»ç»Ÿï¼ˆDBSï¼‰</li></ul><h3 id="1-1-æ•°æ®åº“">1.1 æ•°æ®åº“</h3><p>é•¿æœŸå‚¨å­˜ã€æœ‰ç»„ç»‡ã€å¯å…±äº«çš„å¤§é‡æ•°æ®çš„é›†åˆ</p><p>ç‰¹å¾ï¼š</p><ul><li><p>æ•°æ®æŒ‰ä¸€å®šçš„æ•°æ®æ¨¡å‹ç»„ç»‡ã€æè¿°å’Œå‚¨å­˜</p></li><li><p>å¯ä¸ºå„ç§ç”¨æˆ·å…±äº«</p></li><li><p>å†—ä½™åº¦è¾ƒå°</p></li><li><p>æ•°æ®ç‹¬ç«‹æ€§æ</p></li><li><p>æ˜“æ‹“å±•</p></li></ul><h3 id="1-2-æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ">1.2 æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h3><p>ä½äºç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„æ•°æ®ç®¡ç†è½¯ä»¶</p><p>ç”¨äºç§‘å­¦åœ°ç»„ç»‡å’Œå­˜å‚¨æ•°æ®ã€é«˜æ•ˆè·å–ä¸ç»´æŠ¤æ•°æ®</p><ul><li><p>æ•°æ®å®šä¹‰åŠŸèƒ½</p><ul><li>æä¾›æ•°æ®å®šä¹‰è¯­è¨€<strong>DDL</strong></li><li>å®šä¹‰æ•°æ®åº“ä¸­çš„æ•°æ®å¯¹è±¡</li></ul></li><li><p>æ•°æ®ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†</p><ul><li>åˆ†ç±»ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†å„ç§æ•°æ®</li><li>ç¡®å®šç»„ç»‡æ•°æ®çš„æ–‡ä»¶ç»“æ„å’Œå­˜å‚¨æ–¹å¼</li><li>å®ç°æ•°æ®ä¹‹é—´çš„è”ç³»</li><li>æä¾›å¤šç§å­˜å–æ–¹æ³•æé«˜å­˜å–æ•ˆç‡</li></ul></li><li><p>æ•°æ®æ“çºµåŠŸèƒ½</p><ul><li>æä¾›æ•°æ®æ“çºµè¯­è¨€<strong>DML</strong></li><li>å®ç°å¯¹æ•°æ®å¯çš„åŸºæœ¬æ“ä½œï¼Œå¢åˆ æ”¹æŸ¥</li></ul></li><li><p>æ•°æ®åº“çš„äº‹ç‰©ç®¡ç†å’Œè¿è¡Œç®¡ç†</p><ul><li>æ•°æ®åº“æœ‰æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç»Ÿä¸€ç®¡ç†</li><li>ä¿è¯æ•°æ®å®‰å…¨æ€§ã€èƒ½å¤Ÿæ”¯æŒå¤šç”¨æˆ·å¯¹æ•°æ®çš„å¹¶å‘ä½¿ç”¨</li><li>å‘ç”Ÿæ•…éšœåçš„ç³»ç»Ÿæ¢å¤</li></ul></li><li><p>å…·å¤‡æ•°æ®åº“çš„å»ºç«‹ä¸ç»´æŠ¤åŠŸèƒ½</p><ul><li>åŒ…æ‹¬åˆå§‹åŒ–æ•°æ®ã€æ•°æ®è½¬å‚¨ã€æ¢å¤ã€é‡ç»„ä¹‹ã€æ€§èƒ½è§è¯†ã€åˆ†æç­‰ç­‰</li></ul></li><li><p>å…¶ä»–åŠŸèƒ½</p><ul><li>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸ç½‘ç»œä¸­å…¶ä»–è½¯ä»¶ç³»ç»Ÿçš„é€šä¿¡</li><li>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¹‹é—´çš„æ•°æ®è½¬æ¢</li><li>å¼‚æ„æ•°æ®åº“ä¹‹é—´çš„äº’è®¿å’Œäº’æ“ä½œ</li></ul></li></ul><h3 id="1-3-æ•°æ®åº“ç³»ç»Ÿ">1.3 æ•°æ®åº“ç³»ç»Ÿ</h3><p>Database Systemï¼Œç”±<strong>æ•°æ®åº“</strong>ï¼Œ<strong>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</strong>ã€<strong>åº”ç”¨ç¨‹åº</strong>å’Œ<strong>æ•°æ®åº“ç®¡ç†å‘˜</strong>ç»„æˆçš„ä¸€æ•´å¥—å­˜å‚¨ã€ç®¡ç†ã€å¤„ç†å’Œç»´æŠ¤æ•°æ®çš„ç³»ç»Ÿã€‚</p><p><img src="https://s2.loli.net/2022/11/10/W1fM2e8lmSicrOd.jpg" alt="DB-1-1.jpg"></p><h2 id="äºŒã€æ•°æ®æ¨¡å‹">äºŒã€æ•°æ®æ¨¡å‹</h2><p>æ•°æ®æ¨¡å‹ï¼Œå°±æ˜¯å¯¹ç°å®ä¸–ç•Œæ•°æ®ç‰¹å¾çš„æŠ½è±¡ã€‚</p><p>æ•°æ®æ¨¡å‹æ˜¯æ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒå’ŒåŸºç¡€ã€‚</p><h3 id="2-1-ä¸¤ç±»æ•°æ®æ¨¡å‹">2.1 ä¸¤ç±»æ•°æ®æ¨¡å‹</h3><h4 id="1ã€æ¦‚å¿µæ¨¡å‹">1ã€æ¦‚å¿µæ¨¡å‹</h4><p>ä¹Ÿå«åšä¿¡æ¯æ¨¡å‹ï¼Œå®ƒæ˜¯æŒ‰ç”¨æˆ·çš„è§‚ç‚¹æ¥å¯¹æ•°æ®å’Œä¿¡æ¯å»ºæ¨¡ï¼Œç”¨äºæ•°æ®åº“è®¾è®¡</p><p>æ¦‚å¿µæ¨¡å‹çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•ï¼šå®ä½“-è”ç³»æ–¹æ³•</p><h4 id="2ã€é€»è¾‘æ¨¡å‹å’Œç‰©ç†æ¨¡å‹">2ã€é€»è¾‘æ¨¡å‹å’Œç‰©ç†æ¨¡å‹</h4><ul><li><p>é€»è¾‘æ¨¡å‹ä¸»è¦åŒ…æ‹¬ç½‘çŠ¶æ¨¡å‹ã€å±‚æ¬¡æ¨¡å‹ã€å…³ç³»æ¨¡å‹ã€é¢å‘å¯¹è±¡æ•°æ®æ¨¡å‹ã€‚å¯¹è±¡å…³ç³»æ•°æ®æ¨¡å‹ã€åŠç»“æ„åŒ–æ•°æ®æ¨¡å‹ç­‰ç­‰</p><p>æŒ‰<strong>è®¡ç®—æœºç³»ç»Ÿ</strong>çš„è§‚ç‚¹å¯¹æ•°æ®å»ºæ¨¡ï¼Œç”¨äºDBMSå®ç°</p></li><li><p>å±‹é‡Œé¢æ¨¡å‹æ˜¯å¯¹æ˜¯æ•°æ®æœ€åº•å±‚çš„æŠ½è±¡ï¼Œæè¿°æ•°æ®åœ¨å­¦ä¹ é€šå†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼å’Œå‚¨å­˜åŒºæ–¹æ³•ï¼Œåœ¨<strong>ç£ç›˜æˆ–ç£å¸¦</strong>ä¸Šçš„å­˜å‚¨æ–¹å¼å’Œå­˜å–æ–¹æ³•</p></li></ul><h3 id="2-2-æ¦‚å¿µæ¨¡å‹">2.2 æ¦‚å¿µæ¨¡å‹</h3><h4 id="1ã€ä¿¡æ¯ä¸–ç•ŒåŸºæœ¬æ¦‚å¿µ">1ã€ä¿¡æ¯ä¸–ç•ŒåŸºæœ¬æ¦‚å¿µ</h4><ul><li><p>1ã€å®ä½“ï¼ˆEntityï¼‰</p><p>å®¢è§‚å­˜åœ¨å¹¶å¯ç›¸äº’åŒºåˆ«çš„äº‹ç‰©</p><p>å¯ä»¥æ˜¯å…·ä½“çš„äººã€äº‹ã€ç‰©æˆ–æŠ½è±¡çš„æ¦‚å¿µ</p></li><li><p>2ã€å±æ€§ï¼ˆAttributeï¼‰</p><p>å®ä½“æ‰€å…·æœ‰çš„æŸä¸€ç‰¹æ€§</p><p>ä¸€ä¸ªå®ä½“å¯ä»¥ç”±è‹¥å¹²ä¸ªå±æ€§æ¥åˆ»ç”»</p></li><li><p>3ã€ç ï¼ˆKeyï¼‰</p><p>å”¯ä¸€æ ‡è¯†å®ä½“çš„å±æ€§é›†ç§°ä¸ºç </p></li><li><p>4ã€å®ä½“å‹ï¼ˆEntity Typeï¼‰</p><p>åˆ†åˆ«å®ä½“åŠå…¶å±æ€§çš„ç±»å‹</p></li><li><p>5ã€å®ä½“é›†ï¼ˆEntity Setï¼‰</p><p>åŒä¸€ç±»å‹çš„å®ä½“çš„é›†åˆ</p></li><li><p>6ã€è”ç³»ï¼ˆRelationshipï¼‰</p><p>å®ä½“ä¹‹é—´çš„è”ç³»é€šå¸¸æ˜¯æŒ‡ä¸åŒå®ä½“é›†ä¹‹é—´çš„è”ç³»</p></li></ul><h4 id="2ã€æ¦‚å¿µæ¨¡å‹çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•ï¼šå®ä½“-è”ç³»æ–¹æ³•">2ã€æ¦‚å¿µæ¨¡å‹çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•ï¼šå®ä½“-è”ç³»æ–¹æ³•</h4><p>è¯¥æ–¹æ³•ä½¿ç”¨<strong>E-Rå›¾</strong>æ¥æ²¡æè¿°ç°å®ä¸–ç•Œçš„æ¦‚å¿µæ¨¡å‹ï¼Œ<strong>E-Ræ–¹æ³•ä¹Ÿç§°ä¸ºE-Ræ¨¡å‹</strong>ã€‚</p><h3 id="2-3-æ•°æ®æ¨¡å‹çš„ç»„æˆè¦ç´ ">2.3 æ•°æ®æ¨¡å‹çš„ç»„æˆè¦ç´ </h3><p>æ•°æ®æ¨¡å‹é€šå¸¸ç”±<strong>æ•°æ®ç»“æ„ã€æ•°æ®æ“ä½œã€æ•°æ®çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶</strong>ä¸‰éƒ¨åˆ†ç»„æˆ</p><ul><li><p>æ•°æ®ç»“æ„</p><p>æè¿°æ•°æ®åº“çš„ç»„æˆå¯¹è±¡ï¼Œä»¥åŠå¯¹è±¡ä¹‹é—´çš„è”ç³»<br>æè¿°çš„å†…å®¹ï¼š</p><ul><li>ä¸å¯¹è±¡çš„ç±»å‹ã€å†…å®¹ã€è¡Œæ”¿æœ‰å…³</li><li>ä¸æ•°æ®ä¹‹é—´è”ç³»æœ‰å…³</li></ul><p>æ•°æ®ç»“æ„æ˜¯å¯¹ç³»ç»Ÿé™æ€ç‰¹æ€§çš„æè¿°</p></li><li><p>æ•°æ®æ“ä½œ</p><p>å¯¹æ•°æ®åº“ä¸­çš„å„ç§å¯¹è±¡ï¼ˆå‹ï¼‰çš„å®ä¾‹ï¼ˆå€¼ï¼‰å…è®¸æ‰§è¡Œçš„æ“ä½œé›†åˆï¼ŒåŒ…æ‹¬æ“ä½œå’Œç›¸å…³çš„æ“ä½œè§„åˆ™</p><p>ç±»å‹ï¼šå¢åˆ æ”¹æŸ¥</p></li><li><p>æ•°æ®çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶</p><ul><li><p>ä¼šç»™ä¸€ç»„å®Œæ•´æ€§è§„åˆ™çš„é›†åˆ</p><p>å®Œæ•´æ€§è§„åˆ™ï¼šç»™å®šçš„æ•°æ®æ¨¡å‹ä¸­çš„åˆ¶çº¦å’Œä¾å­˜è§„åˆ™</p><p>ç”¨æ¥é™åˆ¶æ•°æ®çŠ¶æ€å˜åŒ–</p></li></ul></li></ul><h3 id="2-4-å¸¸ç”¨çš„æ•°æ®æ¨¡å‹">2.4 å¸¸ç”¨çš„æ•°æ®æ¨¡å‹</h3><ul><li><p>å±‚æ¬¡æ¨¡å‹</p><p>ç”¨æ ‘å½¢ç»“æ„è¡¨ç¤ºå®ä½“ä¹‹é—´çš„è”ç³»</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>èŠ‚ç‚¹çš„åŒäº²æ˜¯æƒŸä¸€çš„</li><li>æ™ºèƒ½ç›´æ¥å¤„ç†ä¸€å¯¹å¤šçš„è¯•é¢˜ç»ƒä¹ </li><li>æ¯ä¸ªè®°å½•ç±»å‹å¯ä»¥å®šä¹‰ä¸€ä¸ªæ’åºå­—æ®µã€ä¹Ÿç§°ä¸ºç å­—æ®µ</li><li>ä»»ä½•è®°å½•å€¼åªæœ‰æŒ‰å…¶è·¯å¾„æŸ¥çœ‹æ—¶ï¼Œæ‰èƒ½æ˜¾å‡ºå®ƒçš„å…¨éƒ¨æ„ä¹‰</li><li>æ²¡æœ‰ä¸€ä¸ªå­å¥³è®°å½•å€¼èƒ½å¤Ÿè„±ç¦»åŒäº²è®°å½•å€¼è€Œç‹¬ç«‹å­˜åœ¨</li></ul><p>çº¦æŸæ¡ä»¶ï¼š</p><ul><li><p>æ— å“åº”çš„åŒäº²èŠ‚ç‚¹å€¼å°±ä¸èƒ½æ’å…¥å­å¥³èŠ‚ç‚¹å€¼</p></li><li><p>å¦‚æœåˆ é™¤åŒäº²èŠ‚ç‚¹å€¼ï¼Œåˆ™ç›¸åº”çš„å­å¥³èŠ‚ç‚¹å€¼ä¹ŸåŒæ—¶è¢«åˆ é™¤</p></li><li><p>æ›´æ–°æ“ä½œæ—¶ï¼Œåº”æ›´æ–°æ‰€æœ‰å“åº”è®°å½•ï¼Œä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</p></li></ul><p>ä¼˜ç‚¹ï¼š</p><ul><li>å±‚æ¬¡æ¨¡å‹çš„æ•°æ®ç»“æ„æ¯”è¾ƒç®€å•æ¸…æ™°</li><li>æŸ¥è¯¢æ•ˆç‡æï¼Œæ€§èƒ½ä¼˜äºå…³ç³»æ¨¡å‹ï¼Œä¸ä½äºç½‘çŠ¶æ¨¡å‹</li><li>å±‚æ¬¡æ•°æ®æ¨¡å‹æä¾›äº†è‰¯å¥½çš„å®Œæ•´æ€§æ”¯æŒ</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>èŠ‚ç‚¹ä¹‹é—´çš„å¤šå¯¹å¤šè”ç³»è¡¨ç¤ºä¸è‡ªç„¶</li><li>å¯¹æ’å…¥åˆ é™¤æ“ä½œçš„é™åˆ¶å¤šï¼Œåº”ç”¨ç¨‹åºçš„è¾¨ææ¯”è¾ƒå¤æ‚</li><li>æŸ¥è¯¢å­å¥³èŠ‚ç‚¹å¿…é¡»é€šè¿‡åŒäº²èŠ‚ç‚¹</li><li>å±‚æ¬¡å‘½ä»¤è¶‹äºç¨‹åºåŒ–</li></ul></li><li><p>ç½‘çŠ¶æ¨¡å‹</p><p>æ¡ä»¶ï¼š</p><ul><li>å…è®¸ä¸€ä¸ªä»¥ä¸Šçš„èŠ‚ç‚¹æ— åŒäº²</li><li>ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥ç”±å¤šäºä¸€ä¸ªçš„åŒäº²</li></ul><p>ä¼˜ç‚¹ï¼š</p><ul><li>æ›´ç›´æ¥æè¿°ç°å®ä¸–ç•Œï¼Œå¦‚ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥ç”±å¤šä¸ªåŒäº²</li><li>æœ‰è‰¯å¥½çš„æ€§èƒ½ï¼Œå­˜å–æ•ˆç‡è¾ƒé«˜</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ç»“æ„æ¯”è¾ƒå¤æ‚ï¼Œä¸åˆ©äºæœ€ç»ˆç”¨æˆ·æŒæ¡</li><li>DDLã€DMLè¯­è¨€å¤æ‚ï¼Œç”¨æˆ·ä¸æ˜“ä½¿ç”¨</li><li>è®°å½•ä¹‹é—´è”ç³»æ˜¯é€šè¿‡å­˜å–è·¯å¾„å®ç°çš„ï¼Œç”¨æˆ·å¿…é¡»äº†è§£ç³»ç»Ÿç»“æ„çš„ç»†èŠ‚</li></ul></li><li><p>å…³ç³»æ¨¡å‹</p><p>å…³ç³»æ¨¡å‹ä¸­æ•°æ®çš„é€»è¾‘ç»“æ„æ˜¯ä¸€å¼ äºŒç»´è¡¨</p><ul><li><p>åŸŸï¼ˆdomainï¼‰</p><p>æ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„å€¼çš„é›†åˆã€‚</p></li></ul></li></ul><table><thead><tr><th>å…³ç³»æœ¯è¯­</th><th>ä¸€èˆ¬è¡¨æ ¼æœ¯è¯­</th></tr></thead><tbody><tr><td>å…³ç³»å</td><td>è¡¨å</td></tr><tr><td>å…³ç³»æ¨¡å¼</td><td>è¡¨å¤´ï¼ˆè¡¨æ ¼çš„æè¿°ï¼‰</td></tr><tr><td>å…³ç³»</td><td>ï¼ˆä¸€å¼ ï¼‰äºŒç»´è¡¨</td></tr><tr><td>å…ƒç»„</td><td>è®°å½•æˆ–è¡Œ</td></tr><tr><td>å±æ€§</td><td>åˆ—</td></tr><tr><td>å±æ€§å</td><td>åˆ—æ˜</td></tr><tr><td>å±æ€§å€¼</td><td>åˆ—å€¼</td></tr><tr><td>åˆ†é‡</td><td>ä¸€æ¡è®°å½•ä¸­çš„ä¸€ä¸ªåˆ—å€¼</td></tr><tr><td>éè§„èŒƒå…³ç³»</td><td>è¡¨ä¸­åµŒå¥—çš„è¡¨</td></tr></tbody></table><p>å…³ç³»æ¨¡å‹è¦æ±‚å…³ç³»å¿…é¡»æ˜¯è§„èŒƒåŒ–çš„ï¼Œå…³ç³»çš„æ¯ä¸€ä¸ªåˆ†é‡å¿…é¡»æ˜¯ä¸€ä¸ªä¸å¯åˆ†çš„æ•°æ®é¡¹ï¼Œä¹Ÿå°±æ˜¯è¡¨æ ¼ä¸­ä¸å¯ä»¥æœ‰åµŒå¥—</p><h2 id="ä¸‰ã€æ•°æ®åº“ç³»ç»Ÿçš„ç»“æ„">ä¸‰ã€æ•°æ®åº“ç³»ç»Ÿçš„ç»“æ„</h2><p>ä»æ•°æ®åº“æœ€ç»ˆç”¨æˆ·è§’åº¦çœ‹ï¼Œæ•°æ®åº“ç³»ç»Ÿçš„ç»“æ„åˆ†ä¸ºï¼š</p><ul><li>å•ç”¨æˆ·ç»“æ„</li><li>ä¸»ä»å¼ç»“æ„</li><li>åˆ†å¸ƒå¼ç»“æ„</li><li>å®¢æˆ·-æœåŠ¡å™¨</li><li>æµè§ˆå™¨-åº”ç”¨æœåŠ¡å™¨/æ•°æ®åº“å¤šå±‚ç»“æ„ç­‰ç­‰</li></ul><h3 id="3-1-æ¨¡å¼æ¦‚å¿µ">3.1 æ¨¡å¼æ¦‚å¿µ</h3><p>æ•°æ®æ¨¡å‹ä¸­æœ‰å‹ï¼ˆTypeï¼‰å’Œå€¼ï¼ˆValueï¼‰çš„æ¦‚å¿µã€‚</p><p>æ¨¡å¼schema</p><ul><li>æ•°æ®åº“é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°</li><li>æ˜¯å‹çš„æè¿°ï¼Œä¸æ¶‰åŠå…·ä½“å€¼</li><li>åæ˜ çš„æ˜¯æ•°æ®çš„ç»“æ„æœºå™¨è”ç³»</li><li>æ¨¡å¼æ˜¯ç›¸å¯¹ç¨³å®šçš„</li></ul><p>å®ä¾‹ (Instance)</p><ul><li>æ¨¡å¼çš„ä¸€ä¸ªå…·ä½“å€¼</li><li>åæ˜ æ•°æ®åº“æŸä¸€æ—¶åˆ»çš„çŠ¶æ€</li><li>åŒä¸€ä¸ªæ¨¡å¼å¯ä»¥ç”±å¾ˆå¤šå®ä¾‹</li><li>å®ä¾‹å²æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ›´æ–°è€Œå˜åŠ¨</li></ul><p>æ¨¡å¼åªè®¾è®¡å‹çš„æè¿°ï¼Œä¸æ¶‰åŠå…·ä½“çš„å€¼ã€‚æ¨¡å¼çš„ä¸€ä¸ªå…·ä½“å€¼ç§°ä¸ºæ¨¡å¼çš„ä¸€ä¸ªå®ä¾‹ã€‚åŒä¸€ä¸ªæ¨¡å¼å¯ä»¥ç”±å¾ˆå¤šçš„å®ä¾‹ã€‚</p><p>æ¨¡å¼æ˜¯ç›¸å¯¹ç¨³å®šçš„ï¼Œè€Œå®ä¾‹æ˜¯ç›¸å¯¹å˜åŠ¨çš„ã€‚</p><h3 id="3-2-ä¸‰çº§æ¨¡å¼ç»“æ„">3.2 ä¸‰çº§æ¨¡å¼ç»“æ„</h3><p><img src="https://s2.loli.net/2022/11/10/HjlNMCUYG5LFcvr.jpg" alt="DB-1-2.jpg"></p><h4 id="1ã€æ¨¡å¼ï¼ˆschemaï¼‰">1ã€æ¨¡å¼ï¼ˆschemaï¼‰</h4><p>æ¨¡å¼ä¹Ÿç§°ä¸º<strong>é€»è¾‘æ¨¡å¼</strong></p><ul><li><p>æ˜¯æ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°</p><p>æ˜¯æ•°æ®åº“ç³»ç»Ÿæ¨¡å¼ç»“æ„çš„ä¸­é—´å±‚</p></li><li><p>æ˜¯æ‰€æœ‰ç”¨æˆ·çš„å…¬å…±æ•°æ®è§†å›¾</p></li><li><p>ä¸€ä¸ªæ•°æ®åº“å°±åªæœ‰ä¸€ä¸ªæ¨¡å¼</p></li><li><p>æ¨¡å¼æ˜¯æ•°æ®åº“ç³»ç»Ÿæ¨¡å¼ç»“æ„ä¸­çš„ä¸­é—´å±‚</p><ul><li>ä¸æ•°æ®çš„ç‰©ç†å­˜å‚¨ç»†èŠ‚å’Œç¡¬ä»¶ç¯å¢ƒæ— å…³</li><li>ä¸å…·ä½“çš„åº”ç”¨ç¨‹åºã€å¼€å‘å·¥å…·åŠç¨‹åºè¯­è¨€æ— å…³</li></ul></li></ul><p>æ¨¡å¼çš„å®šä¹‰ï¼š</p><ul><li>æ•°æ®çš„é€»è¾‘ç»“æ„ï¼ˆæ•°æ®é¡¹åå­—ã€ç±»å‹ã€å–å€¼èŒƒå›´â€¦â€¦ï¼‰</li><li>æ•°æ®ä¹‹é—´çš„è”ç³»</li><li>æ•°æ®æœ‰å…³çš„å®‰å…¨æ€§ã€å®Œæ•´æ€§è¦æ±‚</li></ul><p>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæä¾›æ¨¡å¼æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆæ¨¡å¼DDLï¼‰æ¥ä¸¥æ ¼åœ°å®šä¹‰æ¨¡å¼ã€‚</p><h4 id="2ã€å¤–æ¨¡å¼-External-Schema">2ã€å¤–æ¨¡å¼(External Schema)</h4><p>å¤–æ¨¡å¼ã€ä¹Ÿç§°ä¸ºå­æ¨¡å¼æˆ–ç”¨æˆ·æ¨¡å¼</p><ul><li>æ•°æ®åº“ç”¨æˆ·ï¼ˆåŒ…æ‹¬åº”ç”¨ç¨‹åºå‘˜å’Œæœ€ç»ˆç”¨æˆ·ï¼‰ä½¿ç”¨çš„<strong>å±€éƒ¨</strong>æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°</li><li>æ•°æ®åº“ç”¨æˆ·çš„æ•°æ®è§†å›¾ï¼Œæ˜¯ä¸æŸä¸€åº”ç”¨æœ‰å…³çš„æ•°æ®é€»è¾‘è¡¨ç¤º</li></ul><p>å¤–æ¨¡å¼çš„åœ°ä½ï¼šç»“ä½™æ¨¡å¼ä¸åº”ç”¨ä¹‹é—´</p><ul><li>æ¨¡å¼ä¸å¤–æ¨¡å¼çš„å…³ç³»ï¼šä¸€å¯¹å¤š<ul><li>å¤–æ¨¡å¼é€šå¸¸æ˜¯æ¨¡å¼çš„å­é›†ã€‚</li><li>ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¾ˆå¤šä¸ªå¤–æ¨¡å¼ï¼Œåæ˜ ä¸åŒçš„ç”¨æˆ·çš„åº”ç”¨éœ€æ±‚ã€çœ‹å¾…æ•°æ®çš„æ–¹å¼ã€å¯¹æ•°æ®ä¿å¯†çš„è¦æ±‚</li><li>æ¨¡å¼ä¸­åŒæ ·çš„æ•°æ®ï¼Œåœ¨ä¸åŒå¤–æ¨¡å¼ä¸­å®å¦ˆå’ªçº§åˆ«å¯ä»¥æ˜¯ä¸ä¸€æ ·çš„</li></ul></li><li>æ¨¡å¼ä¸åº”ç”¨çš„å…³ç³»ï¼šä¸€å¯¹å¤š<ul><li>åŒä¸€å¤–æ¨¡å¼ä¹Ÿå¯ä»¥ä¸ºæŸä¸€ç”¨äºçš„å¤šä¸ªåº”ç”¨ç³»ç»Ÿæ‰€ä½¿ç”¨çš„</li><li>ä½†ä¸€ä¸ªåº”ç”¨ç¨‹åºåªèƒ½ç”¨ä¸€ä¸ªå¤–æ¨¡å¼</li></ul></li><li>å¤–æ¨¡å¼çš„ç”¨é€”ï¼š<ul><li>æ˜¯ä¿è¯æ•°æ®åº“å®‰å…¨æ€§çš„ä¸€ä¸ªæœ‰åŠ›æªæ–½ã€‚</li><li>æ¯ä¸ªç”¨æˆ·åªèƒ½çœ‹è§å’Œè®¿é—®å¯¹åº”å¤–æ¨¡å¼ä¸­çš„æ•°æ®ï¼Œå…¶ä½™æ•°æ®ä¸å¯è§ã€‚</li></ul></li></ul><p>åŒæ¨¡å¼ï¼Œå¯ä»¥ç”¨DDLå®šä¹‰å¼€å‘</p><h4 id="3ã€å†…æ¨¡å¼-Internal-Schema">3ã€å†…æ¨¡å¼(Internal Schema)</h4><p>ä¹Ÿç§°ä¸º<strong>å­˜å‚¨æ¨¡å¼ï¼ˆStorage Schemaï¼‰</strong></p><ul><li>æ˜¯æ•°æ®ç‰©ç†ç»“æ„å’Œå­˜å‚¨æ–¹å¼çš„æè¿°</li><li>æ˜¯æ•°æ®åœ¨æ•°æ®åº“å†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼<ul><li>è®°å½•çš„å­˜å‚¨æ–¹å¼ï¼ˆæŒ‰ç…§é¡ºåºå­˜å‚¨ã€Bæ ‘ç»“æ„å­˜å‚¨ã€hashæ–¹æ³•å­˜å‚¨ç­‰ç­‰ï¼‰</li><li>æ‰€ä»¥çš„ç»„ç»‡æ–¹å¼</li><li>æ•°æ®æ˜¯å¦å‹ç¼©å­˜å‚¨</li><li>æ•°æ®æ˜¯å¦åŠ å¯†</li><li>æ•°æ®å­˜å‚¨è®°å½•ç»“æ„çš„è§„å®š</li></ul></li><li>ä¸€ä¸ªæ•°æ®åº“åªèƒ½æœ‰ä¸€ä¸ªå†…æ¨¡å¼</li></ul><h3 id="3-3-æ•°æ®åº“çš„äºŒçº§æ˜ åƒä¸æ•°æ®ç‹¬ç«‹æ€§">3.3 æ•°æ®åº“çš„äºŒçº§æ˜ åƒä¸æ•°æ®ç‹¬ç«‹æ€§</h3><p>æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼æ˜¯æ•°æ®çš„ä¸‰ä¸ªæŠ½è±¡çº§åˆ«</p><p>äºŒçº§æ˜ åƒåœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå†…éƒ¨å®ç°è¿™ä¸‰ä¸ªæŠ½è±¡å±‚æ¬¡çš„è”ç³»å’Œè½¬æ¢</p><ul><li>å¤–æ¨¡å¼/æ¨¡å¼æ˜ åƒ</li><li>å†…æ¨¡å¼/å†…æ¨¡å¼æ˜ åƒ</li></ul><h4 id="1ã€å¤–æ¨¡å¼-æ¨¡å¼æ˜ åƒ">1ã€å¤–æ¨¡å¼/æ¨¡å¼æ˜ åƒ</h4><blockquote><p>æ¨¡å¼ï¼šæè¿°çš„æ˜¯æ•°æ®çš„å…¨å±€é€»è¾‘ç»“æ„</p><p>å¤–æ¨¡å¼ï¼šæè¿°çš„æ˜¯æ•°æ®çš„å±€éƒ¨é€»è¾‘ç»“æ„</p><p>è€ŒåŒä¸€ä¸ªæ¨¡å¼ä¸‹å¯ä»¥æœ‰å¾ˆå¤šä¸ªå¤–æ¨¡å¼</p></blockquote><p>æ¯ä¸€ä¸ªå¤–æ¨¡å¼ï¼Œæ•°æ®åº“ç³»ç»Ÿéƒ½æœ‰ä¸€ä¸ªå¤–æ¨¡å¼/æ¨¡å¼æ˜ åƒï¼Œå®šä¹‰å¤–æ¨¡å¼ä¸æ¨¡å¼ä¹‹é—´çš„å¯¹åº”å…³ç³»</p><p>æ˜ åƒå®šä¹‰é€šå¸¸åŒ…å«åœ¨å„è‡ªå¤–æ¨¡å¼çš„æè¿°å½“ä¸­</p><ul><li>ä¿è¯äº†æ•°æ®çš„<strong>é€»è¾‘</strong>ç‹¬ç«‹æ€§<ul><li>å½“æ¨¡å¼æ”¹å˜æ—¶ï¼Œç”±æ•°æ®åº“ç®¡ç†å‘˜å¯¹å„ä¸ªå¤–æ¨¡å¼/æ¨¡å¼æ˜ åƒåšç›¸åº”çš„æ”¹å˜ï¼Œå¯ä»¥ä½¿å¤–æ¨¡å¼ä¿æŒä¸å˜ã€‚</li><li>åº”ç”¨ç¨‹åºæ˜¯ä¾æ®æ•°æ®çš„å¤–æ¨¡å¼ç¼–å†™çš„ï¼Œä»è€Œåº”ç”¨ç¨‹åºä¸å¿…ä¿®æ”¹ï¼Œä¿è¯äº†æ•°æ®ä¸ç¨‹åºçš„é€»è¾‘ç‹¬ç«‹æ€§ï¼Œç®€ç§°æ•°æ®çš„é€»è¾‘ç‹¬ç«‹æ€§</li></ul></li></ul><h4 id="2ã€å†…æ¨¡å¼-å†…æ¨¡å¼æ˜ åƒ">2ã€å†…æ¨¡å¼/å†…æ¨¡å¼æ˜ åƒ</h4><p>æ¨¡å¼/å†…æ¨¡å¼æ˜ åƒå®šä¹‰äº†æ•°æ®å…¨å±€é€»è¾‘ç»“æ„ä¸å­˜å‚¨ç»“æ„ä¹‹é—´çš„å¯¹åº”å…³ç³»</p><ul><li>egï¼šè¯´æ˜é€»è¾‘è®°å½•å’Œå­—æ®µåœ¨å†…éƒ¨æ˜¯å¦‚ä½•è¡¨ç¤ºçš„</li></ul><p><strong>æ•°æ®åº“ä¸­æ¨¡å¼/å†…æ¨¡å¼æ˜ åƒæ˜¯å”¯ä¸€çš„</strong></p><p>è¯¥æ˜ åƒå®šä¹‰é€šå¸¸åŒ…å«åœ¨æ¨¡å¼æè¿°ä¸­</p><ul><li>ä¿è¯äº†æ•°æ®çš„<strong>ç‰©ç†</strong>ç‹¬ç«‹æ€§<ul><li>å½“æ•°æ®åº“çš„å­˜å‚¨ç»“æ„æ”¹å˜äº†ï¼ˆå¦‚é€‰ç”¨å¦ä¸€ç§å­˜å‚¨ç»“æ„ï¼‰ï¼Œæ•°æ®åº“ç®¡ç†å‘˜ä¿®æ”¹æ¨¡å¼/å†…æ¨¡å¼æ˜ åƒï¼Œä½¿æ¨¡å¼ä¿æŒä¸å˜</li><li>åº”ç”¨ç¨‹åºä¸å—å½±å“ï¼Œä¿è¯äº†æ•°æ®ä¸ç¨‹åºçš„ç‰©ç†ç‹¬ç«‹æ€§ï¼Œç®€ç§°æ•°æ®çš„ç‰©ç†ç‹¬ç«‹æ€§</li></ul></li></ul><p>æ•°æ®åº“æ¨¡å¼ï¼š</p><ul><li>å…¨å±€é€»è¾‘ç»“æ„æ˜¯æ•°æ®åº“çš„ä¸­å¿ƒä¸å…³é”®</li><li>ç‹¬ç«‹äºæ•°æ®åº“çš„å…¶ä»–å±‚æ¬¡</li><li>è®¾è®¡æ•°æ®åº“æ¨¡å¼ç»“æ„æ—¶åº”é¦–å…ˆç¡®å®šæ•°æ®åº“çš„é€»è¾‘æ¨¡å¼</li></ul><p>æ•°æ®åº“çš„å†…æ¨¡å¼ï¼š</p><ul><li>ä¾èµ–äºå®ƒçš„å…¨å±€é€»è¾‘ç»“æ„</li><li>ç‹¬ç«‹äºæ•°æ®åº“çš„ç”¨æˆ·è¯•å›¾ï¼ˆå¤–æ¨¡å¼ï¼‰</li><li>ç‹¬ç«‹äºå…·ä½“çš„å­˜å‚¨è®¾å¤‡</li><li>å°†å…¨å±€é€»è¾‘ç»“æ„ä¸­æ‰€å®šä¹‰çš„æ•°æ®ç»“æ„æœºå™¨è”ç³»æŒ‰ç…§ä¸€å®šçš„ç‰©ç†å­˜å‚¨ç­–ç•¥è¿›è¡Œç»„ç»‡ï¼Œä»¥è¾¾åˆ°è¾ƒå¥½çš„æ—¶é—´ä¸ç©ºé—´æ•ˆç‡</li></ul><p>æ•°æ®åº“çš„å¤–æ¨¡å¼ï¼š</p><ul><li>é¢å‘å…·ä½“çš„åº”ç”¨ç¨‹åº</li><li>å®šä¹‰åœ¨é€»è¾‘æ¨¡å¼ä¹‹ä¸Š</li><li>ç‹¬ç«‹äºå­˜å‚¨æ¨¡å¼å’Œå­˜å‚¨åŒè®¾å¤‡</li><li>å½“åº”ç”¨éœ€æ±‚å˜åŒ–è¾ƒå¤§ï¼Œå¯¹åº”çš„å¤–æ¨¡å¼ä¸èƒ½æ»¡è¶³éœ€æ±‚çš„æ—¶å€™ï¼Œè¿™ä¸ªå¤–æ¨¡å¼éœ€è¦æ”¹å˜</li><li>è®¾è®¡å¤–æ¨¡å¼éœ€è¦è€ƒè™‘åˆ°åº”ç”¨çš„æ‰©å±•æ€§</li></ul><p>ç‰¹å®šçš„åº”ç”¨ç¨‹åº</p><ul><li>åœ¨å¤–æ¨¡å¼æè¿°çš„æ•°æ®ç»“æ„ä¸Šç¼–åˆ¶çš„</li><li>ä¾èµ–äºç‰¹å®šçš„å¤–æ¨¡å¼</li><li>ä¸æ•°æ®åº“çš„æ¨¡å¼å’Œå­˜å‚¨ç»“æ„ç‹¬ç«‹</li><li>ä¸åŒçš„åº”ç”¨ç¨‹åºæœ‰äº‹å¯ä»¥å…±ç”¨ä¸€ä¸ªå¤–æ¨¡å¼</li></ul><p>æ•°æ®åº“çš„äºŒçº§æ˜ åƒ</p><ul><li>ä¿è¯äº†æ•°æ®åº“å¤–æ¨¡å¼çš„ç¨³å®šæ€§</li><li>ä»åº•å±‚ä¿è¯äº†åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§ï¼Œé™¤éåº”ç”¨éœ€æ±‚æœ¬èº«æœ‰å˜åŒ–ï¼Œå¦åˆ™åº”ç”¨ç¨‹åºä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹</li></ul><p>æ•°æ®ä¸ç¨‹åºä¹‹é—´çš„ç‹¬ç«‹æ€§ï¼Œä½¿å¾—æ•°æ®çš„å®šä¹‰å’Œæè¿°å¯ä»¥å†²åº”ç”¨ç¨‹åºä¸­åˆ†ç¦»å‡ºå»</p><p>æ•°æ®çš„å­˜å–ç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç®¡ç†</p><ul><li>ç®€åŒ–äº†åº”ç”¨ç¨‹åºçš„ç¼–åˆ¶</li><li>å‡å°‘åº”ç”¨ç¨‹åºçš„ç»´æŠ¤å’Œä¿®æ”¹</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMwareæ–‡ä»¶æ‹–æ‹½æŠ¥é”™</title>
      <link href="/2022/08/27/error-Fix-VMware-drag-and-drop-failure/"/>
      <url>/2022/08/27/error-Fix-VMware-drag-and-drop-failure/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>åœ¨ä½¿ç”¨vmware linuxæ—¶ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">open-vm-tools Error when getting information for file "//tmp/VMwareDnD/3jTONh/:xxx: No such file or directory<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¼šå¯¼è‡´æ— æ³•å¤åˆ¶æ–‡ä»¶ï¼Œæ‹–æ‹½ä¹Ÿä¸è¡Œçš„æƒ…å†µã€‚</p><p>å‚è€ƒVMwareçš„<a href="https://kb.vmware.com/s/article/74671">æ–‡ç« </a>ï¼Œåœ¨æ–‡ä»¶æ‹–æ‹½å’Œå¤åˆ¶ã€ç²˜è´´ï¼Œéœ€è¦æŒ‚è½½ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼š<code>vmblock-fuse</code>ï¼Œå…ˆæŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ç³»ç»ŸæŒ‚è½½æœåŠ¡çš„æƒ…å†µï¼Œå¦‚æœæœ‰ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl status run-vmblock\\x2dfuse.mountâ— run-vmblock\x2dfuse.mount - VMware vmblock fuse mount     Loaded: loaded (/lib/systemd/system/run-vmblock\x2dfuse.mount; disabled; vendor preset: enabled)     Active: inactive (dead)      Where: /run/vmblock-fuse       What: vmware-vmblock-fuse       Docs: https://github.com/vmware/open-vm-tools/blob/master/open-vm-tools/vmblock-fuse/design.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªæœåŠ¡å¤„äº<code>inactive</code>çŠ¶æ€å¹¶ä¸”æ˜¯<code>disabled</code>çŠ¶æ€ï¼Œå°±æ˜¯è¯¥æœåŠ¡æ²¡æœ‰å¯åŠ¨ï¼Œå¹¶ä¸”é‡å¯åä¹Ÿä¸ä¼šè‡ªå¯ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š</p><ol><li>å¼€æœºè‡ªå¯</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl enable run-vmblock\\x2dfuse.mount   <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>å¯åŠ¨æœåŠ¡</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl start run-vmblock\\x2dfuse.mount<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç°åœ¨æ¥æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼Œä¼šæœ‰å¦‚ä¸‹è¾“å‡ºã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl status run-vmblock\\x2dfuse.mountâ— run-vmblock\x2dfuse.mount - /run/vmblock-fuse   Loaded: loaded (/proc/self/mountinfo)   Active: active (mounted) since Sat 2022-08-27 12:04:26 CST; 12min ago    Where: /run/vmblock-fuse     What: vmware-vmblock<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†æ˜¯æ­¤æ—¶ä»ç„¶æ— æ³•å¤åˆ¶ç²˜è´´ï¼Œè¿˜éœ€è¦å†é‡å¯vmware-toolsæœåŠ¡</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl restart vmware-tools<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è‡³æ­¤ï¼ŒVMwareå¯ä»¥éšæ„å¤åˆ¶ç²˜è´´æ–‡ä»¶äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ¥é”™æ’æŸ¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CUDA 2.3ï¼šæ ¸å‡½æ•°è®¡æ—¶</title>
      <link href="/2022/08/18/cuda-2-3-Timing-kernel-function/"/>
      <url>/2022/08/18/cuda-2-3-Timing-kernel-function/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>CUDA 2.3 ç»™æ ¸å‡½æ•°è®¡æ—¶</h1><p>åœ¨å†…æ ¸çš„æ€§èƒ½è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œäº†è§£æ ¸å‡½æ•°çš„æ‰§è¡Œéœ€è¦å¤šé•¿æ—¶é—´æ˜¯å¾ˆæœ‰å¸®åŠ©å¹¶ä¸”ååˆ†å…³é”®çš„ã€‚</p><p>è¡¡é‡æ ¸å‡½æ•°æ€§èƒ½çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨ä¸»æœºç«¯ä½¿ç”¨ä¸€ä¸ªCPUæˆ–GPUè®¡æ—¶å™¨æ¥è®¡ç®—å†…æ ¸çš„æ‰§è¡Œæ—¶é—´ã€‚</p><p>æœ¬èŠ‚æˆ‘ä»¬ä»è®¡æ—¶å™¨å…¥æ‰‹ï¼Œäº†è§£å¦‚ä½•åœ¨CPUæˆ–GPUè·å–ä»£ç çš„è¿è¡Œæ—¶é•¿ï¼Œå¹¶äº†è§£æ€§èƒ½è°ƒä¼˜çš„åŸºæœ¬æ¦‚å¿µ</p><h2 id="ä¸€ã€ç”¨CPUè®¡æ—¶å™¨è®¡æ—¶">ä¸€ã€ç”¨CPUè®¡æ—¶å™¨è®¡æ—¶</h2><p>Cè¯­è¨€ä¸­ï¼Œå¹³æ—¶å¤§å®¶æœ€å¸¸ç”¨çš„æ˜¯<code>time.h</code>çš„å¤´æ–‡ä»¶æ¥è®¡æ—¶ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">clock_t</span> start<span class="token punctuation">,</span>end<span class="token punctuation">;</span>start <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¦è¢«è®¡ç®—çš„å‡½æ•°</span>end <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>duration <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">/</span> CLOCKS_PER_SEC<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼Œclockå‡½æ•°æµ‹å‡ºæ¥çš„æ—¶é—´ä¸ºè¿›ç¨‹è¿è¡Œæ—¶é—´ï¼Œå•ä½ä¸ºæ»´ç­”æ•°(ticks)</p><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<code>gettimeofday</code>ç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºä¸€ä¸ªCPUè®¡æ—¶å™¨è·å–ç³»ç»Ÿçš„æ—¶é’Ÿæ—¶é—´ï¼Œå®ƒå°†è¿”å›ä»<strong>1970å¹´1æœˆ1æ—¥é›¶ç‚¹</strong>å¼€å§‹åˆ°ç°åœ¨çš„ç§’æ•°ã€‚</p><p>å› ä¸º<code>gettimeofday</code>æ˜¯linuxä¸‹çš„ä¸€ä¸ªåº“å‡½æ•°ï¼Œç¨‹åºä¸­éœ€è¦æ·»åŠ <code>sys/time.h</code>å¤´æ–‡ä»¶</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/time.h&gt;</span></span><span class="token keyword">double</span> <span class="token function">cpuSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">struct</span> <span class="token class-name">timeval</span> tp<span class="token punctuation">;</span>  <span class="token function">gettimeofday</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tp<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>tp<span class="token punctuation">.</span>tv_sec<span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>tp<span class="token punctuation">.</span>tv_usec<span class="token operator">*</span><span class="token number">1e-6</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åè¿™ä¸ªå‡½æ•°å°±å¯ä»¥ç”¨æ¥è®¡æ—¶äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ¥ç»™æ ¸å‡½æ•°è®¡æ—¶ï¼Œçœ‹çœ‹ä»–è¿è¡Œäº†å¤šé•¿æ—¶é—´ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">double</span> iStart<span class="token punctuation">,</span>iElaps<span class="token punctuation">;</span>iStart<span class="token operator">=</span><span class="token function">cpuSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sumArraysGPU<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>grid<span class="token punctuation">,</span>block<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>a_d<span class="token punctuation">,</span>b_d<span class="token punctuation">,</span>res_d<span class="token punctuation">,</span>nElem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">cudaDeviceSynchronize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>iElaps<span class="token operator">=</span><span class="token function">cpuSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>iStart<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å˜é‡iElapsè¡¨ç¤ºç¨‹åºè¿è¡Œçš„æ—¶é—´ï¼Œå°±åƒç”¨æ‰‹è¡¨è®°å½•çš„æ ¸å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ï¼ˆç”¨ç§’è®¡ç®—ï¼‰ã€‚</p></blockquote><p>ç”±äºæ ¸å‡½æ•°è°ƒç”¨ä¸ä¸»æœºç«¯ç¨‹åºæ˜¯å¼‚æ­¥çš„ï¼Œå°±éœ€è¦ç”¨<code>cudaDeviceSynchronize</code>å‡½æ•°æ¥ç­‰å¾…æ‰€æœ‰çš„GPUçº¿ç¨‹è¿è¡Œç»“æŸã€‚</p><ul><li><p>å¦‚æœä¸åŠ è¿™ä¸ªåŒæ­¥å‡½æ•°ï¼Œé‚£ä¹ˆè®¡æ—¶çš„æ—¶é—´æ˜¯ä»è°ƒç”¨æ ¸å‡½æ•°ï¼Œåˆ°æ ¸å‡½æ•°è¿”å›ç»™ä¸»æœºçº¿ç¨‹çš„æ—¶é—´æ®µï¼Œè€Œä¸æ˜¯æ ¸å‡½æ•°çš„æ‰§è¡Œæ—¶é—´</p></li><li><p>ç”¨<code>cudaDeviceSynchronize</code>å‡½æ•°åï¼Œè®¡æ—¶æ˜¯ä»è°ƒç”¨æ ¸å‡½æ•°å¼€å§‹ï¼Œåˆ°æ ¸å‡½æ•°æ‰§è¡Œå®Œå¹¶è¿”å›ç»™ä¸»æœºçš„æ—¶é—´æ®µ</p></li></ul><img src="https://s2.loli.net/2022/08/18/HBVYMKIEAQolNsu.png" alt="cuda-2-6.png" style="zoom:67%;"><p>æˆ‘ä»¬å¯ä»¥ä»ä¸Šå›¾å¤§æ¦‚åˆ†æä¸‹æ ¸å‡½æ•°å¯åŠ¨åˆ°ç»“æŸçš„è¿‡ç¨‹ï¼š</p><ol><li>ä¸»æœºçº¿ç¨‹å¯åŠ¨æ ¸å‡½æ•°</li><li>æ ¸å‡½æ•°å¯åŠ¨æˆåŠŸ</li><li>æ§åˆ¶è¿”å›ä¸»æœºçº¿ç¨‹</li><li>æ ¸å‡½æ•°æ‰§è¡Œå®Œæ¯•</li><li>ä¸»æœºåŒæ­¥å‡½æ•°ä¾¦æµ‹åˆ°æ ¸å‡½æ•°æ‰§è¡Œå®Œæˆ</li></ol><p>æˆ‘ä»¬è¦æµ‹è¯•çš„æ˜¯2~4çš„æ—¶é—´ï¼Œä½†æ˜¯ç”¨CPUè®¡æ—¶æ–¹æ³•ï¼Œåªèƒ½æµ‹è¯•1~5çš„æ—¶é—´ï¼Œæ‰€ä»¥æµ‹è¯•å¾—åˆ°çš„æ—¶é—´åé•¿ã€‚</p><h2 id="äºŒã€ä»£ç å®ç°">äºŒã€ä»£ç å®ç°</h2><p>ç°åœ¨ï¼Œé€šè¿‡è®¾ç½®æ•°æ®é›†å¤§å°æ¥å¯¹ä¸€ä¸ªæœ‰16Mä¸ªå…ƒç´ çš„å¤§å‘é‡è¿›è¡Œæµ‹è¯•ï¼Œç›´æ¥ç”¨å·¦ç§»æ¯”ç‰¹ä½æ¥è®¾ç½®ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> nElem <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">24</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘ä»¬ç¼–å†™æ ¸å‡½æ•°çš„æ—¶å€™ï¼Œç”±äºGPUçš„å¯æ‰©å±•æ€§ï¼Œä½¿å¾—æˆ‘ä»¬éœ€è¦å€ŸåŠ©å—å’Œçº¿ç¨‹çš„ç´¢å¼•æ¥è®¡ç®—ä¸€ä¸ªæŒ‰è¡Œä¼˜å…ˆçš„æ•°ç»„ç´¢å¼•<code> i</code>ï¼Œå¹¶å¯¹æ ¸å‡½æ•°è¿›è¡Œä¿®æ”¹ã€‚</p><p>éœ€è¦æ·»åŠ é™å®šæ¡ä»¶**ï¼ˆiï¼œNï¼‰**æ¥æ£€éªŒç´¢å¼•å€¼æ˜¯å¦è¶Šç•Œ</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">__global__ <span class="token keyword">void</span> <span class="token function">sumArraysOnGPU</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> blockIdx<span class="token punctuation">.</span>x <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>x <span class="token operator">+</span> threadIdx<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> N<span class="token punctuation">)</span> C<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ºäº†è§£å†³åˆ›å»ºçš„çº¿ç¨‹æ€»æ•°å¤§äºå‘é‡å…ƒç´ æ€»æ•°çš„æƒ…å†µï¼Œæˆ‘ä»¬è¿˜éœ€è¦é™åˆ¶å†…æ ¸ä¸èƒ½éæ³•è®¿é—®å…¨å±€å†…å­˜ï¼Œä¹Ÿå°±æ˜¯<code>å‘é‡å…ƒç´ æ€»æ•°ï¼œçº¿ç¨‹æ€»æ•°</code></p><p>æˆ‘ä»¬é™¤äº†ä¸Šé¢è¿™ä¸ªæ ¸å‡½æ•°æˆ‘ä»¬éœ€è¦è°ƒæ•´ä»¥å¤–ï¼Œåªéœ€è¦å†™ä¸»å‡½æ•°äº†ï¼Œè¿™é‡Œåªä»‹ç»ä¸»å‡½æ•°ç¼–å†™ã€‚</p><p>åŒæ—¶æˆ‘ä»¬æŠŠè¿™ä¸ªæ’é”™ç”¨çš„å‡½æ•°å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶é‡Œäº†ï¼ŒåŠ è½½å¤´æ–‡ä»¶åç›´æ¥<code>CHECK()</code>è°ƒç”¨å³å¯ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">CHECK</span><span class="token expression"><span class="token punctuation">(</span>call<span class="token punctuation">)</span>                                                            </span><span class="token punctuation">\</span><span class="token expression"><span class="token punctuation">{</span>                                                                              </span><span class="token punctuation">\</span>    <span class="token expression"><span class="token keyword">const</span> <span class="token class-name">cudaError_t</span> error <span class="token operator">=</span> call<span class="token punctuation">;</span>                                            </span><span class="token punctuation">\</span>    <span class="token expression"><span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token operator">!=</span> cudaSuccess<span class="token punctuation">)</span>                                                  </span><span class="token punctuation">\</span>    <span class="token expression"><span class="token punctuation">{</span>                                                                          </span><span class="token punctuation">\</span>        <span class="token expression"><span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> </span><span class="token string">"Error: %s:%d, "</span><span class="token expression"><span class="token punctuation">,</span> <span class="token constant">__FILE__</span><span class="token punctuation">,</span> <span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 </span><span class="token punctuation">\</span>        <span class="token expression"><span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> </span><span class="token string">"code: %d, reason: %s\n"</span><span class="token expression"><span class="token punctuation">,</span> error<span class="token punctuation">,</span>                       </span><span class="token punctuation">\</span>                <span class="token expression"><span class="token function">cudaGetErrorString</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                    </span><span class="token punctuation">\</span>        <span class="token expression"><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                                               </span><span class="token punctuation">\</span>    <span class="token expression"><span class="token punctuation">}</span>                                                                          </span><span class="token punctuation">\</span><span class="token expression"><span class="token punctuation">}</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆå§‹åŒ–æ•°æ®</p><ul><li>è®¾ç½®GPUè®¾å¤‡</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> dev <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>cudaDeviceProp deviceProp<span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaGetDeviceProperties</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>deviceProp<span class="token punctuation">,</span> dev<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Using Device %d: %s\n"</span><span class="token punctuation">,</span> dev<span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaSetDevice</span><span class="token punctuation">(</span>dev<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è®¾ç½®å‘é‡çš„å¤§å°</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> nElem <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">24</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-1-CPUç«¯çš„æ‰§è¡Œæ–¹å¼">2.1 CPUç«¯çš„æ‰§è¡Œæ–¹å¼</h3><ul><li>ç”³è¯·å†…å­˜ç©ºé—´</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">float</span> <span class="token operator">*</span>h_A<span class="token punctuation">,</span> <span class="token operator">*</span>h_B<span class="token punctuation">,</span> <span class="token operator">*</span>hostRef<span class="token punctuation">,</span> <span class="token operator">*</span>gpuRef<span class="token punctuation">;</span>h_A     <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>h_B     <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>hostRef <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>gpuRef  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åˆå§‹åŒ–CPUç«¯çš„æ•°æ®</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">double</span> iStart<span class="token punctuation">,</span> iElaps<span class="token punctuation">;</span>iStart <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">initialData</span><span class="token punctuation">(</span>h_A<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">initialData</span><span class="token punctuation">(</span>h_B<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>iElaps <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> iStart<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"initialData Time elapsed %f sec\n"</span><span class="token punctuation">,</span> iElaps<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">memset</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">memset</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">,</span>  <span class="token number">0</span><span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è®¡ç®—CPUç«¯è¿è¡Œç›¸åŠ èŠ±è´¹çš„æ—¶é—´ã€‚</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c">iStart <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sumArraysOnHost</span><span class="token punctuation">(</span>h_A<span class="token punctuation">,</span> h_B<span class="token punctuation">,</span> hostRef<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>iElaps <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> iStart<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sumArraysOnHost Time elapsed %f sec\n"</span><span class="token punctuation">,</span> iElaps<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-GPUç«¯çš„æ‰§è¡Œæ–¹å¼">2.2 GPUç«¯çš„æ‰§è¡Œæ–¹å¼</h3><ul><li>ç”³è¯·å†…å­˜</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">float</span> <span class="token operator">*</span>d_A<span class="token punctuation">,</span> <span class="token operator">*</span>d_B<span class="token punctuation">,</span> <span class="token operator">*</span>d_C<span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_A<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_B<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>èµ‹å€¼ä¼ æ•°æ®</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_A<span class="token punctuation">,</span> h_A<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_B<span class="token punctuation">,</span> h_B<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_C<span class="token punctuation">,</span> gpuRef<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><p>å®šä¹‰ç½‘ç»œå’Œå—</p><p>è¿™é‡Œçš„é…ç½®è®¾ç½®ä¸ºä¸€ä¸ªåŒ…å«32768ä¸ªå—çš„ä¸€ç»´ç½‘æ ¼ï¼Œæ¯ä¸ªå—åŒ…å«512ä¸ªçº¿ç¨‹ã€‚</p><p>å¯ä»¥è‡ªè¡Œè°ƒæ•´è¿™é‡Œçš„iLenå€¼ï¼Œè¯•è¯•çœ‹1024ä¸ªçº¿ç¨‹å’Œ512ä¸ªçº¿ç¨‹ä¹‹é—´æ€§èƒ½ä¼šæå‡å¤šå°‘ï¼ˆ1.19å€ï¼‰</p></li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> iLen <span class="token operator">=</span> <span class="token number">512</span><span class="token punctuation">;</span>dim3 <span class="token function">block</span> <span class="token punctuation">(</span>iLen<span class="token punctuation">)</span><span class="token punctuation">;</span>dim3 <span class="token function">grid</span>  <span class="token punctuation">(</span><span class="token punctuation">(</span>nElem <span class="token operator">+</span> block<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>è®¡ç®—GPUè¿è¡Œå‡½æ•°æ‰€èŠ±è´¹çš„æ—¶é—´ï¼š</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c">iStart <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sumArraysOnGPU<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>grid<span class="token punctuation">,</span> block<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>d_A<span class="token punctuation">,</span> d_B<span class="token punctuation">,</span> d_C<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaDeviceSynchronize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>iElaps <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> iStart<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sumArraysOnGPU&lt;&lt;&lt;%d, %d&gt;&gt;&gt; Time elapsed %f sec\n"</span><span class="token punctuation">,</span>        grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span>block<span class="token punctuation">.</span>x<span class="token punctuation">,</span> iElaps<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ”¶å°¾å·¥ä½œï¼Œæ‹·è´è®¡ç®—ç»“æœå¹¶é‡Šæ”¾å†…å­˜ç©ºé—´</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaGetLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">,</span> d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyDeviceToHost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">checkResult</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">,</span> gpuRef<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_C<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>h_A<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>h_B<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œåœ¨è°ƒæ•´æ‰§è¡Œé…ç½®æ—¶éœ€è¦äº†è§£çš„ä¸€ä¸ªå…³é”®ç‚¹æ˜¯å¯¹ç½‘æ ¼å’Œå—ç»´åº¦çš„é™åˆ¶ã€‚çº¿ç¨‹å±‚æ¬¡ç»“æ„ä¸­æ¯ä¸ªå±‚çº§çš„æœ€å¤§å°ºå¯¸å–å†³äºè®¾å¤‡ã€‚</p><p>æ€»ä»£ç æ”¾åœ¨æ–‡æœ«</p><h2 id="ä¸‰ã€ç”¨nvprofå·¥å…·è®¡æ—¶">ä¸‰ã€ç”¨nvprofå·¥å…·è®¡æ—¶</h2><p>è‡ªCUDA 5.0ä»¥æ¥ï¼ŒNVIDIAæä¾›äº†ä¸€ä¸ªåä¸ºnvprofçš„å‘½ä»¤è¡Œåˆ†æå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä»åº”ç”¨ç¨‹åºçš„CPUå’ŒGPUæ´»åŠ¨æƒ…å†µä¸­è·å–æ—¶é—´çº¿ä¿¡æ¯ï¼Œå…¶åŒ…æ‹¬å†…æ ¸æ‰§è¡Œã€å†…å­˜ä¼ è¾“ä»¥åŠCUDA APIçš„è°ƒç”¨ã€‚å…¶ç”¨æ³•å¦‚ä¸‹ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nvprof [nvporp_args] &lt;application&gt; [application_args]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤æµ‹è¯•å†…æ ¸ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nvprof ./test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>ä¸è¿‡å§ï¼Œè®¡ç®—èƒ½åŠ›ä¸º8.0åŠä»¥ä¸Šçš„è®¾å¤‡ä¸æ”¯æŒnvprofã€‚ä½¿ç”¨<code>sudo apt install nvidia-nsight</code>ä¸‹è½½nsightå·¥å…·ã€‚å¦‚æœä¸‹è½½å‡ºç°NO_PUBKEYé”™è¯¯ï¼Œç”¨ä¸‹åˆ—è¯­å¥è§£å†³ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo gpg --keyserver keyserver.ubuntu.com --recv-keys 467B942D3A79BD29<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p>ä½¿ç”¨å·¥å…·nvprofçš„è®¡ç®—ç»“æœæ›´ä¸ºç²¾ç¡®ï¼Œå› ä¸ºCPUè®¡æ—¶å™¨æµ‹é‡çš„æ—¶é—´ä¸­åŒ…å«äº†æ¥è‡ªnvprofé™„åŠ çš„æ—¶é—´ã€‚ å·¥å…·ä¸ä»…ç»™å‡ºäº†kernelæ‰§è¡Œçš„æ—¶é—´ï¼Œæ¯”ä¾‹ï¼Œè¿˜æœ‰å…¶ä»–cudaå‡½æ•°çš„æ‰§è¡Œæ—¶é—´ã€‚ç”±nvprofå¾—åˆ°çš„è®¡æ•°å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬è·å–åº”ç”¨ç¨‹åºçš„æŒ‡ä»¤å’Œå†…å­˜ååé‡ã€‚</p><p>ä¸»æœºå’Œè®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“éœ€è¦çš„æ—¶é—´æ¯”å†…æ ¸æ‰§è¡Œçš„æ—¶é—´è¦å¤šã€‚å¯¹äºHPCå·¥ä½œè´Ÿè½½ï¼Œç†è§£ç¨‹åºä¸­é€šä¿¡æ¯”çš„è®¡ç®—æ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>å¦‚æœåº”ç”¨ç¨‹åºç”¨äºè®¡ç®—çš„æ—¶é—´å¤§äºæ•°æ®ä¼ è¾“æ‰€ç”¨çš„æ—¶é—´ï¼Œé‚£ä¹ˆæˆ–è®¸å¯ä»¥å‹ç¼©è¿™äº›æ“ä½œï¼Œå¹¶å®Œå…¨éšè—ä¸ä¼ è¾“æ•°æ®æœ‰å…³çš„å»¶è¿Ÿã€‚å¦‚æœåº”ç”¨ç¨‹åºç”¨äºè®¡ç®—çš„æ—¶é—´å°‘äºæ•°æ®ä¼ è¾“æ‰€ç”¨çš„æ—¶é—´ï¼Œé‚£ä¹ˆéœ€è¦å°½é‡å‡å°‘ä¸»æœºå’Œè®¾å¤‡ä¹‹é—´çš„ä¼ è¾“ã€‚</p><h2 id="å››ã€ç†è®ºç•Œé™æœ€å¤§åŒ–">å››ã€ç†è®ºç•Œé™æœ€å¤§åŒ–</h2><p>åœ¨è¿›è¡Œç¨‹åºä¼˜åŒ–æ—¶ï¼Œå¦‚ä½•å°†åº”ç”¨ç¨‹åºå’Œç†è®ºç•Œé™è¿›è¡Œæ¯”è¾ƒæ˜¯å¾ˆé‡è¦çš„ã€‚</p><p>å¦‚æœå°†åº”ç”¨ç¨‹åºçš„æµ‹é‡å€¼ä¸ç†è®ºå³°å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¯ä»¥åˆ¤å®šä½ çš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½æ˜¯å—é™äºç®—æ³•è¿˜æ˜¯å—é™äºå†…å­˜å¸¦å®½çš„ã€‚</p><p>æˆ‘ä»¬å¾—åˆ°äº†å®é™…æ“ä½œå€¼ä¹‹åï¼Œå°±éœ€è¦çŸ¥é“èƒ½ä¼˜åŒ–çš„æé™å€¼æ˜¯å¤šå°‘ï¼Œä¹Ÿå°±æ˜¯æœºå™¨çš„ç†è®ºè®¡ç®—æé™ã€‚è¿™ä¸ªæé™æˆ‘ä»¬æ°¸è¿œä¹Ÿè¾¾ä¸åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»æ˜ç¡®çš„æ˜¯ï¼Œæ¯”å¦‚ç†è®ºæé™æ˜¯2ç§’ï¼Œæˆ‘ä»¬å·²ç»ä»10ç§’ä¼˜åŒ–åˆ°2.01ç§’äº†ï¼ŒåŸºæœ¬å°±æ²¡æœ‰å¿…è¦å†ç»§ç»­ä¼˜åŒ–é€Ÿåº¦äº†ï¼Œè€Œåº”è¯¥è€ƒè™‘ä¹°æ›´å¤šçš„æœºå™¨æˆ–è€…æ›´æ–°çš„è®¾å¤‡ã€‚</p><p>æˆ‘ä»¬ä»¥Tesla K10ä¸ºä¾‹ï¼Œå¯ä»¥å¾—åˆ°ç†è®ºä¸Šçš„æ¯”ç‡ï¼š</p><ul><li><p>Tesla K10å•ç²¾åº¦å³°å€¼æµ®ç‚¹è¿ç®—æ¬¡æ•°</p><p>745 MHzæ ¸å¿ƒé¢‘ç‡*2 GPU/èŠ¯ç‰‡*ï¼ˆ8ä¸ªå¤šå¤„ç†å™¨*192ä¸ªæµ®ç‚¹å•å…ƒ*32æ ¸å¿ƒ/å¤šå¤„ç†å™¨ï¼‰*2</p><p>OPS/å‘¨æœŸï¼4.58 TFLOPSï¼ˆFLOPSè¡¨ç¤ºæ¯ç§’æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼‰</p></li><li><p>Tesla K10å†…å­˜å¸¦å®½å³°å€¼2 GPU/èŠ¯ç‰‡*256ä½*2500 MHzå†…å­˜æ—¶é’Ÿ*2 DDR/8ä½/å­—èŠ‚ï¼320 GB/s</p></li><li><p>æŒ‡ä»¤æ¯”âˆ¶å­—èŠ‚</p><p>4.58 TFLOPS/320 GB/sï¼Œä¹Ÿå°±æ˜¯13.6ä¸ªæŒ‡ä»¤ï¼š1ä¸ªå­—èŠ‚</p></li></ul><p>å¯¹äºTesla K10è€Œè¨€ï¼Œå¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ¯è®¿é—®ä¸€ä¸ªå­—èŠ‚æ‰€äº§ç”Ÿçš„æŒ‡ä»¤æ•°å¤šäº13.6ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºå—ç®—æ³•æ€§èƒ½é™åˆ¶ã€‚å¤§å¤šæ•°HPCå·¥ä½œè´Ÿè½½å—å†…å­˜å¸¦å®½çš„é™åˆ¶ã€‚</p><hr><p>å®Œæ•´ä»£ç ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../common.h"</span> <span class="token comment">//CHECKæ‰€åœ¨å¤´æ–‡ä»¶</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cuda_runtime.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">void</span> <span class="token function">checkResult</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>hostRef<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>gpuRef<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> epsilon <span class="token operator">=</span> <span class="token number">1.0E-8</span><span class="token punctuation">;</span>    bool match <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">//æ£€æµ‹åˆ°è¯¯å·®è¿‡å¤§ï¼Œå°±æŒ‡å‡ºé”™è¯¯å¯¹åº”çš„ç»´åº¦</span>        <span class="token comment">//å¹¶æŠŠflagç½®ä¸ºfalse</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> gpuRef<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> epsilon<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            match <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Arrays do not match!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"host %5.2f gpu %5.2f at current %d\n"</span><span class="token punctuation">,</span> hostRef<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>                   gpuRef<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Arrays match.\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">initialData</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>ip<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// ä¸ºéšæœºæ•°ç”Ÿæˆä¸åŒçš„ç§å­</span>    <span class="token class-name">time_t</span> t<span class="token punctuation">;</span>    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ip<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10.0f</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">sumArraysOnHost</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//ä¸»æœºç”¨forå¾ªç¯è®¡ç®—ç»“æœ</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> idx <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> idx<span class="token operator">++</span><span class="token punctuation">)</span>        C<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">+</span> B<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>__global__ <span class="token keyword">void</span> <span class="token function">sumArraysOnGPU</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//cudaæ ¸å‡½æ•°è®¡ç®—å‘é‡ç›¸åŠ </span>    <span class="token keyword">int</span> i <span class="token operator">=</span> blockIdx<span class="token punctuation">.</span>x <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>x <span class="token operator">+</span> threadIdx<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> N<span class="token punctuation">)</span> C<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s Starting...\n"</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> dev <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    cudaDeviceProp deviceProp<span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaGetDeviceProperties</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>deviceProp<span class="token punctuation">,</span> dev<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Using Device %d: %s\n"</span><span class="token punctuation">,</span> dev<span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaSetDevice</span><span class="token punctuation">(</span>dev<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> nElem <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">24</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Vector size %d\n"</span><span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">size_t</span> nBytes <span class="token operator">=</span> nElem <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token operator">*</span>h_A<span class="token punctuation">,</span> <span class="token operator">*</span>h_B<span class="token punctuation">,</span> <span class="token operator">*</span>hostRef<span class="token punctuation">,</span> <span class="token operator">*</span>gpuRef<span class="token punctuation">;</span>    h_A     <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    h_B     <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    hostRef <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    gpuRef  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> iStart<span class="token punctuation">,</span> iElaps<span class="token punctuation">;</span>    iStart <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">initialData</span><span class="token punctuation">(</span>h_A<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">initialData</span><span class="token punctuation">(</span>h_B<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    iElaps <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> iStart<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"initialData Time elapsed %f sec\n"</span><span class="token punctuation">,</span> iElaps<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">memset</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">,</span>  <span class="token number">0</span><span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    iStart <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">sumArraysOnHost</span><span class="token punctuation">(</span>h_A<span class="token punctuation">,</span> h_B<span class="token punctuation">,</span> hostRef<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    iElaps <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> iStart<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sumArraysOnHost Time elapsed %f sec\n"</span><span class="token punctuation">,</span> iElaps<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token operator">*</span>d_A<span class="token punctuation">,</span> <span class="token operator">*</span>d_B<span class="token punctuation">,</span> <span class="token operator">*</span>d_C<span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_A<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_B<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_A<span class="token punctuation">,</span> h_A<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_B<span class="token punctuation">,</span> h_B<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_C<span class="token punctuation">,</span> gpuRef<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> iLen <span class="token operator">=</span> <span class="token number">512</span><span class="token punctuation">;</span>    dim3 <span class="token function">block</span> <span class="token punctuation">(</span>iLen<span class="token punctuation">)</span><span class="token punctuation">;</span>    dim3 <span class="token function">grid</span>  <span class="token punctuation">(</span><span class="token punctuation">(</span>nElem <span class="token operator">+</span> block<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    iStart <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    sumArraysOnGPU<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>grid<span class="token punctuation">,</span> block<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>d_A<span class="token punctuation">,</span> d_B<span class="token punctuation">,</span> d_C<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaDeviceSynchronize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    iElaps <span class="token operator">=</span> <span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> iStart<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sumArraysOnGPU&lt;&lt;&lt;%d, %d&gt;&gt;&gt; Time elapsed %f sec\n"</span><span class="token punctuation">,</span>            grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span>block<span class="token punctuation">.</span>x<span class="token punctuation">,</span> iElaps<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaGetLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">,</span> d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyDeviceToHost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">checkResult</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">,</span> gpuRef<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_C<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>h_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>h_B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CUDA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CUDA 2.2ï¼šç¼–ç¨‹æ¨¡å‹æ¦‚è¿°(äºŒ)</title>
      <link href="/2022/08/15/cuda-2-2-Threads-and-kernel-functions/"/>
      <url>/2022/08/15/cuda-2-2-Threads-and-kernel-functions/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>CUDA 2.2ï¼šçº¿ç¨‹ä¸æ ¸å‡½æ•°</h1><blockquote><p>æœ¬ç¯‡æ‰¿æ¥ä¸Šä¸€ç¯‡æ–‡ç« ï¼š<a href="https://tuoyou-hao.github.io/2022/08/13/cuda-2-1-CUDA-model-and-memory-allocation/#4%E3%80%81%E4%BB%A3%E7%A0%81">CUDA 2.1 CUDAæ¨¡å‹ä¸å†…å­˜åˆ†é…</a></p></blockquote><h2 id="ä¸€ã€çº¿ç¨‹ç®¡ç†">ä¸€ã€çº¿ç¨‹ç®¡ç†</h2><p>å½“æ ¸å‡½æ•°åœ¨ä¸»æœºç«¯å¯åŠ¨æ—¶ï¼Œå®ƒçš„æ‰§è¡Œä¼šç§»åŠ¨åˆ°è®¾å¤‡ä¸Šï¼Œæ­¤æ—¶è®¾å¤‡ä¸­ä¼šäº§ç”Ÿå¤§é‡çš„çº¿ç¨‹ ï¼Œå¹¶ä¸”æ¯ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œç”±æ ¸å‡½æ•°æŒ‡å®šçš„è¯­å¥ã€‚CUDAæ˜ç¡®äº†çº¿ç¨‹å±‚æ¬¡æŠ½è±¡çš„æ¦‚å¿µï¼Œä»¥ä¾¿äºæˆ‘ä»¬ç»„ç»‡çº¿ç¨‹ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªä¸¤å±‚çš„çº¿ç¨‹å±‚æ¬¡ç»“æ„ï¼Œç”±çº¿ç¨‹å—å’Œçº¿ç¨‹å—ç½‘æ ¼æ„æˆã€‚</p><ul><li><p>ç”±ä¸€ä¸ªå†…æ ¸å¯åŠ¨æ‰€äº§ç”Ÿçš„æ‰€æœ‰çº¿ç¨‹ç»Ÿç§°ä¸ºä¸€ä¸ªç½‘æ ¼ã€‚</p><p>åŒä¸€ç½‘æ ¼ä¸­çš„æ‰€æœ‰çº¿ç¨‹å…±äº«ç›¸åŒçš„å…¨å±€å†…å­˜ç©ºé—´ã€‚</p></li><li><p>ä¸€ä¸ªç½‘æ ¼ç”±å¤šä¸ªçº¿ç¨‹å—æ„æˆ</p><p>ä¸€ä¸ªçº¿ç¨‹å—åŒ…å«ä¸€ç»„çº¿ç¨‹ã€‚</p></li></ul><p>åŒä¸€çº¿ç¨‹å—blockå†…çš„çº¿ç¨‹åä½œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å®ç°ã€‚</p><ul><li>åŒæ­¥</li><li>å…±äº«å†…å­˜</li></ul><blockquote><p>ä¸åŒå—å†…çº¿ç¨‹ä¸èƒ½ç›¸äº’å½±å“ï¼Œä»–ä»¬æ˜¯ç‰©ç†éš”ç¦»çš„ï¼</p></blockquote><p>æˆ‘ä»¬å¿…é¡»æ˜ç¡®ï¼Œä¸€ä¸ªæ ¸å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ª<strong>ç½‘ç»œï¼ˆgridï¼‰</strong>ï¼Œä¸€ä¸ªç½‘ç»œå¯ä»¥æœ‰å¾ˆå¤šä¸ª<strong>å—ï¼ˆblockï¼‰</strong>ï¼Œæ¯ä¸ªå—å¯ä»¥æœ‰å¾ˆå¤šçš„çº¿ç¨‹ã€‚</p><p><img src="https://s2.loli.net/2022/08/13/V7xz6Q5dEmB2gNt.png" alt=""></p><p>çº¿ç¨‹ä¾é ä»¥ä¸‹ä¸¤ä¸ªåæ ‡å˜é‡æ¥åŒºåˆ†å½¼æ­¤ã€‚è¿™é‡Œçš„<code>Idx</code>æ˜¯<code>index</code>çš„ç¼©å†™</p><ul><li><p>blockIdxï¼ˆçº¿ç¨‹å—åœ¨çº¿ç¨‹æ ¼å†…çš„ç´¢å¼•ï¼‰</p></li><li><p>threadIdxï¼ˆå—å†…çš„çº¿ç¨‹ç´¢å¼•ï¼‰</p></li></ul><p>è¿™äº›å˜é‡æ˜¯æ ¸å‡½æ•°ä¸­éœ€è¦é¢„åˆå§‹åŒ–çš„å†…ç½®å˜é‡ã€‚å½“æ‰§è¡Œä¸€ä¸ªæ ¸å‡½æ•°æ—¶ï¼ŒCUDAè¿è¡Œæ—¶ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…åæ ‡å˜é‡<code>blockIdx</code>å’Œ<code>threadIdx</code>ã€‚åŸºäºåæ ‡ï¼Œå¯ä»¥å°†éƒ¨åˆ†æ•°æ®åˆ†é…ç»™ä¸åŒçš„çº¿ç¨‹ã€‚</p><p>è¯¥åæ ‡å˜é‡åŸºäº<code>uint3</code>å®šä¹‰çš„ã€CUDAå†…ç½®çš„å‘é‡ç±»å‹ã€‚æ˜¯ä¸€ä¸ªåŒ…å«3ä¸ªæ— ç¬¦å·æ•´æ•°çš„ç»“æ„ï¼Œå¯ä»¥é€šè¿‡xã€yã€zä¸‰ä¸ªå­—æ®µæ¥æŒ‡å®šã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">blockIdx<span class="token punctuation">.</span>xblockIdx<span class="token punctuation">.</span>yblockIdx<span class="token punctuation">.</span>zthreadIdx<span class="token punctuation">.</span>xthreadIdx<span class="token punctuation">.</span>ythreadIdx<span class="token punctuation">.</span>z<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç½‘æ ¼å’Œå—çš„ç»´åº¦ä¸€èˆ¬æ˜¯äºŒç»´å’Œä¸‰ç»´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç½‘æ ¼é€šå¸¸è¢«åˆ†æˆäºŒç»´çš„å—ï¼Œè€Œæ¯ä¸ªå—å¸¸è¢«åˆ†æˆä¸‰ç»´çš„çº¿ç¨‹ã€‚</p><p>CUDAå¯ä»¥ç»„ç»‡ä¸‰ç»´çš„ç½‘æ ¼å’Œå—ã€‚å¦‚ä¸Šå›¾ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«äºŒç»´å—çš„äºŒç»´ç½‘æ ¼ã€‚</p><p>ç½‘æ ¼å’Œå—çš„ç»´åº¦ç”±ä¸‹åˆ—ä¸¤ä¸ªå†…ç½®å˜é‡æŒ‡å®šï¼š</p><ul><li><p>blockDimï¼ˆçº¿ç¨‹å—çš„ç»´åº¦ï¼Œç”¨æ¯ä¸ªçº¿ç¨‹å—ä¸­çš„çº¿ç¨‹æ•°æ¥è¡¨ç¤ºï¼‰</p></li><li><p>gridDimï¼ˆçº¿ç¨‹æ ¼çš„ç»´åº¦ï¼Œç”¨æ¯ä¸ªçº¿ç¨‹æ ¼ä¸­çš„çº¿ç¨‹æ•°æ¥è¡¨ç¤ºï¼‰</p></li></ul><p>å®ƒä»¬æ˜¯<code>dim3</code>ç±»å‹çš„å˜é‡ï¼Œæ˜¯åŸºäº<code>uint3</code>å®šä¹‰çš„æ•´æ•°å‹å‘é‡ï¼Œç”¨æ¥è¡¨ç¤ºç»´åº¦ã€‚å½“å®šä¹‰ä¸€ä¸ª<code>dim3</code>ç±»å‹çš„å˜é‡æ—¶ï¼Œæ‰€æœ‰æœªæŒ‡å®šçš„å…ƒç´ éƒ½è¢«åˆå§‹åŒ–ä¸º1ã€‚<code>dim3</code>ç±»å‹å˜é‡ä¸­çš„æ¯ä¸ªç»„ä»¶å¯ä»¥é€šè¿‡å®ƒçš„xã€yã€zå­—æ®µè·å¾—ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">blockDim<span class="token punctuation">.</span>xblockDim<span class="token punctuation">.</span>yblockDim<span class="token punctuation">.</span>z<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>dim3æ˜¯æ‰‹å·¥å®šä¹‰çš„ï¼Œä¸»æœºç«¯å¯è§ã€‚uint3æ˜¯è®¾å¤‡ç«¯åœ¨æ‰§è¡Œçš„æ—¶å€™å¯è§çš„ï¼Œä¸å¯ä»¥åœ¨æ ¸å‡½æ•°è¿è¡Œæ—¶ä¿®æ”¹ï¼Œåˆå§‹åŒ–å®Œæˆåuint3å€¼å°±ä¸å˜äº†ã€‚ä»–ä»¬æ˜¯æœ‰åŒºåˆ«çš„ï¼è¿™ä¸€ç‚¹å¿…é¡»è¦æ³¨æ„ã€‚</p></blockquote><h3 id="1ã€ç½‘æ ¼å’Œçº¿ç¨‹å—çš„ç»´åº¦">1ã€ç½‘æ ¼å’Œçº¿ç¨‹å—çš„ç»´åº¦</h3><p>é€šå¸¸ï¼Œä¸€ä¸ªçº¿ç¨‹æ ¼ä¼šè¢«ç»„ç»‡æˆçº¿ç¨‹å—çš„äºŒç»´æ•°ç»„å½¢å¼ï¼Œä¸€ä¸ªçº¿ç¨‹å—ä¼šè¢«ç»„ç»‡æˆçº¿ç¨‹çš„ä¸‰ç»´æ•°ç»„å½¢å¼ã€‚</p><p>çº¿ç¨‹æ ¼å’Œçº¿ç¨‹å—å‡ä½¿ç”¨3ä¸ª<code>dim3</code>ç±»å‹çš„æ— ç¬¦å·æ•´å‹å­—æ®µï¼Œè€Œæœªä½¿ç”¨çš„å­—æ®µå°†è¢«åˆå§‹åŒ–ä¸º1ä¸”å¿½ç•¥ä¸è®¡ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹demoè¿›ä¸€æ­¥äº†è§£å—çš„ç´¢å¼•å’Œç»´åº¦ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cuda_runtime.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>__global__ <span class="token keyword">void</span> <span class="token function">checkIndex</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šè¾“å‡ºè‡ªå·±çš„ç´¢å¼•å’Œç»´åº¦</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"threadIdx:(%d,%d,%d) blockIdx:(%d,%d,%d) blockDim:(%d,%d,%d)\    gridDim(%d,%d,%d)\n"</span><span class="token punctuation">,</span>        threadIdx<span class="token punctuation">.</span>x<span class="token punctuation">,</span>threadIdx<span class="token punctuation">.</span>y<span class="token punctuation">,</span>threadIdx<span class="token punctuation">.</span>z<span class="token punctuation">,</span>    blockIdx<span class="token punctuation">.</span>x<span class="token punctuation">,</span>blockIdx<span class="token punctuation">.</span>y<span class="token punctuation">,</span>blockIdx<span class="token punctuation">.</span>z<span class="token punctuation">,</span>blockDim<span class="token punctuation">.</span>x<span class="token punctuation">,</span>blockDim<span class="token punctuation">.</span>y<span class="token punctuation">,</span>blockDim<span class="token punctuation">.</span>z<span class="token punctuation">,</span>    gridDim<span class="token punctuation">.</span>x<span class="token punctuation">,</span>gridDim<span class="token punctuation">.</span>y<span class="token punctuation">,</span>gridDim<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//å®šä¹‰ä¸€ä¸ªè¾ƒå°çš„æ•°æ®</span>    <span class="token keyword">int</span> nElem<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">;</span>    <span class="token comment">//å®šä¹‰å°ºå¯¸</span>    dim3 <span class="token function">block</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ç½‘æ ¼å¤§å°æ˜¯å—å¤§å°çš„å€æ•°,åç»­ä¼šè§£é‡Š</span>    dim3 <span class="token function">grid</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nElem<span class="token operator">+</span>block<span class="token punctuation">.</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"grid.x %d grid.y %d grid.z %d\n"</span><span class="token punctuation">,</span>grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span>grid<span class="token punctuation">.</span>y<span class="token punctuation">,</span>grid<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"block.x %d block.y %d block.z %d\n"</span><span class="token punctuation">,</span>block<span class="token punctuation">.</span>x<span class="token punctuation">,</span>block<span class="token punctuation">.</span>y<span class="token punctuation">,</span>block<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>    checkIndex<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>grid<span class="token punctuation">,</span>block<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaDeviceReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–è¯‘è¾“å‡ºåï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">grid.x 2 grid.y 1 grid.z 1block.x 3 block.y 1 block.z 1threadIdx:(0,0,0) blockIdx:(0,0,0) blockDim:(3,1,1)    gridDim(2,1,1)threadIdx:(1,0,0) blockIdx:(0,0,0) blockDim:(3,1,1)    gridDim(2,1,1)threadIdx:(2,0,0) blockIdx:(0,0,0) blockDim:(3,1,1)    gridDim(2,1,1)threadIdx:(0,0,0) blockIdx:(1,0,0) blockDim:(3,1,1)    gridDim(2,1,1)threadIdx:(1,0,0) blockIdx:(1,0,0) blockDim:(3,1,1)    gridDim(2,1,1)threadIdx:(2,0,0) blockIdx:(1,0,0) blockDim:(3,1,1)    gridDim(2,1,1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„åæ ‡ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æœ‰ç›¸åŒçš„å—ç»´åº¦å’Œç½‘æ ¼ç»´åº¦ã€‚</p><h3 id="2ã€ä¸»æœºç«¯å’Œè®¾å¤‡ç«¯è®¿é—®-ç½‘æ ¼-å—-å˜é‡">2ã€ä¸»æœºç«¯å’Œè®¾å¤‡ç«¯è®¿é—®(ç½‘æ ¼/å—)å˜é‡</h3><p>åŒºåˆ†ä¸»æœºç«¯å’Œè®¾å¤‡ç«¯çš„ç½‘æ ¼å’Œå—å˜é‡çš„è®¿é—®æ˜¯å¾ˆé‡è¦çš„</p><p>å¯¹äºä¸€ä¸ªç»™å®šçš„æ•°æ®å¤§å°ï¼Œç¡®å®šç½‘æ ¼å’Œå—å°ºå¯¸çš„ä¸€èˆ¬æ­¥éª¤ä¸ºï¼š</p><ul><li><p>ç¡®å®šå—çš„å¤§å°</p></li><li><p>åœ¨å·²çŸ¥æ•°æ®å¤§å°å’Œå—å¤§å°çš„åŸºç¡€ä¸Šè®¡ç®—ç½‘æ ¼ç»´åº¦è¦ç¡®å®šå—å°ºå¯¸ï¼Œé€šå¸¸éœ€è¦è€ƒè™‘ï¼š</p></li><li><p>å†…æ ¸çš„æ€§èƒ½ç‰¹æ€§</p></li><li><p>GPUèµ„æºçš„é™åˆ¶</p></li></ul><p>ä»¥ä¸‹demoä»‹ç»å¦‚ä½•åœ¨ä¸»æœºä¸Šå®šä¹‰ç½‘æ ¼å’Œå—çš„å¤§å°</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cuda_runtime.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> nElem <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>    dim3 <span class="token function">block</span> <span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dim3 <span class="token function">grid</span>  <span class="token punctuation">(</span><span class="token punctuation">(</span>nElem <span class="token operator">+</span> block<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"grid.x %d block.x %d \n"</span><span class="token punctuation">,</span> grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span> block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// reset block</span>    block<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">512</span><span class="token punctuation">;</span>    grid<span class="token punctuation">.</span>x  <span class="token operator">=</span> <span class="token punctuation">(</span>nElem <span class="token operator">+</span> block<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> block<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"grid.x %d block.x %d \n"</span><span class="token punctuation">,</span> grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span> block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// reset block</span>    block<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>    grid<span class="token punctuation">.</span>x  <span class="token operator">=</span> <span class="token punctuation">(</span>nElem <span class="token operator">+</span> block<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> block<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"grid.x %d block.x %d \n"</span><span class="token punctuation">,</span> grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span> block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// reset block</span>    block<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>    grid<span class="token punctuation">.</span>x  <span class="token operator">=</span> <span class="token punctuation">(</span>nElem <span class="token operator">+</span> block<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> block<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"grid.x %d block.x %d \n"</span><span class="token punctuation">,</span> grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span> block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaDeviceReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºåº”ç”¨ç¨‹åºä¸­çš„æ•°æ®å¤§å°æ˜¯å›ºå®šçš„ï¼Œå› æ­¤å½“å—çš„å¤§å°å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç›¸åº”çš„ç½‘æ ¼å°ºå¯¸ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚</p><blockquote><p>CUDAçš„ç‰¹ç‚¹ä¹‹ä¸€å°±æ˜¯é€šè¿‡ç¼–ç¨‹æ¨¡å‹æ­ç¤ºäº†ä¸€ä¸ªä¸¤å±‚çš„çº¿ç¨‹å±‚æ¬¡ç»“æ„ã€‚ç”±äºä¸€ä¸ªå†…æ ¸å¯åŠ¨çš„ç½‘æ ¼å’Œå—çš„ç»´æ•°ä¼šå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¼˜åŒ–ç¨‹åºçš„æ—¶å€™è¦è€ƒè™‘åˆ°è¿™ä¸€é€”å¾„ã€‚</p><p>ç½‘æ ¼å’Œå—ä»é€»è¾‘ä¸Šè¡¨ç¤ºäº†ä¸€ä¸ªæ ¸å‡½æ•°çš„çº¿ç¨‹å±‚æ¬¡ç»“æ„ã€‚åœ¨CUDAæ‰§è¡Œæ¨¡å‹éƒ¨åˆ†ä¸­ï¼Œä½ å°±ä¼šå‘ç°è¿™ç§çº¿ç¨‹ç»„ç»‡æ–¹å¼èƒ½å¤Ÿåœ¨ä¸åŒçš„è®¾å¤‡ä¸Šæ‰§è¡Œç›¸åŒçš„ç¨‹åºä»£ç ï¼Œä¸”æ¯ä¸€ä¸ªçº¿ç¨‹ç»„ç»‡å…·æœ‰ä¸åŒæ•°é‡çš„è®¡ç®—å’Œå†…å­˜èµ„æºã€‚</p></blockquote><h2 id="äºŒã€æ ¸å‡½æ•°æ¦‚å¿µ">äºŒã€æ ¸å‡½æ•°æ¦‚å¿µ</h2><p>åœ¨Cè¯­è¨€ä¸­è°ƒç”¨å‡½æ•°æ˜¯ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">function_name</span><span class="token punctuation">(</span>argument list<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>CUDAæ ¸å‡½æ•°è°ƒç”¨å¤–åŠ äº†ä¸‰ä¸ªå°–æ‹¬å·ï¼Œ<code>&lt;&lt;&lt;&gt;&gt;&gt;</code>è¿ç®—ç¬¦å†…æ˜¯æ ¸å‡½æ•°çš„æ‰§è¡Œé…ç½®ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">kernel_name<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>grid<span class="token punctuation">,</span>block<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>argument list<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰§è¡Œé…ç½®çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯ç½‘æ ¼ç»´åº¦ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨å—çš„æ•°ç›®ã€‚ç¬¬äºŒä¸ªå€¼æ˜¯å—ç»´åº¦ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå—ä¸­çº¿ç¨‹çš„æ•°ç›®ã€‚</p><p>é€šè¿‡æŒ‡å®šç½‘æ ¼å’Œå—çš„ç»´åº¦ï¼Œä½ å¯ä»¥è¿›è¡Œä»¥ä¸‹é…ç½®ï¼š</p><ul><li><p>å†…æ ¸ä¸­çº¿ç¨‹çš„æ•°ç›®</p></li><li><p>å†…æ ¸ä¸­ä½¿ç”¨çš„çº¿ç¨‹å¸ƒå±€</p></li></ul><p>åŒä¸€ä¸ªå—ä¸­çš„çº¿ç¨‹ä¹‹é—´å¯ä»¥ç›¸äº’åä½œï¼Œä¸åŒå—å†…çš„çº¿ç¨‹ä¸èƒ½åä½œã€‚</p><p>å¯¹äºä¸€ä¸ªç»™å®šçš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„ç½‘æ ¼å’Œå—å¸ƒå±€æ¥ç»„ç»‡ä½ çš„çº¿ç¨‹ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰32ä¸ªæ•°æ®å…ƒç´ ç”¨äºè®¡ç®—ï¼Œæ¯8ä¸ªå…ƒç´ ä¸€ä¸ªå—ï¼Œéœ€è¦å¯åŠ¨4ä¸ªå—ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">kernel_name<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>argument list<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨intç±»å‹çš„å˜é‡ï¼Œæˆ–è€…å¸¸é‡ç›´æ¥åˆå§‹åŒ–ã€‚</p></blockquote><p>ä¸Šè¿°ä»£ç çš„çº¿ç¨‹å¸ƒå±€å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/08/14/H9fWA7S5ZEBDYnw.png" alt=""></p><p>æ ¸å‡½æ•°æ˜¯åŒæ—¶å¤åˆ¶åˆ°å¤šä¸ªçº¿ç¨‹æ‰§è¡Œçš„ï¼Œä¸ºäº†è®©å¤šçº¿ç¨‹æŒ‰ç…§æˆ‘ä»¬çš„æ„æ„¿å¯¹åº”åˆ°ä¸åŒçš„æ•°æ®ï¼Œå°±è¦ç»™çº¿ç¨‹ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ã€‚</p><p>ç”±äºæ•°æ®åœ¨å…¨å±€å†…å­˜ä¸­æ˜¯çº¿æ€§å­˜å‚¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å˜é‡<code>blockIdx.x</code>å’Œ<code>threadId.x</code>æ¥è¿›è¡Œä»¥ä¸‹æ“ä½œ</p><ul><li><p>åœ¨ç½‘æ ¼ä¸­æ ‡è¯†ä¸€ä¸ªå”¯ä¸€çš„çº¿ç¨‹</p></li><li><p>å»ºç«‹çº¿ç¨‹å’Œæ•°æ®å…ƒç´ ä¹‹é—´çš„æ˜ å°„å…³ç³»</p></li></ul><blockquote><p>è¡¥å……ï¼šå¦‚æœæŠŠæ‰€æœ‰32ä¸ªå…ƒç´ æ”¾åˆ°ä¸€ä¸ªå—é‡Œï¼Œé‚£ä¹ˆåªä¼šå¾—åˆ°<strong>ä¸€ä¸ªå—</strong>ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">kernel_name<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>argument list<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ¯ä¸ªå—åªå«æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆä¼šæœ‰<strong>32ä¸ªå—</strong>ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">kernel_name<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>argument list<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸Šè¿°ä»£ç å¦‚æœæ²¡æœ‰ç‰¹æ®Šç»“æ„åœ¨æ ¸å‡½æ•°ä¸­ï¼Œæ‰§è¡Œç»“æœåº”è¯¥ä¸€è‡´ï¼Œä½†æ˜¯æœ‰äº›æ•ˆç‡ä¼šä¸€ç›´æ¯”è¾ƒä½ã€‚</p></blockquote><p>ä¸Šé¢è¿™äº›æ˜¯å¯åŠ¨éƒ¨åˆ†ï¼Œæ ¸å‡½æ•°çš„è°ƒç”¨ä¸ä¸»æœºçº¿ç¨‹æ˜¯å¼‚æ­¥çš„ã€‚æ ¸å‡½æ•°è°ƒç”¨ç»“æŸåï¼Œæ§åˆ¶æƒç«‹åˆ»è¿”å›ç»™ä¸»æœºç«¯ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸»æœºå¯åŠ¨äº†æ ¸å‡½æ•°ï¼Œæ§åˆ¶æƒé©¬ä¸Šå›åˆ°ä¸»æœºï¼Œè€Œä¸æ˜¯ä¸»æœºç­‰å¾…è®¾å¤‡å®Œæˆæ ¸å‡½æ•°çš„è¿è¡Œ</p><p>æƒ³è¦ä¸»æœºç­‰å¾…è®¾å¤‡ç«¯æ‰§è¡Œå¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼Œæ¥å¼ºåˆ¶ä¸»æœºç«¯ç¨‹åºç­‰å¾…æ‰€æœ‰çš„æ ¸å‡½æ•°æ‰§è¡Œç»“æŸï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">cudaError_t</span> <span class="token function">cudaDeviceSynchronize</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ˜¯ä¸€ä¸ªæ˜¾ç¤ºçš„æ–¹æ³•ï¼Œå¯¹åº”çš„ä¹Ÿå°±æœ‰éšå¼æ–¹æ³•ã€‚</p><p>éšå¼æ–¹æ³•å°±æ˜¯ä¸æ˜ç¡®è¯´æ˜ä¸»æœºè¦ç­‰å¾…è®¾å¤‡ç«¯ï¼Œè€Œæ˜¯è®¾å¤‡ç«¯ä¸æ‰§è¡Œå®Œï¼Œä¸»æœºæ²¡åŠæ³•è¿›è¡Œï¼Œæ¯”å¦‚å†…å­˜æ‹·è´å‡½æ•°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">cudaError_t</span> <span class="token function">cudaMemcpy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> dst<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> src<span class="token punctuation">,</span>  <span class="token class-name">size_t</span> count<span class="token punctuation">,</span>cudaMemcpyKind kind<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™ä¸ªå‡½æ•°åœ¨ä¸Šæ–‡æœ‰ä»‹ç»è¿‡ï¼Œå½“æ ¸å‡½æ•°å¯åŠ¨åçš„ä¸‹ä¸€æ¡æŒ‡ä»¤å°±æ˜¯ä»è®¾å¤‡å¤åˆ¶æ•°æ®å›ä¸»æœºç«¯ï¼Œé‚£ä¹ˆä¸»æœºç«¯å¿…é¡»è¦ç­‰å¾…è®¾å¤‡ç«¯è®¡ç®—å®Œæˆã€‚</p><blockquote><p>è¿™é‡Œå†åšä¸€æ¬¡å¼ºè°ƒï¼šä¸åŒäºCè¯­è¨€çš„å‡½æ•°è°ƒç”¨ï¼Œæ‰€æœ‰çš„CUDAæ ¸å‡½æ•°çš„å¯åŠ¨éƒ½æ˜¯å¼‚æ­¥çš„ã€‚CUDAå†…æ ¸è°ƒç”¨å®Œæˆåï¼Œæ§åˆ¶æƒç«‹åˆ»è¿”å›ç»™CPUã€‚</p></blockquote><h2 id="ä¸‰ã€ç¼–å†™æ ¸å‡½æ•°">ä¸‰ã€ç¼–å†™æ ¸å‡½æ•°</h2><p>æˆ‘ä»¬ä¼šå¯åŠ¨æ ¸å‡½æ•°äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è‡ªå·±å®šä¹‰å±äºè‡ªå·±çš„æ ¸å‡½æ•°äº†ã€‚</p><p>æ ¸å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å£°æ˜æ ¸å‡½æ•°æœ‰ä¸€ä¸ªæ¯”è¾ƒæ¨¡æ¿åŒ–çš„æ–¹æ³•ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">__global__ <span class="token keyword">void</span> <span class="token function">kernel_name</span><span class="token punctuation">(</span>argument list<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æ³¨æ„ï¼šå£°æ˜å’Œå®šä¹‰æ˜¯ä¸åŒçš„ï¼Œè¿™ç‚¹CUDAä¸Cè¯­è¨€æ˜¯ä¸€è‡´çš„</p></blockquote><p>åœ¨Cè¯­è¨€å‡½æ•°å‰æ²¡æœ‰çš„é™å®šç¬¦<code>__global__ </code>,CUDA Cä¸­è¿˜æœ‰ä¸€äº›å…¶ä»–æˆ‘ä»¬åœ¨Cä¸­æ²¡æœ‰çš„é™å®šç¬¦ï¼Œå¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:center">é™å®šç¬¦</th><th style="text-align:center">æ‰§è¡Œ</th><th style="text-align:center">è°ƒç”¨</th><th style="text-align:center">å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align:center"><strong>global</strong></td><td style="text-align:center">è®¾å¤‡ç«¯æ‰§è¡Œ</td><td style="text-align:center">å¯ä»¥ä»ä¸»æœºè°ƒç”¨ä¹Ÿå¯ä»¥ä»è®¡ç®—èƒ½åŠ›3ä»¥ä¸Šçš„è®¾å¤‡è°ƒç”¨</td><td style="text-align:center">å¿…é¡»æœ‰ä¸€ä¸ªvoidçš„è¿”å›ç±»å‹</td></tr><tr><td style="text-align:center"><strong>device</strong></td><td style="text-align:center">è®¾å¤‡ç«¯æ‰§è¡Œ</td><td style="text-align:center">è®¾å¤‡ç«¯è°ƒç”¨</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>host</strong></td><td style="text-align:center">ä¸»æœºç«¯æ‰§è¡Œ</td><td style="text-align:center">ä¸»æœºè°ƒç”¨</td><td style="text-align:center">å¯ä»¥çœç•¥</td></tr></tbody></table><p>å…¶ä¸­ï¼Œ<code>__device__</code>å’Œ<code>__host__</code>é™å®šç¬¦å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ ·å‡½æ•°å¯ä»¥åŒæ—¶åœ¨ä¸»æœºå’Œè®¾å¤‡ç«¯è¿›è¡Œç¼–è¯‘ã€‚</p><p>CUDA  Kernelæ ¸å‡½æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªé™åˆ¶ï¼Œé€‚ç”¨äºæ‰€æœ‰æ ¸å‡½æ•°ï¼š</p><ul><li><p>åªèƒ½è®¿é—®è®¾å¤‡å†…å­˜</p></li><li><p>å¿…é¡»å…·æœ‰voidè¿”å›ç±»å‹</p></li><li><p>ä¸æ”¯æŒå¯å˜æ•°é‡çš„å‚æ•°</p></li><li><p>ä¸æ”¯æŒé™æ€å˜é‡</p></li><li><p>æ˜¾ç¤ºå¼‚æ­¥è¡Œä¸º</p></li></ul><p>ä»‹ç»å®Œè§„åˆ™ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¹¶è¡Œç¨‹åºç»å¸¸å‡ºç°çš„ä¸€ç§ä¼˜åŒ–ç°è±¡ï¼šæŠŠä¸²è¡Œä»£ç å¹¶è¡ŒåŒ–æ—¶å¯¹ä¸²è¡Œä»£ç å—forçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯æŠŠforå¹¶è¡ŒåŒ–ã€‚</p><p>ä¾‹å¦‚åœ¨ä¸²è¡Œæ¡ä»¶ä¸‹ï¼Œæˆ‘ä»¬ä¼šè¿™ä¹ˆå†™å¾ªç¯ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">sumArraysOnHost</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    C<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å¹¶è¡Œæƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">__global__ <span class="token keyword">void</span> <span class="token function">sumArraysOnGPU</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">int</span> i <span class="token operator">=</span> threadIdx<span class="token punctuation">.</span>x<span class="token punctuation">;</span>      C<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°å¾ªç¯ä½“å·²ç»æ¶ˆå¤±äº†ï¼Œå†…ç½®çš„çº¿ç¨‹åæ ‡å˜é‡æ›¿æ¢äº†æ•°ç»„ç´¢å¼•ï¼Œç”±äºNæ˜¯è¢«éšå¼å®šä¹‰ç”¨æ¥å¯åŠ¨Nä¸ªçº¿ç¨‹çš„ï¼Œæ‰€ä»¥Nå°±æ²¡æœ‰ä»€ä¹ˆå‚è€ƒä»·å€¼äº†ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªé•¿åº¦ä¸º32ä¸ªå…ƒç´ çš„å‘é‡ï¼Œä½ å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹æ³•ç”¨32ä¸ªçº¿ç¨‹æ¥è°ƒç”¨æ ¸å‡½æ•°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">sumArraysOnGPU<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å››ã€å¤„ç†é”™è¯¯">å››ã€å¤„ç†é”™è¯¯</h2><p>ç”±äºè®¸å¤šCUDAè°ƒç”¨æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥æœ‰æ—¶ä¼šå¾ˆéš¾ç¡®å®šæŸä¸ªé”™è¯¯æ˜¯ç”±å“ªä¸€æ­¥ç¨‹åºå¼•èµ·çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé”™è¯¯å¤„ç†å®å°è£…æ‰€æœ‰çš„CUDA APIè°ƒç”¨ï¼Œç®€åŒ–äº†é”™è¯¯æ£€æŸ¥è¿‡ç¨‹ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">CHECK</span><span class="token expression"><span class="token punctuation">(</span>call<span class="token punctuation">)</span>                                                            </span><span class="token punctuation">\</span><span class="token expression"><span class="token punctuation">{</span>                                                                              </span><span class="token punctuation">\</span>    <span class="token expression"><span class="token keyword">const</span> <span class="token class-name">cudaError_t</span> error <span class="token operator">=</span> call<span class="token punctuation">;</span>                                            </span><span class="token punctuation">\</span>    <span class="token expression"><span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token operator">!=</span> cudaSuccess<span class="token punctuation">)</span>                                                  </span><span class="token punctuation">\</span>    <span class="token expression"><span class="token punctuation">{</span>                                                                          </span><span class="token punctuation">\</span>        <span class="token expression"><span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> </span><span class="token string">"Error: %s:%d, "</span><span class="token expression"><span class="token punctuation">,</span> <span class="token constant">__FILE__</span><span class="token punctuation">,</span> <span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 </span><span class="token punctuation">\</span>        <span class="token expression"><span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> </span><span class="token string">"code: %d, reason: %s\n"</span><span class="token expression"><span class="token punctuation">,</span> error<span class="token punctuation">,</span>                       </span><span class="token punctuation">\</span>                <span class="token expression"><span class="token function">cudaGetErrorString</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                    </span><span class="token punctuation">\</span>        <span class="token expression"><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                                               </span><span class="token punctuation">\</span>    <span class="token expression"><span class="token punctuation">}</span>                                                                          </span><span class="token punctuation">\</span><span class="token expression"><span class="token punctuation">}</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨ä»¥ä¸‹ä»£ç ä¸­ä½¿ç”¨å®ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_C<span class="token punctuation">,</span> gpuRef<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœå†…å­˜æ‹·è´æˆ–ä¹‹å‰çš„å¼‚æ­¥æ“ä½œäº§ç”Ÿäº†é”™è¯¯ï¼Œè¿™ä¸ªå®ä¼šå¸®æˆ‘ä»¬æŠ¥å‘Šé”™è¯¯ä»£ç ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªå¯è¯»ä¿¡æ¯ã€‚</p><p>ä¹Ÿå¯ä»¥ç”¨ä¸‹è¿°æ–¹æ³•ï¼Œåœ¨æ ¸å‡½æ•°è°ƒç”¨åæ£€æŸ¥æ ¸å‡½æ•°é”™è¯¯ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">kernel_function<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>grid<span class="token punctuation">,</span>block<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>argument list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaDeviceSynchronize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>CHECK(cudaDeviceSynchronize())</code>ä¼šé˜»å¡ä¸»æœºç«¯çº¿ç¨‹çš„è¿è¡Œï¼Œç›´åˆ°è®¾å¤‡ç«¯æ‰€æœ‰çš„è¯·æ±‚ä»»åŠ¡éƒ½ç»“æŸï¼Œå¹¶ä¿è¯æœ€åæ ¸å‡½æ•°çš„å¯åŠ¨éƒ¨åˆ†ä¸ä¼šå‡ºé”™ã€‚</p><p><strong>ä»¥ä¸Šä»…æ˜¯ä»¥è°ƒè¯•ä¸ºç›®çš„çš„</strong>ï¼Œå› ä¸ºåœ¨æ ¸å‡½æ•°å¯åŠ¨åæ·»åŠ è¿™ä¸ªæ£€æŸ¥ç‚¹ä¼šé˜»å¡ä¸»æœºç«¯çº¿ç¨‹ï¼Œä½¿è¯¥æ£€æŸ¥ç‚¹æˆä¸ºå…¨å±€å±éšœã€‚</p><h2 id="äº”ã€å®Œå–„demo">äº”ã€å®Œå–„demo</h2><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç”¨æ™®é€šCè¯­è¨€å®ç°ä¸€ä¸ªdemoï¼Œå¹¶å°è¯•æ¢ç”¨ä¸€éƒ¨åˆ†cudaå†…å­˜åˆ†é…çš„apiã€‚</p><blockquote><p>å®ç°ç›®æ ‡ï¼šä¸¤ä¸ªæ•°ç»„çš„ç›¸åŠ </p><p>æ•°ç»„açš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸æ•°ç»„bçš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸åŠ ï¼Œå¾—åˆ°çš„ç»“æœä½œä¸ºæ•°ç»„cçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¿›è¡Œäº†ä¸€æ¬¡è¿ç®—ã€‚</p></blockquote><p>æˆ‘ä»¬åœ¨è¿™é‡ŒæŠŠè¯¥demoå®Œå–„ä¸€ä¸‹ï¼š</p><p>å…ˆå†™æœ€ç®€å•çš„åˆå§‹åŒ–æ•°æ®ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">initialData</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>ip<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// ä¸ºéšæœºæ•°ç”Ÿæˆä¸åŒçš„ç§å­</span>    <span class="token class-name">time_t</span> t<span class="token punctuation">;</span>    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ç»™æ¯ä¸ªç»´åº¦éƒ½è®¾ç½®éšæœºæ•°</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ip<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10.0f</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../common/common.h"</span> <span class="token comment">//CHECKæ‰€åœ¨å¤´æ–‡ä»¶</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cuda_runtime.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s Starting...\n"</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®è®¾å¤‡</span>    <span class="token keyword">int</span> dev <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaSetDevice</span><span class="token punctuation">(</span>dev<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®å‘é‡çš„æ•°æ®å¤§å°</span>    <span class="token keyword">int</span> nElem <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Vector size %d\n"</span><span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// mallocä¸»æœºå†…å­˜</span>    <span class="token class-name">size_t</span> nBytes <span class="token operator">=</span> nElem <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token operator">*</span>h_A<span class="token punctuation">,</span> <span class="token operator">*</span>h_B<span class="token punctuation">,</span> <span class="token operator">*</span>hostRef<span class="token punctuation">,</span> <span class="token operator">*</span>gpuRef<span class="token punctuation">;</span>    h_A     <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    h_B     <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    hostRef <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    gpuRef  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åœ¨ä¸»æœºç«¯åˆå§‹åŒ–æ•°æ®</span>    <span class="token function">initialData</span><span class="token punctuation">(</span>h_A<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">initialData</span><span class="token punctuation">(</span>h_B<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">,</span>  <span class="token number">0</span><span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// mallocè®¾å¤‡å…¨å±€å†…å­˜</span>    <span class="token keyword">float</span> <span class="token operator">*</span>d_A<span class="token punctuation">,</span> <span class="token operator">*</span>d_B<span class="token punctuation">,</span> <span class="token operator">*</span>d_C<span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_A<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_B<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å°†æ•°æ®ä»ä¸»æœºä¼ è¾“åˆ°è®¾å¤‡</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_A<span class="token punctuation">,</span> h_A<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_B<span class="token punctuation">,</span> h_B<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_C<span class="token punctuation">,</span> gpuRef<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åœ¨ä¸»æœºç«¯è°ƒç”¨å†…æ ¸</span>    dim3 <span class="token function">block</span> <span class="token punctuation">(</span>nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    dim3 <span class="token function">grid</span>  <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    sumArraysOnGPU<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>grid<span class="token punctuation">,</span> block<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>d_A<span class="token punctuation">,</span> d_B<span class="token punctuation">,</span> d_C<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Execution configure &lt;&lt;&lt;%d, %d&gt;&gt;&gt;\n"</span><span class="token punctuation">,</span> grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span> block<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å°†å†…æ ¸ç»“æœå¤åˆ¶å›ä¸»æœºç«¯</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">,</span> d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyDeviceToHost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åœ¨ä¸»æœºç«¯æ·»åŠ å‘é‡ç”¨æ¥è¿›è¡Œç»“æœæ£€æŸ¥</span>    <span class="token function">sumArraysOnHost</span><span class="token punctuation">(</span>h_A<span class="token punctuation">,</span> h_B<span class="token punctuation">,</span> hostRef<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ£€æŸ¥è®¾å¤‡ç»“æœ</span>    <span class="token function">checkResult</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">,</span> gpuRef<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// é‡Šæ”¾è®¾å¤‡å…¨å±€å†…å­˜</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_C<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// é‡Šæ”¾ä¸»æœºå†…å­˜</span>    <span class="token function">free</span><span class="token punctuation">(</span>h_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>h_B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">CHECK</span><span class="token punctuation">(</span><span class="token function">cudaDeviceReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®šä¹‰ä¸»æœºè®¡ç®—å‘é‡çš„å‡½æ•°ï¼Œç”¨æ¥å½“æ­£ç¡®ç­”æ¡ˆç”¨ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">sumArraysOnHost</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//ä¸»æœºç”¨forå¾ªç¯è®¡ç®—ç»“æœ</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> idx <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> idx<span class="token operator">++</span><span class="token punctuation">)</span>        C<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">+</span> B<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–å†™æ ¸å‡½æ•°çš„å‘é‡è®¡ç®—ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">__global__ <span class="token keyword">void</span> <span class="token function">sumArraysOnGPU</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//cudaæ ¸å‡½æ•°è®¡ç®—å‘é‡ç›¸åŠ </span>    <span class="token keyword">int</span> i <span class="token operator">=</span> threadIdx<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> N<span class="token punctuation">)</span> C<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå°è£…ä¸€ä¸‹æ£€éªŒç­”æ¡ˆçš„å‡½æ•°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">checkResult</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>hostRef<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>gpuRef<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//å®šä¹‰è¯¯å·®å€¼</span>    <span class="token keyword">double</span> epsilon <span class="token operator">=</span> <span class="token number">1.0E-8</span><span class="token punctuation">;</span>    <span class="token comment">//å®šä¹‰flag</span>    bool match <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//hostRefæ˜¯ä¸»æœºè®¡ç®—çš„æ­£ç¡®ç­”æ¡ˆ,</span>    <span class="token comment">//gpuRefæ˜¯GPUè®¡ç®—çš„ç­”æ¡ˆ </span>    <span class="token comment">//int Næ˜¯è¾“å…¥ç»´åº¦</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">//æ£€æµ‹åˆ°è¯¯å·®è¿‡å¤§ï¼Œå°±æŒ‡å‡ºé”™è¯¯å¯¹åº”çš„ç»´åº¦</span>        <span class="token comment">//å¹¶æŠŠflagç½®ä¸ºfalse</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>hostRef<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> gpuRef<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> epsilon<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            match <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Arrays do not match!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"host %5.2f gpu %5.2f at current %d\n"</span><span class="token punctuation">,</span> hostRef<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>                   gpuRef<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Arrays match.\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ¬ç¯‡CUDAç¼–ç¨‹æ¨¡å‹çš„æ¦‚è¿°å°±åˆ°è¿™é‡Œç»“æŸã€‚ä¸‹ä¸€ç¯‡å¼€å§‹ä¼šå…·ä½“ä»‹ç»CUDAç¼–ç¨‹æ¨¡å‹ä¸­çš„æ ¸å‡½æ•°è®¡æ—¶ï¼Œå¹¶è¡Œçº¿ç¨‹ï¼Œè®¾å¤‡ç®¡ç†ç­‰å†…å®¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CUDA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CUDA 2.1ï¼šç¼–ç¨‹æ¨¡å‹æ¦‚è¿°(ä¸€)</title>
      <link href="/2022/08/13/cuda-2-1-CUDA-model-and-memory-allocation/"/>
      <url>/2022/08/13/cuda-2-1-CUDA-model-and-memory-allocation/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>CUDA 2.1ï¼šCUDAæ¨¡å‹ä¸å†…å­˜åˆ†é…</h1><p>CUDAç¼–ç¨‹æ¨¡å‹ä¸ºåº”ç”¨å’Œç¡¬ä»¶è®¾å¤‡ä¹‹é—´çš„æ¡¥æ¢ï¼Œæ‰€ä»¥è¦çŸ¥é“ï¼ŒCUDA Cæ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œä¸æ˜¯è§£é‡Šå‹è¯­è¨€ã€‚ ä¸‹é¢çš„ç»“æ„å›¾ç‰‡èƒ½å½¢è±¡çš„è¡¨ç°ç¨‹åºå’Œç¼–ç¨‹æ¨¡å‹å®ç°ä¹‹é—´çš„æŠ½è±¡ç»“æ„çš„é‡è¦ã€‚</p><blockquote><p>é€šä¿¡æŠ½è±¡ï¼Œæ˜¯ç¼–ç¨‹æ¨¡å‹å’Œç¼–è¯‘å™¨ï¼Œåº“å‡½æ•°ä¹‹é—´çš„åˆ†ç•Œçº¿ã€‚</p><p>æˆ‘ä»¬è¦ç”¨åˆ°çš„è¯­æ³•ï¼Œå†…å­˜ç»“æ„ï¼Œçº¿ç¨‹ç»“æ„ç­‰è¿™äº›æˆ‘ä»¬å†™ç¨‹åºæ—¶æˆ‘ä»¬è‡ªå·±æ§åˆ¶çš„éƒ¨åˆ†ï¼Œæ§åˆ¶äº†å¼‚æ„è®¡ç®—è®¾å¤‡çš„å·¥ä½œæ¨¡å¼ï¼Œéƒ½æ˜¯å±äºç¼–ç¨‹æ¨¡å‹ã€‚</p><p>å®ƒé€šè¿‡<strong>ä¸“ä¸šçš„ç¡¬ä»¶åŸè¯­</strong>å’Œ<strong>æ“ä½œç³»ç»Ÿçš„ç¼–è¯‘å™¨</strong>æˆ–<strong>åº“</strong>æ¥å®ç°ã€‚</p><p>åˆ©ç”¨ç¼–ç¨‹æ¨¡å‹æ‰€ç¼–å†™çš„ç¨‹åºæŒ‡å®šäº†ç¨‹åºçš„å„ç»„æˆéƒ¨åˆ†æ˜¯å¦‚ä½•å…±äº«ä¿¡æ¯åŠç›¸äº’åä½œçš„ã€‚ç¼–ç¨‹æ¨¡å‹ä»é€»è¾‘ä¸Šæä¾›äº†ä¸€ä¸ªç‰¹å®šçš„è®¡ç®—æœºæ¶æ„ï¼Œé€šå¸¸å®ƒä½“ç°åœ¨ç¼–ç¨‹è¯­è¨€æˆ–ç¼–ç¨‹ç¯å¢ƒä¸­ã€‚</p></blockquote><p><img src="https://s2.loli.net/2022/08/12/fVNzPAktewZ9JaH.png" alt=""></p><blockquote><p>GPUä¸­å¤§è‡´å¯ä»¥åˆ†ä¸ºï¼š</p><ol><li><p>æ ¸å‡½æ•°</p></li><li><p>å†…å­˜ç®¡ç†</p></li><li><p>çº¿ç¨‹ç®¡ç†</p></li><li><p>æµ</p></li></ol><p>ç­‰å‡ ä¸ªå…³é”®éƒ¨åˆ†ã€‚</p></blockquote><p>ä»¥ä¸Šè¿™äº›ç†è®ºåŒæ—¶ä¹Ÿé€‚ç”¨äºå…¶ä»–éCPU+GPUå¼‚æ„çš„ç»„åˆã€‚</p><blockquote><p>GPUæ¶æ„ä¸‹æœ‰å‡ ä¸ªç‰¹æœ‰çš„åŠŸèƒ½ï¼š</p><ul><li><p>é€šè¿‡ç»„ç»‡å±‚æ¬¡ç»“æ„åœ¨GPUä¸Šç»„ç»‡<strong>çº¿ç¨‹</strong>çš„æ–¹æ³•</p></li><li><p>é€šè¿‡ç»„ç»‡å±‚æ¬¡ç»“æ„åœ¨GPUä¸Šç»„ç»‡<strong>å†…å­˜</strong>çš„æ–¹æ³•</p></li></ul></blockquote><p>ä»å®è§‚ä¸Šæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªç¯èŠ‚å®ŒæˆCUDAåº”ç”¨å¼€å‘ï¼š</p><ol><li>é¢†åŸŸå±‚</li><li>é€»è¾‘å±‚</li><li>ç¡¬ä»¶å±‚</li></ol><ul><li><p>åœ¨ç¬¬ä¸€æ­¥ã€ç¼–ç¨‹ä¸ç®—æ³•è®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ€å…³å¿ƒçš„æ˜¯<strong>åœ¨é¢†åŸŸå±‚å¦‚ä½•è§£ææ•°æ®å’Œå‡½æ•°</strong>ï¼Œä»¥ä¾¿åœ¨å¹¶è¡Œç¯å¢ƒä¸­æ­£ç¡®ã€é«˜æ•ˆåœ°è§£å†³é—®é¢˜ã€‚</p></li><li><p>ç¼–ç¨‹é˜¶æ®µä¸­ï¼Œæˆ‘ä»¬çš„å…³æ³¨ç‚¹åº”è½¬å‘<strong>å¦‚ä½•ç»„ç»‡å¹¶å‘çº¿ç¨‹</strong>ã€‚ è¿™ä¸ªé˜¶æ®µè¦ä»<strong>é€»è¾‘å±‚é¢</strong>æ€è€ƒã€‚</p></li></ul><p>åœ¨Cè¯­è¨€å¹¶è¡Œç¼–ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨<code>pthreads</code>æˆ–<code>OpenMP</code>æŠ€æœ¯æ¥æ˜¾å¼åœ°ç®¡ç†çº¿ç¨‹ã€‚CUDAæå‡ºäº†ä¸€ä¸ªçº¿ç¨‹å±‚æ¬¡ç»“æ„æŠ½è±¡çš„æ¦‚å¿µï¼Œä»¥å…è®¸æ§åˆ¶çº¿ç¨‹è¡Œä¸ºã€‚</p><p>è¿™ä¸ªæŠ½è±¡ä¸ºå¹¶è¡Œå˜æˆæä¾›äº†è‰¯å¥½çš„å¯æ‰©å±•æ€§ï¼ˆä¸€ä¸ªCUDAç¨‹åºå¯ä»¥åœ¨ä¸åŒçš„GPUæœºå™¨ä¸Šè¿è¡Œï¼Œå³ä½¿è®¡ç®—èƒ½åŠ›ä¸åŒï¼‰ã€‚</p><p>æ‰€ä»¥è¯´ï¼Œç†è§£åœ¨ç¡¬ä»¶å±‚ä¸Šï¼Œ<strong>çº¿ç¨‹æ˜¯å¦‚ä½•æ˜ å°„åˆ°æœºå™¨ä¸Š</strong>å°±å¾ˆé‡è¦äº†ã€‚è¿™èƒ½å¸®åŠ©æˆ‘ä»¬æé«˜æ€§èƒ½ã€‚</p><h2 id="1ã€CUDAç¼–ç¨‹ç»“æ„">1ã€CUDAç¼–ç¨‹ç»“æ„</h2><p>ä¸€ä¸ªå¼‚æ„ç¯å¢ƒï¼Œé€šå¸¸æœ‰<strong>å¤šä¸ªCPU</strong>&amp;<strong>å¤šä¸ªGPU</strong>ã€‚ä»–ä»¬éƒ½é€šè¿‡PCIeæ€»çº¿ç›¸äº’é€šä¿¡ï¼Œä¹Ÿæ˜¯é€šè¿‡PCIeæ€»çº¿åˆ†éš”å¼€çš„ã€‚æ‰€ä»¥æˆ‘ä»¬è¦åŒºåˆ†ä¸€ä¸‹ä¸¤ç§è®¾å¤‡çš„å†…å­˜ï¼š</p><ul><li>ä¸»æœº(Host)ï¼šCPUåŠå…¶å†…å­˜</li><li>è®¾å¤‡(Device)ï¼šGPUåŠå…¶å†…å­˜</li></ul><p><strong>è¿™ä¸¤ä¸ªå†…å­˜ä»ç¡¬ä»¶åˆ°è½¯ä»¶éƒ½æ˜¯éš”ç¦»çš„</strong>ï¼ˆCUDA6.0 ä»¥åæ”¯æŒç»Ÿä¸€å¯»å€ï¼Œå¯ä½¿ç”¨å•ä¸ªæŒ‡é’ˆè®¿é—®CPUå’ŒGPUå†…å­˜ï¼‰</p><p>æˆ‘ä»¬æš‚æ—¶å…ˆæŠŠç»Ÿä¸€å¯»å€æ”¾ä¸€è¾¹ï¼Œå…ˆç”¨å†…å­˜æ¥å›æ‹·è´çš„æ–¹æ³•æ¥ç¼–å†™è°ƒè¯•ç¨‹åºï¼Œä»¥å·©å›ºå¯¹ä¸¤ä¸ªå†…å­˜éš”ç¦»è¿™ä¸ªäº‹å®çš„ç†è§£ã€‚</p><hr><p>å†…æ ¸ï¼ˆkernelï¼‰æ˜¯CUDAç¼–ç¨‹æ¨¡å‹çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…¶ä»£ç åœ¨GPUä¸Šè¿è¡Œã€‚</p><p>å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸»æœºå¯ä»¥ç‹¬ç«‹åœ°å¯¹è®¾å¤‡è¿›è¡Œæ“ä½œã€‚å†…æ ¸ä¸€æ—¦è¢«å¯åŠ¨ï¼Œç®¡ç†æƒç«‹åˆ»è¿”å›ç»™ä¸»æœºï¼Œé‡Šæ”¾CPUæ¥æ‰§è¡Œ<strong>ç”±è®¾å¤‡ä¸Šè¿è¡Œçš„å¹¶è¡Œä»£ç å®ç°çš„</strong>é¢å¤–çš„ä»»åŠ¡ã€‚</p><p>CUDAç¼–ç¨‹æ¨¡å‹ä¸»è¦æ˜¯å¼‚æ­¥çš„ï¼Œå› æ­¤åœ¨GPUä¸Šè¿›è¡Œçš„è¿ç®—å¯ä»¥ä¸ä¸»æœº-è®¾å¤‡é€šä¿¡é‡å ã€‚ä¸€ä¸ªå…¸å‹çš„CUDAç¨‹åºåŒ…æ‹¬ç”±å¹¶è¡Œä»£ç äº’è¡¥çš„ä¸²è¡Œä»£ç ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œä¸²è¡Œä»£ç ï¼ˆåŠä»»åŠ¡å¹¶è¡Œä»£ç ï¼‰åœ¨ä¸»æœºCPUä¸Šæ‰§è¡Œï¼Œè€Œå¹¶è¡Œä»£ç åœ¨GPUä¸Šæ‰§è¡Œã€‚ä¸»æœºä»£ç æŒ‰ç…§ANSI Cæ ‡å‡†è¿›è¡Œç¼–å†™ï¼Œè€Œè®¾å¤‡ä»£ç ä½¿ç”¨CUDA Cè¿›è¡Œç¼–å†™ã€‚</p><p>ä¸€ä¸ªå…¸å‹çš„CUDAç¨‹åºå®ç°æµç¨‹éµå¾ªä»¥ä¸‹æ¨¡å¼ï¼Œå‚è€ƒä¸‹å›¾ï¼š</p><p>1.æŠŠæ•°æ®ä»CPUå†…å­˜æ‹·è´åˆ°GPUå†…å­˜ã€‚</p><p>2.è°ƒç”¨æ ¸å‡½æ•°å¯¹å­˜å‚¨åœ¨GPUå†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œã€‚</p><p>3.å°†æ•°æ®ä»GPUå†…å­˜ä¼ é€å›åˆ°CPUå†…å­˜ã€‚</p><p><img src="https://s2.loli.net/2022/08/12/vSRwoEmJOIQG6Dc.png" alt=""></p><h2 id="2ã€å†…å­˜ç®¡ç†">2ã€å†…å­˜ç®¡ç†</h2><p>å†…å­˜ç®¡ç†åœ¨ä¼ ç»Ÿä¸²è¡Œç¨‹åºæ˜¯å¾ˆå¸¸è§çš„ã€‚å¯„å­˜å™¨ç©ºé—´ï¼Œæ ˆç©ºé—´å†…çš„å†…å­˜ç”±æœºå™¨è‡ªå·±ç®¡ç†ï¼Œå †ç©ºé—´ç”±ç”¨æˆ·æ§åˆ¶åˆ†é…å’Œé‡Šæ”¾ã€‚</p><p>CUDAç¨‹åºåŒæ ·ï¼Œåªæ˜¯CUDAæä¾›çš„API<strong>å¯ä»¥åˆ†é…ç®¡ç†<code>è®¾å¤‡</code>ä¸Šçš„å†…å­˜ï¼Œä¹Ÿå¯ä»¥ç”¨CUDAç®¡ç†<code>ä¸»æœº</code>ä¸Šçš„å†…å­˜ã€‚</strong></p><p>ç”¨äºGPUå†…å­˜åˆ†é…çš„æ˜¯<code>cudaMalloc</code>å‡½æ•°ï¼Œå…¶å‡½æ•°åŸå‹ä¸ºï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">cudaError_t</span> <span class="token function">cudaMalloc</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span> devPtr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¯¥å‡½æ•°è´Ÿè´£å‘è®¾å¤‡åˆ†é…ä¸€å®šå­—èŠ‚çš„çº¿æ€§å†…å­˜ï¼Œå¹¶ä»¥<code>devPtr</code>çš„å½¢å¼è¿”å›æŒ‡å‘æ‰€åˆ†é…å†…å­˜<strong>çš„æŒ‡é’ˆ</strong>ã€‚</p><p><code>cudaMalloc</code>ä¸æ ‡å‡†Cè¯­è¨€ä¸­çš„<code>malloc</code>å‡½æ•°åŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¿™ä¸ªå‡½æ•°åœ¨GPUçš„å†…å­˜é‡Œåˆ†é…å†…å­˜ã€‚</p><p>é€šè¿‡å……åˆ†ä¿æŒä¸æ ‡å‡†Cè¯­è¨€è¿è¡Œåº“ä¸­çš„æ¥å£ä¸€è‡´æ€§ï¼Œå¯ä»¥å®ç°CUDAåº”ç”¨ç¨‹åºçš„è½»æ¾æ¥å…¥ã€‚</p><p>ä¸‹é¢è¡¨æ ¼æœ‰ä¸€äº›ä¸»æœºAPIå’ŒCUDA Cçš„APIçš„å¯¹æ¯”ï¼š</p><table><thead><tr><th style="text-align:center">æ ‡å‡†Cå‡½æ•°</th><th style="text-align:center">CUDA C å‡½æ•°</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">malloc</td><td style="text-align:center">cudaMalloc</td><td style="text-align:center">å†…å­˜åˆ†é…</td></tr><tr><td style="text-align:center">memcpy</td><td style="text-align:center">cudaMemcpy</td><td style="text-align:center">å†…å­˜å¤åˆ¶</td></tr><tr><td style="text-align:center">memset</td><td style="text-align:center">cudaMemset</td><td style="text-align:center">å†…å­˜è®¾ç½®</td></tr><tr><td style="text-align:center">free</td><td style="text-align:center">cudaFree</td><td style="text-align:center">é‡Šæ”¾å†…å­˜</td></tr></tbody></table><p>æˆ‘ä»¬æ¥ç ”ç©¶è¿™ä¸ªè¡¨æ ¼é‡Œæœ€å…³é”®çš„ä¸€æ­¥ï¼Œè¿™ä¸€æ­¥è¦èµ°æ€»çº¿çš„ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">cudaError_t</span> <span class="token function">cudaMemcpy</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span> dst<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> src<span class="token punctuation">,</span><span class="token class-name">size_t</span> count<span class="token punctuation">,</span>  cudaMemcpyKind kind<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ªå‡½æ•°æ˜¯å†…å­˜æ‹·è´è¿‡ç¨‹ï¼Œå¯ä»¥å®Œæˆä»¥ä¸‹å‡ ç§è¿‡ç¨‹ï¼ˆcudaMemcpyKind kindï¼‰</p><ul><li>cudaMemcpyHostToHost</li><li>cudaMemcpyHostToDevice</li><li>cudaMemcpyDeviceToHost</li><li>cudaMemcpyDeviceToDevice</li></ul><p>è¿™å››ä¸ªè¿‡ç¨‹çš„æ–¹å‘å¯ä»¥æ¸…æ¥šçš„ä»å­—é¢ä¸Šçœ‹å‡ºæ¥äº†</p><p>è¿™ä¸ªå‡½æ•°ä»¥åŒæ­¥æ–¹å¼æ‰§è¡Œï¼Œå› ä¸ºåœ¨<code>cudaMemcpy</code>å‡½æ•°è¿”å›ä»¥åŠä¼ è¾“æ“ä½œå®Œæˆä¹‹å‰ï¼Œä¸»æœºåº”ç”¨ç¨‹åºæ˜¯é˜»å¡çš„ã€‚é™¤äº†å†…æ ¸å¯åŠ¨ä¹‹å¤–çš„CUDAè°ƒç”¨éƒ½ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯çš„æšä¸¾ç±»å‹<code>cudaError_t</code>ã€‚</p><p>å¦‚æœGPUå†…å­˜åˆ†é…æ‰§è¡ŒæˆåŠŸï¼Œåˆ™ä¼šè¿”å› cudaSuccess ï¼›å¦åˆ™è¿”å› cudaErrorMemoryAllocation</p><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹CUDAè¿è¡Œæ—¶å‡½æ•°å°†é”™è¯¯ä»£ç è½¬åŒ–ä¸ºå¯è¯»çš„é”™è¯¯æ¶ˆæ¯ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">cudaGetErrorString</span><span class="token punctuation">(</span><span class="token class-name">cudaError_t</span> error<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="3ã€å†…å­˜å±‚æ¬¡ç»“æ„">3ã€å†…å­˜å±‚æ¬¡ç»“æ„</h2><p>CUDAç¼–ç¨‹æ¨¡å‹æœ€æ˜¾è‘—çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯æ­ç¤ºäº†å†…å­˜å±‚æ¬¡ç»“æ„ã€‚æ¯ä¸€ä¸ªGPUè®¾å¤‡éƒ½æœ‰ç”¨äºä¸åŒç”¨é€”çš„å­˜å‚¨ç±»å‹ã€‚</p><p>åœ¨GPUå†…å­˜å±‚æ¬¡ç»“æ„ä¸­ï¼Œæœ€ä¸»è¦çš„ä¸¤ç§å†…å­˜æ˜¯<strong>å…¨å±€å†…å­˜</strong>å’Œ<strong>å…±äº«å†…å­˜</strong>ã€‚</p><ul><li><strong>å…¨å±€</strong>å†…å­˜ç±»ä¼¼äºCPUçš„<strong>ç³»ç»Ÿå†…å­˜</strong></li><li><strong>å…±äº«</strong>å†…å­˜ç±»ä¼¼äºCPUçš„<strong>ç¼“å­˜</strong>ã€‚</li></ul><p>ç„¶è€ŒGPUçš„å…±äº«å†…å­˜å¯ä»¥ç”±CUDA Cçš„å†…æ ¸ç›´æ¥æ§åˆ¶ã€‚</p><p><img src="https://s2.loli.net/2022/08/12/KGO98S3lsnvbj54.png" alt=""></p><p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¸¤ä¸ªæ•°ç»„ç›¸åŠ çš„ä¾‹å­æ¥å­¦ä¹ å¦‚ä½•åœ¨ä¸»æœºå’Œè®¾å¤‡ä¹‹é—´è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œä»¥åŠå¦‚ä½•ç”¨CUDA Cç¼–ç¨‹ã€‚</p><h2 id="4ã€ä»£ç ">4ã€ä»£ç </h2><p>çœ‹äº†è¿™ä¹ˆä¹…çš„ç†è®ºï¼Œçœ‹ä¸€ä¸‹ä»£ç æ”¾æ¾ä¸€ä¸‹å§<span class="github-emoji"><span>ğŸ¶</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f436.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><blockquote><p>å®ç°ç›®æ ‡ï¼šä¸¤ä¸ªæ•°ç»„çš„ç›¸åŠ </p><p>æ•°ç»„açš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸æ•°ç»„bçš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸åŠ ï¼Œå¾—åˆ°çš„ç»“æœä½œä¸ºæ•°ç»„cçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¿›è¡Œäº†ä¸€æ¬¡è¿ç®—ã€‚</p></blockquote><p>1ã€ç¼–å†™ä¸»å‡½æ•°ã€‚</p><p>æˆ‘ä»¬å…ˆæŠŠå„ä¸ªå˜é‡åˆå§‹åŒ–ä¸€ä¸‹ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// åˆå§‹åŒ–æ•°ç»„å¤§å°</span>    <span class="token keyword">int</span> nElem <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>    <span class="token class-name">size_t</span> nBytes <span class="token operator">=</span> nElem <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ†é…ä¸‰ä¸ªåŒæ ·å¤§å°çš„ç©ºé—´</span>    <span class="token keyword">float</span> <span class="token operator">*</span>h_A<span class="token punctuation">,</span> <span class="token operator">*</span>h_B<span class="token punctuation">,</span> <span class="token operator">*</span>h_C<span class="token punctuation">;</span>    h_A <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    h_B <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    h_C <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç”Ÿæˆéšæœºæ•°</span>    <span class="token function">initialData</span><span class="token punctuation">(</span>h_A<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token function">initialData</span><span class="token punctuation">(</span>h_B<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç›¸åŠ </span>    <span class="token function">sumArraysOnHost</span><span class="token punctuation">(</span>h_A<span class="token punctuation">,</span> h_B<span class="token punctuation">,</span> h_C<span class="token punctuation">,</span> nElem<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// é‡Šæ”¾ç©ºé—´</span>    <span class="token function">free</span><span class="token punctuation">(</span>h_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>h_B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>h_C<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­éšæœºæ•°çš„å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">initialData</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>ip<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//éšæœºç§å­</span>    <span class="token class-name">time_t</span> t<span class="token punctuation">;</span>    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ip<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10.0f</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæ˜¯ç›¸åŠ å‡½æ•°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">sumArraysOnHost</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> idx <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> idx<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        C<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">+</span> B<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å¯ä»¥ç”¨gccä¹‹ç±»çš„Cè¯­è¨€ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‰ä¸€ç¯‡ä»‹ç»çš„nvccç¼–è¯‘æ–¹å¼ç¼–è¯‘ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nvcc -Xcompiler -std=c99 sum.c -o sum./sum<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>-Xcompilerç”¨äºæŒ‡å®šå‘½ä»¤è¡Œé€‰é¡¹æ˜¯æŒ‡å‘Cç¼–è¯‘å™¨è¿˜æ˜¯é¢„å¤„ç†å™¨ã€‚</p><p>è¿™é‡Œçš„ä¾‹å­ä¸­ï¼Œå°†-std=c99ä¼ é€’ç»™ç¼–è¯‘å™¨ï¼Œå› ä¸ºè¿™é‡Œçš„Cç¨‹åºæ˜¯æŒ‰ç…§C99æ ‡å‡†ç¼–å†™çš„ã€‚</p><p>å¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™æ‰¾åˆ°ç¼–è¯‘å™¨é€‰é¡¹ï¼š<a href="https://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html">cuda c</a></p></blockquote><p><strong>æ”¹æˆCUDAä»£ç ï¼</strong></p><p>ç°åœ¨ï¼Œèªæ˜çš„ä½ å¯ä»¥åœ¨GPUä¸Šä¿®æ”¹ä»£ç æ¥è¿›è¡Œæ•°ç»„åŠ æ³•è¿ç®—ï¼Œç”¨æˆ‘ä»¬åˆšåˆšäº†è§£åˆ°çš„<code>cudaMalloc</code>åœ¨GPUä¸Šç”³è¯·å†…å­˜ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">float</span> <span class="token operator">*</span>d_A<span class="token punctuation">,</span> <span class="token operator">*</span>d_B<span class="token punctuation">,</span> <span class="token operator">*</span>d_C<span class="token punctuation">;</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_A<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_B<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œå¯ä»¥ä½¿ç”¨cudaMemcpyå‡½æ•°æŠŠæ•°æ®ä»ä¸»æœºå†…å­˜æ‹·è´åˆ°GPUçš„å…¨å±€å†…å­˜ä¸­ï¼Œå‚æ•°<code>cudaMemcpyHostToDevice</code>æŒ‡å®šäº†æ•°æ®æ‹·è´æ–¹å‘ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_A<span class="token punctuation">,</span> h_A<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>d_B<span class="token punctuation">,</span> h_B<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å½“æ•°æ®è¢«è½¬ç§»åˆ°GPUçš„å…¨å±€å†…å­˜åï¼Œä¸»æœºç«¯è°ƒç”¨æ ¸å‡½æ•°åœ¨GPUä¸Šè¿›è¡Œæ•°ç»„æ±‚å’Œã€‚</p><p>ä¸€æ—¦å†…æ ¸è¢«è°ƒç”¨ï¼Œæ§åˆ¶æƒç«‹åˆ»è¢«ä¼ å›ä¸»æœºï¼Œè¿™æ ·çš„è¯ï¼Œå½“æ ¸å‡½æ•°åœ¨GPUä¸Šè¿è¡Œæ—¶ï¼Œä¸»æœºå¯ä»¥æ‰§è¡Œå…¶ä»–å‡½æ•°ã€‚å› æ­¤ï¼Œå†…æ ¸ä¸ä¸»æœºæ˜¯å¼‚æ­¥çš„ã€‚</p><p>å½“å†…æ ¸åœ¨GPUä¸Šå®Œæˆäº†å¯¹æ‰€æœ‰æ•°ç»„å…ƒç´ çš„å¤„ç†åï¼Œå…¶ç»“æœå°†ä»¥æ•°ç»„d_Cçš„å½¢å¼å­˜å‚¨åœ¨GPUçš„å…¨å±€å†…å­˜ä¸­ï¼Œç„¶åç”¨cudaMemcpyå‡½æ•°æŠŠç»“æœä»GPUå¤åˆ¶å›åˆ°ä¸»æœºçš„æ•°ç»„gpuRefä¸­ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">,</span> d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyDeviceToHost<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>cudaMemcpyçš„è°ƒç”¨ä¼šå¯¼è‡´ä¸»æœºè¿è¡Œé˜»å¡ã€‚cudaMemcpyDeviceToHostçš„ä½œç”¨å°±æ˜¯å°†å­˜å‚¨åœ¨GPUä¸Šçš„æ•°ç»„d_cä¸­çš„ç»“æœå¤åˆ¶åˆ°gpuRefä¸­ã€‚æœ€åï¼Œè°ƒç”¨cudaFreeé‡Šæ”¾GPUçš„å†…å­˜ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_A<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_B<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">cudaFree</span><span class="token punctuation">(</span>d_C<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>åœ¨è¿™è¡¥å……ä¸€ç‚¹ï¼šCUDA Cç¼–ç¨‹ä¸€ä¸ªç»å¸¸ä¼šå‘ç”Ÿçš„é”™è¯¯å°±æ˜¯ï¼šæ··ç”¨è®¾å¤‡å’Œä¸»æœºçš„å†…å­˜åœ°å€</p><p>å¦‚æœä½ æ‰§è¡Œäº†é”™è¯¯çš„å†…å­˜åˆ†é…ï¼Œå¦‚ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">gpuRef <span class="token operator">=</span> d_C<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è€Œä¸æ˜¯æ­£ç¡®çš„æ–¹å¼ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>gpuRef<span class="token punctuation">,</span> d_C<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyDeviceToHost<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åº”ç”¨ç¨‹åºå°±ä¼šå´©æºƒ</p><p>ä¸ºäº†åŒºåˆ†è®¾å¤‡å’Œä¸»æœºç«¯å†…å­˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å˜é‡åŠ åç¼€æˆ–è€…å‰ç¼€<code>h_</code>è¡¨ç¤ºhostï¼Œ<code>d_</code>è¡¨ç¤ºdevice</p><p>å¹¶ä¸”ä¸ºäº†é¿å…è¿™ç±»é”™è¯¯ï¼ŒCUDA 6.0æå‡ºäº†ç»Ÿä¸€å¯»å€ï¼Œä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆæ¥è®¿é—®CPUå’ŒGPUçš„å†…</p><p>å­˜ã€‚ï¼ˆå½“ç„¶æ˜¯ä»¥åå†ä»‹ç»äº†ï¼‰</p></blockquote><p>å¾ˆæ˜æ˜¾ï¼Œç°åœ¨æˆ‘ä»¬åªæ˜¯å…¥é—¨äº†åŸºæœ¬çš„å†…å­˜å¤„ç†ï¼Œè¦æƒ³å®Œå–„è¿™ä¸ªdemoï¼Œæˆ‘ä»¬è¿˜éœ€è¦å­¦ä¹ å¾ˆå¤šã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬ä¼šæ¥ç€ä»‹ç»CUDAçº¿ç¨‹ç®¡ç†</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CUDA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CUDA 1ï¼šå¹¶è¡ŒåŸºç¡€æ¦‚å¿µ</title>
      <link href="/2022/08/11/cuda-1-intro/"/>
      <url>/2022/08/11/cuda-1-intro/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>CUDA 1ï¼šå¹¶è¡ŒåŸºç¡€æ¦‚å¿µ</h1><p>æˆ‘ä»¬ä¼ ç»Ÿçš„è®¡ç®—æœºç»“æ„ä¸€èˆ¬æ˜¯å“ˆä½›ä½“ç³»ç»“æ„ï¼ˆåæ¥æ¼”å˜å‡ºå†¯Â·è¯ºä¾æ›¼ç»“æ„ï¼‰</p><p>ä¸»è¦åˆ†æˆä¸‰éƒ¨åˆ†ï¼š</p><ul><li>å†…å­˜ï¼ˆæŒ‡ä»¤å†…å­˜ï¼Œæ•°æ®å†…å­˜ï¼‰</li><li>ä¸­å¤®å¤„ç†å•å…ƒï¼ˆæ§åˆ¶å•å…ƒå’Œç®—æ•°é€»è¾‘å•å…ƒï¼‰</li><li>è¾“å…¥ã€è¾“å‡ºæ¥å£</li></ul><p><img src="https://s2.loli.net/2022/08/09/T6uGVtqsW4kQChm.png" alt=""></p><blockquote><p>å†™å¹¶è¡Œç¨‹åºçš„æ—¶å€™ï¼Œéœ€è¦å¯¹ç¡¬ä»¶æœ‰ä¸€å®šçš„äº†è§£ã€‚</p></blockquote><h2 id="ä¸€ã€å¹¶è¡Œæ€§">ä¸€ã€å¹¶è¡Œæ€§</h2><p><strong>å†™å¹¶è¡Œç¨‹åºå¯ä»¥åˆ†è§£ä»»åŠ¡</strong>ã€‚æˆ‘ä»¬ä¸€èˆ¬æŠŠä¸€ä¸ªç¨‹åºçœ‹æˆæ˜¯æŒ‡ä»¤å’Œæ•°æ®çš„ç»„åˆã€‚</p><p>å¹¶è¡Œåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p><ul><li><p>ä»»åŠ¡å¹¶è¡Œ</p><p>è®¸å¤šä»»åŠ¡æˆ–å‡½æ•°å¯ä»¥ç‹¬ç«‹åœ°ã€å¤§è§„æ¨¡åœ°å¹¶è¡Œæ‰§è¡Œã€‚ä»»åŠ¡å¹¶è¡Œçš„é‡ç‚¹åœ¨äºåˆ©ç”¨å¤šæ ¸ç³»ç»Ÿå¯¹ä»»åŠ¡è¿›è¡Œåˆ†é…</p></li><li><p>æ•°æ®å¹¶è¡Œ</p><p>åŒäº‹å¤„ç†å¤šä¸ªæ•°æ®ã€‚æ•°æ®å¹¶è¡Œçš„é‡ç‚¹åœ¨äºåˆ©ç”¨å¤šæ ¸ç³»ç»Ÿå¯¹æ•°æ®è¿›è¡Œåˆ†é…</p></li></ul><blockquote><p>è€ŒCUDAå°±å¾ˆé€‚åˆè§£å†³æ•°æ®å¹¶è¡Œè®¡ç®—çš„é—®é¢˜</p></blockquote><hr><p>æ•°æ®å¹¶è¡Œè®¾è®¡ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯æŠŠæ•°æ®ï¼Œä¾æ®çº¿ç¨‹è¿›è¡Œåˆ’åˆ†ã€‚</p><p>æ•°æ®å¹¶è¡Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œå—åˆ’åˆ†å’Œå‘¨æœŸåˆ’åˆ†ï¼š</p><ul><li><p>å—åˆ’åˆ†ï¼ˆblock partitioningï¼‰</p><ul><li><p>ä¸€ç»„è¿ç»­çš„æ•°æ®æ”¾åœ¨ä¸€ä¸ªå—é‡Œï¼ŒæŠŠè¿™ä¸€æ•´å—æ•°æ®åˆ‡æˆå°å—</p></li><li><p>æ¯ä¸ªå°å—éšæœºçš„åˆ’åˆ†ç»™ä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªå—çš„æ‰§è¡Œé¡ºåºéšæœº</p></li><li><p>çº¿ç¨‹é€šå¸¸åœ¨åŒä¸€ä¸ªæ—¶é—´å†…åªå¤„ç†ä¸€ä¸ªæ•°æ®å—</p></li></ul><table><thead><tr><th style="text-align:center">thread</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th></tr></thead><tbody><tr><td style="text-align:center">block</td><td style="text-align:center">1 2 3</td><td style="text-align:center">4 5 6</td><td style="text-align:center">7 8 9</td><td style="text-align:center">10 11 12</td><td style="text-align:center">13 14 15</td></tr></tbody></table></li><li><p>å‘¨æœŸåˆ’åˆ†ï¼ˆcyclic partitioningï¼‰</p><ul><li><p>æ›´å°‘çš„æ•°æ®è¢«åˆ†åˆ°åœ¨ä¸€ä¸ªå—ä¸­ï¼Œç›¸é‚»çš„çº¿ç¨‹å¤„ç†ç›¸é‚»çš„æ•°æ®å—ã€‚</p></li><li><p>æ¯ä¸ªçº¿ç¨‹å¯ä»¥å¤„ç†å¤šä¸ªæ•°æ®å—ã€‚</p></li><li><p>æ¯”å¦‚æˆ‘ä»¬æœ‰äº”ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹1æ‰§è¡Œå—1ï¼Œçº¿ç¨‹2æ‰§è¡Œå—2â€¦â€¦çº¿ç¨‹5æ‰§è¡Œå—5ï¼Œçº¿ç¨‹1æ‰§è¡Œå—6</p></li></ul><table><thead><tr><th style="text-align:center">thread</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th></tr></thead><tbody><tr><td style="text-align:center">block</td><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center">3</td><td style="text-align:center">4</td><td style="text-align:center">5</td><td style="text-align:center">6</td><td style="text-align:center">7</td><td style="text-align:center">8</td><td style="text-align:center">9</td><td style="text-align:center">10</td><td style="text-align:center">11</td><td style="text-align:center">12</td><td style="text-align:center">13</td><td style="text-align:center">14</td><td style="text-align:center">15</td></tr></tbody></table></li></ul><blockquote><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><ul><li><p>å—åˆ’åˆ†ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹åªéœ€è¦å¤„ç†æ•°æ®çš„ä¸€éƒ¨åˆ†</p><p>é€šå¸¸è¿™äº›æ•°æ®å¤§å°ç›¸åŒ</p></li><li><p>å‘¨æœŸåˆ’åˆ†ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹è¦å¤„ç†æ•°æ®çš„å¤šä¸ªéƒ¨åˆ†</p></li></ul><p>é¢œè‰²ç›¸åŒçš„å—ä½¿ç”¨çš„åŒä¸€ä¸ªçº¿ç¨‹ï¼Œä»æ‰§è¡Œé¡ºåºä¸Šçœ‹å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/08/09/G1fNa6u5CLDBZAT.png" alt=""></p><p><img src="https://s2.loli.net/2022/08/09/6Y3fCOXhxQaDK8d.png" alt=""></p><p>ç¨‹åºçš„æ€§èƒ½å¯¹å—çš„å¤§å°æ¯”è¾ƒæ•æ„Ÿï¼Œä¸åŒçš„æ•°æ®åˆ’åˆ†ä¸¥é‡å½±å“ç¨‹åºæ€§èƒ½ã€‚</p><p>é’ˆå¯¹ä¸åŒçš„é—®é¢˜å’Œä¸åŒè®¡ç®—æœºç»“æ„ï¼Œæˆ‘ä»¬è¦é€šè¿‡å’Œç†è®ºå’Œè¯•éªŒå…±åŒæ¥å†³å®šæœ€ç»ˆæœ€ä¼˜çš„æ•°æ®åˆ’åˆ†ã€‚</p></blockquote><h2 id="äºŒã€è®¡ç®—æœºæ¶æ„">äºŒã€è®¡ç®—æœºæ¶æ„</h2><h3 id="1ã€ä½›æ—åˆ†ç±»æ³•">1ã€ä½›æ—åˆ†ç±»æ³•</h3><p>æœ‰å¤šç§ä¸åŒçš„æ–¹æ³•å¯ä»¥å¯¹è®¡ç®—æœºæ¶æ„è¿›è¡Œåˆ†ç±»ã€‚ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„åˆ†ç±»æ–¹æ³•æ˜¯å¼—æ—åˆ†ç±»æ³•ï¼ˆFlynnâ€™s Taxonomyï¼‰ï¼Œå®ƒæ ¹æ®æŒ‡ä»¤å’Œæ•°æ®è¿›å…¥CPUçš„æ–¹å¼ï¼Œå°†è®¡ç®—æœºæ¶æ„åˆ†ä¸º4ç§ä¸åŒçš„ç±»å‹</p><ul><li><p>å•æŒ‡ä»¤å•æ•°æ®ï¼ˆSISDï¼‰</p><p>ä¼ ç»Ÿä¸²è¡Œè®¡ç®—æœº</p></li><li><p>å•æŒ‡ä»¤å¤šæ•°æ®ï¼ˆSIMDï¼‰</p><p>å¹¶è¡Œæ¶æ„ï¼Œæœ‰å¤šä¸ªæ ¸å¿ƒã€‚</p><p>æ¯”å¦‚å‘é‡æœºï¼Œæ‰€æœ‰æ ¸å¿ƒæŒ‡ä»¤å”¯ä¸€ï¼Œä½†æ˜¯æ•°æ®ä¸åŒï¼Œç°åœ¨CPUåŸºæœ¬éƒ½æœ‰è¿™ç±»çš„å‘é‡æŒ‡ä»¤</p></li><li><p>å¤šæŒ‡ä»¤å•æ•°æ®ï¼ˆMISDï¼‰</p><p>æ¯”è¾ƒå°‘è§ï¼Œå¤šä¸ªæŒ‡ä»¤ç¾¤æ®´ä¸€ä¸ªæ•°æ®</p></li><li><p>å¤šæŒ‡ä»¤å¤šæ•°æ®ï¼ˆMIMDï¼‰</p><p>å¹¶è¡Œæ¶æ„ï¼Œå¤šæ ¸å¿ƒï¼Œå¤šæŒ‡ä»¤ï¼Œå¼‚æ­¥å¤„ç†å¤šä¸ªæ•°æ®æµï¼Œä»è€Œå®ç°ç©ºé—´ä¸Šçš„å¹¶è¡Œï¼ŒMIMDå¤šæ•°æƒ…å†µä¸‹åŒ…å«SIMDï¼Œå°±æ˜¯MIMDæœ‰å¾ˆå¤šè®¡ç®—æ ¸ï¼Œè®¡ç®—æ ¸æ”¯æŒSIMD</p></li></ul><p><img src="https://s2.loli.net/2022/08/09/nYc621kodBQlqvX.png" alt=""></p><p>ä¸ºäº†æé«˜å¹¶è¡Œçš„è®¡ç®—èƒ½åŠ›ï¼Œæˆ‘ä»¬è¦ä»æ¶æ„ä¸Šå®ç°ä»¥ä¸‹è¿™äº›æ€§èƒ½çš„æå‡ï¼š</p><ul><li><p>é™ä½å»¶è¿Ÿ</p><ul><li><p>å…¶ä¸­ï¼Œå»¶è¿Ÿæ˜¯æŒ‡æ“ä½œä»å¼€å§‹åˆ°ç»“æŸæ‰€éœ€è¦çš„æ—¶é—´ã€‚</p><p>ä¸€èˆ¬ç”¨å¾®ç§’è®¡ç®—ï¼Œå»¶è¿Ÿè¶Šä½è¶Šå¥½ã€‚</p></li></ul></li><li><p>æé«˜å¸¦å®½</p><ul><li>å¸¦å®½æ˜¯å•ä½æ—¶é—´å†…å¤„ç†çš„æ•°æ®é‡ï¼Œä¸€èˆ¬ç”¨MB/sæˆ–è€…GB/sè¡¨ç¤ºã€‚</li></ul></li><li><p>æé«˜ååé‡</p><ul><li><p>ååé‡æ˜¯å•ä½æ—¶é—´å†…æˆåŠŸå¤„ç†çš„è¿ç®—æ•°é‡ï¼Œä¸€èˆ¬ç”¨gflopsæ¥è¡¨ç¤ºï¼ˆåäº¿æ¬¡æµ®ç‚¹è®¡ç®—ï¼‰</p><p>ååé‡å’Œå»¶è¿Ÿæœ‰ä¸€å®šå…³ç³»ï¼Œéƒ½æ˜¯åæ˜ è®¡ç®—é€Ÿåº¦çš„ï¼Œä¸€ä¸ªæ˜¯æ—¶é—´é™¤ä»¥è¿ç®—æ¬¡æ•°ï¼Œå¾—åˆ°çš„æ˜¯å•ä½æ¬¡æ•°ç”¨çš„æ—¶é—´â€“å»¶è¿Ÿï¼Œä¸€ä¸ªæ˜¯è¿ç®—æ¬¡æ•°é™¤ä»¥æ—¶é—´ï¼Œå¾—åˆ°çš„æ˜¯å•ä½æ—¶é—´æ‰§è¡Œæ¬¡æ•°â€“ååé‡ã€‚</p></li></ul></li></ul><h3 id="2ã€æ ¹æ®å†…å­˜åˆ’åˆ†">2ã€æ ¹æ®å†…å­˜åˆ’åˆ†</h3><p>è®¡ç®—æœºæ¶æ„ä¹Ÿå¯ä»¥æ ¹æ®å†…å­˜è¿›è¡Œåˆ’åˆ†ï¼š</p><ol><li><strong>åˆ†å¸ƒå¼å†…å­˜</strong>çš„å¤šèŠ‚ç‚¹ç³»ç»Ÿ</li><li><strong>å…±äº«å†…å­˜</strong>çš„å¤šå¤„ç†å™¨ç³»ç»Ÿ</li></ol><p>ç¬¬ä¸€ç§<strong>åˆ†å¸ƒå¼å†…å­˜</strong>çš„ï¼Œé€šå¸¸å«åšé›†ç¾¤ã€‚</p><p>å¯ä»¥ç†è§£ä¸ºæœ‰å¥½å¤šå°ç”µè„‘ï¼Œæ¯ä¸ªç”µè„‘éƒ½æ˜¯å®Œæ•´çš„ï¼Œæœ‰å†…å­˜å¤„ç†å™¨ç”µæºç­‰ä¸€äº›åˆ—ç¡¬ä»¶ã€‚è¿™äº›ç”µè„‘é€šè¿‡ç½‘ç»œè¿æ¥äº’åŠ¨ï¼Œè¿™å°±æ˜¯åˆ†å¸ƒå¼ã€‚</p><p><img src="https://s2.loli.net/2022/08/09/3DFrjmgIhvexA92.png" alt=""></p><p>ç¬¬äºŒç§<strong>å…±äº«å†…å­˜</strong>çš„ï¼Œæ˜¯å•ä¸ªä¸»æ¿æœ‰å¤šä¸ªå¤„ç†å™¨ï¼Œä»–ä»¬å…±äº«ç›¸åŒçš„ä¸»æ¿ä¸Šçš„å†…å­˜ï¼Œå†…å­˜å¯»å€ç©ºé—´ç›¸åŒï¼Œé€šè¿‡PCIeå’Œå†…å­˜äº’åŠ¨ã€‚</p><p><img src="https://s2.loli.net/2022/08/09/DH2QBVuzdao3yWi.png" alt=""></p><p>å¤šä¸ªå¤„ç†å™¨å¯ä»¥åˆ†å¤šç‰‡å¤„ç†å™¨ï¼Œå’Œå•ç‰‡å¤šæ ¸ï¼ˆä¼—æ ¸many-coreï¼‰ï¼Œä¹Ÿå°±æ˜¯æœ‰äº›ä¸»æ¿ä¸ŠæŒ‚äº†å¥½å¤šä¸ªå¤„ç†å™¨ï¼Œä¹Ÿæœ‰çš„æ˜¯ä¸€ä¸ªä¸»æ¿ä¸Šå°±ä¸€ä¸ªå¤„ç†å™¨ï¼Œä½†æ˜¯è¿™ä¸ªå¤„ç†å™¨é‡Œé¢æœ‰å‡ ç™¾ä¸ªæ ¸ã€‚<br>GPUå°±å±äºä¼—æ ¸ç³»ç»Ÿã€‚å½“ç„¶ç°åœ¨CPUä¹Ÿéƒ½æ˜¯å¤šæ ¸çš„äº†ï¼Œä½†æ˜¯ä»–ä»¬è¿˜æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«çš„ï¼š</p><ul><li>CPUé€‚åˆæ‰§è¡Œå¤æ‚çš„é€»è¾‘ï¼Œæ¯”å¦‚å¤šåˆ†æ”¯ï¼Œå…¶æ ¸å¿ƒæ¯”è¾ƒé‡ï¼ˆå¤æ‚ï¼‰ï¼Œä»¥ä¼˜åŒ–ä¸²è¡Œç¨‹åºæ‰§è¡Œ</li><li>GPUé€‚åˆæ‰§è¡Œç®€å•çš„é€»è¾‘ï¼Œå¤§é‡çš„æ•°æ®å¹¶è¡Œè®¡ç®—ï¼Œå…¶ååé‡æ›´é«˜ï¼Œä½†æ˜¯æ ¸å¿ƒæ¯”è¾ƒè½»ï¼ˆç»“æ„ç®€å•ï¼‰</li></ul><h2 id="ä¸‰ã€å¼‚æ„è®¡ç®—">ä¸‰ã€å¼‚æ„è®¡ç®—</h2><p><strong>ä¸åŒçš„è®¡ç®—æœºæ¶æ„å°±æ˜¯å¼‚æ„</strong></p><p>x86 CPU+GPUçš„è¿™ç§å¼‚æ„åº”è¯¥æ˜¯æœ€å¸¸è§çš„ï¼Œä¹Ÿæœ‰CPU+FPGAï¼ŒCPU+DSPç­‰å„ç§ç»„åˆã€‚å½“ç„¶è¶…çº§è®¡ç®—æœºå¤§éƒ¨åˆ†ä¹Ÿé‡‡ç”¨å¼‚æ„è®¡ç®—çš„æ–¹å¼æ¥æé«˜ååé‡ã€‚</p><p>å¼‚æ„æ¶æ„è™½ç„¶æ¯”ä¼ ç»Ÿçš„åŒæ„æ¶æ„è¿ç®—é‡æ›´å¤§ï¼Œä½†æ˜¯å…¶åº”ç”¨å¤æ‚åº¦æ›´é«˜ï¼Œå› ä¸ºè¦åœ¨ä¸¤ä¸ªè®¾å¤‡ä¸Šè¿›è¡Œè®¡ç®—ï¼Œæ§åˆ¶ï¼Œä¼ è¾“ï¼Œè¿™äº›éƒ½éœ€è¦äººä¸ºå¹²é¢„ï¼Œè€ŒåŒæ„çš„æ¶æ„ä¸‹ï¼Œç¡¬ä»¶éƒ¨åˆ†è‡ªå·±å®Œæˆæ§åˆ¶ï¼Œä¸éœ€è¦äººä¸ºè®¾è®¡ã€‚</p><h2 id="å››ã€å¼‚æ„æ¶æ„">å››ã€å¼‚æ„æ¶æ„</h2><h3 id="4-1-CPUä¸GPU">4.1 CPUä¸GPU</h3><p>ä¸€ä¸ªå…¸å‹çš„å¼‚æ„è®¡ç®—èŠ‚ç‚¹åŒ…æ‹¬ä¸¤ä¸ªå¤šæ ¸CPUæ’æ§½å’Œä¸¤ä¸ªæˆ–æ›´å¤šä¸ªçš„ä¼—æ ¸GPUã€‚</p><p>GPUä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„å¹³å°ï¼Œè€Œæ˜¯CPUçš„åå¤„ç†å™¨ã€‚å› æ­¤ï¼ŒGPUå¿…é¡»é€šè¿‡PCIeæ€»çº¿ä¸åŸºäºCPUçš„ä¸»æœºç›¸è¿æ¥è¿›è¡Œæ“ä½œï¼Œ</p><p>å¦‚ä¸‹å›¾ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆCPUæ‰€åœ¨çš„ä½ç½®è¢«ç§°ä½œä¸»æœºç«¯ï¼Œè€ŒGPUæ‰€åœ¨çš„ä½ç½®è¢«ç§°ä½œè®¾å¤‡ç«¯ã€‚</p><p>CPUå’ŒGPUä¹‹é—´é€šè¿‡PCIeæ€»çº¿è¿æ¥ï¼Œç”¨äºä¼ é€’æŒ‡ä»¤å’Œæ•°æ®ï¼Œè¿™éƒ¨åˆ†ä¹Ÿæ˜¯åé¢è¦è®¨è®ºçš„æ€§èƒ½ç“¶é¢ˆä¹‹ä¸€ã€‚</p><p><img src="https://s2.loli.net/2022/08/10/Qn8c2hSmFuvDVqJ.png" alt=""></p><p>ä¸Šé¢è¿™å¼ å›¾èƒ½å¤§è‡´ååº”CPUå’ŒGPUçš„æ¶æ„ä¸åŒã€‚</p><ul><li><p>å·¦å›¾ï¼šä¸€ä¸ªå››æ ¸CPUä¸€èˆ¬æœ‰å››ä¸ªALUï¼ˆç®—æ•°é€»è¾‘å•å…ƒï¼Œå¯ä»¥åšæ•°å­¦è¿ç®—å’Œé€»è¾‘è¿ç®—ï¼‰ä¹Ÿæ˜¯æˆ‘ä»¬å¹³æ—¶è¯´å››æ ¸å…«æ ¸çš„æ ¸ï¼Œæ§åˆ¶å•å…ƒï¼Œç¼“å­˜ä¹Ÿåœ¨ç‰‡ä¸Šï¼ŒDRAMæ˜¯å†…å­˜ï¼ŒCPUä¸€èˆ¬é€šè¿‡æ€»çº¿è®¿é—®å†…å­˜ã€‚</p></li><li><p>å³å›¾ï¼šGPUï¼Œç»¿è‰²å°æ–¹å—æ˜¯ALUï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹çº¢è‰²æ¡†éƒ¨åˆ†<code>SM</code>ï¼Œè¿™ä¸€ç»„ALUå…¬ç”¨ä¸€ä¸ªControlå•å…ƒå’ŒCacheï¼Œè¿™ä¸ªéƒ¨åˆ†ç›¸å½“äºä¸€ä¸ªå®Œæ•´çš„å¤šæ ¸CPUï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ALUå¤šäº†ï¼Œcontroléƒ¨åˆ†å˜å°ï¼Œå¯ä»¥çœ‹åˆ°è®¡ç®—èƒ½åŠ›æå‡äº†ï¼Œç›¸å¯¹çš„æ§åˆ¶èƒ½åŠ›å‡å¼±äº†</p><p>æ‰€ä»¥å¯¹äºæ§åˆ¶ï¼ˆé€»è¾‘ï¼‰å¤æ‚çš„ç¨‹åºï¼Œä¸€ä¸ªGPUçš„SMæ˜¯æ²¡åŠæ³•å’ŒCPUæ¯”è¾ƒçš„ï¼Œä½†æ˜¯é¢å¯¹é€»è¾‘ç®€å•ï¼Œæ•°æ®é‡å¤§çš„ä»»åŠ¡ï¼ŒGPUæ›´é«˜æ•ˆã€‚å¹¶ä¸”ä¸€ä¸ªGPUä¼šæœ‰å¥½å¤šä¸ªSMã€‚</p></li></ul><hr><p>ä¸€ä¸ªå¼‚æ„åº”ç”¨åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><ul><li><p>ä¸»æœºä»£ç </p></li><li><p>è®¾å¤‡ä»£ç </p></li></ul><p>ä¸»æœºä»£ç åœ¨ä¸»æœºç«¯è¿è¡Œï¼Œè¢«ç¼–è¯‘æˆä¸»æœºæ¶æ„çš„æœºå™¨ç ï¼Œè®¾å¤‡ç«¯çš„åœ¨è®¾å¤‡ä¸Šæ‰§è¡Œï¼Œè¢«ç¼–è¯‘æˆè®¾å¤‡æ¶æ„çš„æœºå™¨ç ã€‚</p><p>æ‰€ä»¥ä¸»æœºç«¯çš„æœºå™¨ç å’Œè®¾å¤‡ç«¯çš„æœºå™¨ç æ˜¯éš”ç¦»çš„ï¼Œè‡ªå·±æ‰§è¡Œè‡ªå·±çš„ï¼Œæ²¡åŠæ³•äº¤æ¢æ‰§è¡Œã€‚</p><p>ä¸»æœºç«¯ä»£ç ä¸»è¦æ˜¯æ§åˆ¶è®¾å¤‡ï¼Œå®Œæˆæ•°æ®ä¼ è¾“ç­‰æ§åˆ¶ç±»å·¥ä½œï¼Œè®¾å¤‡ç«¯ä¸»è¦çš„ä»»åŠ¡å°±æ˜¯è®¡ç®—ã€‚</p><p>å› ä¸ºå½“æ²¡æœ‰GPUçš„æ—¶å€™CPUä¹Ÿèƒ½å®Œæˆè¿™äº›è®¡ç®—ï¼Œåªæ˜¯é€Ÿåº¦ä¼šæ…¢å¾ˆå¤šï¼Œæ‰€ä»¥å¯ä»¥æŠŠGPUçœ‹æˆ<strong>CPUçš„ä¸€ä¸ªåŠ é€Ÿè®¾å¤‡</strong>ã€‚</p><h3 id="4-2-GPUè®¡ç®—å¹³å°">4.2 GPUè®¡ç®—å¹³å°</h3><p>NVIDIAç›®å‰çš„è®¡ç®—å¹³å°ï¼ˆä¸æ˜¯æ¶æ„ï¼‰æœ‰ï¼š</p><ul><li>Tegra</li><li>Geforce</li><li>Quadro</li><li>Tesla</li></ul><blockquote><p>æ¯ä¸ªå¹³å°é’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ï¼š</p><ul><li><p>Tegraç”¨äºåµŒå…¥å¼ã€å¤§è§„æ¨¡çš„å¹¶è¡Œè®¡ç®—</p></li><li><p>Geforceé¢å‘å›¾å½¢ç”¨æˆ·,å¹³æ—¶æ‰“æ¸¸æˆç”¨åˆ°</p></li><li><p>Quadroç”¨äºä¸“ä¸šç»˜å›¾è®¾è®¡</p></li><li><p>Fermiæ˜¯Teslaç³»åˆ—äº§å“ä¸­çš„ä¸€ç§ï¼Œç”¨ä½œGPUåŠ é€Ÿå™¨ï¼Œè¿‘æ¥åœ¨é«˜æ€§èƒ½è®¡ç®—ä¸­è·å¾—äº†å¹¿æ³›åº”ç”¨</p></li></ul></blockquote><p>ä»¥ä¸‹æ˜¯æè¿°GPUå®¹é‡çš„ä¸¤ä¸ªé‡è¦ç‰¹å¾ã€‚</p><ul><li><p>CUDAæ ¸å¿ƒæ•°é‡</p></li><li><p>å†…å­˜å¤§å°</p></li></ul><p>ç›¸åº”çš„ï¼Œæœ‰ä¸¤ç§ä¸åŒçš„æŒ‡æ ‡æ¥è¯„ä¼°GPUçš„æ€§èƒ½ã€‚</p><ul><li><p>å³°å€¼è®¡ç®—æ€§èƒ½</p><p>å³°å€¼è®¡ç®—æ€§èƒ½æ˜¯ç”¨æ¥è¯„ä¼°è®¡ç®—å®¹é‡çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œé€šå¸¸å®šä¹‰ä¸ºæ¯ç§’èƒ½å¤„ç†çš„å•ç²¾åº¦æˆ–åŒç²¾åº¦æµ®ç‚¹è¿ç®—çš„æ•°é‡ã€‚å³°å€¼æ€§èƒ½é€šå¸¸ç”¨GFlopsï¼ˆæ¯ç§’åäº¿æ¬¡æµ®ç‚¹è¿ç®—ï¼‰æˆ–TFlopsï¼ˆæ¯ç§’ä¸‡äº¿æ¬¡æµ®ç‚¹è¿ç®—ï¼‰æ¥è¡¨ç¤ºã€‚</p></li><li><p>å†…å­˜å¸¦å®½</p><p>å†…å­˜å¸¦å®½æ˜¯ä»å†…å­˜ä¸­è¯»å–æˆ–å†™å…¥æ•°æ®çš„æ¯”ç‡ã€‚å†…å­˜å¸¦å®½é€šå¸¸ç”¨ GB/sè¡¨ç¤ºã€‚</p></li></ul><p>nvidiaè‡ªå·±æœ‰ä¸€å¥—æè¿°GPUè®¡ç®—èƒ½åŠ›çš„ä»£ç ï¼Œåå­—æ˜¯â€œè®¡ç®—èƒ½åŠ›â€ã€‚ä¸»è¦åŒºåˆ†ä¸åŒçš„æ¶æ„</p><table><thead><tr><th style="text-align:left">è®¡ç®—èƒ½åŠ›</th><th style="text-align:left">æ¶æ„å</th></tr></thead><tbody><tr><td style="text-align:left">1.x</td><td style="text-align:left">Tesla</td></tr><tr><td style="text-align:left">2.x</td><td style="text-align:left">Fermi</td></tr><tr><td style="text-align:left">3.x</td><td style="text-align:left">Kepler</td></tr><tr><td style="text-align:left">4.x</td><td style="text-align:left">Maxwell</td></tr><tr><td style="text-align:left">5.x</td><td style="text-align:left">Pascal</td></tr><tr><td style="text-align:left">6.x</td><td style="text-align:left">Volta</td></tr></tbody></table><blockquote><p>è¿™é‡Œçš„Teslaæ¶æ„ï¼Œä¸ä¸Šé¢çš„Teslaå¹³å°ä¸åŒï¼Œä¸è¦æ··æ·†ï¼Œä¸€ä¸ªæ˜¯å¹³å°åå­—ï¼Œä¸€ä¸ªæ˜¯æ¶æ„åå­—</p></blockquote><h2 id="äº”ã€å¼‚æ„èŒƒä¾‹">äº”ã€å¼‚æ„èŒƒä¾‹</h2><p><img src="https://s2.loli.net/2022/08/10/9G2ZsWu7cNP6mTM.png" alt=""></p><p>CPUå’ŒGPUç›¸äº’é…åˆï¼Œå„æœ‰æ‰€é•¿ï¼Œå„æœ‰æ‰€çŸ­</p><ul><li><p>ä½å¹¶è¡Œé€»è¾‘å¤æ‚çš„ç¨‹åºé€‚åˆç”¨CPU</p></li><li><p>é«˜å¹¶è¡Œé€»è¾‘ç®€å•çš„å¤§æ•°æ®è®¡ç®—é€‚åˆGPU</p></li></ul><p>å› ä¸ºCPUå’ŒGPUçš„åŠŸèƒ½äº’è¡¥æ€§å¯¼è‡´äº†CPUï¼‹GPUçš„å¼‚æ„å¹¶è¡Œè®¡ç®—æ¶æ„çš„å‘å±•ï¼Œè¿™ä¸¤ç§å¤„ç†å™¨çš„ç±»å‹èƒ½ä½¿åº”ç”¨ç¨‹åºè·å¾—æœ€ä½³çš„è¿è¡Œæ•ˆæœã€‚</p><p>å› æ­¤ï¼Œä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œä½ å¯ä»¥åŒæ—¶ä½¿ç”¨CPUå’ŒGPUæ¥æ‰§è¡Œä½ çš„åº”ç”¨ç¨‹åºï¼Œåœ¨CPUä¸Šæ‰§è¡Œä¸²è¡Œéƒ¨åˆ†æˆ–ä»»åŠ¡å¹¶è¡Œéƒ¨åˆ†ï¼Œåœ¨GPUä¸Šæ‰§è¡Œæ•°æ®å¯†é›†å‹å¹¶è¡Œéƒ¨åˆ†</p><p><img src="https://s2.loli.net/2022/08/10/6hBqz5QIs2pO9Yc.png" alt=""></p><p>CPUå’ŒGPUçº¿ç¨‹çš„åŒºåˆ«ï¼š</p><ol><li>CPUçº¿ç¨‹æ˜¯é‡é‡çº§å®ä½“ï¼Œæ“ä½œç³»ç»Ÿäº¤æ›¿æ‰§è¡Œçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„èŠ±é”€å¾ˆå¤§</li><li>GPUçº¿ç¨‹æ˜¯è½»é‡çº§çš„ï¼ŒGPUåº”ç”¨ä¸€èˆ¬åŒ…å«æˆåƒä¸Šä¸‡çš„çº¿ç¨‹ï¼Œå¤šæ•°åœ¨æ’é˜ŸçŠ¶æ€ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢åŸºæœ¬æ²¡æœ‰å¼€é”€ã€‚</li><li>CPUçš„æ ¸è¢«è®¾è®¡ç”¨æ¥å°½å¯èƒ½å‡å°‘ä¸€ä¸ªæˆ–ä¸¤ä¸ªçº¿ç¨‹è¿è¡Œæ—¶é—´çš„å»¶è¿Ÿï¼Œè€ŒGPUæ ¸åˆ™æ˜¯å¤§é‡çº¿ç¨‹ï¼Œæœ€å¤§å¹…åº¦æé«˜ååé‡</li></ol><p>è¿™ç§ä»£ç çš„ç¼–å†™æ–¹å¼èƒ½ä¿è¯GPUä¸CPUç›¸è¾…ç›¸æˆï¼Œä»è€Œä½¿CPUï¼‹GPUç³»ç»Ÿçš„è®¡ç®—èƒ½åŠ›å¾—ä»¥å……åˆ†åˆ©ç”¨ã€‚ä¸ºäº†æ”¯æŒä½¿ç”¨CPUï¼‹GPUå¼‚æ„ç³»ç»Ÿæ¶æ„æ¥æ‰§è¡Œåº”ç”¨ç¨‹åºï¼ŒNVIDIAè®¾è®¡äº†ä¸€ä¸ªè¢«ç§°ä¸ºCUDAçš„ç¼–ç¨‹æ¨¡å‹</p><h2 id="å…­ã€CUDA">å…­ã€CUDA</h2><p>CUDAå¹³å°ä¸æ˜¯å•å•æŒ‡è½¯ä»¶æˆ–è€…ç¡¬ä»¶ï¼Œè€Œæ˜¯å»ºç«‹åœ¨Nvidia GPUä¸Šçš„ä¸€æ•´å¥—å¹³å°ï¼Œå¹¶æ‰©å±•å‡ºå¤šè¯­è¨€æ”¯æŒ</p><p><img src="https://s2.loli.net/2022/08/10/Nw3FEmUvuTHM7Bq.png" alt=""></p><p>CUDA C æ˜¯æ ‡å‡†ANSI Cè¯­è¨€çš„æ‰©å±•ï¼Œæ‰©å±•å‡ºä¸€äº›è¯­æ³•å’Œå…³é”®å­—æ¥ç¼–å†™è®¾å¤‡ç«¯ä»£ç ï¼Œè€Œä¸”CUDAåº“æœ¬èº«æä¾›äº†å¤§é‡APIæ¥æ“ä½œè®¾å¤‡å®Œæˆè®¡ç®—ã€‚</p><p>å¯¹äºAPIä¹Ÿæœ‰ä¸¤ç§ä¸åŒçš„å±‚æ¬¡ï¼Œä¸€ç§ç›¸å¯¹äº¤é«˜å±‚ï¼Œä¸€ç§ç›¸å¯¹åº•å±‚ã€‚</p><ul><li>CUDAé©±åŠ¨API</li><li>CUDAè¿è¡Œæ—¶API</li></ul><p><img src="https://s2.loli.net/2022/08/10/VZ8y7pm5JPKFd3l.png" alt=""></p><p>é©±åŠ¨APIæ˜¯ä½çº§çš„APIï¼Œä½¿ç”¨ç›¸å¯¹å›°éš¾ï¼Œè¿è¡Œæ—¶APIæ˜¯é«˜çº§APIä½¿ç”¨ç®€å•ï¼Œå…¶å®ç°åŸºäºé©±åŠ¨APIã€‚<br>è¿™ä¸¤ç§APIæ˜¯äº’æ–¥çš„ï¼Œä¹Ÿå°±æ˜¯ä½ åªèƒ½ç”¨ä¸€ä¸ªã€‚ä¸¤è€…ä¹‹é—´çš„å‡½æ•°ä¸å¯ä»¥æ··åˆè°ƒç”¨ï¼Œåªèƒ½ç”¨å…¶ä¸­çš„ä¸€ä¸ªåº“ã€‚</p><p>ä¸€ä¸ªCUDAåº”ç”¨é€šå¸¸å¯ä»¥åˆ†è§£ä¸ºä¸¤éƒ¨åˆ†ï¼Œ</p><ul><li>CPU ä¸»æœºç«¯ä»£ç </li><li>GPU è®¾å¤‡ç«¯ä»£ç </li></ul><p>CUDA nvccç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ†ç¦»ä½ ä»£ç é‡Œé¢çš„ä¸åŒéƒ¨åˆ†</p><p>å¦‚ä¸‹å›¾ï¼Œä¸»æœºä»£ç ç”¨Cå†™æˆï¼Œä½¿ç”¨æœ¬åœ°çš„Cè¯­è¨€ç¼–è¯‘å™¨ç¼–è¯‘ã€‚è®¾å¤‡ç«¯ä»£ç ï¼Œä¹Ÿå°±æ˜¯æ ¸å‡½æ•°ï¼Œç”¨CUDA Cç¼–å†™ï¼Œé€šè¿‡nvccç¼–è¯‘ï¼Œé“¾æ¥é˜¶æ®µï¼Œåœ¨å†…æ ¸ç¨‹åºè°ƒç”¨æˆ–è€…æ˜æ˜¾çš„GPUè®¾å¤‡æ“ä½œæ—¶ï¼Œæ·»åŠ è¿è¡Œæ—¶åº“ã€‚</p><p><strong>æ ¸å‡½æ•°æ˜¯è®¾å¤‡ä¸Šæ‰§è¡Œçš„ç¨‹åºæ®µ</strong></p><p><img src="https://s2.loli.net/2022/08/10/HUjEedtPL2ryCOc.png" alt=""></p><p>å…¶ä¸­ï¼ŒCUDA nvccç¼–è¯‘å™¨æ˜¯ä»LLVMå¼€æºç¼–è¯‘ç³»ç»Ÿä¸ºåŸºç¡€å¼€å‘çš„ã€‚</p><p><img src="https://s2.loli.net/2022/08/10/OfWcYUVRF3rPw5x.png" alt=""></p><p>CUDAä¸ºCå’ŒC++å¼€å‘äººå‘˜æä¾›äº†ä¸€ä¸ªç»¼åˆçš„å¼€å‘ç¯å¢ƒã€‚CUDAå·¥å…·åŒ…åŒ…æ‹¬ç¼–è¯‘å™¨ã€æ•°å­¦åº“ï¼Œä»¥åŠè°ƒè¯•å’Œä¼˜åŒ–åº”ç”¨ç¨‹åºæ€§èƒ½çš„å·¥å…·ã€‚</p><p><img src="https://s2.loli.net/2022/08/10/LhAIcz4W5s6lJHi.png" alt=""></p><h2 id="ä¸ƒã€CUDA-â€œHello-Worldâ€">ä¸ƒã€CUDA â€œHello Worldâ€</h2><p>å…³äºCUDAç¯å¢ƒé…ç½®ï¼Œæœ¬ç¯‡ä¸åšä»‹ç»ã€‚ä¸åŒæ“ä½œç³»ç»Ÿéœ€è¦å®‰è£…çš„CUDAå’Œé©±åŠ¨éƒ½ä¸ä¸€æ ·ï¼Œæœ¬ç¯‡ä½¿ç”¨çš„æ˜¯<code>linux</code>ç³»ç»Ÿã€‚å…·ä½“è¯·å‚è€ƒå®˜ç½‘ï¼š<a href="https://developer.nvidia.com/">https://developer.nvidia.com/</a></p><p>ä»¥ä¸‹å°±æ˜¯CUDAçš„Hello Worldã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>__global__ <span class="token keyword">void</span> <span class="token function">helloFromGPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World from GPU!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World from CPU!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    helloFromGPU<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaDeviceReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼š</p><ul><li><p><code> __global__</code>çš„åŠŸèƒ½æ˜¯ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå‡½æ•°å°†ä¼šä»CPUä¸­è°ƒç”¨ï¼Œç„¶ååœ¨GPUä¸Šæ‰§è¡Œï¼Œ æ˜¯ä¸ªå¯ä»¥åœ¨è®¾å¤‡ä¸Šæ‰§è¡Œçš„æ ¸å‡½æ•°ã€‚</p></li><li><p><code>&lt;&lt;&lt;&gt;&gt;&gt;</code>æ˜¯cè¯­è¨€æ²¡æœ‰çš„ï¼ŒæŒ‡ä»ä¸»çº¿ç¨‹åˆ°è®¾å¤‡ç«¯ä»£ç çš„è°ƒç”¨ã€‚é‡Œé¢çš„å‚æ•°æ˜¯æ‰§è¡Œé…ç½®ï¼Œç”¨æ¥è¯´æ˜ä½¿ç”¨å¤šå°‘çº¿ç¨‹æ¥æ‰§è¡Œå†…æ ¸å‡½æ•°ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ‰10ä¸ªGPUçº¿ç¨‹è¢«è°ƒç”¨ã€‚</p></li><li><p><code>cudaDeviceRestï¼ˆï¼‰</code>ç”¨æ¥æ˜¾å¼åœ°é‡Šæ”¾å’Œæ¸…ç©ºå½“å‰è¿›ç¨‹ä¸­ä¸å½“å‰è®¾å¤‡æœ‰å…³çš„æ‰€æœ‰èµ„æºã€‚</p><p>è¿™å¥è¯å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¸èƒ½æ­£å¸¸çš„è¿è¡Œï¼Œå› ä¸ºè¿™å¥è¯åŒ…å«äº†éšå¼åŒæ­¥ï¼ŒGPUå’ŒCPUæ‰§è¡Œç¨‹åºæ˜¯å¼‚æ­¥çš„ï¼Œæ ¸å‡½æ•°è°ƒç”¨åæˆç«‹åˆ»ä¼šåˆ°ä¸»æœºçº¿ç¨‹ç»§ç»­ï¼Œè€Œä¸ç®¡GPUç«¯æ ¸å‡½æ•°æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥ä¸Šé¢çš„ç¨‹åºå°±æ˜¯GPUåˆšå¼€å§‹æ‰§è¡Œï¼ŒCPUå·²ç»é€€å‡ºç¨‹åºäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç­‰GPUæ‰§è¡Œå®Œäº†ï¼Œå†é€€å‡ºä¸»æœºçº¿ç¨‹ã€‚</p></li></ul><h3 id="ç¼–è¯‘">ç¼–è¯‘</h3><p>å¯ä»¥åœ¨LINUXå‘½ä»¤è¡Œä½¿ç”¨ä»¥ä¸‹è¯­å¥ç¼–è¯‘ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nvcc hello.cu -o hello<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ªä½¿ç”¨æ–¹å¼å’Œgccæ¯”è¾ƒæ¥è¿‘</p><p>å‰é¢ä»‹ç»è¿‡ï¼Œnvidiaæ˜¾å¡æœ‰ä¸åŒçš„æ¶æ„</p><p>ä½¿ç”¨ NVCC ç¼–è¯‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨arch æ ‡å¿— (â€™ <strong><code>-arch</code></strong>â€™) æŒ‡å®šäº† CUDA æ–‡ä»¶å°†ä¸ºå…¶ç¼–è¯‘çš„ NVIDIA GPU æ¶æ„çš„åç§°ã€‚</p><p>ä»¥ä¸‹æ˜¯ NVIDIA æ¶æ„åç§°çš„åˆ—è¡¨ï¼Œä»¥åŠå®ƒä»¬å…·æœ‰å“ªäº›è®¡ç®—èƒ½åŠ›ï¼š</p><table><thead><tr><th>Fermi</th><th>Kepler</th><th>Maxwell</th><th>Pascal</th><th>Volta</th><th>Turing</th><th>Ampere</th><th><a href="https://www.nvidia.com/en-us/data-center/hopper-architecture/">Hopper</a>*</th><th>Lovelace?</th></tr></thead><tbody><tr><td>sm_20</td><td>sm_30</td><td>sm_50</td><td>sm_60</td><td>sm_70</td><td>sm_75</td><td>sm_80</td><td>sm_90</td><td>sm_100?</td></tr><tr><td></td><td>sm_35</td><td>sm_52</td><td>sm_61</td><td>sm_72</td><td></td><td>sm_86</td><td></td><td></td></tr><tr><td></td><td>sm_37</td><td>sm_53</td><td>sm_62</td><td></td><td></td><td>sm_87</td><td></td><td></td></tr></tbody></table><blockquote><p>å…¶ä¸­ï¼š</p><p>Fermi å’Œ Kepler ä» CUDA 9 å’Œ 11 èµ·å·²å¼ƒç”¨<br>Maxwell ä» CUDA 11.6 èµ·å·²å¼ƒç”¨<br>Hopper æ˜¯ NVIDIA çš„â€œtesla-nextâ€ç³»åˆ—ï¼Œé‡‡ç”¨ 5nm å·¥è‰ºï¼Œå–ä»£ Ampereã€‚</p></blockquote><p>æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­å¥ç¼–è¯‘ï¼ŒæŒ‡å®šæ‰€éœ€çš„æ¶æ„ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nvcc -arch=sm_60 hello.cu -o hello<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨Makefileæ¥ç¼–è¯‘ï¼š</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile">APPS<span class="token operator">=</span>hello<span class="token target symbol">all</span><span class="token punctuation">:</span> <span class="token variable">$</span><span class="token punctuation">{</span>APPS<span class="token punctuation">}</span><span class="token target symbol">%</span><span class="token punctuation">:</span> %.cunvcc -O2 -arch<span class="token operator">=</span>sm_60 -o <span class="token variable">$@</span> <span class="token variable">$&lt;</span><span class="token target symbol">clean</span><span class="token punctuation">:</span>rm -f <span class="token variable">$</span><span class="token punctuation">{</span>APPS<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è¿è¡Œ">è¿è¡Œ</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ ./helloHello World from CPU!Hello World from GPU!Hello World from GPU!Hello World from GPU!Hello World from GPU!Hello World from GPU!Hello World from GPU!Hello World from GPU!Hello World from GPU!Hello World from GPU!Hello World from GPU!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…«ã€æ€»ç»“">å…«ã€æ€»ç»“</h2><p>ä¸€èˆ¬CUDAç¨‹åºåˆ†æˆä¸‹é¢è¿™äº›æ­¥éª¤ï¼š</p><ol><li>åˆ†é…GPUå†…å­˜</li><li>æ‹·è´å†…å­˜åˆ°è®¾å¤‡</li><li>è°ƒç”¨CUDAå†…æ ¸å‡½æ•°æ¥æ‰§è¡Œè®¡ç®—</li><li>æŠŠè®¡ç®—å®Œæˆæ•°æ®æ‹·è´å›ä¸»æœºç«¯</li><li>å†…å­˜é”€æ¯</li></ol><blockquote><p>è€Œä¸Šé¢çš„Hello Worldåªåˆ°ç¬¬ä¸‰æ­¥ï¼Œæ²¡æœ‰è¿›è¡Œåˆ°å†…å­˜äº¤æ¢éƒ¨åˆ†ã€‚</p></blockquote><p>CPUä¸GPUçš„ç¼–ç¨‹ä¸»è¦åŒºåˆ«åœ¨äºå¯¹GPUæ¶æ„çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œæ˜¯å¦ç†è§£æœºå™¨ç»“æ„å¯¹ç¼–ç¨‹æ•ˆç‡å½±å“éå¸¸å¤§</p><p>ä¸€å®šè¦äº†è§£ä½ çš„æœºå™¨ï¼Œæ‰èƒ½å†™å‡ºä¼˜ç§€çš„ä»£ç ã€‚ä¸”ç›®å‰è®¡ç®—è®¾å¤‡çš„æ¶æ„å†³å®šäº†å±€éƒ¨æ€§å°†ä¼šä¸¥é‡å½±å“æ•ˆç‡ã€‚</p><ul><li><p>æ•°æ®å±€éƒ¨æ€§åˆ†ä¸ºä¸¤ç§</p><ul><li><p>ç©ºé—´å±€éƒ¨æ€§ï¼šå½“ä¸€ä¸ªæ•°æ®è¢«ä½¿ç”¨ï¼Œå…¶é™„è¿‘çš„æ•°æ®å°†å¾ˆå¿«ä¼šè¢«ä½¿ç”¨</p></li><li><p>æ—¶é—´å±€éƒ¨æ€§ï¼šæ•°æ®å¯èƒ½ä¼šåœ¨çŸ­æ—¶é—´å†…è¢«é‡å¤ä½¿ç”¨ã€‚</p></li></ul></li><li><p>CUDAä¸­æœ‰ä¸¤ä¸ªæ¨¡å‹æ˜¯å†³å®šæ€§èƒ½çš„ï¼š</p><ul><li><p>å†…å­˜å±‚æ¬¡ç»“æ„</p></li><li><p>çº¿ç¨‹å±‚æ¬¡ç»“æ„</p><p>CUDA Cå†™æ ¸å‡½æ•°çš„æ—¶å€™æˆ‘ä»¬åªå†™ä¸€å°æ®µä¸²è¡Œä»£ç ï¼Œä½†æ˜¯è¿™æ®µä»£ç ä¼šè¢«æˆåƒä¸Šä¸‡çš„çº¿ç¨‹æ‰§è¡Œï¼Œæ‰€æœ‰çº¿ç¨‹æ‰§è¡Œçš„ä»£ç éƒ½æ˜¯ç›¸åŒçš„ã€‚CUDAç¼–ç¨‹æ¨¡å‹æä¾›äº†ä¸€ä¸ªå±‚æ¬¡åŒ–çš„ç»„ç»‡çº¿ç¨‹ï¼Œä¼šç›´æ¥å½±å“GPUä¸Šçš„æ‰§è¡Œé¡ºåºã€‚</p></li></ul></li><li><p>CUDAæŠ½è±¡äº†ç¡¬ä»¶å®ç°ï¼š</p><ol><li>çº¿ç¨‹ç»„çš„å±‚æ¬¡ç»“æ„</li><li>å†…å­˜çš„å±‚æ¬¡ç»“æ„</li><li>éšœç¢åŒæ­¥</li></ol></li></ul><p>å…¶ä¸­ï¼Œçº¿ç¨‹ã€å†…å­˜å°†æ˜¯CUDAç¼–ç¨‹ä¸»è¦ç ”ç©¶çš„å¯¹è±¡</p><p>ä¸ºæ­¤ï¼ŒNVIDIAæä¾›äº†å¾ˆå¤šå·¥å…·ï¼š</p><ul><li>Nvidia Nsighté›†æˆå¼€å‘ç¯å¢ƒ</li><li>CUDA-GDB å‘½ä»¤è¡Œè°ƒè¯•å™¨</li><li>æ€§èƒ½åˆ†æå¯è§†åŒ–å·¥å…·</li><li>CUDA-MEMCHECKå·¥å…·</li><li>GPUè®¾å¤‡ç®¡ç†å·¥å…·</li></ul><p>åç»­å†…å®¹ä¼šå›´ç»•CUDAå±•å¼€ä»‹ç»</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CUDA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS åäºŒã€è®¤è¯†å¹¶å®‰è£…ROS2</title>
      <link href="/2022/08/09/ros-12-ros2-intro-install/"/>
      <url>/2022/08/09/ros-12-ros2-intro-install/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS 12ï¼šå¼•å…¥ROS2</h1><h2 id="ä¸€ã€è®¤è¯†ROS2">ä¸€ã€è®¤è¯†ROS2</h2><p>ROSåœ¨éœ€æ±‚é‡å¢åŠ ä¹‹åï¼Œéœ€è¦å®ç°ï¼š</p><ul><li>å¤šæœºå™¨äººç³»ç»Ÿ</li><li>è·¨å¹³å°</li><li>å®æ—¶æ€§</li><li>ç½‘ç»œè¿æ¥</li><li>äº§å“åŒ–</li><li>é¡¹ç›®ç®¡ç†</li></ul><p>ROS2å› æ­¤å‡ºç°äº†ã€‚</p><p>ROS2æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><blockquote><ul><li><p>ROS1 åªæ”¯æŒLinuxå’ŒMacOSï¼Œè€Œ ROS2 æ”¯æŒLinux/Windows/MacOS/RTOS</p></li><li><p>æ¶æ„çš„é¢ è¦†ï¼š</p><p>ROS1çš„é€šè®¯åŸºäºTCPROS/UDPROSï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦ç»è¿‡ROS Master</p><p>ROS2ä½¿ç”¨åŸºäºDDSçš„Discoveryæœºåˆ¶ï¼Œè‡ªå‘ç°åå»ºç«‹ç¨³å®šçš„é“¾æ¥ï¼Œå®ç°çœŸæ­£çš„åˆ†å¸ƒå¼æ¶æ„</p><ul><li>ROS DDSç”±ROS Middlewareä¸­é—´ä»¶å®šä¹‰æ¥å£ï¼Œä½¿ç”¨ä¸åŒå‚å•†çš„DDSæ—¶ï¼Œåªéœ€å®‰è£…å¦ä¸€ä¸ªDDSï¼Œä»£ç æ— éœ€å†ä¿®æ”¹</li></ul></li><li><p>èŠ‚ç‚¹æ¨¡å‹ä¸åŒ</p><p>ROS1ï¼špublish/subscribe</p><p>ROS2ï¼šdiscovery</p></li><li><p>è¿›ç¨‹æ¨¡å‹ä¸åŒ</p><p>ROS1ï¼šNodelet</p><p>ROS2ï¼šIntra-process</p></li><li><p>ç¼–è¯‘ç³»ç»Ÿå‡çº§</p><p>ROS1ä½¿ç”¨rosbuildï¼Œcatkinç®¡ç†é¡¹ç›®</p><p>ROS2ä½¿ç”¨å‡çº§ç‰ˆçš„amentï¼Œcolcon</p></li><li><p>ROS2 æ”¯æŒå®æ—¶æ§åˆ¶</p></li><li><p>ROS2 å¹¿æ³›ä½¿ç”¨C++11ï¼Œå’ŒPython3.5ä»¥ä¸Š</p></li><li><p>åœ¨ ROS2 ä¸Šé€šè¿‡ros_bridgeå’Œ ROS1 è¿›è¡Œé€šä¿¡</p></li><li><p>ROS2 ä½¿ç”¨æ‰˜ç®¡å¯åŠ¨ï¼šç”¨æˆ·å¯ä»¥æŒ‡å®šèŠ‚ç‚¹å¯åŠ¨é¡ºåº</p></li><li><p>ROS2 å–æ¶ˆäº† nodelet çš„æ¦‚å¿µï¼Œæ”¯æŒå¤šèŠ‚ç‚¹åˆå§‹åŒ–</p></li><li><p>ROS2 launchæ–‡ä»¶ä½¿ç”¨ python ç¼–å†™ï¼Œç›¸æ¯”äº xml æ‹“å±•äº†åŠŸèƒ½æ€§</p></li><li><p>â€¦â€¦</p></li></ul></blockquote><p><img src="https://s2.loli.net/2022/08/09/J5U6qIusKpZQbWe.png" alt=""></p><h2 id="äºŒã€å®‰è£…">äºŒã€å®‰è£…</h2><blockquote><p>ä»¥ä¸‹æ˜¯æŒ‰ç…§Ubuntu22.04ç‰ˆæœ¬å®‰è£…</p><p>ROS2åœ¨Ubuntuåªæ”¯æŒ22.04ä¸20.04ï¼Œå…¶ä¸­20.04éœ€è¦æºç å®‰è£…</p></blockquote><p>è®¾ç½®ç¼–ç </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt update &amp;&amp; sudo apt install localessudo locale-gen en_US en_US.UTF-8sudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 export LANG=en_US.UTF-8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ æº</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt update &amp;&amp; sudo apt install curl gnupg lsb-release sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpgecho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(source /etc/os-release &amp;&amp; echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list &gt; /dev/null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å¦‚æœæ·»åŠ æºå‡ºç°<code>Failed to connect to raw.githubusercontent.com</code>çš„æŠ¥é”™ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å³å¯ï¼š</p><p>ç™»å½•ç½‘ç«™ï¼š<a href="https://www.ipaddress.com/">https://www.ipaddress.com</a></p><p>åœ¨æ‰“å¼€çš„ç½‘ç«™ä¸­å°†â€œ<a href="http://raw.githubusercontent.com">raw.githubusercontent.com</a>â€å¤åˆ¶åˆ°æŸ¥è¯¢æ ä¸­è¿›è¡Œæœç´¢ï¼Œå¯ä»¥çœ‹åˆ°åŸŸåå¯¹åº”çš„IPåœ°å€ä¿¡æ¯</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo chmod 777 /etc/hosts <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç”¨ç¼–è¾‘å™¨æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œ<strong>åœ¨æ–‡æœ«æ·»åŠ ä½ æŸ¥è¯¢åˆ°çš„ç»“æœ</strong>ï¼Œæ¯”å¦‚ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">151.101.84.133 raw.githubusercontent.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¿å­˜é€€å‡ºï¼Œæ”¹å›æƒé™ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo chmod 644 /etc/hosts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å³å¯æ­£å¸¸ä½¿ç”¨</p></blockquote><p>å®‰è£…</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt updatesudo apt upgradesudo apt install ros-humble-desktop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç¯å¢ƒå˜é‡</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">source /opt/ros/humble/setup.bashecho " source /opt/ros/humble/setup.bash" &gt;&gt; ~/.bashrc <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æµ‹è¯•ï¼š</p><h3 id="æµ‹è¯•1">æµ‹è¯•1</h3><p>åˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ros2 run demo_nodes_cpp talker<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å†åˆ›å»ºä¸€ä¸ªç›‘å¬è€…ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ros2 run demo_nodes_py listener<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>çœ‹åˆ°ä¸¤ä¸ªä¸­æ–­å¯ä»¥æ­£å¸¸æ‰“å°æ•°æ®å³å¯</p><h3 id="æµ‹è¯•2">æµ‹è¯•2</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ros2 run turtlesim turtlesim_noderos2 run turtlesim turtle_teleop_key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è§‚å¯Ÿåˆ°å¯ä»¥æ­£å¸¸è¿è¡Œå³å¯</p>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsè®¾ç½®æ±‡æ€»</title>
      <link href="/2022/08/08/win1011_setting_summary/"/>
      <url>/2022/08/08/win1011_setting_summary/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>Window è®¾ç½®æ±‡æ€»</h1><p>è¿™é‡Œæ±‡æ€»ä¸€äº›Win11ï¼ˆWin10ä¹Ÿå·®ä¸å¤šï¼‰çš„æ“ä½œå°æŠ€(fei)å·§(hua)ï¼Œä¸å®šæœŸæ›´æ–°<span class="github-emoji"><span>ğŸ¶</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f436.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><h2 id="1ã€cmdæŒ‡ä»¤è¡¥å…¨">1ã€cmdæŒ‡ä»¤è¡¥å…¨</h2><p><kbd>win</kbd>+<kbd>r</kbd>è¾“å…¥<code>regedit</code></p><p>è¿›å…¥<code>HKEY_LOCAL_MACHINE/SOFTWARE/Microsoft/Command Processor</code>ï¼Œé€‰æ‹©CompletionChar</p><p>æ•°å€¼é€‰æ‹©9ï¼Œé€‰æ‹©åè¿›åˆ¶ï¼Œç„¶åé‡å¯ç”µè„‘å³å¯</p><h2 id="2ã€èœå•æ æ”¹æˆç»å…¸èœå•">2ã€èœå•æ æ”¹æˆç»å…¸èœå•</h2><p>ç®¡ç†å‘˜èº«ä»½è¿è¡Œ<code>cmd</code>ï¼Œè¾“å…¥ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">reg add <span class="token string">"HKCU\SOFTWARE\CLASSES\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32"</span> <span class="token operator">/</span>f <span class="token operator">/</span>ve<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="3ã€æ¡Œé¢è·¯å¾„æ”¹åˆ°dç›˜">3ã€æ¡Œé¢è·¯å¾„æ”¹åˆ°dç›˜</h2><blockquote><p>æ³¨æ„å¤‡ä»½æ–‡ä»¶å“¦</p></blockquote><p><kbd>win</kbd>+<kbd>r</kbd>è¾“å…¥<code>regedit</code></p><p>è¿›å…¥<code>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders</code></p><p>å³ä¾§æ‰¾åˆ°<code>Desktop</code>ï¼ŒåŒå‡»æ‰“å¼€</p><p>å°†é‡Œé¢çš„å€¼æ”¹ä¸º<code>D:\Desktop</code>å³å¯</p><h2 id="4ã€ç£ç›˜åˆ†é…ç©ºé—´">4ã€ç£ç›˜åˆ†é…ç©ºé—´</h2><p>å³é”® â€œæ­¤ç”µè„‘â€ ï¼Œèœå•æ é€‰æ‹© â€œç®¡ç†â€ ï¼Œé€‰æ‹© â€œç£ç›˜ç®¡ç†â€ å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS åä¸€ã€å‘½åç©ºé—´</title>
      <link href="/2022/08/08/ros-11-namespace/"/>
      <url>/2022/08/08/ros-11-namespace/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS åä¸€: å‘½åç©ºé—´</h1><p>å¦‚æœä½ ç†Ÿæ‚‰c++ä»£ç ï¼Œä¸€å®šå¯¹è¿™å¥è¯å¾ˆç†Ÿæ‚‰</p><p><code>using namespace std;</code></p><p>è¿™ä¸€å¥è¯è¡¨ç¤ºçš„æ˜¯ï¼Œä½¿ç”¨stdè¿™ä¸ªå‘½åç©ºé—´ï¼Œæ­¤æ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨<code>cout</code>ï¼Œè€Œä¸ç”¨å®Œæ•´å†™ä¸Š<code>std::cout</code>ã€‚</p><p>åœ¨ROSä¸­ï¼Œå‘½åç©ºé—´çš„æ¦‚å¿µæ˜¯ç›¸ä¼¼çš„ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸ºäº†åŒºåˆ†åç§°ï¼Œè¿™ä¸ªåç§°åŒ…æ‹¬<u>èŠ‚ç‚¹åç§°ã€è¯é¢˜åç§°ã€å‚æ•°åç§°</u>ç­‰ç­‰</p><p>æ¯”å¦‚æŸ¥è¯¢topicåˆ—è¡¨æ—¶ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ rostopic list/rosout/rosout_agg/tf/tf_static/turtle1/cmd_vel/turtle1/color_sensor/turtle1/pose/turtle2/cmd_vel/turtle2/color_sensor/turtle2/pose<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°åŒæ—¶æœ‰ä¸¤ä¸ªå«poseçš„topicï¼Œä½†æ˜¯å› ä¸ºåœ¨poseå‰é¢æ·»åŠ äº†ä¸€å±‚å‘½åç©ºé—´ï¼Œä½¿å…¶é¿å…äº†å†²çªï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨åŒä¸€ä»½ä»£ç åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œäº†ï¼Œå®ç°çš„èŠ‚ç‚¹çš„å¤ç”¨ã€‚</p><h2 id="1ã€è®¡ç®—å›¾æº">1ã€è®¡ç®—å›¾æº</h2><p>æ ¹æ®å‰é¢çš„å­¦ä¹ ï¼Œåœ¨ROSç³»ç»Ÿä¸­è¿™äº›èŠ‚ç‚¹ã€è¯é¢˜ã€æœåŠ¡å’Œå‚æ•°ç­‰æ¦‚å¿µï¼Œåœ¨ROSç³»ç»Ÿç»Ÿç§°ä¸ºè®¡ç®—å›¾æºã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"pokemon_server"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ros<span class="token double-colon punctuation">::</span>NodeHandle ser_pokemon_node<span class="token punctuation">;</span> Callback ros<span class="token double-colon punctuation">::</span>ServiceServer pokemon_server <span class="token operator">=</span> ser_pokemon_node<span class="token punctuation">.</span><span class="token function">advertiseService</span><span class="token punctuation">(</span><span class="token string">"/pokemon_show"</span><span class="token punctuation">,</span> Callback<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å‚è€ƒä¸Šé¢çš„ä»£ç ï¼Œå…¶ä¸­ç¬¬ä¸‰è¡Œçš„<code>/pokemon_show</code>å°±æ˜¯ä¸€ç§å‘½åç©ºé—´åç§°çš„æ–¹å¼</p><h2 id="2ã€è®¡ç®—å›¾æºåç§°çš„å‘½åè§„åˆ™">2ã€è®¡ç®—å›¾æºåç§°çš„å‘½åè§„åˆ™</h2><p>åœ¨ROSç³»ç»Ÿä¸­æ— è®ºæ˜¯èŠ‚ç‚¹è¿˜æ˜¯è¯é¢˜éƒ½æœ‰è‡ªå·±çš„åç§°ï¼Œå¦‚C++è¯­è¨€ä¸­çš„æ ‡è¯†ç¬¦ä¸€æ ·ï¼Œåœ¨ROSä¸­å‘½åä¹Ÿæœ‰è‡ªå·±çš„è§„åˆ™ï¼š<br>1ï¼‰é¦–å­—ç¬¦å¿…é¡»æ˜¯å­—æ¯ï¼ˆA-Z|a-zï¼‰ã€æ³¢æµªçº¿ï¼ˆ~ï¼‰æˆ–è€…å·¦æ–œæ†ï¼ˆ/ï¼‰<br>2ï¼‰åç»­å­—ç¬¦å¯ä»¥æ˜¯å­—æ¯å’Œæ•°å­—ã€ä¸‹åˆ’çº¿æˆ–è€…å·¦æ–œæ </p><h2 id="3ã€è®¡ç®—å›¾æºåç§°çš„åˆ†ç±»">3ã€è®¡ç®—å›¾æºåç§°çš„åˆ†ç±»</h2><h3 id="1ï¼‰å…¨å±€åç§°ï¼š-global-nameï¼šå³åœ¨ä»»ä½•åœ°æ–¹ï¼ˆåŒ…æ‹¬ä»£ç ã€å‘½ä»¤è¡Œå·¥å…·ã€å›¾å½¢ç•Œé¢å·¥å…·ç­‰çš„ä»»ä½•åœ°æ–¹ï¼‰éƒ½å¯ä»¥ä½¿ç”¨">1ï¼‰å…¨å±€åç§°ï¼š/global/nameï¼šå³åœ¨ä»»ä½•åœ°æ–¹ï¼ˆåŒ…æ‹¬ä»£ç ã€å‘½ä»¤è¡Œå·¥å…·ã€å›¾å½¢ç•Œé¢å·¥å…·ç­‰çš„ä»»ä½•åœ°æ–¹ï¼‰éƒ½å¯ä»¥ä½¿ç”¨</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"publish_node_A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>Publisher sub_pub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>std_msgs<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/A/chatterA"</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>ä»¥â€œ/â€å¼€å¤´çš„åç§°æ˜¯<strong>å…¨å±€åç§°</strong>â€”â€”å®ƒä»¬è¢«è®¤ä¸ºæ˜¯å®Œå…¨è§£æçš„ã€‚ rosç³»ç»Ÿçš„æ ¹å‘½åç©ºé—´æ˜¯"/"</li></ul><h3 id="2ï¼‰ç›¸å¯¹åç§°ï¼šrelative-nameï¼›">2ï¼‰ç›¸å¯¹åç§°ï¼šrelative/nameï¼›</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"publish_node_A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>Publisher sub_pub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>std_msgs<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"A/chatterA"</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><strong>ç›¸å¯¹åç§°</strong>åˆ™æ˜¯åœ¨åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰å·¦æ–œæ ï¼ˆ/ï¼‰çš„è®¡ç®—å›¾æºåç§°ï¼ŒROSåœ¨è§£æç›¸å¯¹åç§°çš„æ—¶å€™éœ€è¦å°†å…¶è½¬åŒ–ä¸ºå…¨å±€åç§°ï¼Œè€Œè½¬æ¢çš„æ–¹å¼å°±æ˜¯å°†å…¶é»˜è®¤çš„å‘½åç©ºé—´çš„åç§°åŠ åœ¨ç›¸å¯¹åç§°ä¹‹å‰ã€‚</li><li>ç¡®å®šé»˜è®¤å‘½åç©ºé—´æœ‰ä¸‰ç§æ–¹å¼ï¼š<ul><li>1ï¼‰é€šè¿‡å‘½ä»¤å‚æ•°è®¾ç½®ï¼šè°ƒç”¨ros::init()çš„ROSçš„ROSç¨‹åºä¼šæ¥æ”¶åä¸º<code>_ns</code>å‘½ä»¤è¡Œå‚æ•°ï¼Œèµ‹å€¼çš„æ–¹å¼ä¸ºï¼š <code>_ns:=name</code></li><li>2ï¼‰åœ¨launchæ–‡ä»¶ä¸­è®¾ç½®</li><li>3ï¼‰ ä½¿ç”¨ç¯å¢ƒå˜é‡è®¾ç½®</li></ul></li></ul><h3 id="3ï¼‰ç§æœ‰åç§°ï¼š-private-nameï¼›">3ï¼‰ç§æœ‰åç§°ï¼š~private/nameï¼›</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"publish_node_A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>NodeHandle <span class="token function">nh</span><span class="token punctuation">(</span><span class="token string">"~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>Publisher sub_pub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>std_msgs<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"chatterA"</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>ä»¥â€œ~â€å¼€å¤´çš„åç§°æ˜¯<strong>ç§æœ‰åç§°</strong>ã€‚ä»–ä»¬å°†èŠ‚ç‚¹çš„åç§°è½¬æ¢ä¸ºå‘½åç©ºé—´ã€‚ä¾‹å¦‚ï¼Œå‘½åç©ºé—´<code>/wg</code> ä¸­çš„<code>node1</code>å…·æœ‰ç§æœ‰å‘½åç©ºé—´<code>/wg/node1</code>ã€‚ç§æœ‰åç§°åœ¨<strong>é€šè¿‡å‚æ•°æœåŠ¡å™¨å°†å‚æ•°ä¼ é€’ç»™ç‰¹å®šèŠ‚ç‚¹</strong>å¾ˆæœ‰ç”¨ã€‚</li><li>ç§æœ‰åç§°æ˜¯ä¸€ä¸ªèŠ‚ç‚¹çš„å†…éƒ¨ç§æœ‰çš„èµ„æºåç§°ï¼Œåªä¼šåœ¨èŠ‚ç‚¹å†…éƒ¨ä½¿ç”¨ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œè§£ææ˜¯ç›¸å¯¹äºèŠ‚ç‚¹çš„å‘½åç©ºé—´å®Œæˆçš„ã€‚ä¾‹å¦‚ï¼ŒèŠ‚ç‚¹<code>/wg/node1</code>å…·æœ‰å‘½åç©ºé—´<code>/wg</code>ï¼Œå› æ­¤åç§°<code>node2</code>å°†è§£æä¸º<code>/wg/node2</code>ã€‚</li></ul><h3 id="4ï¼‰åŸºç¡€åç§°ï¼šbase">4ï¼‰åŸºç¡€åç§°ï¼šbase</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"publish_node_A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>Publisher sub_pub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>std_msgs<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"chatterA"</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>æ²¡æœ‰å‘½åç©ºé—´é™å®šç¬¦çš„åç§°æ˜¯<strong>åŸºæœ¬åç§°</strong>ã€‚åŸºæœ¬åç§°å®é™…ä¸Šæ˜¯ç›¸å¯¹åç§°çš„å­ç±»ï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„è§£æè§„åˆ™ã€‚åŸºæœ¬åç§°æœ€å¸¸ç”¨äºåˆå§‹åŒ–èŠ‚ç‚¹åç§°ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS åã€Launchå…¥é—¨</title>
      <link href="/2022/08/08/ros-10-launch-flie/"/>
      <url>/2022/08/08/ros-10-launch-flie/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS åï¼šlaunchæ–‡ä»¶å…¥é—¨</h1><p>launchæ–‡ä»¶æ˜¯ä¸€ç§ä»¥xmlä¸ºä¸»è¦è¯­æ³•çš„æè¿°æ–‡ä»¶</p><p><strong>å¯åŠ¨launchæ–‡ä»¶å¯ä»¥è‡ªåŠ¨å¯åŠ¨ROS Masterã€‚</strong></p><h2 id="ä¸€ã€åŸºæœ¬è¯­æ³•">ä¸€ã€åŸºæœ¬è¯­æ³•</h2><ul><li><code>&lt;launch&gt;</code>: launchæ–‡ä»¶ä¸­çš„æ›´å…ƒç´ ä½¿ç”¨è¿™ä¸ªæ ‡ç­¾é˜¿è±å®šä¹‰</li><li><code>&lt;node&gt;</code>:å¯åŠ¨èŠ‚ç‚¹<ul><li><p>pkgï¼šèŠ‚ç‚¹æ‰€åœ¨çš„åŠŸèƒ½åŒ…åç§°</p></li><li><p>typeï¼šèŠ‚ç‚¹çš„å¯æ‰§è¡Œæ–‡ä»¶åç§°</p></li><li><p>nameï¼šèŠ‚ç‚¹è¿è¡Œæ—¶çš„åç§°</p></li><li><p>outputï¼š(å¯é€‰) â€œlog | screenâ€ ã€‚ é»˜è®¤å€¼ä¸ºâ€œlogâ€ã€‚</p><ul><li>â€˜screenâ€™ï¼Œstdout / stderrä»èŠ‚ç‚¹å°†è¢«å‘é€åˆ°å±å¹•ã€‚</li><li>â€œlogâ€ï¼Œstdout / stderrè¾“å‡ºå°†è¢«å‘é€åˆ°$ ROS_HOME/ logä¸­çš„æ—¥å¿—æ–‡ä»¶ï¼Œstderrå°†ç»§ç»­å‘é€åˆ°å±å¹•ã€‚</li></ul></li><li><p>respawnï¼š(å¯é€‰)  å¸ƒå°”å€¼</p><p>å¦‚æœèŠ‚ç‚¹é€€å‡ºï¼Œåˆ™è‡ªåŠ¨é‡æ–°å¯åŠ¨èŠ‚ç‚¹ã€‚</p><p>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œè®¾ç½®å¤ä½å±æ€§ä¸ºçœŸçš„æ—¶å€™ï¼Œ respawn=â€trueâ€ï¼Œè¿™æ ·å½“èŠ‚ç‚¹åœæ­¢çš„æ—¶å€™ï¼Œroslaunchä¼šé‡æ–°å¯åŠ¨è¯¥èŠ‚ç‚¹ã€‚</p><p>æ¯”å¦‚åœ¨æŸä¸ªèŠ‚ç‚¹å› ä¸ºè½¯ä»¶å´©æºƒæˆ–ç¡¬ä»¶æ•…éšœä»¥åŠå…¶ä»–åŸå› å¯¼è‡´è¿‡æ—©é€€å‡ºç³»ç»Ÿçš„æ—¶å€™ä¼šèµ·åˆ°ä½œç”¨ã€‚</p><ul><li><p>respawn_delay (å¯é€‰ï¼Œé»˜è®¤ä¸º0)</p><p>å¦‚æœrespawnä¸ºtrueï¼Œroslaunchå°è¯•é‡æ–°å¯åŠ¨ä¹‹å‰ï¼Œæ£€æµ‹åˆ°èŠ‚ç‚¹æ•…éšœåç­‰å¾…respawn_delayç§’</p></li></ul></li><li><p>requiredï¼š(å¯é€‰) å¸ƒå°”å€¼</p><p>å½“ä¸€ä¸ªrequired nodeç»ˆæ­¢åï¼Œæ‰€æœ‰å…¶ä»–çš„nodeséƒ½ä¼šç»ˆæ­¢ï¼Œå¹¶é€€å‡ºã€‚è¿™ç§å‘½ä»¤æœ‰æ—¶å¾ˆæœ‰ç”¨ã€‚æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªå¾ˆé‡è¦çš„nodeå¤±è´¥åï¼Œæ•´ä¸ªä¼šè¯éƒ½ä¼šè¢«æ‰”æ‰ï¼Œé‚£äº›åŠ ä¸Šäº†respawnå±æ€§çš„nodesä¹Ÿä¼šåœæ­¢ã€‚</p></li><li><p>nsï¼š(å¯é€‰)èŠ‚ç‚¹çš„å‘½åç©ºé—´</p><p>åœ¨è®¾ç½®çš„å‘½åç©ºé—´ä¸­å¯åŠ¨èŠ‚ç‚¹ã€‚å‰ææ˜¯èŠ‚ç‚¹çš„ä»£ç åœ¨åˆ›å»º å‘å¸ƒè€… å’Œ è®¢é˜…è€… å¯¹è±¡æ—¶ä½¿ç”¨äº†åƒ <code>turtle1/pose</code> è¿™æ ·çš„ç›¸å¯¹åç§° (è€Œä¸æ˜¯<code>/turtle1/pose</code> è¿™æ ·çš„å…¨å±€åç§°)ã€‚</p><p>åŒæ ·ï¼Œå¯åŠ¨æ–‡ä»¶ä¸­çš„èŠ‚ç‚¹åç§°æ˜¯ç›¸å¯¹åç§°ã€‚</p></li><li><p>argsï¼š(å¯é€‰)</p><p>args =â€œarg1 arg2 â€¦â€¦ argnâ€ã€‚ä¼ é€’å‚æ•°åˆ°èŠ‚ç‚¹ã€‚</p></li><li><p>machineï¼š(å¯é€‰)</p><p>åœ¨æŒ‡å®šæœºå™¨ä¸Šå¯åŠ¨èŠ‚ç‚¹ã€‚</p></li><li><p>clear_params ï¼š(å¯é€‰)</p><p>åœ¨å¯åŠ¨å‰åˆ é™¤èŠ‚ç‚¹çš„ç§æœ‰å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰å‚æ•°ã€‚</p></li><li><p>launch-prefixï¼š(å¯é€‰)</p><p>ç”¨äºé¢„å…ˆæ·»åŠ åˆ°èŠ‚ç‚¹çš„å¯åŠ¨å‚æ•°çš„å‘½ä»¤/å‚æ•°ã€‚</p></li></ul></li></ul><p>å¯ä»¥åœ¨<code>&lt;node&gt;</code>æ ‡è®°ä¸­ä½¿ç”¨ä»¥ä¸‹XML æ ‡ç­¾ï¼š</p><ul><li><p><code>&lt;env&gt;</code>â€”â€”ä¸ºèŠ‚ç‚¹è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p></li><li><p><code>&lt;group&gt;</code>â€”â€”æ ‡ç­¾å¯ä»¥å¯¹èŠ‚ç‚¹åˆ†ç»„ï¼Œå…·æœ‰ ns å±æ€§ï¼Œå¯ä»¥è®©èŠ‚ç‚¹å½’å±æŸä¸ªå‘½åç©ºé—´</p></li><li><p><code>&lt;remap&gt;</code>â€”â€”ä¸ºæ­¤èŠ‚ç‚¹è®¾ç½®é‡æ–°æ˜ å°„å‚æ•°ã€‚</p><p>é‡æ˜ å°„æ˜¯åŸºäºæ›¿æ¢çš„æ€æƒ³ï¼Œæ¯ä¸ªé‡æ˜ å°„åŒ…å«ä¸€ä¸ªåŸå§‹åç§°å’Œä¸€ä¸ªæ–°åç§°ã€‚æ¯å½“èŠ‚ç‚¹ä½¿ç”¨é‡æ˜ å°„ä¸­çš„åŸå§‹åç§°æ—¶ï¼ŒROSå®¢æˆ·ç«¯åº“å°±ä¼šå°†å®ƒé»˜é»˜åœ°æ›¿æ¢æˆå…¶å¯¹åº”çš„æ–°åç§°ã€‚</p><p>ä¾‹å¦‚ï¼Œè¿è¡Œä¸€ä¸ª turtlesim çš„å®ä¾‹ï¼Œ å¦‚æœæƒ³è¦æŠŠæµ·é¾Ÿçš„å§¿æ€æ•°æ®å‘å¸ƒåˆ°è¯é¢˜/tim è€Œä¸æ˜¯/turtle1/poseï¼Œå°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><p><code>rosrun turtlesim turtlesim_node turtle1/pose:=tim</code></p><p>é€šè¿‡å¯åŠ¨æ–‡ä»¶çš„æ–¹å¼ï¼Œåªéœ€åœ¨å¯åŠ¨æ–‡ä»¶å†…ä½¿ç”¨é‡æ˜ å°„ï¼ˆremapï¼‰å…ƒç´ å³å¯ï¼š</p><p><code>&lt;remap from=â€turtle1/poseâ€to â€timâ€/&gt;</code></p></li><li><p><code>&lt;rosparam&gt;</code>â€”â€”å°†rosparamæ–‡ä»¶åŠ è½½åˆ°æ­¤èŠ‚ç‚¹çš„ ~/ localå‘½åç©ºé—´ä¸­ã€‚</p></li><li><p><code>&lt;param&gt;</code>â€”â€”åœ¨èŠ‚ç‚¹çš„ ~/ localå‘½åç©ºé—´ä¸­è®¾ç½®ä¸€ä¸ªå‚æ•°ã€‚</p></li></ul><h2 id="äºŒã€demo">äºŒã€demo</h2><p>ä»¥ä¸Šä¸€ç¯‡å°æµ·é¾Ÿtfæ¡ˆä¾‹ä¸ºä¾‹ï¼Œæµ·é¾Ÿ2ä¼šä¸€ç›´è·Ÿéšæµ·é¾Ÿ1ä¸€ç›´è¿åŠ¨</p><p>å…·ä½“æ¡ˆä¾‹å’Œä»£ç å¯å‚è€ƒï¼š<a href="https://tuoyou-hao.github.io/2022/08/02/ros-9-tf-introduction/">tfåæ ‡ç³»ç®€ä»‹</a></p><blockquote><p>å‚è€ƒç¬¬ä¸€éƒ¨åˆ†çš„ä»‹ç»ï¼Œæ¥çœ‹ä»¥ä¸‹çš„demo</p></blockquote><p><strong>c++</strong></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim_node<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sim<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle_teleop_key<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teleop<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>True<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>learn-tf<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>broadcaster<span class="token punctuation">"</span></span> <span class="token attr-name">args</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/turtle1<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle_tf_b1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>learn-tf<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>broadcaster<span class="token punctuation">"</span></span> <span class="token attr-name">args</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/turtle2<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle_tf_b2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>learn-tf<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listener<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listener<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>python</strong></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim_node<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sim<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtlesim<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle_teleop_key<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teleop<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>True<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle1_tf_broadcaster<span class="token punctuation">"</span></span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>learn-tf<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>broadcaster.py<span class="token punctuation">"</span></span> <span class="token attr-name">respawn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>string<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle1<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle2_tf_broadcaster<span class="token punctuation">"</span></span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>learn-tf<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>broadcaster.py<span class="token punctuation">"</span></span> <span class="token attr-name">respawn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>string<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>turtle2<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>learn-tf<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listener.py<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listener<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–å†™å®Œæ¯•åï¼Œç›´æ¥ä½¿ç”¨<code>roslaunch &lt;è·¯å¾„/launchæ–‡ä»¶å&gt;</code>å³å¯ç›´æ¥è¿è¡Œï¼Œå¹¶æ— éœ€å¯åŠ¨ROS Masterã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS ä¹ã€åæ ‡ç®¡ç†ç³»ç»ŸTfç®€ä»‹</title>
      <link href="/2022/08/02/ros-9-tf-introduction/"/>
      <url>/2022/08/02/ros-9-tf-introduction/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS ä¹ï¼šåæ ‡ç®¡ç†ç³»ç»Ÿtfç®€ä»‹</h1><p>å…³äºæœºå™¨äººå­¦ä¸­çš„åæ ‡å˜æ¢ï¼ŒåŸæœ¬è®¡åˆ’åœ¨æœ¬ç¯‡ä»‹ç»ï¼Œå¥ˆä½•æ•´ç†è¿‡åçš„ç¯‡å¹…è¿‡é•¿ï¼Œè¿˜çƒ¦è¯·ç§»æ­¥<a href="https://tuoyou-hao.github.io/2022/08/02/slam-1-Fundamentals-of-three-dimensional-space-mathematics/">ä¸‰ç»´åæ ‡ä»‹ç»</a>äº†è§£ç›¸å…³çš„å‰ç½®çŸ¥è¯†ã€‚</p><h2 id="ä¸€ã€tfç®€ä»‹">ä¸€ã€tfç®€ä»‹</h2><p>ç”±äºæœºå™¨äººä¸Šä¼šå®‰è£…ç›¸å½“å¤šçš„ç»„ä»¶ï¼Œæ¯”å¦‚æ¿€å…‰é›·è¾¾ã€æ‘„åƒæœºç­‰ç­‰ï¼Œä»–ä»¬éƒ½ä¼šç»„è£…åœ¨æœºå™¨äººå¤–å£³ä¸Šçš„ä¸åŒä½ç½®ï¼Œå› æ­¤ä»–ä»¬æ‹¥æœ‰å„è‡ªä¸åŒçš„åæ ‡ç³»ã€‚</p><p>è€Œå½“ä¸€ä¸ªæœºå™¨äººè®¾è®¡çš„å¾ˆåºå¤§çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰å¿’å„¿å¤šçš„åæ ‡ç³»è¦æˆ‘ä»¬ç®¡ç†ï¼Œéœ€è¦è¿ç®—ç›¸å½“å¤šçš„çŸ©é˜µã€‚</p><p>tfåŠŸèƒ½åŒ…ä¼šå¸®åŠ©æˆ‘ä»¬ç®¡ç†åæ ‡ç³»ï¼ŒæŠŠåº•å±‚çš„æ•°å­¦è®¡ç®—éƒ½å°è£…å¥½äº†ï¼Œæˆ‘ä»¬æ— éœ€å†å®ç°æ•°å­¦è®¡ç®—åŠŸèƒ½ã€‚tfä¼šå¹¿æ’­å’Œç›‘å¬åæ ‡å˜æ¢ï¼Œè¿™å’Œæˆ‘ä»¬ä¹‹å‰äº†è§£åˆ°çš„Publisherä¸Serviceè¿™ä¸¤å¥—é€šè®¯æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>tfä¼šè®°å½•10ç§’å†…æœºå™¨äººæ‰€æœ‰åæ ‡ç³»çš„ä½ç½®å…³ç³»ã€‚æ‰€æœ‰åæ ‡ç³»éƒ½ä¼šä»¥æ ‘å½¢æ•°æ®ç»“æ„å­˜å‚¨ï¼ˆtf treeï¼‰ã€‚</p><h2 id="äºŒã€tfå®‰è£…ä¸demoè¿è¡Œ">äºŒã€tfå®‰è£…ä¸demoè¿è¡Œ</h2><ul><li>å®‰è£…turtle tfã€‚æœ¬æ•™ç¨‹ç”¨çš„æ˜¯melodicç‰ˆæœ¬çš„ROSï¼Œéœ€è¦æ ¹æ®ç‰ˆæœ¬å·</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt-get install ros-melodic-turtle-tf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>è¿è¡Œdemoã€‚åˆ†åˆ«ç”¨ä¸åŒçš„ç»ˆç«¯æ¥è¿è¡Œã€‚</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">roslaunch turtle_tf turtle_tf_demo.launch#è¿è¡Œlaunchè„šæœ¬rosrun turtlesim turtle_teleop_key#æ§åˆ¶å°æµ·é¾Ÿç§»åŠ¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><p>å…¶ä¸­ï¼Œ<code>roslaunch</code>æ˜¯ROSå¯åŠ¨launchè„šæœ¬ä½¿ç”¨çš„æŒ‡ä»¤ï¼Œåç»­ä¼šä»‹ç»launchæ–‡ä»¶çš„ç¼–ç¨‹</p></li><li><p>å¯åŠ¨åï¼Œé€šè¿‡<code>turtle_teleop_key</code>æ§åˆ¶å°æµ·é¾Ÿç§»åŠ¨ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬äºŒåªå°æµ·é¾Ÿä¼šæ¯”è¾ƒç¬¬ä¸€åªæµ·é¾Ÿçš„åæ ‡ï¼Œç„¶åä¼šä¸€ç›´è·Ÿéšç¬¬ä¸€åªå°æµ·é¾Ÿã€‚</p></li></ul><h3 id="2-1-tfçš„å·¥å…·">2.1 tfçš„å·¥å…·</h3><h4 id="1ã€view-frames">1ã€view_frames</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosrun tf view_frames#æŸ¥çœ‹ç›®å‰tfä¹‹é—´çš„å…³ç³»çš„å¯è§†åŒ–å·¥å…·<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>tfçš„<code>view_frames</code>æ˜¯æŸ¥çœ‹tfä¹‹é—´å…³ç³»çš„å¯è§†åŒ–å·¥å…·ã€‚ä»–ä¼šå…ˆç›‘å¬äº”ç§’é’Ÿï¼Œç„¶åä¿å­˜è¿™äº›å›¾åˆ°ä¸€ä¸ªpdfæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶ä¼šæ”¾åœ¨ç»ˆç«¯çš„å½“å‰ç›®å½•ä¸‹ã€‚</li></ul><p><img src="https://s2.loli.net/2022/08/02/aWkiRvHZDuFnAfV.png" alt="tf-view_frames"></p><p>worldåæ ‡ç³»æ˜¯ä¸€ä¸ªå…¨å±€çš„åæ ‡ç³»ï¼Œè®°å½•æ•´ä¸ªä»¿çœŸå™¨çš„åæ ‡åŸç‚¹ã€‚ä¸¤ä¸ªturtleæ˜¯ä¸¤ä¸ªä¼šç§»åŠ¨çš„åæ ‡ç³»ã€‚ä¸Šé¢çš„<strong>tf tree</strong>å›¾å°±è®°å½•äº†ä¸‰ä¸ªåæ ‡ç³»ä¹‹é—´çš„å…³ç³»ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#rosrun tf tf_echo &lt;node1&gt; ... &lt;node n&gt;rosrun tf tf_echo turtle1 turtle2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="2ã€tf-echo">2ã€tf_echo</h4><p><code>tf_echo</code>æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ç›´æ¥å¸®æˆ‘ä»¬æŸ¥è¯¢å‡ ä¸ªåæ ‡ç³»ä¹‹é—´çš„å…³ç³»ã€‚ä»–ä¼šæœ‰ç±»ä¼¼å¦‚ä¸‹è¾“å‡ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">At time 1659434555.866- Translation: [0.000, 0.000, 0.000]- Rotation: in Quaternion [0.000, 0.000, 0.707, 0.707]            in RPY (radian) [0.000, -0.000, 1.571]            in RPY (degree) [0.000, -0.000, 90.000]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>Translationï¼šæ˜¯æŒ‡åœ¨XYZåæ ‡ä¸Šçš„å¹³ç§»ï¼Œä¸‰ä¸ªå€¼åˆ†åˆ«ä»£è¡¨X,Y,Z</p></li><li><p>Rotationï¼šæ˜¯æŒ‡å¦‚ä½•æ—‹è½¬ä¼šå¾—åˆ°ä¸€æ ·çš„å§¿æ€ã€‚é‡Œé¢ä¸‰è¡Œæ•°æ®æ˜¯ç­‰ä»·çš„ï¼ŒçŸ¥è¯†ç”¨ä¸‰ç§ä¸åŒçš„æè¿°æ–¹å¼å±•ç¤ºå‡ºæ¥ï¼š</p><ul><li>Quaternionæ˜¯æŒ‡å››å…ƒæ•°ï¼Œç”¨XYZWè¡¨ç¤ºã€‚</li><li>RPYæ˜¯æŒ‡åˆ†åˆ«æŒ‰ç…§xè½´ï¼Œyè½´ï¼Œzè½´æ—‹è½¬<ul><li>radianæ˜¯é€šè¿‡å¼§åº¦è¡¨ç¤º</li><li>degreeæ˜¯é€šè¿‡è§’åº¦è¡¨ç¤º</li></ul></li></ul></li></ul><h4 id="3ã€rviz">3ã€rviz</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosrun rviz rviz -d 'rospack find turtle_tf' /rivz/turtle_rivz.rivz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åè¦åœ¨rvizç•Œé¢å·¦ä¾§çš„<code>Fixed Frame</code>é€‰é¡¹é€‰æ‹©<code>world</code>ï¼Œåœ¨å·¦ä¸‹è§’<code>add</code>é€‰é¡¹æ‰“å¼€èœå•ï¼Œæ»‘åˆ°æœ€åº•ä¸‹å‹¾é€‰<code>tf</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°å‰demoæ­£åœ¨è¿è¡Œçš„ä¸¤åªå°æµ·é¾Ÿäº†ã€‚å¯ä»¥è¯•ç€ä½¿ç”¨<code>turtle_teleop_key</code>æ§åˆ¶å°æµ·é¾Ÿï¼Œçœ‹rvizçš„å®æ—¶æ•ˆæœã€‚</p><p>å¯¹äºä¸¤ä¸ªturtleçš„åæ ‡å…³ç³»æ¥è¯´ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å¼å­è®¡ç®—ï¼Œæ˜¯ä¸¤ä¸ª4x4çŸ©é˜µçš„ä¹˜æ³•ï¼š<br>$$<br>T_{turtle1-turtle2}=T_{turtle1-world}\times T_{world-turtle2}<br>$$</p><h2 id="ä¸‰ã€ç¼–ç¨‹å®ç°">ä¸‰ã€ç¼–ç¨‹å®ç°</h2><h3 id="1ã€tfå¹¿æ’­å™¨-Broadcaster">1ã€tfå¹¿æ’­å™¨(Broadcaster)</h3><h4 id="c">c++</h4><p>å¤´æ–‡ä»¶å’Œå…¨å±€å˜é‡</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;tf/transform_broadcaster.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;turtlesim/Pose.h&gt;</span></span>std<span class="token double-colon punctuation">::</span>string turtle_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span>argv<span class="token punctuation">,</span><span class="token string">"tf_broadcaster"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ£€æŸ¥è¾“å…¥çš„å‚æ•°ï¼Œå¹¶ä¿å­˜ä¸‹æ¥</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>argc<span class="token operator">!=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">ROS_ERROR</span><span class="token punctuation">(</span><span class="token string">"Need turtle name as argument!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    turtle_name <span class="token operator">=</span> argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle tf_b_node<span class="token punctuation">;</span>    <span class="token comment">//åˆå§‹åŒ–è®¢é˜…è€…</span>    ros<span class="token double-colon punctuation">::</span>Subscriber tf_sub <span class="token operator">=</span> tf_b_node<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>turtle_name<span class="token operator">+</span><span class="token string">"/pose"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>TfPoseCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å›è°ƒå‡½æ•°ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">TfPoseCallback</span><span class="token punctuation">(</span><span class="token keyword">const</span> turtlesim<span class="token double-colon punctuation">::</span>PoseConstPtr<span class="token operator">&amp;</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//åˆ›å»ºä¸€ä¸ªå¹¿æ’­å™¨</span>    <span class="token keyword">static</span> tf<span class="token double-colon punctuation">::</span>TransformBroadcaster tf_broadcaster<span class="token punctuation">;</span>    <span class="token comment">//è®¾ç½®å¹³ç§»çš„å‘é‡å‚æ•°</span>    tf<span class="token double-colon punctuation">::</span>Transform transform<span class="token punctuation">;</span>    <span class="token comment">//æŠŠå¹³ç§»å€¼æ”¾åˆ°transformé‡Œ</span>    transform<span class="token punctuation">.</span><span class="token function">setOrigin</span><span class="token punctuation">(</span>tf<span class="token double-colon punctuation">::</span><span class="token function">Vector3</span><span class="token punctuation">(</span>msg<span class="token operator">-&gt;</span>x<span class="token punctuation">,</span>msg<span class="token operator">-&gt;</span>y<span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®¾ç½®æ—‹è½¬å››å…ƒæ•°</span>    tf<span class="token double-colon punctuation">::</span>Quaternion q<span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">setRPY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>msg<span class="token operator">-&gt;</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æŠŠå››å…ƒæ•°å€¼æ”¾åˆ°transformé‡Œ</span>    transform<span class="token punctuation">.</span><span class="token function">setRotation</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//å¹¿æ’­æ•°æ®ï¼Œå¹¶å°†æ•°æ®æ”¾åœ¨tf treeé‡Œ</span>    <span class="token comment">//å‡½æ•°ï¼šStampedTransform(å­˜çš„å˜é‡ï¼Œæ—¶é—´æˆ³(now)ï¼Œåæ ‡ç³»1ï¼Œåæ ‡ç³»2)</span>    tf_broadcaster<span class="token punctuation">.</span><span class="token function">sendTransform</span><span class="token punctuation">(</span>tf<span class="token double-colon punctuation">::</span><span class="token function">StampedTransform</span>        <span class="token punctuation">(</span>transform<span class="token punctuation">,</span>ros<span class="token double-colon punctuation">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"world"</span><span class="token punctuation">,</span>turtle_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>cmake</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_executable</span><span class="token punctuation">(</span>broadcaster src/broadcaster.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>broadcaster <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>listener src/listener.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>listener <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="python">python</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/env python</span><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rospy<span class="token keyword">import</span> roslibroslib<span class="token punctuation">.</span>load_manifest<span class="token punctuation">(</span><span class="token string">'learn-tf'</span><span class="token punctuation">)</span><span class="token keyword">import</span> tf<span class="token keyword">import</span> turtlesim<span class="token punctuation">.</span>msg<span class="token keyword">def</span> <span class="token function">handle_turtle_pose</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span>turtlename<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#å®šä¹‰å¹¿æ’­å™¨</span>    tf_broadcaster <span class="token operator">=</span> tf<span class="token punctuation">.</span>TransformBroadcaster<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">#å¹¿æ’­æ•°æ®</span>    tf_broadcaster<span class="token punctuation">.</span>sendTransform<span class="token punctuation">(</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>x<span class="token punctuation">,</span>msg<span class="token punctuation">.</span>y<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        tf<span class="token punctuation">.</span>transformations<span class="token punctuation">.</span>quaternion_from_euler<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> msg<span class="token punctuation">.</span>theta<span class="token punctuation">)</span><span class="token punctuation">,</span>        rospy<span class="token punctuation">.</span>Time<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        turtlename<span class="token punctuation">,</span>        <span class="token string">"world"</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'tf_broadcaster_py'</span><span class="token punctuation">)</span>    <span class="token comment">#ä»è¶…å‚è·å–æµ·é¾Ÿåå­—</span>    turtlename <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'~turtle'</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span><span class="token string">'/%s/pose'</span><span class="token operator">%</span>turtlename<span class="token punctuation">,</span>        turtlesim<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>Pose<span class="token punctuation">,</span>        handle_turtle_pose<span class="token punctuation">,</span>        turtlename<span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2ã€ç›‘å¬å™¨">2ã€ç›‘å¬å™¨</h3><h4 id="c-2">c++</h4><p>å¤´æ–‡ä»¶</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;tf/transform_listener.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;geometry_msgs/Twist.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;turtlesim/Spawn.h&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°</p><p>å…ˆè¯·æ±‚ç”Ÿæˆturtle2</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span>argv<span class="token punctuation">,</span><span class="token string">"tf_listener"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>NodeHandle tf_l_node<span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>service<span class="token double-colon punctuation">::</span><span class="token function">waitForService</span><span class="token punctuation">(</span><span class="token string">"/spawn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>ServiceClient add_turtle <span class="token operator">=</span> tf_l_node<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">serviceClient</span><span class="token generic class-name"><span class="token operator">&lt;</span>turtlesim<span class="token double-colon punctuation">::</span>Spawn<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/spawn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>turtlesim<span class="token double-colon punctuation">::</span>Spawn srv<span class="token punctuation">;</span>add_turtle<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>srv<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†åˆ›å»ºå‘å¸ƒæ§åˆ¶turtle2çš„å‘å¸ƒè€…</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span>Publisher turtle_vel <span class="token operator">=</span> tf_l_node<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>geometry_msgs<span class="token double-colon punctuation">::</span>Twist<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/turtle2/cmd_vel"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ›å»ºtfçš„ç›‘å¬å™¨</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">tf<span class="token double-colon punctuation">::</span>TransformListener listener<span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>Rate <span class="token function">rate</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>tf_l_node<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//è·å–turtle1ä¸turtle2åæ ‡ç³»ä¹‹é—´çš„tfæ•°æ®</span>    <span class="token comment">//ä¿å­˜æœŸå¹³ç§»æ—‹è½¬æ•°æ®</span>    tf<span class="token double-colon punctuation">::</span>StampedTransform transform<span class="token punctuation">;</span>    <span class="token keyword">try</span>    <span class="token punctuation">{</span>        <span class="token comment">//ç­‰å¾…å˜æ¢</span>        <span class="token comment">//ä¼ å…¥å˜é‡(ä¸¤ä¸ªåæ ‡ç³»ã€æŸ¥è¯¢çš„æ—¶é—´æˆ³(å½“å‰çš„æ—¶é—´)ã€è¶…æ—¶çš„é˜ˆå€¼(è¿™é‡Œæ˜¯3s))</span>    listener<span class="token punctuation">.</span><span class="token function">waitForTransform</span><span class="token punctuation">(</span><span class="token string">"/turtle2"</span><span class="token punctuation">,</span><span class="token string">"turtle1"</span><span class="token punctuation">,</span>ros<span class="token double-colon punctuation">::</span><span class="token function">Time</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ros<span class="token double-colon punctuation">::</span><span class="token function">Duration</span><span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æŸ¥è¯¢å˜æ¢</span>        <span class="token comment">//ä¼ å…¥å˜é‡(ä¸¤ä¸ªåæ ‡ã€æŸ¥è¯¢çš„æ—¶é—´æˆ³(å½“å‰çš„æ—¶é—´)ã€æŸ¥è¯¢ç»“æœå­˜æ”¾çš„å˜é‡)</span>    listener<span class="token punctuation">.</span><span class="token function">lookupTransform</span><span class="token punctuation">(</span><span class="token string">"/turtle2"</span><span class="token punctuation">,</span><span class="token string">"turtle1"</span><span class="token punctuation">,</span>ros<span class="token double-colon punctuation">::</span><span class="token function">Time</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">catch</span><span class="token punctuation">(</span>tf<span class="token double-colon punctuation">::</span>TransformException <span class="token operator">&amp;</span>ex<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">ROS_ERROR</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>ex<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ros<span class="token double-colon punctuation">::</span><span class="token function">Duration</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">continue</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//è®¡ç®—æ¬§æ°è·ç¦»ï¼Œä¹˜ä»¥è®¾ç½®çš„æ—¶é—´ç³»æ•°</span>    geometry_msgs<span class="token double-colon punctuation">::</span>Twist vel_msg<span class="token punctuation">;</span>    <span class="token comment">// å¸Œæœ›ç”¨0.25ç§’æ—¶é—´å®Œæˆè½¬åŠ¨</span>    <span class="token comment">// (0.25) * y/xçš„åæ­£åˆ‡å€¼</span>    vel_msg<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">4.0</span> <span class="token operator">*</span> <span class="token function">atan2</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span><span class="token function">getOrigin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    transform<span class="token punctuation">.</span><span class="token function">getOrigin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¸Œæœ›ç”¨2ç§’æ—¶é—´å®Œæˆç§»åŠ¨</span>    <span class="token comment">// (1/2) * âˆšx^2+y^2</span>    vel_msg<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token function">pow</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span><span class="token function">getOrigin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span>    <span class="token function">pow</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span><span class="token function">getOrigin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å‘å¸ƒturtle2çš„æ§åˆ¶æŒ‡ä»¤</span>    turtle_vel<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>vel_msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    rate<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="python-2">python</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/env python</span><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rospy<span class="token keyword">import</span> math<span class="token keyword">import</span> tf<span class="token keyword">import</span> geometry_msgs<span class="token punctuation">.</span>msg<span class="token keyword">import</span> turtlesim<span class="token punctuation">.</span>srv<span class="token keyword">import</span> roslibroslib<span class="token punctuation">.</span>load_manifest<span class="token punctuation">(</span><span class="token string">'learn-tf'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">py_listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'turtle_tf_listener'</span><span class="token punctuation">)</span>    listener <span class="token operator">=</span> tf<span class="token punctuation">.</span>TransformListener<span class="token punctuation">(</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>wait_for_service<span class="token punctuation">(</span><span class="token string">'spawn'</span><span class="token punctuation">)</span>    spawner <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">'spawn'</span><span class="token punctuation">,</span>turtlesim<span class="token punctuation">.</span>srv<span class="token punctuation">.</span>Spawn<span class="token punctuation">)</span>    spawner<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'turtle2'</span><span class="token punctuation">)</span>    turtle_vel <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Publisher<span class="token punctuation">(</span><span class="token string">'turtle2/cmd_vel'</span><span class="token punctuation">,</span>geometry_msgs<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>Twist<span class="token punctuation">,</span>queue_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    rate<span class="token operator">=</span>rospy<span class="token punctuation">.</span>Rate<span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span>    <span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token punctuation">(</span>trans<span class="token punctuation">,</span>rot<span class="token punctuation">)</span><span class="token operator">=</span>listener<span class="token punctuation">.</span>lookupTransform<span class="token punctuation">(</span><span class="token string">'/turtle2'</span><span class="token punctuation">,</span><span class="token string">'turtle1'</span><span class="token punctuation">,</span>rospy<span class="token punctuation">.</span>Time<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">except</span><span class="token punctuation">(</span>tf<span class="token punctuation">.</span>LookupException<span class="token punctuation">,</span> tf<span class="token punctuation">.</span>ConnectivityException<span class="token punctuation">,</span> tf<span class="token punctuation">.</span>ExtrapolationException<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">continue</span>        angular <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> math<span class="token punctuation">.</span>atan2<span class="token punctuation">(</span>trans<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> trans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        linear <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>trans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> trans<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>        cmd <span class="token operator">=</span> geometry_msgs<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>Twist<span class="token punctuation">(</span><span class="token punctuation">)</span>        cmd<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x <span class="token operator">=</span> linear        cmd<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z <span class="token operator">=</span> angular        turtle_vel<span class="token punctuation">.</span>publish<span class="token punctuation">(</span>cmd<span class="token punctuation">)</span>        rate<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    py_listener<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3ã€è¿è¡Œ">3ã€è¿è¡Œ</h3><p>åœ¨ç»ˆç«¯è¿è¡Œçš„æ–¹å¼ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ~/ros_ws #è¿›å…¥å·¥ä½œç©ºé—´æ ¹ç›®å½•catkin_makesource devel/setup.bashroscorerosrun turtlesim turtlesim_node#ä¸‹é¢rosrunçš„æ˜¯è‡ªå·±å®šä¹‰åŠŸèƒ½åŒ…çš„åç§°å’Œä»£ç #æ˜¯è‡ªå·±èµ·åçš„ï¼Œé…ç½®å¦‚ä¸‹ï¼Œä¾›å‚è€ƒ#catkin_create_pkg learn-tf roscpp rospy tf turtlesim# __nameçš„é‡æ˜ å°„ä¼šæŠŠæˆ‘ä»¬è®¾ç½®çš„æ˜æ™ºç›´æ¥å–ä»£ä»£ç ä¸­ros::initè®¾ç½®çš„èŠ‚ç‚¹å# rosrun learn-tf broadcaster é‡æ˜ å°„æœºåˆ¶ è¾“å…¥çš„å‚æ•°(æµ·é¾Ÿçš„åå­—)rosrun learn-tf broadcaster __name:=turtle1_broadcaster /turtle1rosrun learn-tf broadcaster __name:=turtle2_broadcaster /turtle2rosrun learn-tf listenerrosrun turtlesim turtle_teleop_key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºè¿™é‡Œéœ€è¦å¼€å¯å¾ˆå¤šç»ˆç«¯ã€è¾“å…¥å¾ˆå¾—å¤šæŒ‡ä»¤ï¼Œå®é™…å¯åŠ¨é¡¹ç›®çš„æ—¶å€™ä¸å¯èƒ½å¦‚æ­¤ç¹çåœ°å¯åŠ¨è¿™ä¹ˆå¤šæŒ‡ä»¤ã€‚æ‰€ä»¥ä¸‹ä¸€ç« å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨launchæ–‡ä»¶å¿«é€Ÿå¯åŠ¨æœ¬ç¯‡ä¸­c++å’Œpythonçš„ä»£ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLAMï¼šä¸‰ç»´ç©ºé—´æ•°å­¦åŸºç¡€</title>
      <link href="/2022/08/02/slam-1-Fundamentals-of-three-dimensional-space-mathematics/"/>
      <url>/2022/08/02/slam-1-Fundamentals-of-three-dimensional-space-mathematics/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><blockquote><p>è­¦å‘Šï¼šæœ¬ç¯‡å«æœ‰å¤§é‡æ•°å­¦å…¬å¼ï¼Œè¯·å°½é‡åœ¨ç½‘ç»œè‰¯å¥½çš„çŠ¶æ€ä¸‹è®¿é—®<br>ç½‘ç»œè¾ƒå·®çš„æƒ…å†µä¸‹ï¼Œæ•°å­¦å…¬å¼æ¸²æŸ“å®¹æ˜“å‡ºé—®é¢˜</p></blockquote><h1 id="ä¸‰ç»´ç©ºé—´åˆšä½“è¿åŠ¨åŸºç¡€"><a href="#ä¸‰ç»´ç©ºé—´åˆšä½“è¿åŠ¨åŸºç¡€" class="headerlink" title="ä¸‰ç»´ç©ºé—´åˆšä½“è¿åŠ¨åŸºç¡€"></a>ä¸‰ç»´ç©ºé—´åˆšä½“è¿åŠ¨åŸºç¡€</h1><p>åœ¨æœºå™¨äººå­¦ä¸­ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„çŸ¥è¯†ç‚¹å«åšåæ ‡ç³»å˜æ¢ã€‚</p><p>æœ¬ç¯‡å°†ç®€å•æ¶‰åŠä¸€ä¸‹åæ ‡ç³»çš„ç›¸å…³çŸ¥è¯†</p><p>æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ç©ºé—´æ˜¯ä¸‰ç»´çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„åæ ‡ç³»å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://s2.loli.net/2022/07/31/qROvSx3TeG2NH7t.png" alt="åæ ‡ç³»"></p><blockquote><p><strong>æˆ‘ä»¬å¯¹åæ ‡ç³»çš„å‡ ç‚¹è¯´æ˜ï¼š</strong></p><ul><li>åƒé¢˜å›¾é‚£æ ·çš„å½©è‰²åæ ‡ç³»ï¼Œè‹¥æ— ç‰¹åˆ«è¯´æ˜ï¼Œéƒ½æ˜¯<strong>rgb(çº¢ç»¿è“ï¼‰ä¾æ¬¡å¯¹åº”*xyz*</strong></li><li>å½“æˆ‘ä»¬è¯´ç»•æŸä¸€ä¸ªè½´æ—‹è½¬å¤šå°‘è§’åº¦æ—¶ï¼Œæ­£æ–¹å‘çš„ç¡®å®šç”¨<strong>å³æ‰‹å®šåˆ™</strong>ï¼Œå¦‚ä¸‹å›¾ï¼š</li></ul><p><img src="https://s2.loli.net/2022/08/01/g3LdsNK1aMxPQeu.png"></p><ul><li>æˆ‘ä»¬ç”¨çš„éƒ½æ˜¯<strong>å³æ‰‹åæ ‡ç³»</strong>ï¼Œå³<strong>ç»•<em>z</em>è½´æ—‹è½¬æ—¶ï¼Œ<em>y</em>è½´åœ¨<em>x</em>è½´çš„+90åº¦æ–¹å‘</strong>ï¼Œå…¶ä»–è½´ç±»ä¼¼ï¼Œ<strong>å››æŒ‡å¼¯æ›²çš„æ–¹å‘å³ä¸ºæ­£æ–¹å‘</strong></li><li>æåˆ°æŸä¸€ä¸ªåæ ‡ç³»ï¼Œæ¯”å¦‚åæ ‡ç³»Aæ—¶ï¼Œæˆ‘ä»¬è¯´<strong>frame{A}<strong>ï¼Œç”¨</strong>å¤§æ‹¬å·</strong>è¡¨ç¤º</li><li>æåˆ°ä»»æ„éœ€è¦æŒ‡æ˜å‚ç…§ç³»çš„é‡æ—¶ï¼Œæˆ‘ä»¬<strong>å°†åæ ‡ç³»å†™åœ¨å·¦ä¸Šè§’</strong>ï¼Œå¦‚åæ ‡ç³»{A}ä¸­ç‚¹Pçš„ä½ç½®å‘é‡å†™ä½œ$^{A}P$</li><li>æˆ‘ä»¬<strong>å°†ç‰©ä½“/ç‚¹çš„åç§°å†™åœ¨å³ä¸‹è§’</strong>ï¼Œå¦‚åæ ‡ç³»{A}ä¸­ç‚¹Oçš„ä½ç½®å‘é‡å†™ä½œ$^{A}P_{O}$</li><li>æåˆ°ä¸€ä¸ªé‡æ˜¯ç›¸å¯¹äºæŸä¸ªåæ ‡ç³»æ—¶ï¼Œæ¯”å¦‚{A}ï¼Œæˆ‘ä»¬è¯´<strong>with respect to</strong> {A}ï¼Œæˆ–ç®€å†™ä¸º<strong>w.r.t</strong> {A}ã€‚</li><li>æœ¬æ–‡åŠä»¥åçš„æ–‡ç« ä¸­<strong>æ‰€æœ‰å‘é‡éƒ½æ˜¯åˆ—å‘é‡ï¼Œæ‰€æœ‰å‘é‡çš„è½¬ç½®éƒ½æ˜¯è¡Œå‘é‡</strong></li><li>ä»¥ä¸Šæ˜¯ä¸€å¥—æ¯”è¾ƒå¸¸ç”¨çš„æ ‡è®°ç³»ç»Ÿ(convention)ï¼Œå§‹ç»ˆéµå¾ªåŒä¸€å¥—conventionæœ‰åŠ©äºåœ¨æ··ä¹±çš„åæ ‡å˜æ¢ä¸­æ‰¾åˆ°æ¸…æ™°çš„æ€è·¯ï¼›å¦‚æœä½ å·²ç»æœ‰å¸¸ç”¨çš„è®°æ³•ï¼Œé‚£ä¹ˆä¿æŒä½ è‡ªå·±çš„è®°æ³•ä¹Ÿæ˜¯å¯ä»¥çš„</li></ul></blockquote><h2 id="1ã€å‘é‡ä¸åæ ‡ç³»"><a href="#1ã€å‘é‡ä¸åæ ‡ç³»" class="headerlink" title="1ã€å‘é‡ä¸åæ ‡ç³»"></a>1ã€å‘é‡ä¸åæ ‡ç³»</h2><p>å›åˆ°åŸé¢˜ï¼Œæˆ‘ä»¬ç”¨çº¿æ€§ä»£æ•°çš„çŸ¥è¯†æ¥è¯´ï¼Œä¸‰ç»´ç©ºé—´ä¸­æŸä¸ªç‚¹çš„åæ ‡å¯ä»¥ç”¨$\mathbb R^{3}$æ¥æè¿°ã€‚æˆ‘ä»¬æ‰¾åˆ°è¯¥ç©ºé—´çš„ä¸€ç»„åŸº<sup class="refplus-num"><a href="#ref-ji">[1]</a></sup>ï¼Œé‚£ä¹ˆï¼Œä»»æ„å‘é‡aå°±æœ‰è¿™ä¹ˆä¸ªåæ ‡å¦‚ä¸‹ï¼š$$a = \begin{bmatrix}  e1 &amp; e2 &amp; e3\end{bmatrix}\begin{bmatrix} a1\\\\ a2\\\\ a3\end{bmatrix}= a1e1 + a2e2 + a3e3$$è¿™é‡Œ$(a1,a2,a3)^{T}$æˆä¸ºaåœ¨æ­¤åŸºä¸‹çš„åæ ‡ã€‚å¯¹äº$a,b\in \mathbb R^{3}$ï¼Œé€šå¸¸æ„ä¹‰ä¸‹çš„**å†…ç§¯**æ˜¯ï¼š$$a \cdot b = a^{T}b = \sum_{i=1}^{3}a_{i}b_{i}=|a||b|\cos \left \langle a,b \right \rangle $$å…¶ä¸­$\left \langle a,b \right \rangle $ä¸ºå‘é‡aï¼Œbçš„å¤¹è§’ã€‚å†…ç§¯ä¹Ÿå¯ä»¥æè¿°å‘é‡é—´çš„æŠ•å½±å…³ç³»ï¼Œå¤–ç§¯åˆ™æ˜¯è¿™æ ·çš„$$a\times b = \begin{Vmatrix} e_{1} &amp; e_{2} &amp; e_{3}\\\\ a_{1} &amp; a_{2} &amp; a_{3}\\\\ b_{1} &amp; b_{2} &amp; b_{3}\end{Vmatrix}= \begin{bmatrix} a_{2}b_{3} - a_{3}b_{2}\\\\ a_{3}b_{1} - a_{1}b_{3}\\\\ a_{1}b_{2} - a_{2}b_{1}\end{bmatrix}=\begin{bmatrix} 0 &amp; -a_{3} &amp; a_{2}\\\\ a_{3} &amp; 0 &amp; -a_{1}\\\\ -a_{2} &amp; a_{1} &amp; 0\end{bmatrix}b\overset{\mathrm{def}}{=}a^{\wedge} b$$</p><ul id="refplus" style="display:none;"><li id="ref-ji" data-num="1">[1]   åŸºå°±æ˜¯å¼ æˆè¿™ä¸ªç©ºé—´çš„ä¸€ç»„çº¿æ€§æ— å…³çš„å‘é‡ï¼Œæœ‰äº›å…¶ä»–çš„è¯´æ³•å« â€œåŸºåº•â€</li></ul><br>å¤–ç§¯çš„ç»“æœæ˜¯ä¸€ä¸ªå‘é‡ï¼Œæ–¹å‘å‚ç›´äºè¿™ä¸¤ä¸ªå‘é‡ï¼Œå¤§å°æ˜¯$|a||b|\sin \left \langle a,b \right \rangle $ï¼Œæ˜¯ä¸¤ä¸ªå‘é‡å¼ æˆçš„å››è¾¹å½¢çš„æœ‰å‘é¢ç§¯ã€‚<p></p><p>å¤–ç§¯è¿ç®—æˆ‘ä»¬ç”¨<code>^</code>ç¬¦å·æ¥è¡¨ç¤ºï¼ŒæŠŠ<code>a</code>å†™æˆä¸€ä¸ªçŸ©é˜µï¼Œè¿™å°±æ˜¯<strong>åå¯¹ç§°çŸ©é˜µ</strong>ã€‚åå¯¹ç§°çŸ©é˜µæ»¡è¶³$A^{T} = -A$è¿™æ ·å°±æŠŠå¤–ç§¯$a\times b$å†™æˆäº†çŸ©é˜µä¸å‘é‡çš„ä¹˜æ³•<code>a^b</code>ï¼Œå˜æˆäº†çº¿æ€§è¿ç®—ã€‚æ­¤ç¬¦å·æ˜¯ä¸€ä¸ªä¸€ä¸€æ˜ å°„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»»æ„å‘é‡éƒ½æœ‰å”¯ä¸€ä¸€ä¸ªåå¯¹ç§°çŸ©é˜µï¼Œåä¹‹äº¦ç„¶ã€‚<br>$$<br>a^{\wedge} =<br>\begin{bmatrix}<br> 0 &amp; -a_{3} &amp; a_{2}\\<br> a_{3} &amp; 0 &amp; -a_{1}\\<br> -a_{2} &amp; a_{1} &amp; 0<br>\end{bmatrix}<br>$$</p><h2 id="2ã€åæ ‡ç³»é—´æ¬§å¼å˜æ¢"><a href="#2ã€åæ ‡ç³»é—´æ¬§å¼å˜æ¢" class="headerlink" title="2ã€åæ ‡ç³»é—´æ¬§å¼å˜æ¢"></a>2ã€åæ ‡ç³»é—´æ¬§å¼å˜æ¢</h2><p>åœ¨æœºå™¨äººå­¦ä¸­ï¼Œä¼šç»™æ¯ä¸€ä¸ªè¿æ†å’Œå…³èŠ‚å®šä¹‰ä»–ä»¬çš„åæ ‡ç³»ã€‚å¦‚æœè€ƒè™‘ç§»åŠ¨çš„æœºå™¨äººï¼Œå¸¸è§çš„æ–¹æ³•æ˜¯è®¾å®šä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œä»–æ˜¯ä¸ä¼šç§»åŠ¨çš„ï¼Œå¦‚ä¸‹å›¾ä¸­çš„$x_{w},y_{w},z_{w}$å®šä¹‰çš„åæ ‡ç³»ã€‚åŒæ—¶ï¼Œæœºå™¨äººæ˜¯ä¸€ä¸ªç§»åŠ¨çš„åæ ‡ç³»ï¼Œå¦‚$x_{c},y_{c},z_{c}$å®šä¹‰çš„åæ ‡ç³»ã€‚</p><p><img src="https://s2.loli.net/2022/08/01/M8Ij2t7wUnZ6akO.png" alt="å¯¹äºåŒä¸€ä¸ªå‘é‡pï¼Œåœ¨ä¸–ç•Œåæ ‡ä¸‹çš„åæ ‡pwï¼Œå’Œç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡pcæ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™ä¸ªå˜æ¢ç”±å˜æ¢çŸ©é˜µTæè¿°"></p><p>ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„è¿åŠ¨ç”±ä¸€ä¸ªæ—‹è½¬åŠ ä¸Šä¸€ä¸ªå¹³ç§»ç»„æˆï¼Œè¿™ç§è¿åŠ¨ç§°ä¹‹ä¸º<strong>åˆšä½“è¿åŠ¨</strong>ã€‚ç›¸æœºåœ¨è§†ç•Œåæ ‡ç³»çš„è¿åŠ¨å°±æ˜¯ä¸€ç§åˆšä½“è¿åŠ¨ã€‚åˆšä½“è¿åŠ¨è¿‡ç¨‹ä¸­ï¼ŒåŒä¸€ä¸ªå‘é‡åœ¨å„ä¸ªåæ ‡ç³»ä¸‹çš„é•¿åº¦å’Œå¤¹è§’éƒ½ä¸ä¼šæ”¹å˜ã€‚æ¯•ç«Ÿç›¸æœºä¸ä¼šåƒæ£‰èŠ±ç³–ä¸€æ ·ï¼Œä¼šè¢«å‹æ‰æ‹‰é•¿ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬è¯´ç›¸æœºåæ ‡ç³»åˆ°ä¸–ç•Œåæ ‡ç³»ä¹‹é—´ï¼Œç›¸å·®äº†ä¸€ä¸ª<strong>æ¬§å¼å˜æ¢</strong>ã€‚</p><p>å› ä¸ºæ¬§å¼å˜æ¢ç”±æ—‹è½¬å’Œå¹³ç§»ç»„æˆï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ—‹è½¬ï¼š</p><p>è®¾æŸä¸ªå•ä½æ­£äº¤åŸº$(e_{1},e_{2},e_{3})$ç»è¿‡ä¸€æ¬¡æ—‹è½¬å˜æˆ$(e^{\backprime}_{1},e^{\backprime}_{2},e^{\backprime}_{3})$ï¼Œé‚£å¯¹åŒä¸€ä¸ªå‘é‡aï¼ˆå› ä¸ºåªè®¨è®ºæ—‹è½¬ï¼Œä»–ä¹Ÿæ²¡è¿åŠ¨ï¼‰ï¼Œä»–åœ¨ä¸¤ä¸ªåæ ‡ç³»ä¸‹çš„åæ ‡æ˜¯$[a_{1},a_{2},a_{3}]^{T}$å’Œ$[a^{\backprime}_{1},a^{\backprime}_{2},a^{\backprime}_{3}]^{T}$ã€‚å› ä¸ºå‘é‡æœ¬èº«æ²¡å˜ï¼Œå°±æœ‰ä¸‹åˆ—å¼å­ï¼š</p><p><img src="https://s2.loli.net/2022/08/01/RqwLs7rZpQafhI6.png"></p><p>ä¸ºäº†æè¿°ä¸¤ä¸ªåæ ‡ä¹‹é—´çš„å…³ç³»ï¼Œå¯¹ä¸Šé¢ç­‰å¼çš„å·¦å³ä¸¤è¾¹åŒæ—¶å·¦ä¹˜$\begin{bmatrix}<br>e_{1}^{T} \\<br>e_{2}^{T} \\<br>e_{3}^{T}<br>\end{bmatrix}$ï¼Œé‚£å·¦è¾¹çš„ç³»æ•°å°±å˜æˆå•ä½çŸ©é˜µï¼š<br>$$<br>\begin{bmatrix}<br>a_{1} \\<br>a_{2} \\<br>a_{3}<br>\end{bmatrix}=\begin{bmatrix}<br> e_{1}^{T}e_{1}^{\backprime} &amp; e_{1}^{T}e_{2}^{\backprime} &amp; e_{1}^{T}e_{3}^{\backprime}\\<br> e_{2}^{T}e_{1}^{\backprime} &amp; e_{2}^{T}e_{2}^{\backprime} &amp; e_{2}^{T}e_{3}^{\backprime}\\<br> e_{3}^{T}e_{1}^{\backprime} &amp; e_{3}^{T}e_{2}^{\backprime} &amp; e_{3}^{T}e_{3}^{\backprime}<br>\end{bmatrix}<br>\begin{bmatrix}<br>a_{1}^{\backprime} \\<br>a_{2}^{\backprime} \\<br>a_{3}^{\backprime}<br>\end{bmatrix}<br>\overset{\mathrm{def}}{=}Ra^{\backprime}<br>$$<br>ä¸­é—´3x3çš„çŸ©é˜µæ‹¿å‡ºæ¥ï¼Œç»™ä»–èµ·åå«åš<strong>R</strong>ï¼Œè¿™ä¸ªçŸ©é˜µæœ‰ä¸¤ç»„åŸºä¹‹é—´çš„å†…ç§¯ç»„æˆï¼Œè¯´æ˜äº†å‰ååŒä¸€ä¸ªå‘é‡çš„åæ ‡å˜æ¢å…³ç³»ã€‚åªè¦è¿™ä¸ªæ—‹è½¬æ“ä½œä¸€æ ·ï¼Œè¿™ä¸ªçŸ©é˜µå°±æ˜¯ä¸€æ ·çš„ï¼ŒçŸ©é˜µRæè¿°äº†æ—‹è½¬æœ¬èº«ï¼Œä½¿ç”¨ç»™ä»–èµ·ä¸ªåå­—ï¼Œå«<strong>æ—‹è½¬çŸ©é˜µ</strong>ã€‚</p><blockquote><p>è¡¥å……: è¿™ä¸ªæ—‹è½¬çŸ©é˜µï¼Œå„åˆ†é‡æ˜¯ä¸¤ä¸ªåæ ‡ç³»åŸºçš„å†…ç§¯ï¼Œå› ä¸ºåŸºé•¿åº¦ä¸º1ï¼Œæ‰€ä»¥å®é™…ä¸Šæ˜¯å„ä¸ªç§¯å‘é‡å¤¹è§’çš„ä½™å¼¦å€¼ã€‚æ‰€ä»¥è¿™ä¸ªçŸ©é˜µä¹Ÿå«<strong>æ–¹å‘ä½™å¼¦çŸ©é˜µ</strong>ã€‚æœ¬ç¯‡è¿˜æ˜¯å°†å…¶ç§°ä½œ<strong>æ—‹è½¬çŸ©é˜µ</strong>ã€‚</p></blockquote><p>äº‹å®ä¸Šï¼Œæ—‹è½¬çŸ©é˜µæ˜¯ä¸€ä¸ªè¡Œåˆ—å¼ä¸º1çš„æ­£äº¤çŸ©é˜µï¼Œé‚£è¡Œåˆ—å¼ä¸º1çš„æ­£äº¤çŸ©é˜µå°±æ˜¯ä¸€ä¸ªæ—‹è½¬çŸ©é˜µã€‚æ‰€ä»¥æŠŠnç»´æ—‹è½¬çŸ©é˜µçš„é›†åˆå®šä¹‰å¦‚ä¸‹ï¼š<br>$$<br>SO(n)=\left \{ R \in \mathbb R ^{n \times n} | RR^{T}=I,det(R)=1\right \}<br>$$</p><blockquote><p>SO(n)æ˜¯ç‰¹æ®Šæ­£äº¤ç¾¤ï¼š</p><blockquote><p>ç¾¤æ˜¯ä¸€ç§é›†åˆåŠ ä¸Šä¸€ç§è¿ç®—çš„ä»£æ•°ç»“æ„ï¼Œå¦‚æœé›†åˆä¸ºAï¼Œè¿ç®—ä¸º+ï¼Œé‚£ä¹ˆå¯ä»¥è®°ä¸ºç¾¤G=ï¼ˆA , +ï¼‰ã€‚ç¾¤è¦æ±‚è¿™ä¸ªè¿ç®—è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p><p>å°é—­æ€§ï¼š$\forall a,b \in A,a1 \cdot a2 \in A $</p><p>ç»“åˆå¾‹ï¼š$\forall a,b,c \in A,(a1 \cdot a2)\cdot a3=a1 \cdot (a2 \cdot a3)$</p><p>å¹ºå…ƒï¼š$\exists a0 \in A,s.t. \forall a\in A,a_{0}\cdot a=a\cdot a_{0}=a$</p><p>é€†ï¼š$\forall a \in A,\exists a^{-1} \in A, s.t.: a\cdot a^{-1}=a_{0}$</p><p>å¯ä»¥å·§è®°ä¸ºï¼šå°ç»“å¹ºé€†ï¼ˆå‡¤å§è¦ä½ ï¼‰</p><blockquote><p>å®åœ¨ä¸å¥½ç†è§£çš„è¯ï¼Œå¯ä»¥æŠŠç¾¤ç±»æ¯”æˆä¸€ä¸ªé­”æ–¹ï¼Œé­”æ–¹çš„æ—‹è½¬å°±æ˜¯è¿ç®—ï¼Œå¾—åˆ°çš„è¿ç®—ç»“æœï¼ˆé›†åˆä¸­çš„å…ƒç´ ä»¬ï¼‰å°±æ˜¯æ—‹è½¬é­”æ–¹åï¼Œé­”æ–¹ä¸Šé¢æ•´ä½“çš„é¢œè‰²åˆ†å¸ƒã€‚</p><p>é­”æ–¹ä¸€å…±å°±é‚£äº›é¢œè‰²æ’åˆ—ç»„åˆï¼ŒæŠŠæ‰€æœ‰é­”æ–¹é¢œè‰²åˆ†å¸ƒçš„æ’åˆ—ç»„åˆé›†åˆèµ·æ¥ï¼Œå°±æ˜¯æ•´ä¸ªé›†åˆï¼Œåœ¨æ»¡è¶³ â€œæ—‹è½¬â€ è¿™ä¸ªè¿ç®—çš„å‰æä¸‹ï¼Œè¿™äº›é›†åˆå°±æ„æˆç¾¤ï¼ˆå› ä¸ºå¦‚æœä½ é€‰æ‹©æŠŠé­”æ–¹æ‹†å¼€è¿™ä¸ªè¿ç®—ï¼Œé‚£å¾—åˆ°çš„ä¸€å®šæ˜¯æ•£æˆä¸€ç‰‡çš„æ–¹å—ï¼Œè¯¥çŠ¶æ€å°±ä¸åœ¨ä¸Šè¿°é­”æ–¹ä¾‹å­çš„é›†åˆå†…ï¼‰</p></blockquote><p>æ˜“å¾—ï¼Œæ—‹è½¬çŸ©é˜µé›†åˆå’ŒçŸ©é˜µä¹˜æ³•æ„æˆç¾¤ï¼Œåé¢è¦ä»‹ç»çš„å˜æ¢çŸ©é˜µ<code>SE(n)</code>å’ŒçŸ©é˜µä¹˜æ³•ä¹Ÿæ„æˆç¾¤ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæ‰èƒ½ç§°ä»–ä»¬ä¸ºæ—‹è½¬çŸ©é˜µç¾¤å’Œå˜æ¢çŸ©é˜µç¾¤ã€‚</p><p><strong>æç¾¤</strong>æ˜¯æŒ‡å…·æœ‰è¿ç»­ï¼ˆå…‰æ»‘ï¼‰æ€§è´¨çš„ç¾¤ã€‚</p><ul><li><p>åƒæ•´æ•°ç¾¤$\left \langle \mathbb Z,+ \right \rangle $å°±æ˜¯ç¦»æ•£çš„ï¼Œå¹¶ä¸æ˜¯æç¾¤ã€‚</p></li><li><p>åƒSO(n)ï¼ŒSE(n)ï¼Œåœ¨å®æ•°ç©ºé—´ä¸Šæ˜¯è¿ç»­çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç¨å¾®æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªåˆšä½“åœ¨ç©ºé—´ä¸­è¿ç»­çš„æ—‹è½¬ï¼Œæ‰€ä»¥è¿™ç§ç®—æ˜¯æç¾¤ã€‚</p></li></ul><p>å…³äºæç¾¤æä»£æ•°ï¼Œåœ¨æœ¬ç¯‡ä¸­å°±ä¸å±•å¼€ä»‹ç»äº†ï¼Œåç»­å†è¯¦ç»†ä»‹ç»ã€‚</p></blockquote><p>æ ¹æ®ä¸Šé¢çš„è¡¥å……èµ„æ–™ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒSO(n)æ˜¯ç”±nç»´ç©ºé—´çš„æ—‹è½¬çŸ©é˜µç»„æˆï¼Œæ‰€ä»¥è¯´ï¼ŒSO(3)å°±æ˜¯ç‰¹æŒ‡ä¸‰ç»´ç©ºé—´äº†ã€‚é€šè¿‡è¿™ä¸ªæ—‹è½¬çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¨è®ºä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„æ—‹è½¬å˜æ¢äº†ã€‚</p></blockquote><p>å› ä¸ºæ—‹è½¬çŸ©é˜µæ˜¯æ­£äº¤çŸ©é˜µï¼Œé‚£ä»–çš„é€†å°±æè¿°äº†ä¸€ä¸ªç›¸åçš„æ—‹è½¬ã€‚<br>$$<br>a^{\backprime}=R^{-1}a=R^{T}a<br>$$<br>åœ¨æ¬§å¼å˜æ¢ä¸­ï¼Œé™¤äº†åˆšåˆšå’±è®¨è®ºçš„æ—‹è½¬ï¼Œè¿˜æœ‰å¹³ç§»ã€‚æŠŠæ—‹è½¬å’Œå¹³ç§»åˆåœ¨ä¸€èµ·ï¼Œå°±å¯ä»¥ç”¨å…¬å¼ï¼š<br>$$<br>a^{\backprime}=Ra+t<br>$$<br>tè‡ªç„¶å°±æ˜¯æŒ‡å¹³ç§»å‘é‡äº†ã€‚ç›¸æ¯”å‰é¢æ—‹è½¬çš„éƒ¨åˆ†ï¼Œå¹³ç§»åªéœ€è¦ç›´æ¥æŠŠå¹³ç§»å‘é‡åŠ ä¸Šå»å°±å¥½äº†ï¼Œçœ‹ä¸Šå»éå¸¸ç®€å•ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¼šå®šä¹‰åæ ‡ç³»1ï¼Œåæ ‡ç³»2ï¼Œé‚£ä¹ˆå‘é‡aåœ¨ä¸¤ä¸ªåæ ‡ç³»ä¸‹çš„åæ ‡a1ï¼Œa2çš„å…³ç³»å¦‚ä¸‹ï¼š<br>$$<br>a_{1}=R_{12}a_{2}+t_{12}<br>$$<br>è¿™é‡Œ<code>R12</code>æ˜¯æŒ‡<strong>æŠŠåæ ‡ç³»2çš„å‘é‡å˜æ¢åˆ°åæ ‡ç³»1</strong>ï¼Œå› ä¸ºå‘é‡ä¹˜åœ¨è¿™ä¸ªçŸ©é˜µçš„å³è¾¹ï¼Œä¸‹æ ‡è¦ä»å³å¾€å·¦è¯»çš„ã€‚</p><p>å¯¹äºå¹³ç§»<code>t12</code>ï¼Œè™½ç„¶ç¡®å®æ˜¯<strong>æŒ‡ä»1åˆ°2çš„å‘é‡</strong>ï¼Œä½†è¦æ³¨æ„ï¼Œåè¿‡æ¥çš„<code>t21</code>å¹¶ä¸ç­‰äº<code>-t12</code>ï¼Œ<strong>è¿™ä¸¤ä¸ªå‘é‡çš„åæ ‡å€¼å¹¶ä¸æ˜¯ç›¸åæ•°ã€‚</strong></p><h2 id="3ã€å˜æ¢çŸ©é˜µä¸é½æ¬¡åæ ‡"><a href="#3ã€å˜æ¢çŸ©é˜µä¸é½æ¬¡åæ ‡" class="headerlink" title="3ã€å˜æ¢çŸ©é˜µä¸é½æ¬¡åæ ‡"></a>3ã€å˜æ¢çŸ©é˜µä¸é½æ¬¡åæ ‡</h2><p>å°±ä¸Šé¢æˆ‘ä»¬è®¨è®ºè¿‡çš„å¼å­æ¥è¯´ï¼Œè™½ç„¶å¯ä»¥å®Œç¾è¡¨è¾¾æ¬§å¼ç©ºé—´çš„æ—‹è½¬ä¸å¹³ç§»ï¼Œä¸è¿‡è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼š<strong>è¿™é‡Œçš„å˜æ¢å¹¶ä¸æ˜¯ä¸€ä¸ªçº¿æ€§å…³ç³»</strong></p><p>å‡è®¾æˆ‘ä»¬è¿›è¡Œ2æ¬¡å˜æ¢ï¼š<code>R1ã€t1</code>ä¸<code>R2ã€t2</code><br>$$<br>b=R_{1}a+t_{1},c=R_{2}b+t_{2}<br>$$<br>é‚£ï¼Œä»aåˆ°cçš„å˜æ¢å°±æ˜¯ï¼š<br>$$<br>c=R_{2}(R_{1}a+t)+t_{2}<br>$$<br>è¿™æ ·çš„å½¢å¼é¢å¯¹å®é™…åº”ç”¨ä¸­å¤šæ¬¡çš„å˜æ¢ï¼Œä¼šæ˜¾å¾—å¾ˆç¹çã€‚æ‰€ä»¥å¼•å…¥äº†é½æ¬¡åæ ‡å’Œå˜æ¢çŸ©é˜µï¼Œé‡å†™çš„å¼å­å¦‚ä¸‹:<br>$$<br>\begin{bmatrix}<br> a^{\backprime}\\<br> 1<br>\end{bmatrix}=<br>\begin{bmatrix}<br> R &amp; t\\<br> 0^{T} &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br> a\\<br> 1<br>\end{bmatrix}<br>\overset{\mathrm{def}}{=}<br>T\begin{bmatrix}<br> a\\<br> 1<br>\end{bmatrix}<br>$$<br>æˆ‘ä»¬åœ¨ä¸‰ç»´å‘é‡çš„æœ«å°¾æ·»åŠ 1ï¼Œè®©ä»–å˜æˆå››ç»´å‘é‡ï¼Œç§°ä¹‹ä¸º<strong>é½æ¬¡åæ ‡</strong>ã€‚å¯¹äºè¿™ä¸ªå››ç»´å‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ—‹è½¬å’Œå¹³ç§»å†™åœ¨ä¸€ä¸ªçŸ©é˜µé‡Œï¼Œ<strong>ä½¿å¾—æ•´ä¸ªå…³ç³»å˜æˆçº¿æ€§å…³ç³»</strong>ã€‚æˆ‘ä»¬æŠŠå¼å­æœ«å°¾å¤§å†™Tç§°ä¹‹ä¸º<strong>å˜æ¢çŸ©é˜µ</strong>ã€‚</p><p>å¦‚æœæˆ‘ä»¬æš‚æ—¶ä½¿ç”¨$\overset{\sim }{a}$è¡¨ç¤ºä¸ºaçš„é½æ¬¡åæ ‡ï¼Œé‚£å¯¹äºè¯¥æ ‡é¢˜å¤´ä¸¤æ¬¡å˜æ¢çš„ä¾‹å­æ¥è¯´ï¼Œå¯ä»¥å†™æˆå¦‚ä¸‹å¼å­ï¼š<br>$$<br>\overset{\sim }{b}=T_{1}\overset{\sim }{a},\overset{\sim }{c}=T_{2}\overset{\sim }{b} \rightarrow \overset{\sim }{c}=T_{2}T_{1}\overset{\sim }{a}<br>$$<br>åœ¨ä¸å¼•èµ·æ­§ä¹‰çš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€‚(tou)å½“(lan)ç®€å†™æˆ$b=Ta$çš„æ ·å­ï¼Œé»˜è®¤é‡Œé¢å·²ç»è¿›è¡Œäº†å…¶æ¬¡åæ ‡å˜æ¢</p><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸è¿›è¡Œé½æ¬¡åæ ‡å˜æ¢çš„æ—¶å€™ï¼Œè¿™è¾¹çš„ä¹˜æ³•åœ¨çŸ©é˜µç»´åº¦ä¸Šæ˜¯ä¸æˆç«‹çš„</p></blockquote><p>è¿™ä¸ªå˜æ¢çŸ©é˜µTå¾ˆæœ‰æ„æ€ï¼šå·¦ä¸Šè§’æ˜¯æ—‹è½¬çŸ©é˜µï¼Œå³ä¸Šè§’æ˜¯å¹³ç§»å‘é‡ï¼Œå·¦ä¸‹è§’æ˜¯0å‘é‡ï¼Œå³ä¸‹è§’æ˜¯1ã€‚è¿™ç§çŸ©é˜µåˆç§°ä¸º<strong>ç‰¹æ®Šæ¬§æ°ç¾¤</strong><br>$$<br>SE(3)=\left \{ T=<br>\begin{bmatrix}<br> R &amp; t\\<br> 0^{T} &amp; 1<br>\end{bmatrix}<br>\in \mathbb R^{4 \times 4} |<br>R\in SO(3),t\in \mathbb R^{3}<br>\right \}<br>$$<br>å’Œé‚£ä¸ªSO(3)ï¼Œä¸€æ ·ï¼Œè¯¥çŸ©é˜µçš„é€†å°±è¡¨ç¤ºä¸€ä¸ªåå‘çš„å˜æ¢ï¼š<br>$$<br>T^{-1}=<br>\begin{bmatrix}<br> R^{T} &amp; -R^{T}t\\<br> 0^{T} &amp; 1<br>\end{bmatrix}<br>$$<br>æˆ‘ä»¬ä¹Ÿç”¨$T_{12}$çš„å†™æ³•æ¥è¡¨ç¤ºä»2åˆ°1çš„å˜æ¢ã€‚</p><h2 id="4ã€æ—‹è½¬å‘é‡"><a href="#4ã€æ—‹è½¬å‘é‡" class="headerlink" title="4ã€æ—‹è½¬å‘é‡"></a>4ã€æ—‹è½¬å‘é‡</h2><p>æœ‰äº†æ—‹è½¬å‘é‡æ¥æè¿°æ—‹è½¬ï¼Œæœ‰äº†å˜æ¢çŸ©é˜µæè¿°ä¸€ä¸ª6è‡ªç”±åº¦çš„ä¸‰ç»´åˆšä½“è¿åŠ¨ï¼Œä½†æ˜¯èªæ˜çš„ä½ ä¸€å®šæ³¨æ„åˆ°äº†ï¼Œä¸Šé¢è¿™ç§çŸ©é˜µçš„æ–¹å¼è‡³å°‘æœ‰è¿™ä¸¤ä¸ªç¼ºç‚¹ï¼š</p><ul><li>SO(3)çš„æ—‹è½¬çŸ©é˜µæœ‰9ä¸ªé‡ï¼Œä½†ä¸€æ¬¡æ—‹è½¬å°±åªæœ‰ä¸‰ä¸ªè‡ªç”±åº¦ï¼Œè¿™ç§è¡¨è¾¾æ–¹å¼æœ‰ç‚¹å†—ä½™</li><li>æ—‹è½¬çŸ©é˜µå¿…é¡»æ˜¯æ­£äº¤çŸ©é˜µï¼Œä¸”è¡Œåˆ—å¼ä¸º1ï¼å˜æ¢çŸ©é˜µä¹Ÿæ˜¯è¿™æ ·ã€‚å¦‚æœæƒ³ä¼°è®¡æˆ–è€…ä¼˜åŒ–ä¸€ä¸ªæ—‹è½¬çŸ©é˜µã€å˜æ¢çŸ©é˜µçš„æ—¶å€™ï¼Œè¿™äº›çº¦æŸå¯¹äºé‚±æ´é—®é¢˜æ¥è¯´ä¼šå˜å¾—æ›´åŠ å›°éš¾ã€‚</li></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ç§æ–¹å¼å¯ä»¥ç´§å‡‘åœ°æè¿°æ—‹è½¬å¹³ç§»ï¼Œæ¯”å¦‚å°±ç”¨ä¸€ä¸ªå…­ç»´çš„å‘é‡æ¥è¡¨ç¤ºå˜æ¢ï¼Œæœ‰æ²¡æœ‰è¿™æ ·ä¸€ç§æ–¹å¼å‘¢ï¼Ÿ</p><p>äº‹å®ä¸Šï¼Œä»»æ„æ—‹è½¬éƒ½å¯ä»¥ç”¨ä¸€ä¸ªæ—‹è½¬è½´å’Œä¸€ä¸ªæ—‹è½¬è§’æ¥æè¿°ã€‚å’±ç”¨ä¸€ä¸ªå‘é‡ï¼Œæ–¹å‘å’Œæ—‹è½¬è½´ä¸€è‡´ï¼Œé•¿åº¦ç­‰åŒäºæ—‹è½¬è§’ï¼Œè¿™ç§å‘é‡æˆ‘ä»¬å«å®ƒ<strong>æ—‹è½¬å‘é‡</strong></p><p>åŒæ ·çš„ï¼Œå¯¹äºå˜æ¢çŸ©é˜µæ¥è¯´ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ—‹è½¬å‘é‡åŠ å¹³ç§»å‘é‡å°±å¯ä»¥è¡¨è¾¾ä¸€æ¬¡å˜æ¢äº†ï¼Œè¿™æ—¶çš„å˜æ¢ç»´åº¦æ­£å¥½æ˜¯å…­ç»´ã€‚</p><p>è®¾æ—‹è½¬è½´ä¸ºä¸€ä¸ªå•ä½é•¿åº¦çš„å‘é‡nï¼Œè§’åº¦Î¸ï¼Œé‚£å‘é‡Î¸nä¹Ÿå¯ä»¥æè¿°è¿™ä¸ªæ—‹è½¬ï¼Œé‚£æ—‹è½¬çŸ©é˜µå’Œæ—‹è½¬å‘é‡ä¹‹é—´æœ‰ä¸€ä¸ªä»€ä¹ˆè”ç³»å‘¢ï¼Ÿ</p><p>ä»æ—‹è½¬å‘é‡åˆ°æ—‹è½¬çŸ©é˜µåªéœ€è¦ç”¨<strong>ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼</strong>å°±å¯ä»¥äº†ã€‚</p><blockquote><p>ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼çš„æ¨å¯¼å¦‚ä¸‹ï¼š</p><img src="https://s2.loli.net/2022/08/01/w8jG4mheA6TKSVn.png" style="zoom:50%;"><p>å‡è®¾våœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œç»•å•ä½æ—‹è½¬è½´ kï¼ˆ<strong>æˆ‘ä»¬åé¢ç”¨fè¡¨ç¤ºè¿™ä¸ªè½´</strong>ï¼‰ï¼Œæ—‹è½¬Î¸ã€‚<br>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºå‘é‡vå¯ä»¥åˆ†å‡ºä¸¤ä¸ªåˆ†å‘é‡ï¼š vå¹³è¡Œå’Œvå‚ç›´</p><img src="https://s2.loli.net/2022/08/01/PyNTz3VXjLc5uJ2.png" alt="ros-9-6.png" style="zoom:67%;"><p>ä»ä¸Šå›¾å¯çœ‹åˆ°ï¼Œv å‘é‡æ—‹è½¬äº† Î¸ è§’åˆ° vâ€™ å‘é‡ï¼Œæˆ‘ä»¬è¦æ±‚çš„æ˜¯è¿™ä¸ªæ—‹è½¬åçš„ vâ€˜ å‘é‡ï¼Œè¿™ä¸ªå¯ä»¥ç”¨fï¼Œvï¼Œthetaè¡¨ç¤ºå‡ºæ¥</p><ul><li><p>å…¶ä¸­éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œfçš„å®Œæ•´å½¢å¼åº”è¯¥æ˜¯$[f_x,f_y,f_z]^T$ã€‚å¦‚æœç®—ä¸Šä¸€ä¸ªç»•ç€çš„Î¸ï¼Œè¿™æ ·å°±æœ‰å››ä¸ªå˜é‡ï¼ˆè‡ªç”±åº¦ï¼‰äº†ã€‚</p><p>ä½†æ˜¯åƒæ¬§æ‹‰è§’ï¼Œå…¶å®å°±ä¸‰ä¸ªå˜é‡ï¼ˆè‡ªç”±åº¦ï¼‰ã€‚ ä¸ºäº†æ¶ˆé™¤æ—‹è½¬è½´ f æ¨¡é•¿è¿™ä¸ªå¤šä½™çš„è‡ªç”±åº¦ ï¼Œ æˆ‘ä»¬å¯ä»¥è§„å®šæ—‹è½¬è½´ f çš„æ¨¡é•¿ä¸º<br>$$<br>\parallel f  \parallel =\sqrt{f_x^2+f_y^2+f_z^2}=1<br>$$<br>å› ä¸ºé™å®šäº†æ¨¡é•¿å·²çŸ¥ï¼Œè¿™æ ·å°±å¯ä»¥çŸ¥é“å…¶ä¸­ä¸¤ä¸ªå˜é‡ f å»æ±‚ç¬¬ä¸‰ä¸ªå˜é‡äº†ã€‚ ä¹Ÿå¯ä»¥è¯´ f æ˜¯ä¸€ä¸ªå•ä½å‘é‡ã€‚ï¼Œåé¢æ¨å¯¼æ›´æ–¹ä¾¿</p></li><li><p>æˆ‘ä»¬æŠŠvå‘é‡æ­£äº¤åˆ†è§£å¼€æ¥ï¼Œå°±æœ‰ä¸€ä¸ªvå¹³è¡Œå’Œä¸€ä¸ªvå‚ç›´å‘é‡ã€‚vå¹³è¡Œå°±æ˜¯åœ¨fä¸Šçš„æŠ•å½±å‘é‡ã€‚</p></li></ul><p><img src="https://s2.loli.net/2022/08/01/gU8KwtjV76NJYdI.png"></p><p>è¿™ä¸ªvå¹³è¡Œå¯ä»¥å†™æˆå¦‚ä¸‹å½¢å¼ï¼š<br>$$<br>v_{||} =\frac{f \cdot v}{f \cdot f}f=\frac{f\cdot v}{\parallel f \parallel ^{2}}f=(f\cdot v)f<br>$$<br>å…¶ä¸­ï¼Œåˆ†å­æ˜¯få’Œvçš„ç‚¹ç§¯ç›¸ä¹˜ï¼Œåˆ†æ¯å°±æ˜¯fçš„æ¨¡é•¿ï¼Œç„¶ååé¢ä¹˜ä¸€ä¸ªfï¼Œç›¸å½“äºä¹˜äº†å‘é‡çš„æ–¹å‘ã€‚å› ä¸ºæ¨¡é•¿æ˜¯1ï¼Œæ‰€ä»¥æœ€åå¯ä»¥åŒ–ç®€ä¸ºï¼šfç‚¹ç§¯vä¹˜ä¸€ä¸ªf</p><p>å› ä¸ºæ ¹æ®å‘é‡çš„è¿ç®—ï¼Œ$v=v_{||}+v_{\bot }$ï¼Œæ‰€ä»¥$v_{\bot }=v-v{||}$ã€‚å±•å¼€å¯å¾—ï¼š<br>$$<br>v{\bot}=v-(f\cdot v)f<br>$$<br>ç»•ç€vå¹³è¡Œæ—‹è½¬çš„è¯ï¼Œå› ä¸ºvå¹³è¡Œå’Œfè½´å¹³è¡Œï¼Œæ‰€ä»¥æ—‹è½¬åå’Œæ—‹è½¬å‰éƒ½ä¸€æ ·ã€‚<code>vå¹³è¡Œâ€™ = vå¹³è¡Œ</code>ã€‚</p><p>vâŠ¥æ­£äº¤äºf çš„ ï¼Œè¿™ä¸ªæ—‹è½¬å¯ä»¥çœ‹åšæ˜¯å¹³é¢å†…çš„æ—‹è½¬ã€‚å› ä¸ºæ—‹è½¬ä¸æ”¹å˜ v âŠ¥ çš„é•¿åº¦ï¼Œæ‰€ä»¥è·¯å¾„æ˜¯ä¸€ä¸ªåœ†ã€‚ ä¸‹é¢æ˜¯è¿™ä¸ªæ—‹è½¬çš„ç¤ºæ„å›¾ï¼Œå³ä¾§çš„ä¸ºä¿¯è§†å›¾ã€‚ </p><p><img src="https://s2.loli.net/2022/08/01/CWiJGLAYequSZhr.png"></p><p>ç”±äºåœ¨è¿™ä¸ªå¹³é¢ä¸Šæˆ‘ä»¬åªæœ‰ä¸€ä¸ªå‘é‡ v âŠ¥ ï¼Œç”¨å®ƒæ¥è¡¨ç¤ºä¸€ä¸ªæ—‹è½¬æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ„é€ ä¸€ä¸ªåŒæ—¶æ­£äº¤äº uå’Œ v çš„å‘é‡ wï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡å‰ä¹˜æ¥è·å¾—ï¼š$w=f \times v\bot$<br>$$<br>\parallel w \parallel = \parallel f\times v_{\bot} \parallel<br>=\parallel f \parallel \times \parallel v_{\bot} \parallel \times sin\frac{\pi }{2}=\parallel v_{\bot} \parallel<br>$$<br>å› ä¸ºå¤¹è§’æ˜¯få’ŒvâŠ¥çš„å¤¹è§’ï¼Œå› ä¸ºè¿™ä¿©æ˜¯æ­£äº¤çš„ï¼Œæ˜¾ç„¶è§’åº¦æ˜¯$\frac{\pi }{2}$ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œw å’Œ vâŠ¥ çš„æ¨¡é•¿æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ï¼Œw ä¹Ÿä½äºåœ†ä¸Šã€‚<br>æœ‰äº†è¿™ä¸ªæ–°çš„å‘é‡ wï¼Œå°±ç›¸å½“äºæˆ‘ä»¬åœ¨å¹³é¢å†…æœ‰äº†ä¸¤ä¸ªåæ ‡è½´ã€‚</p><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥æŠŠ v â€² âŠ¥ æŠ•å½±åˆ° w  å’Œ v âŠ¥ ä¸Šï¼Œå°†å…¶åˆ†è§£ä¸º$v_{v}^{\backprime}$å’Œ$v_{w}^{\backprime}$ã€‚é‚£å°±æ˜¯$v_{\bot}^{\backprime}=v_{v}^{\backprime}+v_{w}^{\backprime}$ã€‚ä½¿ç”¨ä¸€ç‚¹ä¸‰è§’çš„çŸ¥è¯†æˆ‘ä»¬å°±èƒ½å¾—åˆ°ï¼š<br>$$<br>v_{\bot}^{\backprime}=\cos{\theta}\cdot v_{\bot}+\sin{\theta}\cdot w=\cos{\theta}\cdot v_{\bot}+\sin{\theta}\cdot(f\times v\bot)<br>$$<br>å°†ä¸Šé¢ä¸¤ä¸ªç»“æœåŠ èµ·æ¥ï¼Œå°±æ˜¯ï¼š<br>$$<br>v^{\backprime}=v_{\parallel}^{\backprime}+v_{\bot}^{\backprime}=v_{\parallel}^{\backprime}+\cos{\theta}\cdot v_{\bot}+\sin{\theta}\cdot(f\times v\bot)<br>$$<br>å› ä¸ºæˆ‘ä»¬å‰é¢è¯´è¿‡ï¼š<br>$$<br>v_{\parallel}=(f\cdot v)f,v{\bot}=v-(f\cdot v)f<br>$$<br>ç„¶å f è½´åˆå’Œ vå¹³è¡Œ å¹³è¡Œï¼Œå‰ä¹˜å¾—0ï¼Œå¯å¾—ï¼š<br>$$<br>f\times v_{\bot}=f\times (v-v_{\parallel})=f\times v+f\times v_{\parallel}=f\times v-0<br>$$<br>æœ€ç»ˆå¯å¾—ï¼š<br>$$<br>v^{\backprime}=(f\cdot v)f+\cos{\theta}(v-(f\cdot v)\cdot f)+\sin{\theta}(f\times v)<br>$$<br>åŒ–ç®€ä¸€ä¸‹ï¼š<br>$$<br>v^{\backprime}=\cos{\theta}v+(1-\cos{\theta})(f\cdot v)\cdot f+\sin{\theta}(f\times v)<br>$$<br>è‡³æ­¤ï¼Œå…¬å¼æ¨å¯¼å®Œæ¯•</p></blockquote><p>ä½†æ‰¯çš®è¿™ä¹ˆé•¿çš„å…¬å¼ï¼Œæˆ‘ä»¬å¾—ä»£æ•°è¿›æ¥ã€‚éœ€è¦å‚è€ƒå‰é¢è®²è¿‡çš„å…¬å¼äº†ã€‚</p><blockquote><p>$$<br>Rv=\cos{\theta}v+(1-\cos{\theta})(f\cdot v)\cdot f+\sin{\theta}(f^{\wedge}v)<br>$$</p><p>å› ä¸º (<strong>v</strong>Â·<strong>f</strong>)Â·<strong>f</strong> = <strong>f</strong>Â·(<strong>v</strong>Â·<strong>f</strong>) ï¼Œ ç„¶åç”±äº<strong>v</strong>Â·<strong>f</strong> = <strong>fT</strong>Â·<strong>v</strong> ï¼Œæ‰€ä»¥åŸå¼è½¬åŒ–ä¸º<strong>f</strong>Â·<strong>fT</strong>Â·<strong>v</strong> </p><p>æ‰€ä»¥å¯å¾—ï¼š<br>$$<br>Rv=\cos{\theta}v+(1-\cos{\theta})(f^{T}f)v+\sin{\theta}(f^{\wedge}v)<br>$$<br>åŒ–ç®€å¯å¾—ï¼š<br>$$<br>R=\cos{\theta}I+(1-\cos{\theta})(f^{T}f)+\sin{\theta}(f^{\wedge})<br>$$</p></blockquote><p>å¯¹äºè½¬è§’thetaï¼Œå–ä¸¤è¾¹çš„è¿¹ï¼š<br>$$<br>tr\left (R\right )=\cos{\theta}tr(I)+(1-\cos{\theta})tr(f^{T}f)+\sin{\theta}tr(f^{\wedge})=3\cos\theta+(1-\cos\theta)=1+2\cos\theta<br>$$<br>å› æ­¤ï¼š<br>$$<br>\theta=\arccos\frac{tr\left(R\right)-1}{2}<br>$$<br>å…³äºè½¬æ¢å…¬å¼ï¼Œè¿˜å¯ä»¥è‡ªè¡Œäº†è§£æä»£æ•°ï¼Œå¯ä»¥å‘ç°å®ƒä»¬å’ŒSO(3)ä¸Šæç¾¤ä¸æä»£æ•°ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</p><h2 id="5ã€æ¬§æ‹‰è§’"><a href="#5ã€æ¬§æ‹‰è§’" class="headerlink" title="5ã€æ¬§æ‹‰è§’"></a>5ã€æ¬§æ‹‰è§’</h2><p>æ¬§æ‹‰è§’å°±ä¸å¤ªå±•å¼€ä»‹ç»äº†ï¼Œå°±æ˜¯<strong>ä¸‰ä¸ªåˆ†ç¦»çš„è½¬è§’</strong>ï¼ŒæŠŠä¸€ä¸ªæ—‹è½¬åˆ†è§£æˆ3æ¬¡è®©ä¸åŒè½´çš„æ—‹è½¬ã€‚é•¿ç›¸å¦‚ä¸‹ã€‚</p><p><img src="https://s2.loli.net/2022/08/01/UXYwR7djrvLHcAZ.png" alt="æ¬§æ‹‰è§’ä¸ä¸‡å‘é”"></p><p>ä¸Šå›¾ä»‹ç»çš„æ˜¯æ¬§æ‹‰è§’çš„ä¸€ä¸ªé‡å¤§çš„ç¼ºç‚¹ï¼š<strong>ä¸‡å‘é”é—®é¢˜</strong>ã€‚ä¸‡å‘é”é—®é¢˜ä¼šå¯¼è‡´ç¬¬ä¸‰æ¬¡æ—‹è½¬å’Œç¬¬ä¸€æ¬¡æ—‹è½¬çš„æ•ˆæœç›¸åŒã€‚</p><p>å¦‚æœä¸Šå›¾ä¸å¥½ç†è§£çš„è¯ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªåŠ¨å›¾ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè“è‰²è½´å’Œç»¿è‰²è½´å åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œä¸ç®¡ç§»åŠ¨ç»¿è½´è¿˜æ˜¯è“è½´ï¼Œéƒ½åªæ˜¯åœ¨åŒä¸ªæ–¹å‘ä¸Šè½¬åŠ¨ï¼Œç›´æ¥ä¸¢å¤±äº†ä¸€ä¸ªè‡ªç”±åº¦ï¼Œå½¢æˆä¸‡å‘é”ã€‚</p><p><img src="https://s2.loli.net/2022/08/01/vkQgsZHxDS2oWuc.gif"></p><p>ç”±äºè¿™ç§<strong>å¥‡å¼‚æ€§é—®é¢˜</strong><sup class="refplus-num"><a href="#ref-q">[1]</a></sup>ï¼Œæ¬§æ‹‰è§’ä¸é€‚ç”¨äºæ’å€¼ã€è¿­ä»£ï¼Œå¾€å¾€åªé€‚åˆç”¨äºäººæœºäº¤äº’ï¼Œè¿™é‡Œéœ€è¦å¼•å‡ºæˆ‘ä»¬çœŸæ­£éœ€è¦ä½¿ç”¨çš„ï¼š</p><ul id="refplus" style="display:none;"><li id="ref-q" data-num="1">[1]   æ—‹è½¬å‘é‡ä¹Ÿæœ‰å¥‡å¼‚æ€§ï¼Œå‘ç”Ÿåœ¨è½¬è§’è¶…è¿‡2Ï€çš„æ—¶å€™</li></ul><p></p><h2 id="6ã€å››å…ƒæ•°"><a href="#6ã€å››å…ƒæ•°" class="headerlink" title="6ã€å››å…ƒæ•°"></a>6ã€å››å…ƒæ•°</h2><p>æ—‹è½¬çŸ©é˜µç”¨9ä¸ªé‡æè¿°3ä¸ªè‡ªç”±åº¦çš„æ—‹è½¬ï¼Œå…·æœ‰å†—ä½™æ€§ï¼›</p><p>æ¬§æ‹‰è§’å’Œæ—‹è½¬å‘é‡æ˜¯ç´§å‡‘çš„ï¼Œä½†å…·æœ‰å¥‡å¼‚æ€§ã€‚</p><p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬æ˜¯æ‰¾ä¸åˆ°ä¸å¸¦å¥‡å¼‚æ€§çš„ä¸‰ç»´å‘é‡æè¿°æ–¹å¼çš„ã€‚</p><p>å¸Œæœ›æ—¢èƒ½ä¿æŒç´§å‡‘æ€§ï¼Œåˆèƒ½æ²¡æœ‰å¥‡å¼‚æ€§ï¼Œå°±éœ€è¦ä½¿ç”¨å››å…ƒæ•°ã€‚</p><p>å››å…ƒæ•°å¯ä»¥ç±»æ¯”å¤æ•°ï¼Œä¾‹å¦‚è¯´ï¼Œæˆ‘ä»¬æƒ³å°†å¤å¹³é¢çš„å‘é‡æ—‹è½¬90åº¦ï¼Œå¯ä»¥ç»™è¿™ä¸ªå¤å‘é‡ä¹˜ä»¥$e^{i\theta}$ã€‚å½“ä»–è½¬åŒ–ä¸ºæ™®é€šå½¢å¼å°±æ˜¯$e^{i\theta}=\cos\theta+i\sin\theta$ã€‚</p><p>æ‰€ä»¥åœ¨äºŒç»´ä¸­ï¼Œæ—‹è½¬å¯ä»¥ç”¨å•ä½å¤æ•°æè¿°ã€‚ç±»ä¼¼ï¼Œåœ¨ä¸‰ç»´ä¸­ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨å››å…ƒæ•°æ¥æè¿°:<br>$$<br>q = q_{0}+q_{1}i+q_{2}j+q_{3}k<br>$$<br>å…¶ä¸­ï¼Œiã€jã€kæ˜¯å››å…ƒæ•°çš„ä¸‰ä¸ªè™šéƒ¨ï¼Œæ»¡è¶³ä»¥ä¸‹å…³ç³»ï¼š<br>$$<br>\left\{\begin{matrix}<br>i^{2}=j^{2}=k^{2}=-1 \\<br>ij=k;ji=-k \\<br>jk=i;kj=-i \\<br>ki=j;ik=-j<br>\end{matrix}\right.<br>$$<br>å¦‚æœæŠŠijkçœ‹æˆä¸‰ä¸ªåæ ‡è½´ï¼Œé‚£ä»–ä»¬ä¸è‡ªå·±çš„ä¹˜æ³•å’Œå¤æ•°çš„ä¹˜æ³•ä¸€æ ·ï¼Œç›¸äº’ä¹‹é—´çš„ä¹˜æ³•å’Œå¤–ç§¯ä¸€æ ·ã€‚æœ‰æ—¶äººä»¬ä¹Ÿç”¨ä¸€ä¸ªæ ‡é‡å’Œä¸€ä¸ªå‘é‡æ¥è¡¨ç¤ºå››å…ƒæ•°ï¼š<br>$$<br>q=[s,v]^{T},s=q_{0}\in\mathbb R,v=[q_1,q_2,q_3]^{T}\in\mathbb R^3<br>$$<br>sæ˜¯å››å…ƒæ•°çš„å®éƒ¨ï¼Œvæ˜¯å››å…ƒæ•°çš„è™šéƒ¨ã€‚å¦‚æœä¸€ä¸ªå››å…ƒæ•°çš„è™šéƒ¨ä¸º0ï¼Œåˆ™ç§°ä¸º<strong>å®å››å…ƒæ•°</strong>ï¼›å¦‚æœå®éƒ¨ä¸º0ï¼Œå°±æ˜¯<strong>è™šå››å…ƒæ•°</strong>ã€‚</p><h3 id="6-1-å››å…ƒæ•°è¿ç®—"><a href="#6-1-å››å…ƒæ•°è¿ç®—" class="headerlink" title="6.1 å››å…ƒæ•°è¿ç®—"></a>6.1 å››å…ƒæ•°è¿ç®—</h3><p>å››å…ƒæ•°å’Œé€šå¸¸çš„å¤æ•°ä¸€æ ·ï¼Œå¯ä»¥è¿›è¡Œå„ç§è¿ç®—ã€‚æ¯”å¦‚å››åˆ™è¿ç®—ã€å…±è½­ã€æ±‚é€†ã€æ•°ä¹˜ç­‰ç­‰ã€‚</p><p>è®¾ä¸¤ä¸ªå››å…ƒæ•°$q_a,q_b$ï¼Œå‘é‡$[s_a,v_a],[s_b,v_b]$ï¼Œæˆ–è€…$q_a=s_a+x_{a}i+y_{a}j+z{a}k$ï¼Œ$q_b=s_b+x_{b}i+y_{b}j+z{b}k$ã€‚</p><h4 id="6-1-1åŠ å‡æ³•"><a href="#6-1-1åŠ å‡æ³•" class="headerlink" title="6.1.1åŠ å‡æ³•"></a>6.1.1åŠ å‡æ³•</h4><p>$$<br>q_a\pm q_b=[s_a\pm s_b,v_a\pm v_b]<br>$$</p><h4 id="6-1-2-ä¹˜æ³•"><a href="#6-1-2-ä¹˜æ³•" class="headerlink" title="6.1.2 ä¹˜æ³•"></a>6.1.2 ä¹˜æ³•</h4><p>æŠŠqaçš„æ¯ä¸€é¡¹å’Œqbçš„æ¯ä¸€é¡¹ç›¸ä¹˜ï¼Œæœ€åç›¸åŠ ã€‚è™šéƒ¨è¦æŒ‰ç…§iã€jã€kä¸‰ä¸ªè™šéƒ¨çš„è¿ç®—å…³ç³»è¿›è¡Œï¼š<br>$$<br>q_{a}q_{b}=s_as_b-x_ax_b-y_ay_b-z_az_b\\<br>+(s_ax_b+x_as_b+y_az_b-z_ay_b)i\\<br>+(s_ay_b-x_az_b+y_as_b+z_ax_b)j\\<br>+(s_az_b+x_ay_b-y_ax_b+z_as_b)k<br>$$</p><p>å¦‚æœå†™æˆå‘é‡å½¢å¼å¹¶åˆ©ç”¨å†…å¤–ç§¯è¿ç®—ï¼Œä¼šæœ‰æ›´åŠ ç®€æ´çš„è¡¨è¾¾å¼ï¼š<br>$$<br>q_aq_b=[s_as_b-v_a^Tv_b,s_av_b+s_bv_a+v_a\times v_b]^{T}<br>$$</p><p>åœ¨è¿™ç§ä¹˜æ³•å®šä¹‰ä¸‹ï¼Œä¿©å®å››å…ƒæ•°ä¹˜ç§¯å’Œå¤æ•°ä¸€æ ·ï¼Œä»ç„¶æ˜¯å®çš„ã€‚Butï¼Œç”±äºæœ€åä¸€é¡¹å¤–ç§¯çš„å­˜åœ¨ï¼Œå››å…ƒæ•°ä¹˜æ³•é€šå¸¸æ˜¯ä¸å¯ä»¥äº¤æ¢çš„ï¼Œé™¤é$v_a,v_b$åœ¨$\mathbb R^3$ä¸­å…±çº¿ï¼Œå¤–ç§¯é¡¹å˜æˆ0ï¼Œå°±å¯ä»¥è¿›è¡Œä¹˜æ³•äº¤æ¢ã€‚</p><h4 id="6-1-3-æ¨¡é•¿"><a href="#6-1-3-æ¨¡é•¿" class="headerlink" title="6.1.3 æ¨¡é•¿"></a>6.1.3 æ¨¡é•¿</h4><p>ä¸¤ä¸ªå››å…ƒæ•°çš„æ¨¡å°±æ˜¯æ¨¡çš„ä¹˜ç§¯ã€‚ï¼ˆæ‰€ä»¥å•ä½å››å…ƒæ•°ç›¸ä¹˜ä¹‹åä»ç„¶æ˜¯å››å…ƒæ•°ï¼‰<br>$$<br>\parallel q_a \parallel =\sqrt{s_a^2+x_a^2+y_a^2+z_a^2}\\<br>\parallel q_aq_b \parallel = \parallel q_a \parallel \parallel q_b \parallel<br>$$</p><h4 id="6-1-4-å…±è½­"><a href="#6-1-4-å…±è½­" class="headerlink" title="6.1.4 å…±è½­"></a>6.1.4 å…±è½­</h4><p>å››å…ƒæ•°å…±è½­å’Œæœ¬èº«ç›¸ä¹˜ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªå®å››å…ƒæ•°ï¼Œå…¶<strong>å®éƒ¨ä¸ºæ¨¡é•¿çš„å¹³æ–¹</strong>ã€‚<br>$$<br>q_a^{*}=s_a-x_{a}i-y_{a}j-z_{a}k=[s_a,-v_a]^T\\<br>q^{*}q=qq^{*}=[s_a^2+v^Tv,0]^T<br>$$</p><h4 id="6-1-5-é€†"><a href="#6-1-5-é€†" class="headerlink" title="6.1.5 é€†"></a>6.1.5 é€†</h4><p>ä¸€ä¸ªå››å…ƒæ•°çš„é€†æ˜¯ï¼š<br>$$<br>q^{-1}=q^*/\parallel q \parallel^2<br>$$</p><p>æŒ‰ç…§è¿™ä¸ªå®šä¹‰ï¼Œå››å…ƒæ•°å’Œè‡ªå·±çš„é€†çš„ä¹˜ç§¯ä¸ºå®å››å…ƒæ•°1ï¼š<br>$$<br>qq^{-1}=q^{-1}q=1<br>$$<br>è‹¥qæ˜¯å•ä½å››å…ƒæ•°ï¼Œå®ƒçš„é€†å’Œå…±è½­å°±æ˜¯åŒä¸€ä¸ªé‡ã€‚åŒæ—¶ï¼Œä¹˜ç§¯çš„é€†å…·æœ‰å’ŒçŸ©é˜µç›¸ä¼¼çš„æ€§è´¨ï¼š<br>$$<br>(q_aq_b)^{-1}=q_b^{-1}q_a^{-1}<br>$$</p><h4 id="6-1-6-æ•°ä¹˜"><a href="#6-1-6-æ•°ä¹˜" class="headerlink" title="6.1.6 æ•°ä¹˜"></a>6.1.6 æ•°ä¹˜</h4><p>å’Œå‘é‡ç±»ä¼¼ï¼Œå››å…ƒæ•°å¯ä»¥ä¸æ•°ç›¸ä¹˜<br>$$<br>kq=[ks,kv]^T<br>$$</p><h3 id="6-2-å››å…ƒæ•°è¡¨ç¤ºæ—‹è½¬"><a href="#6-2-å››å…ƒæ•°è¡¨ç¤ºæ—‹è½¬" class="headerlink" title="6.2 å››å…ƒæ•°è¡¨ç¤ºæ—‹è½¬"></a>6.2 å››å…ƒæ•°è¡¨ç¤ºæ—‹è½¬</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å››å…ƒæ•°è¡¨è¾¾å¯¹ä¸€ä¸ªç‚¹çš„æ—‹è½¬ã€‚</p><p>å‡è®¾è¯´ï¼Œæœ‰ä¸€ä¸ªç‚¹$p=\left [ x,y,z \right ]\in\mathbb R^3$ï¼Œä»¥åŠä¸€ä¸ªç”±å•ä½å››å…ƒæ•°qæŒ‡å®šçš„æ—‹è½¬ã€‚ä¸‰ç»´ç‚¹pç»è¿‡æ—‹è½¬ä¹‹åå˜æˆpâ€˜ï¼Œç”¨çŸ©é˜µçš„æ–¹å¼æè¿°çš„è¯ï¼Œå°±æ˜¯<code>pâ€™=Rp</code>ã€‚</p><p>ç”¨å››å…ƒæ•°çš„æ–¹å¼æè¿°ï¼Œå°±æ˜¯ï¼š<br>$$<br>p=[0,x,y,z]^T=[0,v]^T<br>$$</p><p>ç›¸å½“äºæŠŠå››å…ƒæ•°çš„ä¸‰ä¸ªè™šéƒ¨å’Œç©ºé—´ä¸­çš„3ä¸ªè½´å¯¹åº”ã€‚æ—‹è½¬åç‚¹pâ€™å¯ä»¥è¿™æ ·è¡¨ç¤ºä¹˜ç§¯ï¼š<br>$$<br>p^{â€˜}=qpq^{-1}<br>$$<br>è¿™é‡Œçš„ä¹˜æ³•å°±æ˜¯å››å…ƒæ•°ä¹˜æ³•ï¼Œå¾—åˆ°çš„ç»“æœä¹Ÿå°†æ˜¯å››å…ƒæ•°ã€‚è®¡ç®—ç»“æœçš„å®éƒ¨ä¸º0ï¼Œæ‰€ä»¥æ˜¯çº¯è™šå››å…ƒæ•°ã€‚</p><h3 id="6-3-å››å…ƒæ•°åˆ°å…¶ä»–æ—‹è½¬è¡¨ç¤ºçš„è½¬æ¢"><a href="#6-3-å››å…ƒæ•°åˆ°å…¶ä»–æ—‹è½¬è¡¨ç¤ºçš„è½¬æ¢" class="headerlink" title="6.3 å››å…ƒæ•°åˆ°å…¶ä»–æ—‹è½¬è¡¨ç¤ºçš„è½¬æ¢"></a>6.3 å››å…ƒæ•°åˆ°å…¶ä»–æ—‹è½¬è¡¨ç¤ºçš„è½¬æ¢</h3><p>è®¾$q=\left [ s,v \right ]^T $ï¼Œä»¥ä¸‹æ¥è®¨è®ºå››å…ƒæ•°ä¸æ—‹è½¬å‘é‡ã€æ—‹è½¬çŸ©é˜µçš„å…³ç³»ã€‚é¦–å…ˆï¼Œå®šä¹‰å¦‚ä¸‹çš„ç¬¦å·ï¼š<br>$$<br>q^+=<br>\begin{bmatrix}<br> s &amp; -v^T\\<br> v &amp; sI+v^{\wedge }<br>\end{bmatrix},<br>q^{\oplus}=<br>\begin{bmatrix}<br> s &amp; -v^T\\<br> v &amp; sI-v^{\wedge }<br>\end{bmatrix}<br>$$</p><p>è¿™ä¸¤ä¸ªç¬¦å·æŠŠå››å…ƒæ•°æ˜ å°„æˆä¸€ä¸ª4x4çš„çŸ©é˜µã€‚</p><p>$$<br>q_1^+q_2=<br>\begin{bmatrix}<br> s &amp; -v^T\\<br> v &amp; sI+v^{\wedge }<br>\end{bmatrix}<br>\begin{bmatrix}<br> s_2\\<br> v_2<br>\end{bmatrix}=<br>\begin{bmatrix}<br> -v_1^Tv_2 + s_1s_2\\<br> s_1v_2+s_2v_1+v_1^{\wedge}v_2<br>\end{bmatrix}=<br>q_1q_2<br>$$</p><p>åŒç†ï¼Œæˆ‘ä»¬å¯ä»¥è¯å¾—ï¼š</p><p>$$<br>q_1q_2=q_1^+q_2=q_2^{\oplus}q_1<br>$$</p><p>æˆ‘ä»¬è€ƒè™‘åˆ°ç”¨å››å…ƒæ•°å¯¹ç©ºé—´ç‚¹è¿›è¡Œæ—‹è½¬çš„é—®é¢˜ã€‚å‚è€ƒå‰é¢çš„è¯´æ³•ï¼Œæˆ‘ä»¬ä»£å…¥ä¸Šé¢å¼å­å¯å¾—ï¼š</p><p>$$<br>p^{â€˜}=qpq^{-1}\\<br>=q^+p^+q^{-1}\\<br>=q^+q^{-1}p<br>$$</p><p>ç„¶åä»£å…¥ä¸¤ä¸ªç¬¦å·å¯¹åº”çš„çŸ©é˜µï¼š</p><p>$$<br>q^+(q^{-1})^{\oplus}=<br>\begin{bmatrix}<br> s &amp; -v^T\\<br> v &amp; sI+v^{\wedge }<br>\end{bmatrix}<br>\begin{bmatrix}<br> s &amp; v^T\\<br> -v &amp; sI+v^{\wedge }<br>\end{bmatrix}=<br>\begin{bmatrix}<br> 1 &amp; 0\\<br> 0 &amp; vv^T+s^2I+2sv^{\wedge}+(v^{\wedge})^2<br>\end{bmatrix}(*)<br>$$</p><p>å› ä¸º pâ€™ å’Œ p éƒ½æ˜¯è™šå››å…ƒæ•°ï¼Œæ‰€ä»¥äº‹å®ä¸Šï¼Œè¯¥çŸ©é˜µå³ä¸‹è§’å°±æ˜¯ç»™å‡ºäº†<strong>ä»å››å…ƒæ•°åˆ°æ—‹è½¬çŸ©é˜µçš„å˜æ¢å…³ç³»</strong></p><p>$$<br>R=vv^T+s^2I+2sv^{\wedge}+(v^{\wedge})^2<br>$$</p><p>ç„¶åæˆ‘ä»¬ä¸æ˜¯è¿˜æœ‰æ—‹è½¬å‘é‡å˜›</p><p>ä¸ºäº†å¾—åˆ°å››å…ƒæ•°åˆ°æ—‹è½¬å‘é‡çš„è½¬æ¢å…¬å¼ï¼Œæˆ‘ä»¬å¯¹å¼å­å·¦å³ä¸¤è¾¹æ±‚è¿¹ï¼š<br>$$<br>tr\left (R\right)=tr(vv^T)+3s^2+2s\cdot 0+tr((v^{\wedge})^2)\\<br>=v_1^2+v_2^2+v_3^2+3s^2-2(v_1^2+v_2^2+v_3^2)\\<br>=(1-s^2)+3s^2-2(1-s^2)\\<br>=4s^2-1<br>$$<br>å› ä¸ºæˆ‘ä»¬å‰é¢è®¡ç®—æ—‹è½¬å‘é‡çš„æ—¶å€™ï¼Œå¾—åˆ°è¿‡ä¸€ä¸ªå¼å­ï¼ŒæŠŠå®ƒä»£è¿›å»ï¼š<br>$$<br>\theta = \arccos(\frac{tr \left (R \right )-1}{2})=\arccos(2s^2-1)<br>$$<br>å¯å¾—ï¼š<br>$$<br>\cos\theta=2s^2-1=2\cos^2\frac{\theta}{2}-1<br>$$<br>æ‰€ä»¥ï¼š<br>$$<br>\theta = 2\arccos s<br>$$<br>å…³äºæ—‹è½¬è½´ï¼Œåœ¨ä¸Šé¢å¼å­<code>(*)</code>ä¸­ï¼Œç”¨qçš„è™šéƒ¨ä»£æ›¿pï¼Œå°±å¯ä»¥çŸ¥é“ï¼Œqçš„è™šéƒ¨ç»„æˆçš„å‘é‡åœ¨æ—‹è½¬æ—¶æ˜¯ä¸åŠ¨çš„ï¼Œå°±æ„æˆäº†æ—‹è½¬è½´ï¼Œæ‰€ä»¥åªè¦é™¤æ‰ä»–çš„æ¨¡é•¿å°±å¯ä»¥å¾—å‡ºã€‚</p><p>æ‰€ä»¥ï¼Œå››å…ƒæ•°åˆ°æ—‹è½¬å‘é‡çš„è½¬æ¢æ€»ç»“å¦‚ä¸‹ï¼š<br>$$<br>\left\{\begin{matrix}<br>\theta = 2\arccos q_0 \\<br>\left [ n_x,n_y,n_z \right ]^T=\frac{\left [ q_1,q_2,q_3 \right ]^T}{\sin\frac{\theta}{2}}<br>\end{matrix}\right.<br>$$</p><h3 id="6-4-ç›¸ä¼¼ã€ä»¿å°„ã€å°„å½±å˜æ¢"><a href="#6-4-ç›¸ä¼¼ã€ä»¿å°„ã€å°„å½±å˜æ¢" class="headerlink" title="6.4 ç›¸ä¼¼ã€ä»¿å°„ã€å°„å½±å˜æ¢"></a>6.4 ç›¸ä¼¼ã€ä»¿å°„ã€å°„å½±å˜æ¢</h3><p>å¤„ç†æ¬§å¼å˜æ¢ä¹‹å¤–ï¼Œä¸‰ç»´ç©ºé—´ä¸­è¿˜æœ‰å¾ˆå¤šç§å˜æ¢æ–¹å¼</p><p>åªæ˜¯æ¬§å¼å˜æ¢æœ€ç®€å•ï¼Œä»–ä¿æŒäº†å‘é‡çš„é•¿åº¦ä¸å¤¹è§’ï¼Œç›¸å½“äºè¯´ï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªåˆšä½“åŸå°ä¸åŠ¨åœ°è¿›è¡Œç§»åŠ¨æ—‹è½¬ã€‚</p><p>å…¶ä»–çš„å˜æ¢æ–¹å¼åˆ™æ˜¯ä¼šæ”¹å˜å…¶å¤–å½¢ã€‚</p><p>ä»–ä»¬éƒ½æ‹¥æœ‰ç±»ä¼¼çš„çŸ©é˜µè¡¨ç¤ºã€‚</p><h4 id="1ã€ç›¸ä¼¼å˜æ¢"><a href="#1ã€ç›¸ä¼¼å˜æ¢" class="headerlink" title="1ã€ç›¸ä¼¼å˜æ¢"></a>1ã€ç›¸ä¼¼å˜æ¢</h4><p>æ¯”æ¬§å¼å˜æ¢å¤šäº†ä¸€ä¸ªè‡ªç”±åº¦ï¼Œå…è®¸ç‰©ä½“è¿›è¡Œå‡åŒ€ç¼©æ”¾ï¼š<br>$$<br>T_s=<br>\begin{bmatrix}<br> sR &amp; t\\<br> 0^T &amp; 1<br>\end{bmatrix}<br>$$<br>ä¸éš¾çœ‹å‡ºï¼Œæ—‹è½¬éƒ¨åˆ†å¤šäº†ä¸€ä¸ªç¼©æ”¾å› å­sï¼Œè¡¨ç¤ºå¯¹å…¶å‘é‡æ—‹è½¬ä¹‹åï¼Œå¯ä»¥åœ¨xï¼Œyï¼Œzåæ ‡ä¸Šè¿›è¡Œå‡åŒ€ç¼©æ”¾ã€‚</p><p>å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªè¾¹é•¿ä¸º1çš„æ­£æ–¹ä½“ç¼©æ”¾æˆè¾¹é•¿ä¸º10çš„æ­£æ–¹ä½“ï¼Œå·®ä¸å¤šæ˜¯è¿™ä¹ˆä¸ªæ•ˆæœã€‚</p><p>ä¸‰ç»´ç›¸ä¼¼å˜æ¢çš„é›†åˆä¹Ÿå«åš<strong>ç›¸ä¼¼å˜æ¢ç¾¤</strong>ï¼Œè®°åšSim(3)ã€‚</p><h4 id="2ã€ä»¿å°„å˜æ¢"><a href="#2ã€ä»¿å°„å˜æ¢" class="headerlink" title="2ã€ä»¿å°„å˜æ¢"></a>2ã€ä»¿å°„å˜æ¢</h4><p>$$<br>T_a=<br>\begin{bmatrix}<br> A &amp; t\\<br> 0^T &amp; 1<br>\end{bmatrix}<br>$$</p><p>å’Œæ¬§å¼å˜æ¢çš„åŒºåˆ«æ˜¯ï¼šæ–¹å¼å˜æ¢åªè¦æ±‚Aæ˜¯ä¸€ä¸ªå¯é€†çŸ©é˜µï¼Œè€Œæ²¡å¿…è¦æ˜¯æ­£äº¤çŸ©é˜µã€‚</p><p>ä»¿å°„å˜æ¢ï¼Œä¹Ÿå«åšæ­£äº¤æŠ•å½±</p><p>ä¸€ä¸ªç«‹æ–¹ä½“ï¼Œç»è¿‡ä»¿å°„å˜æ¢ä¹‹åï¼Œç«‹æ–¹ä½“å°±ä¸å†æ˜¯æ­£æ–¹çš„äº†ï¼Œä½†å„ä¸ªé¢ä»ç„¶æ˜¯å¹³è¡Œå››è¾¹å½¢ã€‚</p><h4 id="3ã€å°„å½±å˜æ¢"><a href="#3ã€å°„å½±å˜æ¢" class="headerlink" title="3ã€å°„å½±å˜æ¢"></a>3ã€å°„å½±å˜æ¢</h4><p>$$<br>T_p=<br>\begin{bmatrix}<br> A &amp; t\\<br> a^T &amp; v<br>\end{bmatrix}<br>$$</p><p>å·¦ä¸‹è§’å…ƒç´ ä¸ºç¼©æ”¾ã€‚ç”±äºç”¨äº†é½æ¬¡åæ ‡ï¼Œvâ‰ 0æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ•´ä¸ªçŸ©é˜µé™¤ä»¥vå¾—åˆ°ä¸€ä¸ªå³ä¸‹è§’ä¸º1çš„çŸ©é˜µï¼Œå¦åˆ™å³ä¸‹è§’ä¸º0ã€‚</p><p>2ç»´çš„å°„å½±å˜æ¢æœ‰8ä¸ªè‡ªç”±åº¦ï¼Œ3ç»´çš„æœ‰15ä¸ªè‡ªç”±åº¦ã€‚</p><p>å°„å½±å˜æ¢æ˜¯ç°åœ¨è®²çš„è¿‡ç¨‹ä¸­ï¼Œå½¢å¼æœ€ä¸€èˆ¬çš„ã€‚</p><p>å¯ä»¥ç±»æ¯”ä¸ºï¼šä»çœŸå®ä¸–ç•Œåˆ°ç›¸æœºç…§ç‰‡çš„å˜æ¢ã€‚</p><p>å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ç›¸æœºä¸­æ‹çš„æ­£æ–¹å½¢å¯èƒ½éƒ½ä¸ä¼šæ˜¯æ­£æ–¹å½¢äº†ï¼Œç”±äºè§†è§’ä»¥åŠè¿‘å¤§è¿œå°ï¼Œä½ æœ‰æ—¶å¯ä»¥æ‹å‡ºä¸è§„åˆ™çš„å››è¾¹å½¢ã€‚</p><table><thead><tr><th>å˜æ¢åç§°</th><th>è‡ªç”±åº¦</th><th>ä¸å˜çš„æ€§è´¨</th></tr></thead><tbody><tr><td>æ¬§å¼å˜æ¢</td><td>6</td><td>é•¿åº¦ã€å¤¹è§’ã€ä½“ç§¯</td></tr><tr><td>ç›¸ä¼¼å˜æ¢</td><td>7</td><td>ä½“ç§¯æ¯”</td></tr><tr><td>ä»¿å°„å˜æ¢</td><td>12</td><td>å¹³è¡Œæ€§ã€ä½“ç§¯æ¯”</td></tr><tr><td>å°„å½±å˜æ¢</td><td>15</td><td>æ¥è§¦å¹³é¢çš„ç›¸äº¤ä¸ç›¸åˆ‡</td></tr></tbody></table>    <style>    #refplus, #refplus li{         padding:0;        margin:0;        list-style:none;    }ï¼›    </style>    <script src="https://unpkg.com/@popperjs/core@2"></script>    <script src="https://unpkg.com/tippy.js@6"></script>    <script>    document.querySelectorAll(".refplus-num").forEach((ref) => {        let refid = ref.firstChild.href.replace(location.origin+location.pathname,'');        let refel = document.querySelector(refid);        let refnum = refel.dataset.num;        let ref_content = refel.innerText.replace(`[${refnum}]`,'');        tippy(ref, {            content: ref_content,        });    });    </script>    ]]></content>
      
      
      <categories>
          
          <category> æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
            <tag> SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS å…«ã€å‚æ•°çš„ä½¿ç”¨</title>
      <link href="/2022/07/31/ros-8-rosparam/"/>
      <url>/2022/07/31/ros-8-rosparam/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS 8: å‚æ•°çš„ä½¿ç”¨ä¸ç¼–ç¨‹</h1><p>åœ¨ROS Masterä¸­æœ‰ä¸€ä¸ª<strong>å‚æ•°æœåŠ¡å™¨</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>å…¨å±€å­—å…¸</strong>ï¼Œç”¨æ¥ä¿å­˜å„ä¸ªèŠ‚ç‚¹çš„é…ç½®å‚æ•°çš„ï¼Œè¿™äº›å‚æ•°æ˜¯å„ä¸ªèŠ‚ç‚¹<strong>éƒ½å¯ä»¥å…¨å±€è®¿é—®çš„</strong>ã€‚</p><blockquote><p>å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥å­˜æ”¾<strong>å…¨å±€å˜é‡</strong>çš„ç©ºé—´</p></blockquote><p>æœ‰å…³å‚æ•°çš„ä½¿ç”¨ï¼Œæœ‰å¦‚ä¸‹å‘½ä»¤è¡Œå·¥å…·</p><h2 id="ä¸€ã€å‚æ•°çš„å‘½ä»¤è¡Œå·¥å…·">ä¸€ã€å‚æ•°çš„å‘½ä»¤è¡Œå·¥å…·</h2><p>æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¼šä½¿ç”¨<code>rosparam</code>ï¼Œç”¨äºä»ROSå‚æ•°æœåŠ¡å™¨è·å–ã€è®¾ç½®å’Œåˆ é™¤å‚æ•°ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosparam is a command-line tool for getting, setting, and deleting parameters from the ROS Parameter Server.Commands:        rosparam set    set parameter        rosparam get    get parameter        rosparam load   load parameters from file        rosparam dump   dump parameters to file        rosparam delete delete parameter        rosparam list   list parameter names<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœå‚æ•°æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šç”¨<code>*.yaml</code>æ–‡ä»¶æ¥å­˜å‚æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯rosparamåœ¨å‘½ä»¤è¡Œçš„å·¥å…·ä½¿ç”¨ä»‹ç»</p><ul><li><p>åˆ—å‡ºå‚æ•°<code>rosparam list</code></p><blockquote><ul><li>å¦‚æœæ­¤æ—¶ä½ è¿è¡Œturtlesimï¼Œä½ å¯ä»¥ä½¿ç”¨<code>rosparam list</code>çœ‹åˆ°å‚æ•°åï¼š</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">/rosversion/run_id/turtlesim/background_b/turtlesim/background_g/turtlesim/background_r<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å¦‚æœä½ è®¾ç½®äº†å‘½åç©ºé—´ï¼Œè¿˜éœ€è¦åœ¨åé¢åŠ ä¸Šå‘½åç©ºé—´çš„åå­—ï¼Œå¦‚ï¼š<code>rosparam list /namespace</code></p><p>è¿™é‡Œçš„å‘½åç©ºé—´å¯ä»¥ç±»æ¯”ä¸ºc++ä¸­çš„<code>using namespace xxx</code>ä¸­çš„<code>xxx</code></p><p><strong>å…·ä½“å†…å®¹æ”¾åœ¨ç¬¬ä¸‰Partä»‹ç»</strong></p></li></ul></blockquote></li><li><p>æ˜¾ç¤ºæŸä¸ªå‚æ•°å€¼<code>rosparam get &lt;param_key&gt;</code></p></li><li><p>è®¾ç½®æŸä¸ªå‚æ•°å€¼<code>rosparam set &lt;param_key&gt; &lt;param_value&gt;</code></p><blockquote><p>æ¯”å¦‚è¦ä¿®æ”¹turtlesimçš„backgroundå¯¹åº”çš„RGBå€¼ï¼Œè¾“å…¥ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosparam set /turtlesim/background_g 255<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åturtlesiméœ€è¦æ”¶åˆ°ä¸€æ¬¡<code>/clear</code>è¯·æ±‚ï¼Œæ‰ä¼šé‡æ–°è¯»å–èƒŒæ™¯å€¼</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosservice call /clear "{}"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ­¤æ—¶ä½ æ­£åœ¨è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°ï¼Œæµ·é¾Ÿä»¿çœŸå™¨çš„èƒŒæ™¯é¢œè‰²å·²ç»ä¿®æ”¹äº†ã€‚</p><p>-vï¼šæ˜¾ç¤ºè¯¦ç»†è¾“å‡ºã€‚</p><p>-t &lt;text_file&gt;, --textfile &lt;text_file&gt; ï¼šå°†å‚æ•°è®¾ç½®ä¸ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ã€‚</p><p>-b &lt;binary_file&gt;, --binfile &lt;binary_file&gt; ï¼šå°†å‚æ•°è®¾ç½®ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶çš„å†…å®¹ã€‚å‚æ•°æœåŠ¡å™¨å°†å€¼å­˜å‚¨ä¸ºXML-RPCäºŒè¿›åˆ¶ç±»å‹ï¼ˆåŸº64ç¼–ç ï¼‰ã€‚</p></blockquote></li><li><p>ä¿å­˜å‚æ•°åˆ°æ–‡ä»¶<code>rosparam dump &lt;file_name&gt;</code></p></li><li><p>ä»æ–‡ä»¶è¯»å–å‚æ•°<code>rosparam load &lt;file_name&gt;</code></p><blockquote><p>æ­¤æ—¶ï¼Œåœ¨å·¥ä½œç©ºé—´ä½¿ç”¨<code>rosparam dump param.yaml</code>æŒ‡ä»¤ï¼Œroså°±ä¼šæŠŠå½“å‰çš„å‚æ•°é…ç½®ä¿å­˜åˆ°è¯¥yamlæ–‡ä»¶ä¸­ã€‚</p><p>ä½¿ç”¨<code>rosparam load param.yaml</code>å°±å¯ä»¥åŠ è½½ä»¥å‰ä¿å­˜å¥½çš„å‚æ•°</p><p>yamlæ–‡ä»¶ä¼šå­˜å‚¨ç±»ä¼¼äºä»¥ä¸‹çš„å†…å®¹ï¼Œ</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">rosdistro</span><span class="token punctuation">:</span> 'melodic  '<span class="token key atrule">roslaunch</span><span class="token punctuation">:</span>  <span class="token key atrule">uris</span><span class="token punctuation">:</span>    <span class="token key atrule">xxx</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//xxx<span class="token punctuation">:</span>44429/<span class="token key atrule">rosversion</span><span class="token punctuation">:</span> '1.14.10  '<span class="token key atrule">run_id</span><span class="token punctuation">:</span> 80cf1b56<span class="token punctuation">-</span>0e4b<span class="token punctuation">-</span>11ed<span class="token punctuation">-</span>9d12<span class="token punctuation">-</span>000c29d50405<span class="token key atrule">turtlesim</span><span class="token punctuation">:</span>  <span class="token key atrule">background_b</span><span class="token punctuation">:</span> <span class="token number">255</span>  <span class="token key atrule">background_g</span><span class="token punctuation">:</span> <span class="token number">255</span>  <span class="token key atrule">background_r</span><span class="token punctuation">:</span> <span class="token number">255</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote></li><li><p>åˆ é™¤å‚æ•°<code>rosparam delete &lt;param_key&gt;</code></p><blockquote><p>åˆ é™¤å½“å‰ç³»ç»Ÿè½½å…¥çš„å‚æ•°ã€‚</p></blockquote></li></ul><h2 id="äºŒã€å‚æ•°åœ¨ç¼–ç¨‹ä¸Šçš„ä½¿ç”¨">äºŒã€å‚æ•°åœ¨ç¼–ç¨‹ä¸Šçš„ä½¿ç”¨</h2><h3 id="c-ä»£ç å®ç°">c++ä»£ç å®ç°</h3><h4 id="1ã€è®¾ç½®å‚æ•°">1ã€è®¾ç½®å‚æ•°</h4><p><code>ros::NodeHandle::setParam() </code></p><p><code>ros::param::set()</code></p><p><strong>åœ¨c++ä¸­</strong>ï¼Œåœ¨ä»£ç ä¸­è·å–å‚æ•°æ—¶ï¼Œé™¤äº†ä¸Šè¿°ä»£ç ä½¿ç”¨çš„<code>ros::param::get</code>æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¥æŸ„æ¥è·å–å‚æ•°ï¼š<code>ros::NodeHandle::getParam() </code>ã€‚éœ€è¦çš„å‚æ•°æ˜¯ä¸€æ ·çš„ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//ros::NodeHandle::setParam()</span>ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>nh<span class="token punctuation">.</span><span class="token function">setParam</span><span class="token punctuation">(</span><span class="token string">"/global_param"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>nh<span class="token punctuation">.</span><span class="token function">setParam</span><span class="token punctuation">(</span><span class="token string">"relative_param"</span><span class="token punctuation">,</span> <span class="token string">"my_string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>nh<span class="token punctuation">.</span><span class="token function">setParam</span><span class="token punctuation">(</span><span class="token string">"bool_param"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éƒ½æ˜¯éœ€è¦è¾“å…¥å‚æ•°åå’Œå­˜æ”¾çš„å˜é‡å</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//ros::param::set()</span>ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"/global_param"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"relative_param"</span><span class="token punctuation">,</span> <span class="token string">"my_string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"bool_param"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨NodeHandleï¼Œè¿˜éœ€è¦æ³¨æ„ä»–å¯¹åº”çš„å‘½åç©ºé—´ã€‚</p><p>å¯¹äºå‘½åç©ºé—´æ¥è¯´ï¼ŒèŠ‚ç‚¹åå‰é¢ç›´æ¥åŠ ä¸ª<code>/</code>å·ï¼Œä»£è¡¨ç€è¿™ä¸ªèŠ‚ç‚¹æ˜¯æ”¾åœ¨å…¨å±€çš„ï¼Œæ¯”å¦‚<code>/turltesim</code>ã€‚å¦‚æœéœ€è¦ä½¿ç”¨å¯¹åº”å‘½åç©ºé—´é‡Œçš„èŠ‚ç‚¹ï¼Œéœ€è¦å†™ä¸Šç©ºé—´åï¼Œå¦‚ï¼š<code>/my/turtlesim</code></p><h4 id="2ã€æ£€æŸ¥å‚æ•°æ˜¯å¦å­˜åœ¨">2ã€æ£€æŸ¥å‚æ•°æ˜¯å¦å­˜åœ¨</h4><ul><li><code>ros::NodeHandle::hasParam()</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nh<span class="token punctuation">.</span><span class="token function">hasParam</span><span class="token punctuation">(</span><span class="token string">"my_param"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>ros::param::has()</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">"my_param"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="3ã€åˆ é™¤å‚æ•°">3ã€åˆ é™¤å‚æ•°</h4><ul><li><code>ros::NodeHandle::deleteParam()</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>nh<span class="token punctuation">.</span><span class="token function">deleteParam</span><span class="token punctuation">(</span><span class="token string">"my_param"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>ros::param::del()</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">"my_param"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="4ã€è®¿é—®ç§æœ‰å‚æ•°">4ã€è®¿é—®ç§æœ‰å‚æ•°</h4><p>æ ¹æ®ä½¿ç”¨çš„æ˜¯â€œå¥æŸ„â€æ¥å£è¿˜æ˜¯â€œè£¸â€æ¥å£ï¼Œè®¿é—®ç§æœ‰å‚æ•°çš„æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚åœ¨å¥æŸ„æ¥å£ä¸­ï¼Œæ‚¨å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„<code>ros::NodeHandle</code>ä»¥ç§æœ‰å‘½åç©ºé—´ä½œä¸ºå…¶å‘½åç©ºé—´:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span>NodeHandle <span class="token function">nh</span><span class="token punctuation">(</span><span class="token string">"~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>string param<span class="token punctuation">;</span>nh<span class="token punctuation">.</span><span class="token function">getParam</span><span class="token punctuation">(</span><span class="token string">"private_name"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åœ¨è£¸ç•Œé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æè¿°ç§æœ‰å‚æ•°çš„ç›¸åŒç¬¦å·æ¥è®¿é—®å®ƒä»¬ï¼Œä¾‹å¦‚:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">std<span class="token double-colon punctuation">::</span>string param<span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"~private_name"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="5ã€æœç´¢å‚æ•°é”®">5ã€æœç´¢å‚æ•°é”®</h4><ul><li><code>ros::NodeHandle::searchParam()</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">std<span class="token double-colon punctuation">::</span>string key<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nh<span class="token punctuation">.</span><span class="token function">searchParam</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  std<span class="token double-colon punctuation">::</span>string val<span class="token punctuation">;</span>  nh<span class="token punctuation">.</span><span class="token function">getParam</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>ros::param::search()</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">std<span class="token double-colon punctuation">::</span>string key<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  std<span class="token double-colon punctuation">::</span>string val<span class="token punctuation">;</span>  ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6ã€demo">6ã€demo</h4><p>æ¨¡ä»¿æœ¬æ¡ˆä¾‹å¼€å¤´çš„ä¿®æ”¹turtlesimèƒŒæ™¯æ¡ˆä¾‹ï¼Œæˆ‘ä»¬æ‰€éœ€è¦çš„å¤´æ–‡ä»¶æœ‰ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;std_srvs/Empty.h&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// åˆå§‹åŒ–ros</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span>argv<span class="token punctuation">,</span><span class="token string">"param_code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle param_node<span class="token punctuation">;</span>    <span class="token keyword">int</span> red<span class="token punctuation">,</span>green<span class="token punctuation">,</span>blue<span class="token punctuation">;</span>    <span class="token comment">//å‚æ•°è·å–ï¼Œç±»æ¯”å‘½ä»¤è¡Œrosparamçš„get</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_r"</span><span class="token punctuation">,</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_g"</span><span class="token punctuation">,</span>green<span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_b"</span><span class="token punctuation">,</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Get Backgroud Color[%d, %d, %d]"</span><span class="token punctuation">,</span> red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å‚æ•°è®¾ç½®ï¼Œç±»æ¯”å‘½ä»¤è¡Œrosparamçš„set</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_r"</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_g"</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_b"</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Set Backgroud Color[255, 255, 255]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å‚æ•°è·å–ï¼Œç±»æ¯”å‘½ä»¤è¡Œrosparamçš„get</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_r"</span><span class="token punctuation">,</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_g"</span><span class="token punctuation">,</span>green<span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>param<span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/turtlesim/background_b"</span><span class="token punctuation">,</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Get Backgroud Color[%d, %d, %d]"</span><span class="token punctuation">,</span> red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å‚è€ƒæˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„å‚æ•°ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬çŸ¥é“turtlesiméœ€è¦æ¥å—/clearè¯·æ±‚æ‰ä¼šæ›´æ–°turtlesimçš„å‚æ•°ã€‚</span>    <span class="token comment">//è°ƒç”¨/clearæœåŠ¡ï¼Œç”¨æ¥åˆ·æ–°èƒŒæ™¯é¢œè‰²</span>    ros<span class="token double-colon punctuation">::</span>service<span class="token double-colon punctuation">::</span><span class="token function">waitForService</span><span class="token punctuation">(</span><span class="token string">"/clear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>ServiceClient clear_background <span class="token operator">=</span> param_node<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">serviceClient</span><span class="token generic class-name"><span class="token operator">&lt;</span>std_srvs<span class="token double-colon punctuation">::</span>Empty<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/clear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    std_srvs<span class="token double-colon punctuation">::</span>Empty srv<span class="token punctuation">;</span>    clear_background<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>srv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¨‹åºç¼–è¯‘ï¼š</p><p>æ‰“å¼€åŠŸèƒ½åŒ…çš„CMakeListsï¼Œä½¿ç”¨å¦‚ä¸‹è¯­å¥å³å¯ä½¿ç”¨catkin_make</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_executable</span><span class="token punctuation">(</span>learn_param src/learn_param.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>learn_param <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="pythonä»£ç å®ç°">pythonä»£ç å®ç°</h3><h4 id="1ã€è·å–å‚æ•°">1ã€è·å–å‚æ•°</h4><p><code>rospy.get_param(å‚æ•°åç§°) </code></p><p>å¦‚æœä½¿ç”¨<code>get_param()</code>æ¥è·å–åç§°ç©ºé—´ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­çš„é”®ç­‰äºè¯¥åç§°ç©ºé—´ä¸­çš„å‚æ•°å€¼ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">global_name <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">"/global_name"</span><span class="token punctuation">)</span>relative_name <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">"relative_name"</span><span class="token punctuation">)</span>private_param <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'~private_name'</span><span class="token punctuation">)</span>default_param <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'default_param'</span><span class="token punctuation">,</span> <span class="token string">'default_value'</span><span class="token punctuation">)</span><span class="token comment"># fetch a group (dictionary) of parameters</span>gains <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'gains'</span><span class="token punctuation">)</span>p<span class="token punctuation">,</span> i<span class="token punctuation">,</span> d <span class="token operator">=</span> gains<span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> gains<span class="token punctuation">[</span><span class="token string">'i'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> gains<span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2ã€è®¾ç½®å‚æ•°">2ã€è®¾ç½®å‚æ•°</h4><p><code>rospy.set_param(å‚æ•°åç§°ï¼Œå‚æ•°å€¼)</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä½¿ç”¨rospyå’ŒåŸå§‹pythonå¯¹è±¡</span>rospy<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'a_string'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">)</span>rospy<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'~private_int'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>rospy<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'list_of_floats'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token punctuation">,</span> <span class="token number">3.</span><span class="token punctuation">,</span> <span class="token number">4.</span><span class="token punctuation">]</span><span class="token punctuation">)</span>rospy<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'bool_True'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>rospy<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'gains'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'p'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment"># ä½¿ç”¨rosparamå’Œyamlå­—ç¬¦ä¸²</span>rosparam<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'a_string'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">)</span>rosparam<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'~private_int'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span>rosparam<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'list_of_floats'</span><span class="token punctuation">,</span> <span class="token string">"[1., 2., 3., 4.]"</span><span class="token punctuation">)</span>rosparam<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'bool_True'</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span>rosparam<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'gains'</span><span class="token punctuation">,</span> <span class="token string">"{'p': 1, 'i': 2, 'd': 3}"</span><span class="token punctuation">)</span>rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'gains/p'</span><span class="token punctuation">)</span> <span class="token comment">#should return 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3ã€å‚æ•°å­˜åœ¨">3ã€å‚æ•°å­˜åœ¨</h4><p><code>rospy.has_param(param_name)</code></p><p>å¦‚æœå­˜åœ¨è¯¥å‚æ•°ï¼Œè¿”å›Trueï¼Œå¦åˆ™Falseã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> rospy<span class="token punctuation">.</span>has_param<span class="token punctuation">(</span><span class="token string">'to_delete'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>rospy<span class="token punctuation">.</span>delete_param<span class="token punctuation">(</span><span class="token string">'to_delete'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="4ã€åˆ é™¤å‚æ•°">4ã€åˆ é™¤å‚æ•°</h4><p><code>rospy.delete_param(å‚æ•°åç§°)</code></p><p>å…¶å®å°±æ˜¯ä»å‚æ•°æœåŠ¡å™¨åˆ é™¤å‚æ•°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>rospy<span class="token punctuation">.</span>delete_param<span class="token punctuation">(</span><span class="token string">'to_delete'</span><span class="token punctuation">)</span><span class="token keyword">except</span> KeyError<span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"value not set"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5ã€æœç´¢å‚æ•°é”®-2">5ã€æœç´¢å‚æ•°é”®</h4><p><code>rospy.search_param(å‚æ•°åç§°)</code></p><p>æŸ¥æ‰¾æœ€æ¥è¿‘çš„å‚æ•°åï¼Œä»ç§æœ‰åç§°ç©ºé—´å¼€å§‹ï¼Œå‘ä¸Šä¸€ç›´æœç´¢åˆ°å…¨å±€åç§°ç©ºé—´ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">param_name <span class="token operator">=</span> rospy<span class="token punctuation">.</span>search_param<span class="token punctuation">(</span><span class="token string">'global_example'</span><span class="token punctuation">)</span>v <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span>param_name<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>å¦‚æœä¸Šé¢çš„ä»£ç å‡ºç°åœ¨/foo/barèŠ‚ç‚¹ä¸­ï¼Œ <code>rospy.search_param</code>ä¼šè¯•ç€æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰¾åˆ°å‚æ•°</p><ol><li><code>/foo/bar/global _example</code></li><li><code>/foo/global _example</code></li><li><code>/global _example</code></li></ol></blockquote><h4 id="6ã€è·å–å‚æ•°å">6ã€è·å–å‚æ•°å</h4><p><code>rospy.get_param_names()</code></p><h4 id="7ã€demo">7ã€demo</h4><p>ä»¥ä¸‹demoå’Œc++çš„åŠŸèƒ½å®Œå…¨ä¸€æ ·ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rospy<span class="token keyword">from</span> std_srvs<span class="token punctuation">.</span>srv <span class="token keyword">import</span> Empty<span class="token keyword">import</span> sys<span class="token keyword">def</span> <span class="token function">param_set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'param_py'</span><span class="token punctuation">)</span>    <span class="token comment"># è¯»å–èƒŒæ™¯é¢œè‰²å‚æ•°</span>    red   <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'/background_r'</span><span class="token punctuation">)</span>    green <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'/background_g'</span><span class="token punctuation">)</span>    blue  <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'/background_b'</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Get Backgroud Color[%d, %d, %d]"</span><span class="token punctuation">,</span> red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue<span class="token punctuation">)</span>    <span class="token comment"># è®¾ç½®èƒŒæ™¯é¢œè‰²å‚æ•°</span>    ros<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'/background_r'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>    ros<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'/background_g'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>    ros<span class="token punctuation">.</span>set_param<span class="token punctuation">(</span><span class="token string">'/background_b'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Set Backgroud Color[100, 100, 100]"</span><span class="token punctuation">)</span>    <span class="token comment"># è¯»å–èƒŒæ™¯é¢œè‰²å‚æ•°</span>    red   <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'/background_r'</span><span class="token punctuation">)</span>    green <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'/background_g'</span><span class="token punctuation">)</span>    blue  <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_param<span class="token punctuation">(</span><span class="token string">'/background_b'</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Get Backgroud Color[%d, %d, %d]"</span><span class="token punctuation">,</span> red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue<span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>wait_for_service<span class="token punctuation">(</span><span class="token string">'/clear'</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        clear_background <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">'/clear'</span><span class="token punctuation">,</span> Empty<span class="token punctuation">)</span>        <span class="token comment"># è¯·æ±‚æœåŠ¡è°ƒç”¨ï¼Œè¾“å…¥è¯·æ±‚æ•°æ®</span>        response <span class="token operator">=</span> clear_background<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> response    <span class="token keyword">except</span> rospy<span class="token punctuation">.</span>ServiceException<span class="token punctuation">,</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span> <span class="token string">"Service call failed: %s"</span><span class="token operator">%</span>e<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    param_set<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS ä¸ƒã€æœåŠ¡æ•°æ®çš„è‡ªå®šä¹‰</title>
      <link href="/2022/07/28/ros-7-Custom-service/"/>
      <url>/2022/07/28/ros-7-Custom-service/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS 7: æœåŠ¡æ•°æ®è‡ªå®šä¹‰</h1><blockquote><p>â€‹ä»ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œç®€å•ä»‹ç»äº†æœåŠ¡ç«¯ä»¥åŠå®¢æˆ·ç«¯çš„ä»£ç å®ç°ã€‚è¿™é‡Œä¸»è¦æè¿°è‡ªå·±å®šä¹‰æœåŠ¡çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”æ¥ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬ä»ç„¶ä½¿ç”¨å®å¯æ¢¦çš„ä¾‹å­æ¥å†™ä»£ç ã€‚</p><p>â€‹åœ¨å‰é¢è‡ªå®šä¹‰topicä¸­ï¼Œtopicä¼šä¸€ç›´å‘æ•°æ®ã€‚æˆ‘ä»¬ç°åœ¨æ”¹å–„ä¸€ä¸‹ä¸Šæ¬¡çš„å®å¯æ¢¦ä¾‹å­ï¼Œè®©å®ƒåªæœ‰åœ¨requestçš„æ—¶å€™æ‰ä¼šå‘æ•°æ®</p><p>â€‹åœ¨è‡ªå®šä¹‰æ¶ˆæ¯çš„é‚£ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>*.msg</code>çš„æ–‡ä»¶æ¥å­˜å‚¨ï¼Œåœ¨æœåŠ¡æ•°æ®è‡ªå®šä¹‰ä¸­ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>*.srv</code>æ–‡ä»¶åœ¨è‡ªå®šä¹‰æ•°æ®ç±»å‹</p><p>â€‹å¯ä»¥å‚è€ƒè‡ªå®šä¹‰æ¶ˆæ¯çš„ç¬”è®°: <a href="https://tuoyou-hao.github.io/2022/07/19/ros-5-Customize-message-topics/">ROS5</a></p></blockquote><h2 id="ä¸€ã€å®šä¹‰srvæ–‡ä»¶-ç¼–è¯‘å¤´æ–‡ä»¶">ä¸€ã€å®šä¹‰srvæ–‡ä»¶,ç¼–è¯‘å¤´æ–‡ä»¶</h2><p><code>*.msg</code>æ–‡ä»¶ä¸<code>*.srv</code>æ–‡ä»¶çš„åŒºåˆ«åœ¨äºï¼Œç”±äºæœåŠ¡æ•°æ®é™¤äº†è¦å®šä¹‰requestï¼Œè¿˜éœ€è¦å®šä¹‰responseã€‚å¯ä»¥å‚è€ƒ<a href="https://tuoyou-hao.github.io/2022/07/21/ros-6-client-server-code/">ROS6</a>.å®šä¹‰æ¶ˆæ¯ç±»å‹çš„æ—¶å€™ï¼Œæ•°æ®å®šä¹‰éœ€è¦ç”¨<code>---</code>ä¸‰æ¨ªçº¿åŒºåˆ†å¼€æ¥ã€‚</p><p>åœ¨åŠŸèƒ½åŒ…é‡Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>srv</code>ï¼Œtouchä¸€ä¸ª<code>*.srv</code>æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å®šä¹‰çš„å†…å®¹ã€‚</p><p>è¿™é‡Œåœ¨learn_serveråŠŸèƒ½åŒ…ä¸‹æ–°å»ºä¸€ä¸ªsrvæ–‡ä»¶å¤¹ï¼ŒæŠŠPokemon.srvæ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹</p><pre class="line-numbers language-srv" data-language="srv"><code class="language-srv">string namestring typeuint8  genderuint8 unknown = 0uint8 male    = 1uint8 female  = 2---string result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹CMakeLists.txtï¼Œåœ¨ç¬¬åè¡Œfind_packageå¤„ä¿®æ”¹ï¼Œä¸»è¦æ˜¯æœ€åä¸€è¡ŒåŠ ä¸Š<code>message_generation</code>è¿™ä¸ªåŠŸèƒ½åŒ…ä¾èµ–</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">find_package</span><span class="token punctuation">(</span>catkin REQUIRED COMPONENTS  geometry_msgs  roscpp  rospy  std_msgs  turtlesim  message_generation<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨CMakeLists.txtå†åŠ ä¸Šä»¥ä¸‹å†…å®¹ï¼Œè®©ç¼–è¯‘å™¨çŸ¥é“è¦æ ¹æ®å“ªä¸ªsrvæ–‡ä»¶äº§ç”Ÿå¤´æ–‡ä»¶</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token function">add_service_files</span><span class="token punctuation">(</span>FILES Pokemon.srv<span class="token punctuation">)</span><span class="token function">generate_messages</span><span class="token punctuation">(</span>DEPENDENCIES std_msgs<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶ååœ¨CMakeLists.txtåŠ ä¸Šä»¥ä¸‹å†…å®¹ï¼Œæ·»åŠ ç¼–è¯‘ä¾èµ–</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token function">catkin_package</span><span class="token punctuation">(</span><span class="token comment">#  INCLUDE_DIRS include</span><span class="token comment">#  LIBRARIES learn_server</span>   CATKIN_DEPENDS geometry_msgs roscp rospy std_msgs turtlesim message_runtime<span class="token comment">#  DEPENDS system_lib</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå†package.xmlæ–‡ä»¶æ·»åŠ ä»¥ä¸‹ä¾èµ–æè¿°ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>message_generation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>message_runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åœ¨å·¥ä½œç©ºé—´æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨<code>catkin_make</code>ç¼–è¯‘å¤´æ–‡ä»¶</p><p>ç¼–è¯‘å®Œæˆä¹‹åï¼Œ<strong>åœ¨å·¥ä½œç©ºé—´çš„devel/include/learn_serverç›®å½•ä¸‹</strong>ï¼Œå¯ä»¥çœ‹åˆ°ä¸‰ä¸ªç¼–è¯‘å®Œæˆçš„å¤´æ–‡ä»¶ï¼š</p><ul><li><p>Pokemon.hï¼šä¼šåŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå¤´æ–‡ä»¶ï¼ŒåŠ è½½è¿™ä¸€ä¸ªå°±è¶³çŸ£ã€‚</p></li><li><p>PokemonRequest.h</p></li><li><p>PokemonResponse.h</p></li></ul><h2 id="äºŒã€ä»£ç å®ç°">äºŒã€ä»£ç å®ç°</h2><h3 id="c-å®ç°">c++å®ç°</h3><h4 id="1ã€æœåŠ¡ç«¯å®ç°">1ã€æœåŠ¡ç«¯å®ç°</h4><p>å¯¼å…¥å¤´æ–‡ä»¶</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"learn_server/Pokemon.h"</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å†™ä¸»å‡½æ•°</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// ROSèŠ‚ç‚¹åˆå§‹åŒ–</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"pokemon_server"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle ser_pokemon_node<span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºä¸€ä¸ªå«åš/pokemon_showçš„serverï¼Œæ³¨å†Œå›è°ƒå‡½æ•°Callback</span>    ros<span class="token double-colon punctuation">::</span>ServiceServer pokemon_server <span class="token operator">=</span> ser_pokemon_node<span class="token punctuation">.</span><span class="token function">advertiseService</span><span class="token punctuation">(</span><span class="token string">"/pokemon_show"</span><span class="token punctuation">,</span> Callback<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Ready to show pokemon infomation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå°±æ˜¯å†™å¥½å›è°ƒå‡½æ•°</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// serviceå›è°ƒå‡½æ•°ï¼Œè¾“å…¥å‚æ•°reqï¼Œè¾“å‡ºå‚æ•°res</span><span class="token keyword">bool</span> <span class="token function">Callback</span><span class="token punctuation">(</span>learn_server<span class="token double-colon punctuation">::</span>Pokemon<span class="token double-colon punctuation">::</span>Request <span class="token operator">&amp;</span>req<span class="token punctuation">,</span>learn_server<span class="token double-colon punctuation">::</span>Pokemon<span class="token double-colon punctuation">::</span>Response <span class="token operator">&amp;</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// æ˜¾ç¤ºè¯·æ±‚æ•°æ®</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Pokemon: name:%s type:%s gender:%d"</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®åé¦ˆæ•°æ®</span>    res<span class="token punctuation">.</span>result <span class="token operator">=</span> <span class="token string">"Pokemon response. Done"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2ã€å®¢æˆ·ç«¯å®ç°">2ã€å®¢æˆ·ç«¯å®ç°</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"learn_server/Pokemon.h"</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span>argv<span class="token punctuation">,</span><span class="token string">"pokemon_client"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle cli_pokemon_node<span class="token punctuation">;</span>    <span class="token comment">// å‘ç°/pokemon_showæœåŠ¡åï¼Œåˆ›å»ºä¸€ä¸ªæœåŠ¡å®¢æˆ·ç«¯ï¼Œè¿æ¥åä¸º/pokemon_showçš„service</span>    ros<span class="token double-colon punctuation">::</span>service<span class="token double-colon punctuation">::</span><span class="token function">waitForService</span><span class="token punctuation">(</span><span class="token string">"/pokemon_show"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>ServiceClient pokemon_client <span class="token operator">=</span> cli_pokemon_node<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">serviceClient</span><span class="token generic class-name"><span class="token operator">&lt;</span>learn_server<span class="token double-colon punctuation">::</span>Pokemon<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/pokemon_show"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆå§‹åŒ–learn_server::Pokemonçš„è¯·æ±‚æ•°æ®</span>    learn_server<span class="token double-colon punctuation">::</span>Pokemon srv<span class="token punctuation">;</span>    srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Pikachu"</span><span class="token punctuation">;</span>    srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"electric"</span><span class="token punctuation">;</span>    srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>gender  <span class="token operator">=</span> learn_server<span class="token double-colon punctuation">::</span>Pokemon<span class="token double-colon punctuation">::</span>Request<span class="token double-colon punctuation">::</span>male<span class="token punctuation">;</span>    <span class="token comment">// è¯·æ±‚æœåŠ¡è°ƒç”¨</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Call service [name:%s, age:%s, sex:%d]"</span><span class="token punctuation">,</span>                 srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>    pokemon_client<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>srv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ˜¾ç¤ºæœåŠ¡è°ƒç”¨ç»“æœ</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Result : %s"</span><span class="token punctuation">,</span> srv<span class="token punctuation">.</span>response<span class="token punctuation">.</span>result<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3ã€ç¼–è¯‘è¿è¡Œ">3ã€ç¼–è¯‘è¿è¡Œ</h4><p>åœ¨CMakeListsä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼Œå‘ŠçŸ¥ç¼–è¯‘å™¨ç›¸å…³ç¼–è¯‘è§„åˆ™ï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_executable</span><span class="token punctuation">(</span>ser_pokemon src/ser_pokemon.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>ser_pokemon <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">add_dependencies</span><span class="token punctuation">(</span>ser_pokemon <span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>_gencpp<span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>cli_pokemon src/cli_pokemon.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>cli_pokemon <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">add_dependencies</span><span class="token punctuation">(</span>cli_pokemon <span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>_gencpp<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨å·¥ä½œç©ºé—´ä½¿ç”¨<code>catkin_make</code>ç¼–è¯‘å³å¯è¿è¡Œ</p><p>åœ¨è¿è¡Œä»£ç ä¹‹å‰è®°å¾—<strong>å…ˆåœ¨å¾…è¿è¡Œçš„ç»ˆç«¯</strong>æ‰§è¡Œ<code>source devel/setup.bash</code>æŒ‡ä»¤ï¼Œä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œrosrunæ‰èƒ½è¯»åˆ°åŠŸèƒ½åŒ…ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><h3 id="pythonå®ç°">pythonå®ç°</h3><h4 id="1ã€æœåŠ¡ç«¯å®ç°-2">1ã€æœåŠ¡ç«¯å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rospy<span class="token keyword">from</span> learn_server<span class="token punctuation">.</span>srv <span class="token keyword">import</span> Pokemon<span class="token punctuation">,</span>PokemonResponse<span class="token keyword">def</span> <span class="token function">Callback</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Pokemon: name:%s type:%s gender:%d"</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>name<span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>gender<span class="token punctuation">)</span>    <span class="token keyword">return</span> PokemonResponse<span class="token punctuation">(</span><span class="token string">"Pokemon response. Done"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">pokemon_server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'poekmon_server_py'</span><span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªåä¸º/pokemon_showçš„serverï¼Œæ³¨å†Œå›è°ƒå‡½æ•°Callback</span>    s <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Service<span class="token punctuation">(</span><span class="token string">'/pokemon_show'</span><span class="token punctuation">,</span> Pokemon<span class="token punctuation">,</span> Callback<span class="token punctuation">)</span><span class="token comment"># å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span>    <span class="token keyword">print</span> <span class="token string">"Ready to show pokemon information."</span>    rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    pokemon_server<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2ã€å®¢æˆ·ç«¯å®ç°-2">2ã€å®¢æˆ·ç«¯å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> sys<span class="token keyword">import</span> rospy<span class="token keyword">from</span> learn_server<span class="token punctuation">.</span>srv <span class="token keyword">import</span> Pokemon<span class="token punctuation">,</span> PokemonRequest<span class="token keyword">def</span> <span class="token function">pokemon_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'poekmon_client_py'</span><span class="token punctuation">)</span><span class="token comment"># å‘ç°/pokemon_showæœåŠ¡åï¼Œåˆ›å»ºä¸€ä¸ªæœåŠ¡å®¢æˆ·ç«¯ï¼Œè¿æ¥åä¸º/pokemon_showçš„service</span>    rospy<span class="token punctuation">.</span>wait_for_service<span class="token punctuation">(</span><span class="token string">'/pokemon_show'</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        poekmon_client_py <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">'/pokemon_show'</span><span class="token punctuation">,</span> Pokemon<span class="token punctuation">)</span><span class="token comment"># è¯·æ±‚æœåŠ¡è°ƒç”¨ï¼Œè¾“å…¥è¯·æ±‚æ•°æ®</span>        response <span class="token operator">=</span> poekmon_client_py<span class="token punctuation">(</span><span class="token string">"Psyduck"</span><span class="token punctuation">,</span> <span class="token string">"water"</span><span class="token punctuation">,</span> PokemonRequest<span class="token punctuation">.</span>male<span class="token punctuation">)</span>        <span class="token keyword">return</span> response<span class="token punctuation">.</span>result    <span class="token keyword">except</span> rospy<span class="token punctuation">.</span>ServiceException<span class="token punctuation">,</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span> <span class="token string">"Service call failed: %s"</span><span class="token operator">%</span>e<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token keyword">print</span> <span class="token string">"Show person result : %s"</span> <span class="token operator">%</span><span class="token punctuation">(</span>pokemon_client<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS å…­ã€æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯</title>
      <link href="/2022/07/21/ros-6-client-server-code/"/>
      <url>/2022/07/21/ros-6-client-server-code/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS 6ï¼šæœåŠ¡ç«¯å®¢æˆ·ç«¯å®ç°</h1><h2 id="ä¸€ã€å®¢æˆ·ç«¯å®ç°">ä¸€ã€å®¢æˆ·ç«¯å®ç°</h2><p>å®ç°ç›®æ ‡ï¼šä½¿ç”¨å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œè¯·æ±‚turtlesimçš„spawnæœåŠ¡æ¥æ–°å»ºä¸€ç›´å°æµ·é¾Ÿï¼Œå¹¶ç»™å®šå…¶åˆå§‹åŒ–çš„åæ ‡ä½ç½®ã€‚å‘é€requextçš„ä»£ç æ˜¯é˜»å¡å¼çš„ï¼Œéœ€è¦ç­‰åˆ°responseæ‰ä¼šç»§ç»­æ‰§è¡Œåç»­çš„è¯­å¥ã€‚</p><p><img src="https://s2.loli.net/2022/07/20/3PT6pkbJuSFADVx.png" alt="æœåŠ¡æ¨¡å‹"></p><p>åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯çš„æµç¨‹å¤§ä½“ä¸ºï¼š</p><pre class="mermaid">graph TBa(åˆå§‹åŒ–èŠ‚ç‚¹)a --&gt;b(åˆ›å»ºclientå®ä¾‹)b --&gt;c(å‘å¸ƒæœåŠ¡è¯·æ±‚æ•°æ®)c --&gt;d(ç­‰å¾…serverå¤„ç†ä¹‹åçš„åº”ç­”ç»“æœ)</pre><p>é¦–å…ˆï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ~/ros_ws/srccatkin_create_pkg learn_server roscp rospy std_msgs geometry_msgs turtlesim<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åœ¨åŠŸèƒ½åŒ…çš„srcåº•ä¸‹åˆ›å»ºç¬¬ä¸€ä¸ªcppæ–‡ä»¶</p><h3 id="c-å®ç°">c++å®ç°</h3><h4 id="ä»£ç å®ç°">ä»£ç å®ç°</h4><p>ä¸€ã€å¯¼å…¥å¤´æ–‡ä»¶ï¼Œåˆå§‹åŒ–èŠ‚ç‚¹å¹¶åˆ›å»ºå¥æŸ„ã€‚</p><p>ç”±äºæœ¬æ¬¡éœ€è¦ä½¿ç”¨turtlesimçš„spawnæœåŠ¡ï¼Œæ‰€ä»¥éœ€è¦å¯¼å…¥å¯¹åº”çš„å¤´æ–‡ä»¶ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;turtlesim/Spawn.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span><span class="token punctuation">{</span>ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"turtle_spawn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>NodeHandle node<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>äºŒã€ç„¶åå°±æ˜¯éœ€è¦å®¢æˆ·ç«¯æŸ¥è¯¢æ˜¯å¦å­˜åœ¨spawnæœåŠ¡ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šé˜»å¡åœ¨è¿™ä¸€å¥ä»£ç ä¸€ç›´ç­‰å¾…ã€‚</p><p>å¦‚æœspawnæœåŠ¡å‡ºç°äº†ï¼Œå°±åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç”¨æ¥ç»™spawnæœåŠ¡å‘é€è¯·æ±‚çš„ï¼Œè¯·æ±‚çš„æ•°æ®ç±»å‹æ˜¯<code>turtlesim::spawn</code>ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å‘ç°/spawnæœåŠ¡åï¼Œåˆ›å»ºä¸€ä¸ªæœåŠ¡å®¢æˆ·ç«¯ï¼Œè¿æ¥åä¸º/spawnçš„service</span>ros<span class="token double-colon punctuation">::</span>service<span class="token double-colon punctuation">::</span><span class="token function">waitForService</span><span class="token punctuation">(</span><span class="token string">"/spawn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ros<span class="token double-colon punctuation">::</span>ServiceClient add_turtle <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">serviceClient</span><span class="token generic class-name"><span class="token operator">&lt;</span>turtlesim<span class="token double-colon punctuation">::</span>Spawn<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/spawn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°–æ‹¬å·å­˜æ”¾æ•°æ®ç±»å‹ï¼Œåé¢è·Ÿä¸Šè¯·æ±‚æœåŠ¡çš„åå­—</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‰ã€å°è£…å¥½è¯·æ±‚æ•°æ®ã€‚/spawné‡Œéœ€è¦å­˜å‚¨ä»¥ä¸‹ç±»å‹çš„æ•°æ®ï¼Œåˆå§‹åŒ–å¥½é¢„è®¾å€¼ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// åˆå§‹åŒ–turtlesim::Spawnçš„è¯·æ±‚æ•°æ®</span>turtlesim<span class="token double-colon punctuation">::</span>Spawn srv<span class="token punctuation">;</span>srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span>srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span>srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"turtle2"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å››ã€å‘é€è¯·æ±‚æ•°æ®ã€‚ä½¿ç”¨callæ–¹æ³•ï¼Œå°†å°è£…å¥½çš„è¯·æ±‚æ•°æ®å‘é€å‡ºå»ã€‚</p><p>callä¹Ÿæ˜¯é˜»å¡æ€§çš„å‡½æ•°ï¼Œåœ¨æ•°æ®å‘å¸ƒå‡ºå»ä¹‹åï¼Œä¼šä¸€ç›´ç­‰å¾…æœåŠ¡å™¨çš„åé¦ˆæ•°æ®ã€‚è·å–åˆ°æœåŠ¡å™¨çš„åé¦ˆä¹‹å1ï¼Œæ‰ä¼šå»æ‰§è¡Œä¸‹ä¸€å¥ä»£ç ã€‚</p><p>ç”±äºåœ¨turtlesimæˆåŠŸè°ƒç”¨æœåŠ¡ä¹‹åï¼Œä¼šè¿”å›è¿™åªturtleçš„åå­—ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è·å–è¿”å›çš„turtleåã€‚ï¼ˆå¯è§<a href="https://tuoyou-hao.github.io/2022/07/13/ros-2-Basic-command-tools/#1%E3%80%81rosservice-call-%E5%8F%91%E5%B8%83%E6%9C%8D%E5%8A%A1%E8%AF%B7%E6%B1%82">ROSäºŒï¼šåŸºæœ¬å‘½ä»¤è¡Œå·¥å…·</a>ï¼‰</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// è¯·æ±‚æœåŠ¡è°ƒç”¨</span><span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Call service to spwan turtle[x:%0.6f, y:%0.6f, name:%s]"</span><span class="token punctuation">,</span> srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>x<span class="token punctuation">,</span> srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>y<span class="token punctuation">,</span> srv<span class="token punctuation">.</span>request<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>add_turtle<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>srv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ˜¾ç¤ºæœåŠ¡è°ƒç”¨ç»“æœ</span><span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Spwan turtle successfully [name:%s]"</span><span class="token punctuation">,</span> srv<span class="token punctuation">.</span>response<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="é…ç½®ç¼–è¯‘æ–‡ä»¶">é…ç½®ç¼–è¯‘æ–‡ä»¶</h4><p>åœ¨CMakeLists.txtè¾“å…¥ä»¥ä¸‹æ–‡æœ¬ï¼Œæ·»å®¶è¦ç¼–è¯‘çš„æ–‡ä»¶ä»¥åŠé“¾æ¥åº“ã€‚</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_executable</span><span class="token punctuation">(</span>turtle_client src/turtle_client.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>turtle_client <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="è¿è¡Œç»“æœ">è¿è¡Œç»“æœ</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[ INFO] [1658379402.461341999]: Call service to spwan turtle[x:2.000000, y:2.000000, theta:2.000000,name:turtle2][ INFO] [1658379402.512673909]: Spwan turtle successfully [name:turtle2]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯ä»¥åœ¨turtlesim_nodeç•Œé¢çœ‹åˆ°æ–°å»ºæµ·é¾ŸæˆåŠŸçš„æ—¥å¿—ä¿¡æ¯</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[ INFO] [1658379402.512145247]: Spawning turtle [turtle2] at x=[2.000000], y=[2.000000], theta=[2.000000]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä»¥åŠåœ¨å›¾å½¢ç•Œé¢çœ‹åˆ°æ–°ç”Ÿæˆçš„æµ·é¾Ÿã€‚</p><h3 id="pythonå®ç°">pythonå®ç°</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rospy<span class="token keyword">import</span> sys<span class="token keyword">from</span> turtlesim<span class="token punctuation">.</span>srv <span class="token keyword">import</span> Spawn<span class="token keyword">def</span> <span class="token function">turtle_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'turtle_client'</span><span class="token punctuation">)</span>    <span class="token comment"># å‘ç°/spawnæœåŠ¡åï¼Œåˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œè¿æ¥åä¸º/spawnçš„service</span>    rospy<span class="token punctuation">.</span>wait_for_service<span class="token punctuation">(</span><span class="token string">'/spawn'</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># åˆ›å»ºå®¢æˆ·ç«¯</span>        add_turtle <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">'/spawn'</span><span class="token punctuation">,</span> Spawn<span class="token punctuation">)</span>         <span class="token comment"># è¯·æ±‚æœåŠ¡è°ƒç”¨ï¼Œè¾“å…¥è¯·æ±‚æ•°æ®</span>        <span class="token comment"># è¯·æ±‚æ•°æ®ï¼Œç±»ä¼¼cppçš„callæ–¹æ³•ã€‚responseè·å–è¿”å›çš„turtleåå­—</span>        response <span class="token operator">=</span> add_turtle<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token string">"turtle2"</span><span class="token punctuation">)</span>         <span class="token keyword">return</span> response<span class="token punctuation">.</span>name    <span class="token keyword">except</span> rospy<span class="token punctuation">.</span>ServiceException<span class="token punctuation">,</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span> <span class="token string">"Service call failed: %s"</span><span class="token operator">%</span>e        <span class="token keyword">return</span> <span class="token number">0</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token keyword">print</span> <span class="token string">"Spwan turtle successfully [name:%s]"</span> <span class="token operator">%</span><span class="token punctuation">(</span>turtle_client<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äºŒã€æœåŠ¡ç«¯å®ç°">äºŒã€æœåŠ¡ç«¯å®ç°</h2><p>å®ç°ç›®æ ‡ï¼šç»™æµ·é¾Ÿå‘é€Ÿåº¦æŒ‡ä»¤ã€‚æœåŠ¡ç«¯é€šè¿‡è·å–å®¢æˆ·ç«¯çš„æŒ‡ä»¤æ§åˆ¶æµ·é¾Ÿçš„è¿åŠ¨ä¸å¦ã€‚</p><p><img src="https://s2.loli.net/2022/07/21/cqzGZ3KCMitS5ax.png" alt=""></p><p>æœåŠ¡ç«¯å®ç°çš„å¤§è‡´æµç¨‹ä¸ºï¼š</p><pre class="mermaid">graph TBa(åˆå§‹åŒ–èŠ‚ç‚¹)a --&gt;b(åˆ›å»ºserver)b --&gt;c(å¾ªç¯ç­‰å¾…æœåŠ¡è¯·æ±‚)c --&gt;d(è·å–åˆ°è¯·æ±‚ è¿›å…¥å›è°ƒå‡½æ•°)d --&gt;e(åœ¨å›è°ƒå‡½æ•°ä¸­å®ŒæˆæœåŠ¡åŠŸèƒ½ å¹¶åé¦ˆåº”ç­”æ•°æ®)</pre><h3 id="c-å®ç°-2">c++å®ç°</h3><p>æˆ‘ä»¬å¦‚æœæƒ³è¦çŸ¥é“Triggeré‡Œé¢åŒ…å«ä»€ä¹ˆç±»å‹ï¼Œå¯ä»¥ç”¨<code>rossrv show</code>æŒ‡ä»¤æŸ¥çœ‹ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rossrv show std_srvs/Trigger ---bool successstring message<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºserviceåŒ…å«æœ‰requestå’Œresponseä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸‰æ¨ªçº¿ "â€”"ä»¥ä¸Šæ˜¯requestçš„ç»“æ„å†…å®¹ï¼Œä»¥ä¸‹æ˜¯responseçš„å†…å®¹ã€‚</p><p>å¯ä»¥çœ‹åˆ°Triggerçš„responseç»“æ„é‡ŒåŒ…å«æœ‰ä¸€ä¸ªå¸ƒå°”çš„flagï¼Œä»¥åŠå­—ç¬¦ä¸²ç±»å‹çš„æ¶ˆæ¯ã€‚</p><h4 id="ä»£ç å®ç°-2">ä»£ç å®ç°</h4><p>å¯¼å…¥å¤´æ–‡ä»¶</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;geometry_msgs/Twist.h&gt;</span>    <span class="token comment">//topicæ•°æ®ç±»å‹</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;std_srvs/Trigger.h&gt;</span>       <span class="token comment">//serviceæ•°æ®ç±»å‹</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å£°æ˜publisherç­‰ä¸€äº›å…¨å±€å˜é‡ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ros<span class="token double-colon punctuation">::</span>Publisher turtle_pub<span class="token punctuation">;</span>          <span class="token comment">//åˆ›å»ºå…¨å±€çš„publisher</span><span class="token keyword">bool</span> pub_turtle_sport_flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//turtleæ˜¯å¦è¿åŠ¨çš„flagæ ‡è®°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span>argv<span class="token punctuation">,</span><span class="token string">"turtle_server"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle node<span class="token punctuation">;</span>    <span class="token comment">// è‡ªå·±èµ·ä¸€ä¸ªåä¸º/turtle_commandçš„serverï¼Œæ³¨å†Œå›è°ƒå‡½æ•°CommandCallBack</span>    ros<span class="token double-colon punctuation">::</span>ServiceServer command_service <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">advertiseService</span><span class="token punctuation">(</span><span class="token string">"/turtle_command"</span><span class="token punctuation">,</span>CommandCallBack<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºä¸€ä¸ªPublisherï¼Œå‘å¸ƒåä¸º/turtle1/cmd_velçš„topicï¼Œæ¶ˆæ¯ç±»å‹ä¸ºgeometry_msgs::Twistï¼Œé˜Ÿåˆ—é•¿åº¦10</span>    turtle_pub <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>geometry_msgs<span class="token double-colon punctuation">::</span>Twist<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/turtle1/cmd_vel"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®å¾ªç¯çš„é¢‘ç‡</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Waiting to receive command"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Rate <span class="token function">loop_rate</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå†™å¾ªç¯ï¼Œåˆ¤æ–­æ ‡å¿—ç¬¦å¹¶æ ¹æ®æ ‡å¿—å‘å¸ƒæŒ‡ä»¤</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">while</span><span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span>ok<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// æŸ¥çœ‹ä¸€æ¬¡å›è°ƒå‡½æ•°é˜Ÿåˆ—,çœ‹æ˜¯å¦æœ‰æœåŠ¡æ•°æ®ä¼ è¿›æ¥</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">spinOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¦‚æœæ ‡å¿—ä¸ºtrueï¼Œåˆ™å‘å¸ƒé€Ÿåº¦æŒ‡ä»¤</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>pub_turtle_sport_flag<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        geometry_msgs<span class="token double-colon punctuation">::</span>Twist vel_msg<span class="token punctuation">;</span>        vel_msg<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>        vel_msg<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>        turtle_pub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>vel_msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//æŒ‰ç…§å¾ªç¯é¢‘ç‡å»¶æ—¶</span>    loop_rate<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°å†™å®Œï¼Œå†™å›è°ƒå‡½æ•°ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// serviceå›è°ƒå‡½æ•°ï¼Œè¾“å…¥å‚æ•°reqï¼Œè¾“å‡ºå‚æ•°res</span><span class="token keyword">bool</span> <span class="token function">CommandCallBack</span><span class="token punctuation">(</span>std_srvs<span class="token double-colon punctuation">::</span>Trigger<span class="token double-colon punctuation">::</span>Request <span class="token operator">&amp;</span>req<span class="token punctuation">,</span> std_srvs<span class="token double-colon punctuation">::</span>Trigger<span class="token double-colon punctuation">::</span>Response <span class="token operator">&amp;</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>    pub_turtle_sport_flag <span class="token operator">=</span> <span class="token operator">!</span>pub_turtle_sport_flag<span class="token punctuation">;</span>    <span class="token comment">// æ˜¾ç¤ºè¯·æ±‚æ•°æ®</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Publish command [%s]"</span><span class="token punctuation">,</span> pub_turtle_sport_flag<span class="token operator">==</span><span class="token boolean">true</span><span class="token operator">?</span><span class="token string">"Yes"</span><span class="token operator">:</span><span class="token string">"No"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®åé¦ˆæ•°æ®</span>    res<span class="token punctuation">.</span>success <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    res<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">"Change turtle command state!"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="é…ç½®ç¼–è¯‘æ–‡ä»¶-2">é…ç½®ç¼–è¯‘æ–‡ä»¶</h4><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_executable</span><span class="token punctuation">(</span>turtle_server src/turtle_server.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>turtle_server <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="è¿è¡Œç»“æœ-2">è¿è¡Œç»“æœ</h4><p>é¦–å…ˆï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿è¡Œ<code>roscore</code>ï¼Œ<code>rosrun turtlesim turtlesim_node</code>ï¼Œå¹¶ä½¿ç”¨<code>rosrun &lt;åŠŸèƒ½åŒ…å&gt; &lt;å¯æ‰§è¡Œæ–‡ä»¶å&gt;</code>è¿è¡Œè‡ªå·±çš„ä»£ç ï¼Œç„¶åæ–°å»ºç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œç»™è‡ªå·±çš„serviceå‘é€ç©ºæ¶ˆæ¯</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosservice call /turtle_command "{}"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¯è¿è¡Œä¸€æ¬¡ä¸Šè¿°æŒ‡ä»¤ï¼Œå¸ƒå°”å€¼çš„flagï¼š<code>pub_turtle_sport_flag</code>ä¼šè‡ªå·±å–åï¼Œæ§åˆ¶å°ä¹Œé¾Ÿæ˜¯å¦æŒ‰ç…§topicè¿è¡Œã€‚</p><h3 id="pythonå®ç°-2">pythonå®ç°</h3><p>ç”±äºpythonä¸­å¹¶æ²¡æœ‰ä¸Šè¿°c++ä»£ç ä¸­<code>ros::spinOnce();</code>çš„æœºåˆ¶ï¼Œåªæœ‰ä¸æ–­å¾ªç¯çš„<code>rospy.spin()</code>ï¼Œæ‰€ä»¥åœ¨å¼€å‘å•†å­˜åœ¨ä¸€å®šçš„åŒºåˆ«ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨<strong>å¤šçº¿ç¨‹</strong>æœºåˆ¶è¿›è¡Œå¼€å‘ã€‚</p><p>è½½å…¥å¤´æ–‡ä»¶ï¼Œå¹¶åˆå§‹åŒ–å…¨å±€å˜é‡ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rospy<span class="token keyword">import</span> thread<span class="token punctuation">,</span>time<span class="token keyword">from</span> geometry_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> Twist<span class="token keyword">from</span> std_srvs<span class="token punctuation">.</span>srv <span class="token keyword">import</span> Trigger<span class="token punctuation">,</span> TriggerResponsepubCommand <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">;</span>turtle_vel_pub <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Publisher<span class="token punctuation">(</span><span class="token string">'/turtle1/cmd_vel'</span><span class="token punctuation">,</span> Twist<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä¸»å‡½æ•°å¼€å§‹ä»‹ç»</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    turtle_server<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é¦–å…ˆæ˜¯å»ºç«‹ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œåˆå§‹åŒ–èŠ‚ç‚¹ä»¥åŠåˆ›å»ºserverã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">turtle_server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'turtle_server_node'</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ›å»ºä¸€ä¸ªåä¸º/turtle_commandçš„serverï¼Œæ³¨å†Œå›è°ƒå‡½æ•°CommandCallback</span>    ser_turtle <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Service<span class="token punctuation">(</span><span class="token string">'/turtle_command'</span><span class="token punctuation">,</span> Trigger<span class="token punctuation">,</span> CommandCallback<span class="token punctuation">)</span>    <span class="token comment"># å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span>    <span class="token keyword">print</span> <span class="token string">"Ready to receive turtle command."</span>    <span class="token comment"># åˆ›å»ºçº¿ç¨‹ã€‚ç¬¬ä¸€ä¸ªæ˜¯çº¿ç¨‹å‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯ä¼ ç»™è¿™ä¸ªå‡½æ•°çš„å‚æ•°ã€‚</span>    <span class="token comment"># ç”±äºæˆ‘ä»¬ä¸éœ€è¦ä¼ å‚ï¼Œåé¢çš„æ‹¬å·æ— éœ€å¡«å†™</span>    thread<span class="token punctuation">.</span>start_new_thread<span class="token punctuation">(</span>turtle_thread<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œçº¿ç¨‹æ‰€åœ¨çš„èµ·å§‹ä½ç½®æ˜¯åœ¨æŸä¸ªå‡½æ•°çš„å¼€å¤´ï¼Œæ‰€ä»¥ä¸ºå…¶å°è£…ä¸ªå‡½æ•°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">turtle_thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> pub_Command<span class="token punctuation">:</span>            vel_msg <span class="token operator">=</span> Twist<span class="token punctuation">(</span><span class="token punctuation">)</span>            vel_msg<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.8</span>            vel_msg<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0.5</span>            turtle_vel_pub<span class="token punctuation">.</span>publish<span class="token punctuation">(</span>vel_msg<span class="token punctuation">)</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“å…¨å±€å˜é‡flagè·å–åˆ°åé¦ˆçš„æ—¶å€™ï¼Œå°±éœ€è¦è°ƒç”¨å›è°ƒå‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸ºå…¶å°è£…ä¸ªå›è°ƒå‡½æ•°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">CommandCallback</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">global</span> pub_Command    pub_Command <span class="token operator">=</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>pub_Command<span class="token punctuation">)</span>    <span class="token comment"># æ˜¾ç¤ºè¯·æ±‚</span>    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Publish turtle command![%d]"</span><span class="token punctuation">,</span> pub_Command<span class="token punctuation">)</span>    <span class="token comment"># åé¦ˆæ•°æ®</span>    <span class="token keyword">return</span> TriggerResponse<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token string">"Change turtle command state!"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è™½ç„¶å®ç°çš„æ•ˆæœå’Œc++æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ³¨æ„å®ç°æ–¹å¼æ˜¯å¾ˆæœ‰åŒºåˆ«çš„ï¼Œä¸€ä¸ªæ˜¯å°è£…äº†<code>ros::spinOnce();</code>ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨å¤šçº¿ç¨‹</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS äº”ã€è¯é¢˜æ¶ˆæ¯çš„è‡ªå®šä¹‰</title>
      <link href="/2022/07/19/ros-5-Customize-message-topics/"/>
      <url>/2022/07/19/ros-5-Customize-message-topics/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS 5: è‡ªå®šä¹‰æ¶ˆæ¯è¯é¢˜</h1><p>å®ç°ç›®æ ‡ï¼šå®Œæˆå®å¯æ¢¦ä¿¡æ¯çš„è¯é¢˜ä¼ è¾“</p><p>è‡ªå®šä¹‰è¯é¢˜çš„æµç¨‹ï¼š</p><pre class="mermaid">graph TBa(å®šä¹‰msgæ–‡ä»¶)a --&gt;b(package.xmlä¸­æ·»åŠ ä¾èµ–)b --&gt;c(CMakeLists.txtæ·»åŠ ç¼–è¯‘é€‰é¡¹)c --&gt;d(ç¼–è¯‘ç”Ÿæˆç›¸å…³æ–‡ä»¶)</pre><h2 id="ä¸€ã€å®šä¹‰æ¶ˆæ¯">ä¸€ã€å®šä¹‰æ¶ˆæ¯</h2><p>å…ˆå®šä¹‰æ¶ˆæ¯ç±»å‹ï¼Œrosä½¿ç”¨<code>*.msg</code>æ ¼å¼å­˜å‚¨æ¶ˆæ¯ã€‚</p><p>msgæ–‡ä»¶ä¸æ˜¯ç¼–ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ä¸åŒçš„ç¼–ç¨‹è¯­è¨€åŠ¨æ€æ‰©å±•å±‚ä¸åŒçš„æ•°æ®ç±»å‹ã€‚</p><pre class="line-numbers language-msg" data-language="msg"><code class="language-msg">string name#åå­—string type#å±æ€§uint8  gender#æ€§åˆ«uint8 unknown = 0uint8 male    = 1uint8 female  = 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äºŒã€ä¿®æ”¹package-xml">äºŒã€ä¿®æ”¹package.xml</h2><p>åœ¨åŠŸèƒ½åŒ…çš„package.xmlé‡Œï¼Œå¢åŠ ä¸¤å¥è¯ï¼Œä¸ºå…¶å¢åŠ ä¾èµ–åŒ…ã€‚åŒ…åå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>message_generation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>message_runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="ä¸‰ã€è°ƒæ•´CMakeLists-txt">ä¸‰ã€è°ƒæ•´CMakeLists.txt</h2><p>åœ¨CMakeLists.txtä¸­<strong>è¡¥å……</strong>ä»¥ä¸‹å†…å®¹</p><ul><li>1ã€åœ¨ç¬¬åè¡Œfind_packageçš„æœ€åè¡¥å……ä¸Š<code>message_generation</code>.</li></ul><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">find_package</span><span class="token punctuation">(</span>catkin REQUIRED COMPONENTS  geometry_msgs  roscpp  rospy  std_msgs  turtlesim  message_generation<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>2ã€å£°æ˜ROSæ¶ˆæ¯ã€‚åœ¨<code>Declare ROS dynamic reconfigure parameters</code>ä¸Šæ–¹ï¼Œæœ‰å…³äºmsgç¼–è¯‘çš„æŒ‡å¯¼ã€‚</li></ul><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment">## åœ¨â€œmsgâ€æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆæ¶ˆæ¯</span><span class="token comment"># add_message_files(</span><span class="token comment">#   FILES</span><span class="token comment">#   Message1.msg</span><span class="token comment">#   Message2.msg</span><span class="token comment"># )</span><span class="token comment">## åœ¨â€œsrvâ€æ–‡ä»¶å¤¹ä¸­ç”ŸæˆæœåŠ¡</span><span class="token comment"># add_service_files(</span><span class="token comment">#   FILES</span><span class="token comment">#   Service1.srv</span><span class="token comment">#   Service2.srv</span><span class="token comment"># )</span><span class="token comment">## åœ¨â€œactionâ€æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆæ“ä½œ</span><span class="token comment"># add_action_files(</span><span class="token comment">#   FILES</span><span class="token comment">#   Action1.action</span><span class="token comment">#   Action2.action</span><span class="token comment"># )</span><span class="token comment">## ç”Ÿæˆå…·æœ‰åœ¨æ­¤å¤„åˆ—å‡ºçš„ä»»ä½•ä¾èµ–é¡¹çš„æ·»åŠ æ¶ˆæ¯å’ŒæœåŠ¡</span><span class="token comment"># generate_messages(</span><span class="token comment">#   DEPENDENCIES</span><span class="token comment">#   geometry_msgs#   std_msgs</span><span class="token comment"># )</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬åªéœ€å†™å…¥ï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token function">add_message_files</span><span class="token punctuation">(</span>  FILES  Pokemon.msg<span class="token punctuation">)</span><span class="token function">generate_messages</span><span class="token punctuation">(</span>  DEPENDENCIES  std_msgs<span class="token punctuation">)</span><span class="token comment">################################################</span><span class="token comment">## Declare ROS dynamic reconfigure parameters ##</span><span class="token comment">################################################</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>3ã€åœ¨catkin_packageå¢åŠ è¿è¡Œä¾èµ–</li></ul><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment">###################################</span><span class="token comment">## catkin specific configuration ##</span><span class="token comment">###################################</span><span class="token function">catkin_package</span><span class="token punctuation">(</span>  CATKIN_DEPENDS geometry_msgs roscpp rospy std_msgs turtlesim message_runtime  <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Œæˆä¸Šè¿°ä¿®æ”¹åï¼Œ<strong>åœ¨å·¥ä½œç©ºé—´</strong>ä½¿ç”¨<code>catkin_make</code>ç¼–è¯‘ï¼Œç„¶ååœ¨<strong>å·¥ä½œç©ºé—´çš„develä¸­</strong>å°±å¯ä»¥<strong>æ‰¾åˆ°è¿™ä¸ªåŠŸèƒ½åŒ…çš„æ–‡ä»¶å¤¹</strong>ï¼Œé‡Œé¢å°±å«æœ‰ä¸€ä¸ª<code>Pokemon.h</code>å¤´æ–‡ä»¶ã€‚</p><h2 id="å››ï¼Œç¼–å†™ä»£ç ">å››ï¼Œç¼–å†™ä»£ç </h2><h3 id="c">c++</h3><h4 id="publisher">publisher</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"learn_topic/Pokemon.h"</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>        ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span>argv<span class="token punctuation">,</span><span class="token string">"pokemon_pub_topic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle n<span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Publisher Pub_Pokemon <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>learn_topic<span class="token double-colon punctuation">::</span>Pokemon<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/pokemon_info"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Rate <span class="token function">loop_rate</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    learn_topic<span class="token double-colon punctuation">::</span>Pokemon pokemon_msg<span class="token punctuation">;</span>pokemon_msg<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"pikachu"</span><span class="token punctuation">;</span>pokemon_msg<span class="token punctuation">.</span>type  <span class="token operator">=</span> <span class="token string">"electric"</span><span class="token punctuation">;</span>pokemon_msg<span class="token punctuation">.</span>gender  <span class="token operator">=</span> learn_topic<span class="token double-colon punctuation">::</span>Pokemon<span class="token double-colon punctuation">::</span>male<span class="token punctuation">;</span>Pub_Pokemon<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>pokemon_msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Publish Pokemon INfo\n\t name:%s type:%s gender:%d"</span><span class="token punctuation">,</span>     pokemon_msg<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pokemon_msg<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pokemon_msg<span class="token punctuation">.</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>        loop_rate<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="subscriber">subscriber</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"learn_topic/Pokemon.h"</span></span><span class="token keyword">void</span> <span class="token function">pokemonInfoCallback</span><span class="token punctuation">(</span><span class="token keyword">const</span> learn_topic<span class="token double-colon punctuation">::</span>Pokemon<span class="token double-colon punctuation">::</span>ConstPtr<span class="token operator">&amp;</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Subcribe Pokemon Info: name:%s type:%s gender:%d"</span><span class="token punctuation">,</span>  msg<span class="token operator">-&gt;</span>name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> msg<span class="token operator">-&gt;</span>type<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> msg<span class="token operator">-&gt;</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"pokemon_sub_topic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle n<span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Subscriber Sub_Pokemon <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">subscribe</span><span class="token generic class-name"><span class="token operator">&lt;</span>learn_topic<span class="token double-colon punctuation">::</span>Pokemon<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/pokemon_info"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span>pokemonInfoCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="cmake">cmake</h4><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_executable</span><span class="token punctuation">(</span>pub_pokemon src/pub_pokemon.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>pub_pokemon <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">add_dependencies</span><span class="token punctuation">(</span>pub_pokemon <span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>_generate_messages_cpp<span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>sub_pokemon src/sub_pokemon.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>sub_pokemon <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">add_dependencies</span><span class="token punctuation">(</span>sub_pokemon <span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>_generate_messages_cpp<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="python">python</h3><h4 id="publisher-2">publisher</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> rospy<span class="token keyword">from</span> learn_topic<span class="token punctuation">.</span>msg <span class="token keyword">import</span> Pokemon<span class="token keyword">def</span> <span class="token function">pub_pokemon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'py_pokemon_pub_topic'</span><span class="token punctuation">,</span> anonymous<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    Pub_Pokemon <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Publisher<span class="token punctuation">(</span><span class="token string">'/pokemon_info'</span><span class="token punctuation">,</span> Pokemon<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>    rate <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Rate<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    count <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        pokemon_msg <span class="token operator">=</span> Pokemon<span class="token punctuation">(</span><span class="token punctuation">)</span>        pokemon_msg<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"psyduck"</span>        pokemon_msg<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">=</span> <span class="token string">"water"</span>        pokemon_msg<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token number">2</span>        Pub_Pokemon<span class="token punctuation">.</span>publish<span class="token punctuation">(</span>pokemon_msg<span class="token punctuation">)</span>        rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Publiish pokemon message[%s-%s-%d]"</span><span class="token punctuation">,</span>pokemon_msg<span class="token punctuation">.</span>name<span class="token punctuation">,</span>pokemon_msg<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">,</span>pokemon_msg<span class="token punctuation">.</span>gender<span class="token punctuation">)</span>        rate<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        pub_pokemon<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> rospy<span class="token punctuation">.</span>ROSInterruptException<span class="token punctuation">:</span>        <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="subscriber-2">subscriber</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> rospy<span class="token keyword">from</span> learn_topic<span class="token punctuation">.</span>msg <span class="token keyword">import</span> Pokemon<span class="token keyword">def</span> <span class="token function">pokemonInfoCallback</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Subscribe pokemon info: name:%s type:%s gender:%d"</span><span class="token punctuation">,</span>        msg<span class="token punctuation">.</span>name<span class="token punctuation">,</span>msg<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">,</span>msg<span class="token punctuation">.</span>gender<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">sub_pokemon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'py_pokemon_sub_topic'</span><span class="token punctuation">,</span>anonymous<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span><span class="token string">'/pokemon_info'</span><span class="token punctuation">,</span>Pokemon<span class="token punctuation">,</span>pokemonInfoCallback<span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    sub_pokemon<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¡¥å……ï¼šROS Masteræ˜¯è´Ÿè´£ç»™èŠ‚ç‚¹å»ºç«‹è¿æ¥ã€‚å¦‚æœå¤šä¸ªèŠ‚ç‚¹é“¾æ¥å®Œæ¯•åï¼Œå³ä½¿ROS Masteræ–­å¼€ä¹Ÿä¸å½±å“èŠ‚ç‚¹ä¹‹é—´çš„é€šè®¯ï¼Œå°±æ˜¯æ— æ³•å»ºç«‹æ–°çš„é“¾æ¥è€Œå·²ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS å››ã€å‘å¸ƒè€…ä¸è®¢é˜…è€…</title>
      <link href="/2022/07/18/ros-4-publisher-subscriber-code/"/>
      <url>/2022/07/18/ros-4-publisher-subscriber-code/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS å››ï¼šå‘å¸ƒè€…ä¸è®¢é˜…è€…çš„å®ç°</h1><p><img src="https://s2.loli.net/2022/07/17/ibDTIw9KBfJUx84.png" alt="è¯é¢˜æ¨¡å‹ï¼ˆå‘å¸ƒ/è®¢é˜…ï¼‰"></p><blockquote><p>ç¨‹åºç›®æ ‡ï¼š</p><p>å®ç°ä¸€ä¸ªPublisherï¼Œå‘å¸ƒé€Ÿåº¦æŒ‡ä»¤çš„msgï¼Œæ§åˆ¶turtlesimè¿åŠ¨ã€‚</p></blockquote><p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…</p><p>åŠŸèƒ½åŒ…ç›¸å…³è¯·å‚è€ƒï¼š<a href="https://tuoyou-hao.github.io/2022/07/17/ros-3-workspace-pkg/">https://tuoyou-hao.github.io/2022/07/17/ros-3-workspace-pkg/</a></p><p>è¿›å…¥å·¥ä½œç©ºé—´çš„srcè·¯å¾„</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">catkin_create_pkg learn_topic rospy roscpp std_msgs geometry_msgs turtlesim<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ä¸€ã€å¦‚ä½•åˆ›å»ºä¸€ä¸ªpublisher">ä¸€ã€å¦‚ä½•åˆ›å»ºä¸€ä¸ªpublisher</h2><p>å»ºç«‹ä¸€ä¸ªpublisherçš„åŸºæœ¬æµç¨‹</p><pre class="mermaid">graph TBa(åˆå§‹åŒ–èŠ‚ç‚¹)a --&gt;b(æ³¨å†ŒèŠ‚ç‚¹)b --&gt;c(åˆ›å»ºæ¶ˆæ¯)c --&gt;d(æŒ‰ä¸€å®šé¢‘ç‡å‘å¸ƒæ¶ˆæ¯)</pre><h2 id="c-ä»£ç å®ç°">c++ä»£ç å®ç°</h2><h3 id="ä¸€ã€ç¼–å†™ä»£ç ">ä¸€ã€ç¼–å†™ä»£ç </h3><p>å…ˆåˆ›å»ºä¸€ä¸ªcppæ–‡ä»¶<code>touch publisher.cpp</code></p><p>æˆ‘ä»¬å°†ä½¿ç”¨ä»£ç å‘å¸ƒturtle1/cmd_velè¯é¢˜ï¼Œæ¶ˆæ¯ç±»å‹ä¸ºgeometry_msgs::Twist</p><ol><li>é¦–å…ˆï¼Œå¯¼å…¥å¤´æ–‡ä»¶</li></ol><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;geometry_msgs/Twist.h&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åç¼–å†™æˆ‘ä»¬çš„ä¸»å‡½æ•°ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>ä¸»å‡½æ•°é‡Œï¼Œå…ˆåˆå§‹åŒ–èŠ‚ç‚¹</li></ol><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ROSèŠ‚ç‚¹åˆå§‹åŒ–,èŠ‚ç‚¹åå­—å«publisherï¼Œå”¯ä¸€çš„åå­—</span>ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"publisher"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>argc, argvæ˜¯ä¸»å‡½æ•°ä¼ å…¥çš„å‚æ•°</p><p>publisheræ˜¯èŠ‚ç‚¹çš„åç§°ï¼Œæ³¨æ„ä¸èƒ½é‡å</p><ol start="3"><li>åˆ›å»ºèŠ‚ç‚¹å¥æŸ„</li></ol><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// åˆ›å»ºèŠ‚ç‚¹å¥æŸ„,å˜é‡åä¸ºn</span>ros<span class="token double-colon punctuation">::</span>NodeHandle n<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>èŠ‚ç‚¹å¥æŸ„æ˜¯ç”¨æ¥ç®¡ç†rosç›¸å…³çš„apièµ„æºçš„ã€‚æ¯”å¦‚åˆ›å»ºå‘å¸ƒè€…ï¼Œæˆ–åˆ›å»ºä¸€ç³»åˆ—apiè°ƒç”¨ï¼Œéƒ½éœ€è¦ç”¨rosçš„å¥æŸ„æ¥è°ƒç”¨ã€‚</p><ol start="4"><li><p>åˆ›å»ºpublisheræ¥å‘å¸ƒæ¶ˆæ¯</p><p>å‘ROS Masteræ³¨å†ŒèŠ‚ç‚¹ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‘å¸ƒçš„è¯é¢˜åå’Œè¯é¢˜çš„æ¶ˆæ¯ç±»å‹ã€‚</p></li></ol><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// åˆ›å»ºä¸€ä¸ªPublisher,å«turtle_vel_pub</span><span class="token comment">// å‘å¸ƒåä¸º/turtle1/cmd_velçš„topic</span><span class="token comment">// æ¶ˆæ¯ç±»å‹ä¸ºgeometry_msgs::Twistï¼Œé˜Ÿåˆ—é•¿åº¦10</span>ros<span class="token double-colon punctuation">::</span>Publisher turtle_vel_pub <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>geometry_msgs<span class="token double-colon punctuation">::</span>Twist<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"/turtle1/cmd_vel"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨n.advertiseçš„å°–æ‹¬å·é‡Œè¦æ”¾çš„æ˜¯æ•°æ®ç±»å‹ï¼Œåé¢è·Ÿéšè¦å‘å¸ƒçš„topicåä»¥åŠæ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦ã€‚</p><ul><li><p>æ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœå‘é€é¢‘ç‡å¤ªé«˜ï¼Œä»¥å¤ªç½‘æˆ–åº•å±‚ç³»ç»Ÿå¯èƒ½æ¥ä¸åŠå¿«é€Ÿå“åº”ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…ˆæŠŠæ¶ˆæ¯æ”¾åœ¨é˜Ÿåˆ—é‡Œï¼Œç„¶åå†å¯¹å¤–å‘é€æ•°æ®ã€‚</p></li><li><p>å¦‚æœè¿™é‡Œçš„é˜Ÿåˆ—çˆ†æ»¡äº†ï¼Œé˜Ÿåˆ—ä¼šæŠŠå…ˆè¿›é˜Ÿçš„æ•°æ®ä¸¢å¼ƒï¼Œé˜Ÿåˆ—ä¼šæ°¸è¿œä¿å­˜æœ€æ™šè¿›é˜Ÿåˆ—çš„æ•°æ®ã€‚æ‰€ä»¥é˜Ÿåˆ—ä¼šå‡ºç°æ‰å¸§ã€æ‰æ•°æ®çš„æƒ…å†µã€‚</p></li></ul><ol start="5"><li>è®¾ç½®å¾ªç¯é¢‘ç‡</li></ol><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// è®¾ç½®å¾ªç¯çš„é¢‘ç‡</span>ros<span class="token double-colon punctuation">::</span>Rate <span class="token function">loop_rate</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="6"><li><p>å¾ªç¯å‘é€æ•°æ®</p><p>å…ˆåˆå§‹åŒ–æ¶ˆæ¯ï¼Œç„¶åè®©ä»–æŒ‰ç…§ä¸€å®šé¢‘ç‡å‘å¸ƒæ¶ˆæ¯ã€‚</p></li></ol><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// åˆå§‹åŒ–geometry_msgs::Twistç±»å‹çš„æ¶ˆæ¯</span>    geometry_msgs<span class="token double-colon punctuation">::</span>Twist vel_msg<span class="token punctuation">;</span>    vel_msg<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span> <span class="token comment">//çº¿é€Ÿåº¦</span>    vel_msg<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span> <span class="token comment">//è§’é€Ÿåº¦</span>    <span class="token comment">// å‘å¸ƒæ¶ˆæ¯</span>    turtle_vel_pub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>vel_msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Publish command[%0.2f m/s, %0.2f rad/s]"</span><span class="token punctuation">,</span> vel_msg<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x<span class="token punctuation">,</span> vel_msg<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æŒ‰ç…§å¾ªç¯é¢‘ç‡å»¶æ—¶</span>    loop_rate<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="äºŒã€ä»£ç ç¼–è¯‘">äºŒã€ä»£ç ç¼–è¯‘</h3><p>åœ¨åŠŸèƒ½åŒ…é‡Œçš„CMakeListsé‡Œå¢åŠ ä¸¤å¥ä»£ç ï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment">###########</span><span class="token comment">## Build ##</span><span class="token comment">###########</span><span class="token comment">#åœ¨CMakeListé‡Œçš„buildä¸€æ åº•ä¸‹è¡¥å……ä¸Šï¼š</span><span class="token comment">##add_executable(å¯æ‰§è¡Œæ–‡ä»¶å è¦ç¼–è¯‘çš„cppæ–‡ä»¶)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>publisher src/publisher.cpp<span class="token punctuation">)</span><span class="token comment">##é“¾æ¥rosçš„åº“</span><span class="token comment">##target_link_libraries(å¯æ‰§è¡Œæ–‡ä»¶ é“¾æ¥çš„åº“)</span><span class="token comment">##è¿™é‡Œæˆ‘ä»¬é“¾æ¥catkin_LIBRARIES</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>publisher <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤è¿›è¡Œç¼–è¯‘ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ~/ros_wscatkin_makesource devel/setup.bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œä»£ç æµ‹è¯•æ•ˆæœï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">roscorerosrun turtlesim turtlesim_noderosrun learn_topic publisher<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><p>å¦‚æœå‘½ä»¤è¡ŒæŠ¥é”™æ˜¾ç¤ºæ‰¾ä¸åˆ°åŠŸèƒ½åŒ…ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[rospack] Error: package 'learn_topic' not found<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è®°å¾—æ£€æŸ¥<code>ROS_PACKAGE_PATH</code>ç¯å¢ƒå˜é‡ï¼Œæ˜¯å¦è¿è¡Œ<code>source devel/setup.bash</code>ã€‚</p><h2 id="pythonä»£ç å®ç°">pythonä»£ç å®ç°</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/env python</span><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rospy<span class="token keyword">from</span> geometry_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> Twist<span class="token keyword">def</span> <span class="token function">publisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment"># ROSèŠ‚ç‚¹åˆå§‹åŒ–</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'publisher'</span><span class="token punctuation">,</span> anonymous<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªPublisher</span>    turtle_vel_pub <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Publisher<span class="token punctuation">(</span><span class="token string">'/turtle1/cmd_vel'</span><span class="token punctuation">,</span> Twist<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment"># è®¾ç½®å¾ªç¯çš„é¢‘ç‡</span>    rate <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Rate<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>     <span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment"># åˆå§‹åŒ–geometry_msgs::Twistç±»å‹çš„æ¶ˆæ¯</span>        vel_msg <span class="token operator">=</span> Twist<span class="token punctuation">(</span><span class="token punctuation">)</span>        vel_msg<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span>        vel_msg<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0.2</span><span class="token comment"># å‘å¸ƒæ¶ˆæ¯</span>        turtle_vel_pub<span class="token punctuation">.</span>publish<span class="token punctuation">(</span>vel_msg<span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Publsh turtle velocity command[%0.2f m/s, %0.2f rad/s]"</span><span class="token punctuation">,</span> vel_msg<span class="token punctuation">.</span>linear<span class="token punctuation">.</span>x<span class="token punctuation">,</span> vel_msg<span class="token punctuation">.</span>angular<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token comment"># æŒ‰ç…§å¾ªç¯é¢‘ç‡å»¶æ—¶</span>        rate<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        publisher<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> rospy<span class="token punctuation">.</span>ROSInterruptException<span class="token punctuation">:</span>        <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–ç¨‹æ€æƒ³å’Œc++å¼€å‘çš„ä¸€æ ·ã€‚</p><p>åœ¨è¿è¡Œroscoreå’Œturtlesimçš„å‰æä¸‹ï¼Œç›´æ¥ç”¨pythonæŒ‡ä»¤è¿è¡Œä»£ç å³å¯</p><h2 id="äºŒã€å¦‚ä½•åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…">äºŒã€å¦‚ä½•åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…</h2><p><img src="https://s2.loli.net/2022/07/18/DHoyuQOtTjk2IPZ.png" alt=""></p><p>å¼€å‘ç›®æ ‡ï¼šè®¢é˜…turtlesimçš„poseä¿¡æ¯</p><h2 id="c-ä»£ç å®ç°-2">c++ä»£ç å®ç°</h2><p>å¤´æ–‡ä»¶</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"turtlesim/Pose.h"</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å›è°ƒå‡½æ•°</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// æ¥æ”¶åˆ°è®¢é˜…çš„æ¶ˆæ¯åï¼Œä¼šè¿›å…¥æ¶ˆæ¯å›è°ƒå‡½æ•°</span><span class="token keyword">void</span> <span class="token function">poseCallback</span><span class="token punctuation">(</span><span class="token keyword">const</span> turtlesim<span class="token double-colon punctuation">::</span>Pose<span class="token double-colon punctuation">::</span>ConstPtr<span class="token operator">&amp;</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// å°†æ”¶åˆ°çš„æ¶ˆæ¯æ‰“å°å‡ºæ¥</span>    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Turtle pose: x:%0.6f, y:%0.6f"</span><span class="token punctuation">,</span> msg<span class="token operator">-&gt;</span>x<span class="token punctuation">,</span> msg<span class="token operator">-&gt;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// åˆå§‹åŒ–ROSèŠ‚ç‚¹</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"subscriber"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºèŠ‚ç‚¹å¥æŸ„</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle n<span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºä¸€ä¸ªSubscriberï¼Œè®¢é˜…åä¸º/turtle1/poseçš„topicï¼Œæ³¨å†Œå›è°ƒå‡½æ•°poseCallback</span>    ros<span class="token double-colon punctuation">::</span>Subscriber pose_sub <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">"/turtle1/pose"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> poseCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–å†™å®Œæ¯•åï¼Œå’Œä¸Šè¿°ä¸€æ ·ï¼Œè¿›è¡Œç¼–è¯‘ï¼Œç„¶årosrunè¿è¡Œ</p><h2 id="pythonå®ç°">pythonå®ç°</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rospy<span class="token keyword">from</span> turtlesim<span class="token punctuation">.</span>msg <span class="token keyword">import</span> Pose<span class="token keyword">def</span> <span class="token function">poseCallback</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Turtle pose: x:%0.6f, y:%0.6f "</span><span class="token punctuation">,</span>msg<span class="token punctuation">.</span>x<span class="token punctuation">,</span> msg<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment"># ROSèŠ‚ç‚¹åˆå§‹åŒ–</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span><span class="token string">'subscriber'</span><span class="token punctuation">,</span> anonymous<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªSubscriberï¼Œè®¢é˜…åä¸º/turtle1/poseçš„topicï¼Œæ³¨å†Œå›è°ƒå‡½æ•°poseCallback</span>    rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span><span class="token string">"/turtle1/pose"</span><span class="token punctuation">,</span> Pose<span class="token punctuation">,</span> poseCallback<span class="token punctuation">)</span><span class="token comment"># å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span>    rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    subscriber<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç å‚è€ƒè‡ªï¼šå…¬ä¼—å·å¤æœˆå±…</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS ä¸‰ã€å·¥ä½œç©ºé—´å’ŒåŠŸèƒ½åŒ…</title>
      <link href="/2022/07/17/ros-3-workspace-pkg/"/>
      <url>/2022/07/17/ros-3-workspace-pkg/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>åˆ›å»ºå·¥ä½œç©ºé—´å’ŒåŠŸèƒ½åŒ…</h1><h2 id="ä¸€ã€å·¥ä½œç©ºé—´ï¼ˆworkspaceï¼‰">ä¸€ã€å·¥ä½œç©ºé—´ï¼ˆworkspaceï¼‰</h2><p>å·¥ä½œç©ºé—´å¯ä»¥ç±»æ¯”ä¸ºï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªå·¥ç¨‹é¡¹ç›®ï¼Œä¼šå»ºç«‹ä¸€ç³»åˆ—çš„æ–‡ä»¶å¤¹ç›®å½•ã€‚å·¥ä½œç©ºé—´å°±æ˜¯ä¸€ä¸ªå­˜æ”¾ROSå·¥ç¨‹å¼€å‘ç›¸å…³æ–‡ä»¶çš„æ–‡ä»¶å¤¹</p><ul><li><p>srcï¼ˆSource Spaceï¼‰ï¼šä»£ç ç©ºé—´</p><p>æ”¾ç½®åŠŸèƒ½åŒ…ï¼Œä»£ç ï¼Œé…ç½®æ–‡ä»¶ï¼Œlaunchæ–‡ä»¶ç­‰ç­‰</p></li><li><p>buildï¼ˆBuild Spaceï¼‰ï¼šç¼–è¯‘ç©ºé—´</p><p>æ”¾ç½®ç¼–è¯‘è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶ï¼Œé€šå¸¸ä¸éœ€è¦å¤ªå…³æ³¨è¿™äº›æ–‡ä»¶</p></li><li><p>develï¼ˆDevelopment Spaceï¼‰ï¼šå¼€å‘ç©ºé—´</p><p>æ”¾ç½®ç¼–è¯‘å®Œæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸€äº›åº“ï¼Œè„šæœ¬ç­‰ç­‰ï¼Œç¼–è¯‘å®Œæˆçš„æ–‡ä»¶ä¼šåœ¨è¿™è¿è¡Œã€‚</p><ul><li>å­˜æ”¾çš„æ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶</li></ul></li><li><p>installï¼ˆInstall Spaceï¼‰ï¼šå®‰è£…ç©ºé—´</p><p>ç”¨installæŒ‡ä»¤å®‰è£…æˆåŠŸåçš„è¿™éƒ¨åˆ†æ–‡ä»¶éƒ½åœ¨è¿™ï¼Œç±»æ¯”Windowsé‡Œçš„<code>C:\Program Files</code>ã€‚</p><ul><li>å­˜æ”¾çš„æ˜¯å¼€å‘å®Œæˆåçš„å¯æ‰§è¡Œæ–‡ä»¶</li></ul></li></ul><p>ç”±äºdevelå’Œinstallä¸¤ä¸ªå¼€å‘ç©ºé—´æœ‰é‡å¤ï¼Œåœ¨ROS2é‡Œåªä¿ç•™äº†install spaceï¼Œåœ¨ros1é‡Œå°±è¿˜ç•™æœ‰devel space</p><h3 id="1-1-åˆ›å»ºå·¥ä½œç©ºé—´">1.1 åˆ›å»ºå·¥ä½œç©ºé—´</h3><h4 id="1ã€åˆ›å»ºå·¥ä½œç©ºé—´">1ã€åˆ›å»ºå·¥ä½œç©ºé—´</h4><p>workspaceåå¯ä»¥è‡ªå·±éšä¾¿èµ·</p><p>è¿™é‡Œæˆ‘ä»¬å« â€œros_wsâ€</p><p>ä½†åé¢è·Ÿéšçš„è·¯å¾„åï¼Œå¦‚srcç­‰åå­—ä¸€å®šè¦ä¸€è‡´ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir -p ~/ros_ws/src cd ~/ros_ws/src<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸‹é¢è¿™ä¸ªæŒ‡ä»¤ä¼šæŠŠå½“å‰æ–‡ä»¶å¤¹å˜æˆroså·¥ä½œç©ºé—´çš„å±æ€§<br>æ‰§è¡ŒæˆåŠŸåï¼Œsrcç›®å½•åº•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª<code>CMakeLists.txt</code></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">catkin_init_workspace <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="2ã€ç¼–è¯‘å·¥ä½œç©ºé—´">2ã€ç¼–è¯‘å·¥ä½œç©ºé—´</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ~/ros_ws/catkin_make<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ‰§è¡Œå®Œä¸Šè¿°æŒ‡ä»¤ï¼Œä¼šäº§ç”Ÿbuildç©ºé—´å’Œdevelç©ºé—´ã€‚</p><p>å¦‚æœéœ€è¦ç”Ÿæˆinstallå·¥ä½œç©ºé—´ï¼Œéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">catkin_make install<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="3ã€è®¾ç½®ç¯å¢ƒå˜é‡">3ã€è®¾ç½®ç¯å¢ƒå˜é‡</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">source devel/setup.bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="4ã€æ£€å¯Ÿç¯å¢ƒå˜é‡">4ã€æ£€å¯Ÿç¯å¢ƒå˜é‡</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">echo $ROS_PACKAGE_PATH&gt; æŸ¥çœ‹è¾“å‡ºè·¯å¾„æ˜¯å¦å«æœ‰å½“å‰è¯¥å·¥ä½œç¯å¢ƒçš„è·¯å¾„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="äºŒã€åŠŸèƒ½åŒ…">äºŒã€åŠŸèƒ½åŒ…</h2><h3 id="2-1-åˆ›å»ºåŠŸèƒ½åŒ…">2.1 åˆ›å»ºåŠŸèƒ½åŒ…</h3><p>åˆ›å»ºä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€å®šè¦åˆ›å»ºåŠŸèƒ½åŒ…ã€‚åŠŸèƒ½åŒ…æ˜¯æ”¾ç½®ä»£ç çš„æœ€å°å•å…ƒã€‚æˆ‘ä»¬çš„ä»£ç å—ä¸èƒ½ç›´æ¥æ”¾ç½®åœ¨srcåº•ä¸‹ç¼–è¯‘ï¼Œæ˜¯ä¸å…è®¸çš„ã€‚</p><p>åˆ›å»ºåŠŸèƒ½åŒ…çš„æŒ‡ä»¤è¦æ±‚æ˜¯ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">catkin_create_pkg &lt;package_name&gt; [depend 1][depend 2]...[depend n]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>package_nameï¼šæ˜¯åŠŸèƒ½åŒ…çš„åå­—</p><p>dependï¼šæŒ‡å®šåŠŸèƒ½åŒ…çš„ä¾èµ–ï¼Œå¯ä»¥ä¾èµ–å¾ˆå¤šä¸ª</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># åˆ›å»ºåŠŸèƒ½åŒ…cd ~/ros_ws/srccatkin_create_pkg test_pkg std_msgs rospy roscpp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œä¸Šè¿°æŒ‡ä»¤ï¼Œå°±ä¼šåœ¨srcé‡Œåˆ›å»ºä¸€ä¸ª<code>test_pkg</code>åŠŸèƒ½åŒ…ï¼ˆæ–‡ä»¶å¤¹ï¼‰</p><p>ä¾èµ–ï¼š</p><ul><li>std_msgsï¼šroså®šä¹‰çš„æ ‡å‡†æ¶ˆæ¯ç»“æ„</li><li>rospyã€roscppï¼šç”¨pythonæˆ–c++å¼€å‘çš„æ¥å£å†™ç¨‹åºã€‚</li></ul><hr><p>æ‰“å¼€<code>test_pkg</code>åï¼Œå¯ä»¥çœ‹åˆ°æœ‰includeæ–‡ä»¶å¤¹ï¼Œsrcæ–‡ä»¶å¤¹ï¼Œpackage.xmlå’ŒCMakeLists.txt</p><ul><li><p>srcæ–‡ä»¶å¤¹ï¼šæ‰€æœ‰ä»£ç å¼€å‘çš„æ–‡ä»¶éƒ½åœ¨è¿™</p></li><li><p>includeæ–‡ä»¶å¤¹ï¼šæ”¾ç½®å¤´æ–‡ä»¶</p></li><li><p>package.xmlï¼šç”¨xmlæè¿°åŠŸèƒ½åŒ…ç›¸å…³ä¿¡æ¯</p><p>ä¼šå­˜æ”¾ä½œè€…emailï¼Œå¼€æºè®¸å¯è¯ï¼Œç‰ˆæœ¬å·ï¼Œä»¥åŠç¼–è¯‘ä¾èµ–ï¼Œè¿è¡Œä¾èµ–ç­‰ç­‰ä¿¡æ¯</p></li><li><p>CMakeLists.txtï¼šæè¿°åŠŸèƒ½åŒ…çš„ç¼–è¯‘è§„åˆ™ï¼Œè¯­æ³•æ˜¯cmakeã€‚</p></li></ul><h3 id="2-2-ç¼–è¯‘åŠŸèƒ½åŒ…">2.2 ç¼–è¯‘åŠŸèƒ½åŒ…</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ~/ros_wscatkin_makesource ~/ros_Ws/devel/setup.bash #è®¾ç½®ç¯å¢ƒå˜é‡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç¼–è¯‘å®Œæˆéœ€è¦å°†å…¶æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚éœ€è¦éªŒè¯æ˜¯å¦å·²ç»åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œåªéœ€è¦åœ¨ä¸­ç«¯è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">echo $ROS_PACKAGE_PATH<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¼šæ‰“å°æ‰€æœ‰ROSåŠŸèƒ½åŒ…çš„è·¯å¾„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Win11é…ç½®WSL</title>
      <link href="/2022/07/15/wsl_init_Win11/"/>
      <url>/2022/07/15/wsl_init_Win11/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>Win11é…ç½®WSL</h1><blockquote><p>å‰è¨€åºŸè¯ï¼š</p><p>åœ¨ç”µè„‘ä¸Šéœ€è¦LINUXå¼€å‘çš„æ—¶å€™ï¼Œç”±äºè™šæ‹Ÿæœºæ— æ³•ç›´æ¥è¿æ¥åˆ°ç”µè„‘ä¸»æœºçš„æ˜¾å¡ï¼Œæ— æ³•åœ¨LINUXä¸Šè¿›è¡ŒCUDAç¼–ç¨‹ã€‚æ‰€ä»¥å¦‚æœéœ€è¦åœ¨è¯¥ç”µè„‘è¿›è¡ŒLINUXçš„CUDAå¼€å‘ï¼Œé…ç½®ä¸€ä¸ªwslå°±æ˜¾å¾—ååˆ†é‡è¦ã€‚</p><p>æœ¬æ¬¡é…ç½®æ˜¯åœ¨ä¸€å°ï¼ˆåˆšè£…è¿‡vs c++å’ŒCUDAçš„ï¼‰å…¨æ–°çš„ç”µè„‘ä¸Šé…ç½®çš„ï¼Œç³»ç»Ÿæ˜¯win11ã€‚</p></blockquote><h2 id="1ã€ç”µè„‘ç³»ç»Ÿå†…çš„é…ç½®">1ã€ç”µè„‘ç³»ç»Ÿå†…çš„é…ç½®</h2><p>æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¤§åŒå°å¼‚ï¼Œå¯è‡ªè¡Œé€‰æ‹©<strong>å…¶ä¸­ä¸€ç§æ–¹æ¡ˆ</strong></p><h3 id="1-1-ç”¨æ§åˆ¶é¢æ¿">1.1 ç”¨æ§åˆ¶é¢æ¿</h3><p>åœ¨ <code>æ§åˆ¶é¢æ¿-&gt;ç¨‹åº-&gt;å¯ç”¨æˆ–å…³é—­ windows åŠŸèƒ½</code> ä¸­ï¼Œå¼€å¯ Windows è™šæ‹ŸåŒ–ã€ Linux å­ç³»ç»Ÿï¼ˆWSL2)ã€Hyper-V</p><p><img src="https://s2.loli.net/2022/07/15/9KFs4paNYw8TS1n.png" alt="æ§åˆ¶é¢æ¿"></p><p><img src="https://s2.loli.net/2022/07/15/HpAB2xD8QvhJPVz.png" alt="å‹¾é€‰ç”»æ¡†çš„éƒ¨åˆ†"></p><p><strong>ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€powershell</strong>ï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">bcdedit <span class="token operator">/</span><span class="token function">set</span> hypervisorlaunchtype auto<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="1-2-ç”¨å‘½ä»¤è¡Œ">1.2 ç”¨å‘½ä»¤è¡Œ</h3><p><strong>ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€powershell</strong>ï¼Œ<code>åˆ†åˆ«</code>è¾“å…¥ä»¥ä¸‹çš„æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">bcdedit <span class="token operator">/</span><span class="token function">set</span> hypervisorlaunchtype Auto<span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName Microsoft-Hyper-V <span class="token operator">-</span>All<span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName VirtualMachinePlatform <span class="token comment">#éœ€è¦é‡å¯ç³»ç»Ÿï¼Œè¯·æ³¨æ„æŒ‰yè®©ä»–é‡å¯</span><span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName Microsoft-Windows-Subsystem-Linux<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä»¥ä¸Šå†…å®¹ä¸èƒ½é¡ºåˆ©è¿è¡Œï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹çš„æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">dism<span class="token punctuation">.</span>exe <span class="token operator">/</span>online <span class="token operator">/</span><span class="token function">enable-feature</span> <span class="token operator">/</span>featurename:Microsoft-Windows-Subsystem-Linux <span class="token operator">/</span>all <span class="token operator">/</span>norestartdism<span class="token punctuation">.</span>exe <span class="token operator">/</span>online <span class="token operator">/</span><span class="token function">enable-feature</span> <span class="token operator">/</span>featurename:VirtualMachinePlatform <span class="token operator">/</span>all <span class="token operator">/</span>norestart<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="2ã€ä¸‹è½½linuxå­æ“ä½œç³»ç»Ÿ">2ã€ä¸‹è½½linuxå­æ“ä½œç³»ç»Ÿ</h2><p>æ‰“å¼€<code>Microsoft Store</code>ï¼Œé‡Œé¢æœ‰å¾ˆå¤šä¸åŒçš„linuxæ“ä½œç³»ç»Ÿï¼Œæœ‰debainï¼ŒUbuntuã€kaliç­‰ç­‰ï¼Œåœ¨æœç´¢æ¡†è¾“å…¥è‡ªå·±éœ€è¦çš„æ“ä½œç³»ç»Ÿåï¼Œé€‰æ‹©ä¸‹è½½å³å¯ï¼Œè¿™é‡Œä½¿ç”¨å¤§å®¶éƒ½çˆ±ç”¨çš„Ubuntuï¼Œç‰ˆæœ¬20.04ã€‚</p><p><img src="https://s2.loli.net/2022/07/15/7dst9pbEokK8Pje.png" alt="é€‰æ‹©éœ€è¦çš„ç³»ç»Ÿå³å¯"></p><p>ä¸‹è½½å®Œæˆåï¼Œåœ¨<code>cmd</code>æˆ–è€…<code>powershell</code>è¾“å…¥<code>wsl</code>å³å¯ã€‚åˆå§‹åŒ–ä¼šè®©ä½ æ³¨å†Œç”¨æˆ·åï¼Œè®¾å®šå¯†ç ç­‰ç­‰ã€‚å¦‚æœä½ ä¸€è·¯æ“ä½œä¸‹æ¥éƒ½å¾ˆé¡ºåˆ©ï¼Œæœ¬æ¬¡å®‰è£…åˆ°æ­¤ç»“æŸã€‚</p><p><strong>å¦‚æœä½ å‡ºç°äº†æŠ¥é”™ï¼Œå¸Œæœ›åœ¨ç¬¬å››éƒ¨åˆ†ï¼Œæˆ‘çš„è¸©å‘è§£å†³æ–¹æ¡ˆå¯ä»¥å¸®åŠ©åˆ°ä½ </strong></p><h2 id="3ã€æŸ¥çœ‹å­ç³»ç»Ÿçš„æ–‡ä»¶">3ã€æŸ¥çœ‹å­ç³»ç»Ÿçš„æ–‡ä»¶</h2><p>ä½¿ç”¨<kbd>Win</kbd>+<kbd>r</kbd>è°ƒå‡ºè¿è¡Œç•Œé¢æ¡†ï¼Œè¾“å…¥<code>\\wsl$</code>å³å¯æ‰“å¼€wslçš„æ–‡ä»¶ç®¡ç†å™¨ã€‚</p><p>ä½†æˆ‘ä»¬çš„è¿è¡Œç•Œé¢æœ‰æ—¶å€™è¦ç”¨åˆ«çš„åŠŸèƒ½ï¼Œè‡ªç„¶ä¼šå¸Œæœ›å¯ä»¥åœ¨ â€œæ­¤ç”µè„‘â€ ç•Œé¢ä¸­ç›´æ¥å¯ä»¥æ‰“å¼€äº†</p><p>æˆ‘ä»¬ç”¨ä¸Šé¢çš„æ–¹æ³•æ‰“å¼€ç›®å½•åï¼Œç‚¹é€‰ä¸Šé¢çš„è·¯å¾„å¤åˆ¶ä¸‹æ¥</p><p><img src="https://s2.loli.net/2022/07/15/DMaisbvZyXehnEQ.png" alt="å¤åˆ¶wslçš„è·¯å¾„"></p><p>ç„¶åè¿”å›æ­¤ç”µè„‘çš„ç•Œé¢ï¼Œå³é”®èœå•æ é€‰æ‹©<code>æ·»åŠ ä¸€ä¸ªç½‘ç»œä½ç½®</code></p><p><img src="https://s2.loli.net/2022/07/15/GrPVDuomldXac6h.png" alt="æ­¤ç”µè„‘ä¸­å³é”®èœå•æ "></p><p>ä¸€è·¯ç‚¹é€‰ â€œä¸‹ä¸€é¡µâ€ï¼Œç„¶åä»–è¦ä½ å¡«å†™ç½‘ç»œä½ç½®çš„æ—¶å€™ï¼ŒæŠŠåˆšåˆšçš„è·¯å¾„ç²˜è´´è¿›å»ï¼Œç‚¹é€‰ â€œä¸‹ä¸€é¡µâ€ç»§ç»­ã€‚</p><p>ç„¶åå°±å¯ä»¥åœ¨æ­¤ç”µè„‘ç•Œé¢ä¸­ç›´æ¥æŸ¥çœ‹wslæ–‡ä»¶äº†ã€‚</p><h2 id="4ã€è¸©å‘è®°å½•">4ã€è¸©å‘è®°å½•</h2><p>æˆ‘å‡ºç°çš„æŠ¥é”™å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/07/15/CWFAgBcvGlOtbxu.png" alt=""></p><p>å¹¶ä¸”æˆ‘åˆæ­¥é…ç½®çš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰åŠŸèƒ½<code>Hyper-V </code>çš„ï¼Œè€Œä¸”è¿è¡Œä¸‹é¢è¿™æ¡æŒ‡ä»¤çš„è¯ï¼Œä¼šæŠ¥é”™<strong>åŠŸèƒ½åç§° Microsoft-Hyper-V æœªçŸ¥ã€‚</strong></p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName Microsoft-Hyper-V <span class="token operator">-</span>All<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-1-è§£å†³Microsoft-Hyper-Vä¸å­˜åœ¨">4.1 è§£å†³Microsoft-Hyper-Vä¸å­˜åœ¨</h3><p>é¦–å…ˆåœ¨ç”µè„‘æ–°å»ºä¸€ä¸ªtxtæ–‡ä»¶ï¼ŒæŠŠä»¥ä¸‹å†…å®¹è´´è¿›å»</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">pushd "%~dp0"dir /b %SystemRoot%\servicing\Packages\*Hyper-V*.mum &gt;hyper-v.txtfor /f %%i in ('findstr /i . hyper-v.txt 2^&gt;nul') do dism /online /norestart /add-package:"%SystemRoot%\servicing\Packages\%%i"del hyper-v.txtDism /online /enable-feature /featurename:Microsoft-Hyper-V-All /LimitAccess /ALL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åä¿å­˜ï¼Œæ–‡ä»¶åç¼€åæ”¹æˆ<code>.cmd</code>æ ¼å¼ï¼Œç„¶åè¿è¡Œä»–ã€‚</p><p>è¿è¡Œå®Œæ¯•ï¼Œé‡æ–°åœ¨ç®¡ç†å‘˜æƒé™ä¸‹çš„powershellä¸­è¿è¡Œåˆšåˆšçš„Microsoft-Hyper-VæŒ‡ä»¤å³å¯</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName Microsoft-Hyper-V <span class="token operator">-</span>All<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-2-è§£å†³wslå¯åŠ¨æ—¶å‡ºç°ä¸€å †ï¼Ÿï¼Ÿï¼Ÿçš„é—®é¢˜">4.2 è§£å†³wslå¯åŠ¨æ—¶å‡ºç°ä¸€å †ï¼Ÿï¼Ÿï¼Ÿçš„é—®é¢˜</h3><p>é¦–å…ˆä¸‹è½½Windows Subsystem for Linux Update setup å®˜æ–¹ç‰ˆå°†WSL1å‡çº§åˆ°WSL2ã€‚</p><p>ä¸‹è½½åœ°å€1ï¼š<a href="https://www.xitongzhijia.net/soft/244754.html">https://www.xitongzhijia.net/soft/244754.html</a></p><p>ä¸‹è½½åœ°å€2ï¼š<a href="https://www.aliyundrive.com/s/F297Y6SNpSf">https://www.aliyundrive.com/s/F297Y6SNpSf</a></p><p>ä¸‹è½½å®Œæ¯•æ‰§è¡Œä¸€ä¸‹è¯¥msiç¨‹åºã€‚</p><p>ç„¶åé‡æ–°è·‘ä¸€ä¸‹ä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">bcdedit <span class="token operator">/</span><span class="token function">set</span> hypervisorlaunchtype Auto<span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName Microsoft-Hyper-V <span class="token operator">-</span>All<span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName VirtualMachinePlatform <span class="token comment">#éœ€è¦é‡å¯ç³»ç»Ÿï¼Œè¯·æ³¨æ„æŒ‰yè®©ä»–é‡å¯</span><span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName Microsoft-Windows-Subsystem-Linux<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘åœ¨å®Œæˆåˆ°è¿™ä¸€æ­¥å°±è§£å†³é—®é¢˜äº†ã€‚</p><hr><h2 id="5ã€ç»™wslå®‰è£…å›¾å½¢åŒ–ç•Œé¢">5ã€ç»™wslå®‰è£…å›¾å½¢åŒ–ç•Œé¢</h2><p>å›æ¥æ›´æ–°wslçš„å›¾å½¢ç•Œé¢</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt-get purge xrdpsudo apt-get install -y xrdp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å®‰è£…å®Œæˆåï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªé€‰ä¿®<code>gdm3</code></p><p>å¦‚æœé€‰é”™äº†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªè¯­å¥ä¿®æ”¹ï¼š <code>sudo dpkg-reconfigure gdm3</code></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt install -y xfce4-goodiessudo cp /etc/xrdp/xrdp.ini /etc/xrdp/xrdp.ini.baksudo sed -i 's/3389/3390/g' /etc/xrdp/xrdp.inisudo sed -i 's/max_bpp=32/#max_bpp=32\nmax_bpp=128/g' /etc/xrdp/xrdp.inisudo sed -i 's/xserverbpp=24/#xserverbpp=24\nxserverbpp=128/g' /etc/xrdp/xrdp.iniecho xfce4-session &gt; ~/.xsession<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åç¼–è¾‘/etc/xrdp/srartwm.shæ–‡ä»¶ï¼Œè¿™é‡Œéšä¾¿ç”¨ä»€ä¹ˆéƒ½å¯ä»¥ï¼Œæˆ‘æ˜¯ç›´æ¥ä½¿ç”¨vscodeçš„wslæ’ä»¶è¿›è¡Œä¿®æ”¹ã€‚å¯ä»¥ä½¿ç”¨nanoå¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo nano /etc/xrdp/srartwm.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æœ«å°¾ä¸¤å¥æ³¨é‡Šæ‰ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># test -x /etc/X11/Xsession &amp;&amp; exec /etc/X11/Xsession# exec /bin/sh /etc/X11/Xsession<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¹¶è‡ªè¡Œåœ¨æœ€æœ«å°¾åŠ ä¸Šï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># xfcestartxfce4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åå¯åŠ¨æœåŠ¡ï¼š<code>sudo /etc/init.d/xrdp start</code></p><p>ä½¿ç”¨<kbd>win</kbd>+<kbd>r</kbd>åï¼Œè¾“å…¥mstscå›è½¦</p><p>åœ¨ç•Œé¢è¾“å…¥localhost:3390</p><p>è¾“å…¥è´¦å·å¯†ç ç™»å½•å³å¯ä½¿ç”¨</p><p>ç”¨å®Œè®°å¾—ç”¨sudo /etc/init.d/xrdp stop å…³é—­å“¦</p><p>å¦‚æœæ™®é€šç”¨æˆ·æ— æ³•æ­£å¸¸ç™»å½•ï¼Œæ¯”å¦‚æˆ‘ä¼šå‡ºç° login failed for display 0 çš„æŠ¥é”™ï¼š</p><p><img src="https://s2.loli.net/2022/08/30/BmZPfeEClIVvhb4.jpg" alt=""></p><p>å¯ä»¥ä½¿ç”¨<code>su</code>è¿›å…¥è¶…çº§ç”¨æˆ·ï¼Œç„¶åå¯åŠ¨æœåŠ¡ã€‚ä½¿ç”¨rootè´¦æˆ·åå’Œå¯†ç ç™»å½•è¿œç¨‹å›¾å½¢åŒ–ç•Œé¢ï¼Œå³å¯ä½¿ç”¨ã€‚</p><p>å¦‚æœä»¥ä¸Šå†…å®¹è¿˜ä¸èƒ½è§£å†³åˆ°ä½ çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒ/var/log/xrdp-sesman.logæ—¥å¿—ï¼Œæ ¹æ®é—®é¢˜åœ¨ç½‘ä¸ŠæŸ¥æ‰¾ç›¸å…³è§£å†³æ–¹æ¡ˆ</p>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS äºŒã€åŸºæœ¬å·¥å…·</title>
      <link href="/2022/07/13/ros-2-Basic-command-tools/"/>
      <url>/2022/07/13/ros-2-Basic-command-tools/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS äºŒï¼šåŸºæœ¬çš„å‘½ä»¤è¡Œå·¥å…·</h1><h2 id="ä¸€ã€å¯åŠ¨roså°æµ·é¾Ÿä»¿çœŸç¯å¢ƒ">ä¸€ã€å¯åŠ¨roså°æµ·é¾Ÿä»¿çœŸç¯å¢ƒ</h2><p>æˆ‘ä»¬æ‰“å¼€linuxçš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨<code>roscore</code>å…ˆå¯åŠ¨ROS Master</p><p>æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œä½¿ç”¨<code>rosrun turtlesim turtlesim_node</code>ï¼Œå¯åŠ¨å°æµ·é¾Ÿçš„ç•Œé¢ï¼ˆéœ€è¦åœ¨linuxå›¾å½¢åŒ–ç•Œé¢å¯åŠ¨ï¼Œå‘½ä»¤è¡Œç•Œé¢å¯åŠ¨ä¸äº†ï¼‰</p><p>å†æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œä½¿ç”¨<code>rosrun turtlesim turtle_teleop_key</code>ï¼ˆå¯ä»¥ä½¿ç”¨é”®ç›˜æ§åˆ¶å°æµ·é¾Ÿç§»åŠ¨äº†ï¼‰</p><ul><li>æœ¬ç¯‡åŸºæœ¬æŒ‡ä»¤éƒ½å›´ç»•æµ·é¾Ÿä»¿çœŸå™¨è¿™é¡¹æœåŠ¡ä¸¾ä¾‹è¯´æ˜ï¼Œå…¶ä»–åŠŸèƒ½å¤§åŒå°å¼‚</li></ul><img src="https://s2.loli.net/2022/07/11/G8vxbJjKug367XE.png" alt="turtlesim" style="zoom:60%;"><h2 id="äºŒã€ROSå¸¸ç”¨å‘½ä»¤">äºŒã€ROSå¸¸ç”¨å‘½ä»¤</h2><p><img src="https://s2.loli.net/2022/07/11/hbjFekIxfODqS3E.png" alt=""></p><p><a href="http://www.clearpathrobotics.com/ros-cheat-sheet">é«˜æ¸…é“¾æ¥</a></p><h3 id="2-1-rqt-graph">2.1 rqt_graph</h3><p>ROSé‡Œé¢æœ‰ä¸€ç³»åˆ—ä»¥<code>rqt</code>å¼€å¤´çš„å·¥å…·ï¼Œéƒ½æ˜¯ä¸€äº›åŸºäºqtçš„å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥ç›´è§‚åœ°å±•ç¤ºå„ç§ä¿¡æ¯</p><p><img src="https://s2.loli.net/2022/07/11/LtdWq9euvbYGfAm.png" alt="rqt_graph"></p><p><code>rqt_graph</code>ä½¿ç”¨æ¥æ˜¾ç¤ºç³»ç»Ÿçš„è®¡ç®—å›¾çš„å·¥å…·ã€‚å¯¹è®¡ç®—å›¾ä¸æ˜ç™½çš„å¯ä»¥çœ‹<a href="https://tuoyou-hao.github.io/2022/07/11/ros-1-Core-concepts/">rosè®¡ç®—å›¾ç®€ä»‹</a>ã€‚é€šè¿‡è§‚å¯Ÿè®¡ç®—å›¾å¯ä»¥è§‚å¯Ÿæ•´ä¸ªç³»ç»Ÿçš„å…¨è²Œã€‚</p><p>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢æœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œ<code>turtlesim</code>æ˜¯æˆ‘ä»¬å°ä¹Œé¾Ÿçš„èŠ‚ç‚¹ï¼Œ<code>teleop_turtle</code>æ˜¯é”®ç›˜çš„èŠ‚ç‚¹ã€‚<code>cmd_vel</code>èŠ‚ç‚¹ä¹‹é—´é€šè®¯çš„è¯é¢˜ã€‚</p><h3 id="2-2-rosnode">2.2 rosnode</h3><p>æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰èŠ‚ç‚¹çº¿ç®¡ä¿¡æ¯çš„æŒ‡ä»¤ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosnode is a command-line tool for printing information about ROS Nodes.Commands:        rosnode ping    test connectivity to node        rosnode list    list active nodes        rosnode info    print information about node        rosnode machine list nodes running on a particular machine or list machines        rosnode kill    kill a running node        rosnode cleanup purge registration information of unreachable nodes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>å‘½ä»¤</th><th>è¯¦ç»†è¯´æ˜</th></tr></thead><tbody><tr><td>rosnode ping [èŠ‚ç‚¹å]</td><td>æµ‹è¯•é“¾æ¥æŒ‡å®šèŠ‚ç‚¹</td></tr><tr><td>rosnode list</td><td>æŸ¥çœ‹æ´»åŠ¨çš„èŠ‚ç‚¹åˆ—è¡¨</td></tr><tr><td>rosnode info [èŠ‚ç‚¹å]</td><td>æŸ¥çœ‹æŒ‡å®šèŠ‚ç‚¹çš„ä¿¡æ¯</td></tr><tr><td>rosnode machine [PCåç§°æˆ–IP]</td><td>æŸ¥çœ‹è¯¥PCä¸­è¿è¡Œçš„èŠ‚ç‚¹åˆ—è¡¨</td></tr><tr><td>rosnode kill [èŠ‚ç‚¹å]</td><td>åœæ­¢æŒ‡å®šèŠ‚ç‚¹çš„è¿è¡Œ</td></tr><tr><td>rosnode cleanup</td><td>åˆ é™¤å¤±è¿èŠ‚ç‚¹çš„æ³¨å†Œä¿¡æ¯</td></tr></tbody></table><p>è¿™é‡Œåªå±•ç¤ºä¸ªåˆ«æŒ‡ä»¤</p><h4 id="1ã€rosnode-list">1ã€rosnode list</h4><p>æŸ¥çœ‹è¯é¢˜åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰èŠ‚ç‚¹éƒ½åˆ—å‡ºæ¥</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">/rosout#å¯åŠ¨roscoreå°±ä¼šå¯åŠ¨ï¼Œè·å–rosæ—¥å¿—ä¿¡æ¯/teleop_turtle/turtlesim<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>rosoutæ˜¯åœ¨rqté‡Œé¢ä¸ä¼šæ˜¾ç¤ºçš„å†…å®¹ã€‚åªè¦å¯åŠ¨roscoreå°±ä¼šå¯åŠ¨çš„ä¸€ä¸ªè¯é¢˜ï¼Œä¸»è¦ç”¨äºè·å–rosæ—¥å¿—ä¿¡æ¯ï¼Œæäº¤ç»™ç•Œé¢åšæ˜¾ç¤ºï¼Œæ˜¯rosé»˜è®¤çš„ä¸€ä¸ªè¯é¢˜ã€‚</li></ul><h4 id="2ã€rosnode-info">2ã€rosnode info</h4><p>ä¼šå±•ç¤ºå¯¹åº”èŠ‚ç‚¹çš„å…·ä½“ä¿¡æ¯ï¼Œè¯­æ³•æ˜¯</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosnode info /èŠ‚ç‚¹å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¯”å¦‚æˆ‘å¯åŠ¨<code>rosnode info /turtlesim</code>ï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">--------------------------------------------------------------------------------Node [/turtlesim]Publications: #æ­£åœ¨å‘å¸ƒé‚£äº›è¯é¢˜ * /rosout [rosgraph_msgs/Log] * /turtle1/color_sensor [turtlesim/Color] * /turtle1/pose [turtlesim/Pose]Subscriptions: #åœ¨è®¢é˜…å“ªäº›è¯é¢˜ * /turtle1/cmd_vel [geometry_msgs/Twist]#è¯»å–é”®ç›˜è¾“å…¥ï¼Œç§»åŠ¨å°æµ·é¾ŸServices: #æä¾›çš„æœåŠ¡ï¼Œå¯ä»¥ç”¨æ¥å®Œæˆä¸€äº›é…ç½® * /clear * /kill * /reset * /spawn * /turtle1/set_pen * /turtle1/teleport_absolute * /turtle1/teleport_relative * /turtlesim/get_loggers * /turtlesim/set_logger_level# åº•å±‚é€šä¿¡æœºåˆ¶çš„ç›¸å…³ä¿¡æ¯contacting node http://huanyu-PC:39579/ ...Pid: 3914Connections: * topic: /rosout    * to: /rosout    * direction: outbound (52933 - 127.0.0.1:48044) [26]    * transport: TCPROS * topic: /turtle1/cmd_vel    * to: /teleop_turtle (http://huanyu-PC:38639/)    * direction: inbound (34866 - huanyu-PC:43907) [54]    * transport: TCPROS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-3ã€rostopic">2.3ã€rostopic</h3><p>ä¼šè¾“å‡ºrosè¯é¢˜ç›¸å…³çš„ä¿¡æ¯</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rostopic is a command-line tool for printing information about ROS Topics.Commands:        rostopic bw     display bandwidth used by topic        rostopic delay  display delay of topic from timestamp in header        rostopic echo   print messages to screen        rostopic find   find topics by type        rostopic hz     display publishing rate of topic            rostopic info   print information about active topic        rostopic list   list active topics        rostopic pub    publish data to topic        rostopic type   print topic or field type<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>å‘½ä»¤</th><th>è¯¦ç»†è¯´æ˜</th></tr></thead><tbody><tr><td>rostopic bw [è¯é¢˜åç§°]</td><td>æ˜¾ç¤ºæŒ‡å®šè¯é¢˜çš„æ¶ˆæ¯å¸¦å®½ï¼ˆbandwidthï¼‰</td></tr><tr><td>rostopic delay [è¯é¢˜åç§°]</td><td>æ˜¾ç¤ºheaderä¸­æ—¶é—´æˆ³çš„å»¶è¿Ÿ</td></tr><tr><td>rostopic echo [è¯é¢˜åç§°]</td><td>å®æ—¶æ˜¾ç¤ºæŒ‡å®šè¯é¢˜çš„æ¶ˆæ¯å†…å®¹</td></tr><tr><td>rostopic find [ç±»å‹åç§°]</td><td>æ˜¾ç¤ºä½¿ç”¨æŒ‡å®šç±»å‹çš„æ¶ˆæ¯çš„è¯é¢˜</td></tr><tr><td>rostopic type [è¯é¢˜åç§°]</td><td>æ˜¾ç¤ºæŒ‡å®šè¯é¢˜çš„æ¶ˆæ¯ç±»å‹</td></tr><tr><td>rostopic hz [è¯é¢˜åç§°]</td><td>æ˜¾ç¤ºæŒ‡å®šè¯é¢˜çš„æ¶ˆæ¯æ•°æ®å‘å¸ƒå‘¨æœŸ</td></tr><tr><td>rostopic info [è¯é¢˜åç§°]</td><td>æ˜¾ç¤ºæŒ‡å®šè¯é¢˜çš„ä¿¡æ¯</td></tr><tr><td>rostopic list</td><td>æ˜¾ç¤ºæ´»åŠ¨çš„è¯é¢˜ç›®å½•</td></tr><tr><td>rostopic pub [è¯é¢˜åç§°] [æ¶ˆæ¯ç±»å‹] [å‚æ•°]</td><td>åœ¨å‘½ä»¤è¡Œï¼Œç”¨æŒ‡å®šçš„è¯é¢˜åç§°å‘å¸ƒæ¶ˆæ¯</td></tr><tr><td>rostopic type [è¯é¢˜åç§°]</td><td>æ‰“å°ä¸»é¢˜æˆ–å­—æ®µç±»å‹</td></tr></tbody></table><h4 id="1ã€rostopic-pub-å‘å¸ƒè¯é¢˜æ¶ˆæ¯">1ã€rostopic pub å‘å¸ƒè¯é¢˜æ¶ˆæ¯</h4><p>åœ¨å‘½ä»¤è¡Œé…åˆ<kbd>Tab</kbd>é”®ï¼Œå¯ä»¥è‡ªåŠ¨ç»™ä½ è¡¥å…¨æŒ‡ä»¤</p><p>æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œå‘å¸ƒ<strong>ä¸€æ¬¡</strong>æ¶ˆæ¯ç»™<code>turtlesim</code></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rostopic pub /turtle1/cmd_vel geometry_msgs/Twist "linear:  x: 2.0  y: 3.0  z: 5.0angular:  x: 7.0  y: 9.0  z: 11.0"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®ƒå°±ä¼šè‡ªå·±è·‘<strong>ä¸€æ¬¡</strong>ä¸Šè¿°çš„è¿åŠ¨ï¼ˆå› ä¸ºpubåªå‘å¸ƒäº†ä¸€æ¬¡æ¶ˆæ¯ï¼‰ã€‚linearæ˜¯çº¿é€Ÿåº¦ï¼Œangularæ˜¯è§’é€Ÿåº¦ã€‚</p><p>è¦æƒ³å®ƒå¾ªç¯å‘å¸ƒï¼Œå°±éœ€è¦åŠ ä¸ªé¢‘ç‡å‚æ•°<code>-r</code>ï¼Œåé¢è·Ÿä¸€ä¸ªuintæ•°ï¼Œè¡¨ç¤ºä¸€ç§’å‘å¸ƒå‡ æ¬¡ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rostopic pub -r 10 /turtle1/cmd_vel geometry_msgs/Twist "linear:  x: 2.0  y: 3.0  z: 5.0angular:  x: 7.0  y: 9.0  z: 11.0" #æ¯ç§’è·‘10æ¬¡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-4ã€rosmsg">2.4ã€rosmsg</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosmsg is a command-line tool for displaying information about ROS Message types.Commands:        rosmsg show     Show message description        rosmsg info     Alias for rosmsg show        rosmsg list     List all messages        rosmsg md5      Display message md5sum        rosmsg package  List messages in a package        rosmsg packages List packages that contain messages<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>å‘½ä»¤</th><th>è¯¦ç»†è¯´æ˜</th></tr></thead><tbody><tr><td>rosmsg show [æ¶ˆæ¯åç§°]</td><td>æ˜¾ç¤ºæ¶ˆæ¯çš„æè¿°</td></tr><tr><td>rosmsg info [æ¶ˆæ¯åç§°]</td><td>æ˜¾ç¤ºæ¶ˆæ¯çš„ä¿¡æ¯</td></tr><tr><td>rosmsg list</td><td>åˆ—å‡ºæ‰€æœ‰æ¶ˆæ¯</td></tr><tr><td>rosmsg md5 [æ¶ˆæ¯åç§°]</td><td>æ˜¾ç¤º md5 åŠ å¯†åçš„æ¶ˆæ¯</td></tr><tr><td>rosmsg package [æ¶ˆæ¯åç§°]</td><td>æ˜¾ç¤ºæŸä¸ªåŠŸèƒ½åŒ…ä¸‹çš„æ‰€æœ‰æ¶ˆæ¯</td></tr><tr><td>rosmsg packages</td><td>åˆ—å‡ºåŒ…å«æ¶ˆæ¯çš„åŠŸèƒ½åŒ…</td></tr></tbody></table><p>æ¯”å¦‚æˆ‘æƒ³æ‰“å°<code>turtlesim</code>çš„æ¶ˆæ¯æ•°æ®ç»“æ„ï¼Œå°±æŒ‰ç…§å¦‚ä¸‹æŒ‡ä»¤ï¼š</p><p><code>rosmsg show geometry_msgs/Twist</code></p><p>ä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">geometry_msgs/Vector3 linear  float64 x  float64 y  float64 zgeometry_msgs/Vector3 angular  float64 x  float64 y  float64 z<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-5ã€rosservice">2.5ã€rosservice</h3><p>å‘½ä»¤è¡Œä½œä¸ºrosçš„ â€œå®¢æˆ·ç«¯â€ï¼Œéœ€è¦å‘é€æœåŠ¡è¯·æ±‚ç»™è¿™ä¸ªæµ·é¾Ÿä»¿çœŸå™¨</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Commands:        rosservice args print service arguments        rosservice call call the service with the provided args        rosservice find find services by service type        rosservice info print information about service        rosservice list list active services        rosservice type print service type        rosservice uri  print service ROSRPC uri<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>å‘½ä»¤</th><th>è¯¦ç»†è¯´æ˜</th></tr></thead><tbody><tr><td>rosservice args [æœåŠ¡åç§°]</td><td>æ‰“å°æœåŠ¡å‚æ•°</td></tr><tr><td>rosservice call [æœåŠ¡åç§°]</td><td>ä½¿ç”¨æ‰€æä¾›çš„argsè°ƒç”¨æœåŠ¡</td></tr><tr><td>rosservice find [æœåŠ¡åç§°]</td><td>æŒ‰æœåŠ¡ç±»å‹æŸ¥æ‰¾æœåŠ¡</td></tr><tr><td>rosservice info [æœåŠ¡åç§°]</td><td>æ‰“å°æœåŠ¡ä¿¡æ¯</td></tr><tr><td>rosservice list</td><td>æ˜¾ç¤ºæœåŠ¡åˆ—è¡¨</td></tr><tr><td>rosservice type [æœåŠ¡åç§°]</td><td>æ‰“å°æœåŠ¡ç±»å‹</td></tr><tr><td>rosservice uri [æœåŠ¡åç§°]</td><td>æ‰“å°æœåŠ¡ROSRPC uri</td></tr></tbody></table><h4 id="1ã€rosservice-call-å‘å¸ƒæœåŠ¡è¯·æ±‚">1ã€rosservice call å‘å¸ƒæœåŠ¡è¯·æ±‚</h4><p>æ¯”å¦‚æˆ‘ä½¿ç”¨<code>rosservice list</code>æŸ¥è¯¢<code>turtlesim</code>çš„æœåŠ¡</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">/clear/kill/reset/rosout/get_loggers/rosout/set_logger_level/spawn#æ–°å»ºå°æµ·é¾Ÿ/teleop_turtle/get_loggers/teleop_turtle/set_logger_level/turtle1/set_pen/turtle1/teleport_absolute/turtle1/teleport_relative/turtlesim/get_loggers/turtlesim/set_logger_level<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<kbd>Tab</kbd>é”®è¾…åŠ©è¾“å…¥ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rosservice call /spawn "x: 1.0 y: 1.0theta: 0.0name: 'turtle2'"   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å³å¯æˆåŠŸè°ƒç”¨æœåŠ¡ï¼Œè·å¾—ä¸€åªæ–°çš„æµ·é¾Ÿã€‚å¹¶è¿”å›å€¼<code>name: "turtle2"</code></p><p>æ­¤æ—¶ä½¿ç”¨<code>rostopic list</code>å°±å¯ä»¥çœ‹åˆ°ä»¥ä¸‹çš„è¾“å‡ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">/rosout/rosout_agg/turtle1/cmd_vel/turtle1/color_sensor/turtle1/pose/turtle2/cmd_vel/turtle2/color_sensor/turtle2/pose<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæµ·é¾Ÿçš„topicï¼Œå¹¶ä¸”å¯ä»¥ç”¨æŒ‡ä»¤åˆ†å¼€è°ƒç”¨ä¸åŒæµ·é¾Ÿã€‚</p><h3 id="2-6-rosbag">2.6 rosbag</h3><p>å¯ä»¥è®°å½•è¯é¢˜æ•°æ®å¹¶ä¿å­˜ä¸‹æ¥</p><p>å¦‚æœä¸‹æ¬¡éœ€è¦è°ƒç”¨çš„æ—¶å€™å¯ä»¥ç›´æ¥å¤ç°å‡ºæ¥ä¹‹å‰ä¿å­˜åˆ°æ•´ä¸ªè®°å½•</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Usage: rosbag &lt;subcommand&gt; [options] [args]A bag is a file format in ROS for storing ROS message data. The rosbag command can record, replay and manipulate bags.Available subcommands:   check        Determine whether a bag is playable in the current system, or if it can be migrated.   compress     Compress one or more bag files.   decompress   Decompress one or more bag files.   decrypt      Decrypt one or more bag files.   encrypt      Encrypt one or more bag files.   filter       Filter the contents of the bag.   fix          Repair the messages in a bag file so that it can be played in the current system.   help     info         Summarize the contents of one or more bag files.   play         Play back the contents of one or more bag files in a time-synchronized fashion.   record       Record a bag file with the contents of specified topics.   reindex      Reindexes one or more bag files.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1ã€rosbag-record-è¯é¢˜è®°å½•">1ã€rosbag record è¯é¢˜è®°å½•</h4><p><code>rosbag record -a -O cmd_record</code></p><p>ç³»ç»Ÿä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª<code>cmd_record.bag</code>æ–‡ä»¶</p><ul><li><code>-a</code>æ˜¯æŒ‡æŠŠæ‰€æœ‰çš„è¯é¢˜éƒ½è®°å½•ä¸‹æ¥</li><li><code>-O</code>æ˜¯æŒ‡ä¿å­˜æˆä¸€ä¸ª<code>*.bag</code>æ–‡ä»¶ï¼Œåé¢è¦è·Ÿä¸Šæ–‡ä»¶å</li></ul><p>å½“æˆ‘ä»¬è®°å½•å®Œæ¯•ä¹‹åï¼Œctrl+cç»“æŸå³å¯ã€‚</p><p>å…·ä½“çš„å…¶ä»–å‚æ•°ä»‹ç»å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Usage: rosbag record TOPIC1 [TOPIC2 TOPIC3 ...]Record a bag file with the contents of specified topics.Options:  -h, --help            show this help message and exit  -a, --all             record all topics  -e, --regex           match topics using regular expressions  -p, --publish         publish a msg when the record begin  -x EXCLUDE_REGEX, --exclude=EXCLUDE_REGEX                        exclude topics matching the follow regular expression                        (subtracts from -a or regex)  -q, --quiet           suppress console output  -o PREFIX, --output-prefix=PREFIX                        prepend PREFIX to beginning of bag name (name will                        always end with date stamp)  -O NAME, --output-name=NAME                        record to bag with name NAME.bag  --split               split the bag when maximum size or duration is reached  --max-splits=MAX_SPLITS                        Keep a maximum of N bag files, when reaching the                        maximum erase the oldest one to keep a constant number                        of files.  --size=SIZE           record a bag of maximum size SIZE MB. (Default:                        infinite)  --duration=DURATION   record a bag of maximum duration DURATION in seconds,                        unless 'm', or 'h' is appended.  -b SIZE, --buffsize=SIZE                        use an internal buffer of SIZE MB (Default: 256, 0 =                        infinite)  --chunksize=SIZE      Advanced. Record to chunks of SIZE KB (Default: 768)  -l NUM, --limit=NUM   only record NUM messages on each topic  --node=NODE           record all topics subscribed to by a specific node  -j, --bz2             use BZ2 compression  --lz4                 use LZ4 compression  --tcpnodelay          Use the TCP_NODELAY transport hint when subscribing to                        topics.  --udp                 Use the UDP transport hint when subscribing to topics.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2ã€rosbag-play-è¯é¢˜å¤ç°">2ã€rosbag play è¯é¢˜å¤ç°</h4><p>è®°å½•å®Œæˆåï¼Œç”¨<code>rosbag play</code> è¯­å¥è°ƒç”¨ä¿å­˜å¥½çš„<code>*.bag</code>æ–‡ä»¶ï¼Œå³å¯å¤ç°ä¹‹å‰è®°å½•çš„ä¿¡æ¯ã€‚</p><p><code>rosbag play cmd_record.bag</code></p><p>å°±å¯ä»¥åœ¨æµ·é¾Ÿä»¿çœŸå™¨çœ‹åˆ°ä¹‹å‰è®°å½•çš„æ‰€æœ‰æŒ‡ä»¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ</title>
      <link href="/2022/07/11/ros-1-Core-concepts/"/>
      <url>/2022/07/11/ros-1-Core-concepts/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>ROS ä¸€ï¼šæ ¸å¿ƒæ¦‚å¿µ</h1><p>rosæä¾›äº†ä¸€ç§æ¾è€¦åˆåˆ†å¸ƒå¼é€šä¿¡æ¡†æ¶ã€‚è¿™äº›æ¡†æ¶å¯ä»¥æŠ½è±¡æˆä¸€ä¸ªèŠ‚ç‚¹å›¾ã€‚</p><p>æ¯ä¸€ä¸ªåŠŸèƒ½éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯”å¦‚ä¸€ä¸ªå›¾åƒé‡‡é›†åŠŸèƒ½ä¸ºä¸€ä¸ªèŠ‚ç‚¹ã€å›¾åƒæ£€æµ‹åˆæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ã€slamå¯¼èˆªåŠŸèƒ½ä¹Ÿæ”¾åœ¨ä¸€ä¸ªèŠ‚ç‚¹ã€‚**æ¯ä¸€ä¸ªå…·ä½“çš„åŠŸèƒ½éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚**æˆ‘ä»¬ç”¨ä¸€ä¸ªæ¤­åœ†å½¢ä»£è¡¨ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p>æ¯ä¸ªèŠ‚ç‚¹é€šè¿‡é€šè®¯è¿æ¥ï¼Œäº’ç›¸ä¼ è¾“æ•°æ®ã€‚æˆ‘ä»¬ç”¨ç®­å¤´è¡¨ç¤ºæ¡ä¹¡æ•°æ®çš„æµå‘ã€‚</p><ul><li>ç”±èŠ‚ç‚¹ï¼ˆæ¤­åœ†å½¢ï¼‰å’Œé€šè®¯çš„æ–¹å‘ï¼ˆæ¤­åœ†å½¢ä¸Šçš„ç®­å¤´ï¼‰æ„æˆrosçš„<strong>è®¡ç®—å›¾</strong>ã€‚</li></ul><p><img src="https://s2.loli.net/2022/07/09/XxaCtYVNp2WglAy.png" alt="è®¡ç®—å›¾"></p><p>å¦‚ä¸‹å›¾ï¼Œæ¯ä¸€ä¸ªnodeèŠ‚ç‚¹å°±æ˜¯æœºå™¨äººå®ŒæˆæŸä¸€ä¸ªå…·ä½“åŠŸèƒ½çš„è¿›ç¨‹</p><p><img src="https://s2.loli.net/2022/07/09/kHO5FbGp1zUIr36.png" alt=""></p><p>æ¯ä¸€ä¸ªnodeçš„ç¼–ç¨‹è¯­è¨€å¯ä»¥æ˜¯ä¸ä¸€æ ·çš„ã€‚æ¯”å¦‚å¯ä»¥ä½¿ç”¨pythonï¼Œc++ç­‰ã€‚åªè¦æœ‰ç»Ÿä¸€çš„é€šè®¯æ ‡å‡†å°±å¯ä»¥å®Œæˆæ•´ä¸ªæœºå™¨äººç³»ç»Ÿçš„æ­å»ºã€‚</p><h2 id="1ã€èŠ‚ç‚¹ä¸èŠ‚ç‚¹ç®¡ç†å™¨">1ã€èŠ‚ç‚¹ä¸èŠ‚ç‚¹ç®¡ç†å™¨</h2><ul><li><p>èŠ‚ç‚¹ï¼ˆnodeï¼‰â€”â€”æ‰§è¡Œå•å…ƒ</p><ul><li>æ˜¯æ‰§è¡Œå…·ä½“ä»»åŠ¡çš„<strong>è¿›ç¨‹</strong>ï¼Œæ˜¯ç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li><li>ä¸åŒèŠ‚ç‚¹å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ï¼ˆå¸¸ç”¨pythonæˆ–c++ï¼‰ï¼Œå¯ä»¥åˆ†å¸ƒå¼è¿è¡Œåœ¨ä¸åŒçš„ä¸»æœºã€‚</li><li>èŠ‚ç‚¹åœ¨ç³»ç»Ÿä¸­çš„åç§°å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</li></ul></li><li><p>èŠ‚ç‚¹ç®¡ç†å™¨ï¼ˆROS Masterï¼‰â€”â€”æ§åˆ¶ä¸­å¿ƒ</p><ul><li><p>ä¸ºå„ä¸ªèŠ‚ç‚¹æä¾›å‘½åã€æ³¨å†ŒæœåŠ¡ã€‚</p></li><li><p>è·Ÿè¸ªã€è®°å½•è¯é¢˜æˆ–è€…æœåŠ¡é€šä¿¡ï¼Œè¾…åŠ©èŠ‚ç‚¹ç›¸äº’æŸ¥æ‰¾ï¼Œå»ºç«‹è¿æ¥ï¼Œå¸®åŠ©å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚</p><p>èŠ‚ç‚¹ä¹‹é—´äº’ç›¸ä¸çŸ¥é“å½¼æ­¤ä¹‹é—´çš„å­˜åœ¨ï¼Œéƒ½éœ€è¦ROS Masteræ¥å¸®å¿™å»ºç«‹è¿æ¥ã€‚</p></li><li><p>æä¾›å‚æ•°æœåŠ¡å™¨ï¼ŒèŠ‚ç‚¹ä½¿ç”¨æ­¤æœåŠ¡å™¨æ¥å­˜å‚¨ã€æ£€ç´¢è¿è¡Œæ—¶çš„å‚æ•°ã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºå…¨å±€çš„å¯¹è±¡å­—å…¸ï¼Œä¼šè®°å½•ä¸€äº›å…¨å±€å˜é‡ï¼Œç»™å„ä¸ªèŠ‚ç‚¹æä¾›æœåŠ¡ï¼‰</p></li></ul></li></ul><h2 id="2ã€è¯é¢˜é€šä¿¡">2ã€è¯é¢˜é€šä¿¡</h2><p>ä»¥ä¸‹æ˜¯rosé€šä¿¡çš„ä¸¤ç§æ–¹å¼ï¼š</p><h3 id="2-1-è¯é¢˜ï¼ˆtopicï¼‰â€”â€”å¼‚æ­¥é€šä¿¡æœºåˆ¶">2.1 è¯é¢˜ï¼ˆtopicï¼‰â€”â€”å¼‚æ­¥é€šä¿¡æœºåˆ¶</h3><ul><li>èŠ‚ç‚¹ä¹‹é—´ç”¨æ¥ä¼ è¾“æ•°æ®çš„<strong>é‡è¦æ€»çº¿</strong>ï¼Œæ˜¯ä¼ è¾“çš„<strong>ç®¡é“</strong>ã€‚</li><li>ä½¿ç”¨<strong>å‘å¸ƒ/è®¢é˜…</strong>æ¨¡å‹ï¼Œæ•°æ®ç”±å‘å¸ƒè€…ä¼ è¾“åˆ°è®¢é˜…è€…ï¼ŒåŒä¸€ä¸ªè¯é¢˜çš„è®¢é˜…è€…æˆ–å‘å¸ƒè€…å¯ä»¥æ˜¯ä¸å”¯ä¸€çš„ã€‚</li><li>å¦‚ä¸‹å›¾ï¼Œå‘å¸ƒè€…ï¼ˆpublisherï¼‰ç»™è®¢é˜…è€…ï¼ˆsubscriberï¼‰çš„é€šè®¯æ˜¯<strong>å•å‘çš„æ•°æ®ä¼ è¾“</strong>ã€‚è€Œé€šè®¯çš„é€šé“å°±æ˜¯<strong>è¯é¢˜ï¼ˆTopicï¼‰</strong>ã€‚</li></ul><p><img src="https://s2.loli.net/2022/07/09/kxgYaKVDbf85IhG.png" alt="è¯é¢˜æ¨¡å‹ï¼ˆå‘å¸ƒ/è®¢é˜…ï¼‰"></p><ul><li>æ¶ˆæ¯ï¼ˆmessageï¼‰â€”â€”è¯é¢˜é‡Œå¤´çš„ â€œæ•°æ®â€<ul><li>æè¿°ä¼ è¾“æ•°æ®çš„è¯¦ç»†å®šä¹‰å°±æ˜¯æ¶ˆæ¯ã€‚</li><li>å…·æœ‰ä¸€å®šçš„ç±»å‹å’Œæ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ROSæä¾›çš„æ ‡å‡†ç±»å‹å’Œç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹</li><li>ä½¿ç”¨ç¼–ç¨‹è¯­è¨€æ— å…³çš„<code>.msg</code>æ–‡ä»¶æ¥å®šä¹‰æ¶ˆæ¯ï¼Œç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šç”Ÿæˆå¯¹åº”çš„ä»£ç æ–‡ä»¶ã€‚</li></ul></li><li>åŒºåˆ†ï¼š<ul><li>è¯é¢˜ï¼šä¼ è¾“æ•°æ®çš„ç®¡é“ã€‚</li><li>æ¶ˆæ¯ï¼šä¼ è¾“æ•°æ®çš„è¯¦ç»†å®šä¹‰ã€‚</li></ul></li></ul><blockquote><p>eg:</p><p><img src="https://s2.loli.net/2022/07/09/SpJtixCVerRqy5P.png" alt=""></p><p>åœ¨ä¸Šå›¾ä¸­ï¼Œæ‘„åƒå¤´æŠŠè·å–åˆ°çš„æ•°æ®ç»™<code>CameraNode</code>ï¼Œ<code>CameraNode</code>æŠŠè¿™äº›ç”»é¢å‘å¸ƒå‡ºå»ã€‚</p><p><code>Image Processing Node</code>è¦å¤„ç†å›¾åƒæ•°æ®ï¼Œä½¿ç”¨éœ€è¦è®¢é˜…<code>CameraNode</code>å‘å¸ƒçš„æ•°æ®ã€‚</p><p>åœ¨ç¬”è®°æœ¬ç”µè„‘ï¼ˆLaptopï¼‰åŒºï¼Œç¬”è®°æœ¬ç”µè„‘æƒ³è¦æ˜¾ç¤ºå›¾åƒï¼Œ<code>Image Display Node</code>ä¹Ÿå°±éœ€è¦è®¢é˜…è¿™ä¸ªå›¾åƒæ•°æ®</p><p>æ‰€ä»¥åœ¨ä¸Šå›¾æ¨¡å‹ä¸­ï¼š</p><ul><li>æœ‰ä¸€ä¸ªå›¾åƒæ•°æ®Publisherï¼Œä¸¤ä¸ªå›¾åƒæ•°æ®Subscriberï¼Œä¸€ä¸ªTopicï¼ˆImage data Messageï¼‰ï¼Œä¼ è¾“å›¾åƒæ•°æ®æ¶ˆæ¯ã€‚</li></ul></blockquote><h3 id="2-2-æœåŠ¡ï¼ˆserviceï¼‰â€”â€”åŒæ­¥é€šä¿¡æœºåˆ¶">2.2 æœåŠ¡ï¼ˆserviceï¼‰â€”â€”åŒæ­¥é€šä¿¡æœºåˆ¶</h3><ul><li><p>ä½¿ç”¨å®¢æˆ·ç«¯/æœåŠ¡å™¨ï¼ˆC/Sï¼‰æ¨¡å‹ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚æ•°æ®ï¼ŒæœåŠ¡å™¨å®Œæˆå¤„ç†åï¼Œè¿”å›åº”ç­”æ•°æ®ã€‚</p><p>æ˜¯åŒå‘çš„æ•°æ®ä¼ è¾“</p></li><li><p>ä½¿ç”¨ç¼–ç¨‹è¯­è¨€æ— å…³çš„<code>.srv</code>æ–‡ä»¶å®šä¹‰è¯·æ±‚å’Œåº”ç­”æ•°æ®ç»“æ„ï¼Œç¼–è¯‘è¿‡ç¨‹ä¸­ç”Ÿæˆå¯¹åº”çš„ä»£ç æ–‡ä»¶ã€‚</p></li></ul><img src="https://s2.loli.net/2022/07/09/1p7cytkFEh4RMAw.png" alt="ros-1-4.png" style="zoom:50%;"><h3 id="2-3-è¯é¢˜ä¸æœåŠ¡çš„åŒºåˆ«">2.3 è¯é¢˜ä¸æœåŠ¡çš„åŒºåˆ«</h3><table><thead><tr><th></th><th style="text-align:center">è¯é¢˜</th><th style="text-align:center">æœåŠ¡</th></tr></thead><tbody><tr><td>åŒæ­¥æ€§</td><td style="text-align:center">å¼‚æ­¥</td><td style="text-align:center">åŒæ­¥</td></tr><tr><td>é€šä¿¡æ¨¡å‹</td><td style="text-align:center">å‘å¸ƒ/è®¢é˜…</td><td style="text-align:center">å®¢æˆ·ç«¯/æœåŠ¡å™¨</td></tr><tr><td>åº•å±‚åè®®</td><td style="text-align:center">ROS TCP/ROS UDP</td><td style="text-align:center">ROS TCP/ROS UDP</td></tr><tr><td>åé¦ˆæœºåˆ¶</td><td style="text-align:center">æ— </td><td style="text-align:center">æœ‰</td></tr><tr><td>ç¼“å†²åŒº</td><td style="text-align:center">æœ‰</td><td style="text-align:center">æ— </td></tr><tr><td>å®æ—¶æ€§</td><td style="text-align:center">å¼±</td><td style="text-align:center">å¼º</td></tr><tr><td>èŠ‚ç‚¹å…³ç³»</td><td style="text-align:center">å¤šå¯¹å¤š</td><td style="text-align:center">ä¸€å¯¹å¤šï¼ˆä¸€ä¸ªserverï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td style="text-align:center">æ•°æ®ä¼ è¾“</td><td style="text-align:center">é€»è¾‘å¤„ç†</td></tr></tbody></table><h2 id="3ã€å‚æ•°ï¼ˆParameterï¼‰å…¨å±€å…±äº«å­—å…¸">3ã€å‚æ•°ï¼ˆParameterï¼‰å…¨å±€å…±äº«å­—å…¸</h2><ul><li>ROS Masteré‡Œé¢çš„å‚æ•°æœåŠ¡å™¨ã€‚</li><li>å¯é€šè¿‡ç½‘ç»œè®¿é—®çš„å…±äº«ã€å¤šå˜é‡<strong>å­—å…¸</strong>ï¼Œæ•°æ®ç±»å‹ä¸å”¯ä¸€ã€‚</li><li>èŠ‚ç‚¹ä½¿ç”¨æ¬¡æœåŠ¡å™¨æ¥å­˜å‚¨&amp;æ£€ç´¢è¿è¡Œæ—¶çš„å‚æ•°ã€‚</li><li>é€‚åˆå­˜å‚¨é™æ€ã€éäºŒè¿›åˆ¶çš„é…ç½®å‚æ•°ï¼Œä¸é€‚åˆå­˜å‚¨åŠ¨æ€é…ç½®çš„æ•°æ®ã€‚</li></ul><blockquote><p>eg:</p><img src="https://s2.loli.net/2022/07/11/9WpPugflbYcUK51.png" style="zoom:67%;"><p>å¦‚ä¸Šå›¾ï¼ŒTalkerå­˜å…¥<code>setParam</code>äº†ä¸€ä¸ªå‚æ•°<code>("foo",1)</code>åˆ°ROS Master</p><p>Listeneréœ€è¦è°ƒç”¨<code>foo</code>åº•ä¸‹çš„å€¼ï¼Œå°±å‘å‡ºä¸€ä¸ªè¯·æ±‚<code>getParam</code></p><p>ç„¶åListenerå°±å¯ä»¥è·å¾—ROS Masterè¿”å›çš„<code>("foo",1)</code></p><ul><li>è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œå¦‚æœListeneråªgetä¸€æ¬¡å‚æ•°ï¼Œå¦‚æœå‚æ•°æœ‰å˜åŒ–çš„è¯ï¼Œå°±æ²¡åŠæ³•åŠæ—¶æ›´æ–°äº†ï¼Œå°±ä¸é€‚åˆå­˜å‚¨åŠ¨æ€å˜åŒ–çš„æ•°æ®ã€‚</li><li>å¦‚æœéœ€è¦å®æ—¶æ›´æ–°å‚æ•°ï¼Œå°±éœ€è¦ç”¨åˆ°ROSçš„é«˜çº§åŠŸèƒ½ â€œåŠ¨æ€å‚æ•°é…ç½®â€çš„åŠŸèƒ½ã€‚</li></ul></blockquote><h2 id="4ã€æ–‡ä»¶ç³»ç»Ÿ">4ã€æ–‡ä»¶ç³»ç»Ÿ</h2><ul><li><p>åŠŸèƒ½åŒ…ï¼ˆpackageï¼‰</p><p>ROSè½¯ä»¶ä¸­çš„åŸºæœ¬å•å…ƒï¼ŒåŒ…å«äº†èŠ‚ç‚¹æºç ã€é…ç½®æ–‡ä»¶ã€æ•°æ®å®šä¹‰â€¦â€¦</p><p>ç”¨äºå®Œæˆä¸€äº›å…·ä½“çš„åŠŸèƒ½ï¼Œäººè„¸è¯†åˆ«ã€å›¾åƒè¯†åˆ«ç­‰ç­‰</p></li><li><p>åŠŸèƒ½åŒ…æ¸…å•ï¼ˆpackage manifestï¼‰</p><p>è®°å½•äº†åŠŸèƒ½åŒ…çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…å«äº†ä½œè€…ä¿¡æ¯ã€è®¸å¯ä¿¡æ¯ã€ä¾èµ–é€‰é¡¹ã€å˜å¼‚æ ‡å¿—â€¦â€¦</p></li><li><p>å…ƒåŠŸèƒ½åŒ…ï¼ˆmeta packageï¼‰</p><p>ç»„ç»‡å¤šä¸ªç”¨äºåŒä¸€ä¸ªç›®çš„çš„åŠŸèƒ½åŒ…</p><p>æ¯”å¦‚å¾ˆå¤šä¸ªå›¾åƒè¯†åˆ«çš„åŠŸèƒ½åŒ…ç»„ç»‡æˆä¸€ä¸ªå¤§å·¥ç¨‹ï¼Œè¿™ä¸ªå¤§å·¥ç¨‹å°±æ˜¯å…ƒåŠŸèƒ½åŒ…ã€‚</p></li></ul><pre class="mermaid">graph TBA(æ–‡ä»¶ç³»ç»Ÿ) --&gt;B[å…ƒåŠŸèƒ½åŒ…]B --&gt;C[åŠŸèƒ½åŒ…]C --&gt;D1[åŠŸèƒ½åŒ…æ¸…å•]C --&gt;D2[æ¶ˆæ¯ç±»å‹]C --&gt;D3[æœåŠ¡ç±»å‹]C --&gt;D4[ä»£ç ]C --&gt;D5[å…¶ä»–]</pre><p><img src="https://s2.loli.net/2022/07/11/ZRt6jPecizJA37I.png" alt=""></p><p>å‚è€ƒè‡ª: å¤æœˆå±…rosæ•™ç¨‹</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç»„æˆæ¦‚è¿°ï¼ˆ2.2å­˜å‚¨ç³»ç»Ÿï¼‰</title>
      <link href="/2022/06/03/computer_organization3-1/"/>
      <url>/2022/06/03/computer_organization3-1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>è®¡ç®—æœºç»„æˆåŸç†â€”â€”2.2 å­˜å‚¨ç³»ç»Ÿ</h1><h2 id="ä¸€ã€ä¸»å­˜å­˜å‚¨å™¨ä¸CPUçš„è¿æ¥">ä¸€ã€ä¸»å­˜å­˜å‚¨å™¨ä¸CPUçš„è¿æ¥</h2><p><img src="https://s2.loli.net/2022/05/18/R41VbvF5dPNT2gX.jpg" alt="MDRå’ŒMARéƒ½é›†æˆåœ¨CPU"></p><p>å•ä¸ªå­˜å‚¨èŠ¯ç‰‡çš„å®¹é‡å¯èƒ½ä¸æ˜¯å¾ˆå¤§ï¼Œå¾€å¾€éœ€è¦é€šè¿‡å­˜å‚¨å™¨èŠ¯ç‰‡æ‹“å±•æŠ€æœ¯ï¼ŒæŠŠå¤šä¸ªèŠ¯ç‰‡é›†æˆåœ¨ä¸€ä¸ªå†…å­˜æ¡ä¸Šï¼Œç„¶åç”±å¤šä¸ªå†…å­˜æ¡+ä¸»æ¿ä¸Šçš„ROMèŠ¯ç‰‡ï¼Œç»„æˆè®¡ç®—æœºæ‰€éœ€è¦çš„ä¸»å­˜ç©ºé—´ã€‚</p><p>å†…å­˜æ¡æ’æ§½å°±æ˜¯å­˜å‚¨å™¨æ€»çº¿ã€‚å†…å­˜æ¡é€šè¿‡æ€»çº¿ä¸ä¸»æ¿ç›¸è¿ï¼Œç„¶åé“¾æ¥åˆ°CPUã€‚</p><p><img src="https://s2.loli.net/2022/05/14/Ke6lCakUjm5MNB1.png" alt="8x8ä½å­˜å‚¨èŠ¯ç‰‡åŸç†å›¾"></p><p>ç”±äºå•ä¸ªå­˜å‚¨èŠ¯ç‰‡çš„å®¹é‡æ˜¯æœ‰é™çš„ï¼Œåœ¨<strong>å­—æ•°</strong>æˆ–è€…<strong>å­—é•¿</strong>ä¸Šä¸å®é™…çš„å­˜å‚¨å™¨è¦æ±‚éƒ½æœ‰å·®è·ã€‚å› æ­¤ï¼Œéœ€è¦<strong>åœ¨å­—å’Œä½ä¸¤ä¸ªæ–¹é¢è¿›è¡Œæ‰©å……</strong>ã€‚é€šå¸¸é‡‡ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li>ä½æ‹“å±•æ³•ï¼šä½¿æ•°æ®æ€»çº¿å®½åº¦=å­˜å‚¨èŠ¯ç‰‡å®½åº¦ï¼ˆæ•°æ®æ€»çº¿ï¼‰</li><li>å­—æ‹“å±•æ³•ï¼šæ‹“å±•ä¸»å­˜å­—æ•°ï¼ˆåœ°å€æ€»çº¿ï¼‰</li><li>å­—ä½åŒæ—¶æ‹“å±•</li></ul><h3 id="1ã€ä½æ‰©å±•">1ã€ä½æ‰©å±•</h3><p>å½“ CPUçš„æ•°æ®çº¿æ•° ä¸ å­˜å‚¨èŠ¯ç‰‡çš„æ•°æ®ä½æ•° ä¸ç›¸ç­‰æ—¶ï¼Œå°±è¿›è¡Œä½æ‰©å±•ã€‚ï¼ˆé’ˆå¯¹æ•°æ®æ€»çº¿ï¼‰</p><p><strong>ç”¨å¤šä¸ªå­˜å‚¨èŠ¯ç‰‡æ‰©å……å­˜å‚¨å­—é•¿</strong></p><p>ä¸¾ä¸ªæ —å­ï¼š</p><blockquote><ul><li><p>æœ‰ä¸€ä¸ª<code>8k*1ä½</code>çš„èŠ¯ç‰‡ï¼Œ8kå¯¹åº”äº†2çš„13æ¬¡æ–¹</p><p>æ‰€ä»¥éœ€è¦13æ ¹åœ°å€çº¿è¡¨ç¤ºåœ°å€ï¼Œå°†å…¶å’ŒCPUè¿æ¥èµ·æ¥</p></li><li><p>å‡è®¾ç°åœ¨æ•°æ®æ€»çº¿æœ‰8ä½ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥é“¾æ¥å…«ä¸ªè¿™æ ·çš„èŠ¯ç‰‡</p><p>æ¯ä¼ è¿›æ¥ä¸€ä¸ªå…«ä½çš„æ•°æ®ï¼Œå°±ç”±è¿™å…«å—èŠ¯ç‰‡ï¼Œåˆ†åˆ«å­˜å‚¨è¿™å…«ä½æ•°æ®çš„å…¶ä¸­ä¸€ä½ã€‚</p></li><li><p>ç”±ä¸Šå¯çŸ¥ï¼Œ<strong>åœ°å€æ€»çº¿ã€è¯»å†™æ§åˆ¶ä¿¡å·çº¿ï¼ˆWEï¼‰ã€ç‰‡é€‰ä¿¡å·ï¼ˆCSï¼‰ï¼Œç”±è¿™å…«ä¸ªèŠ¯ç‰‡å…±åŒä½¿ç”¨ã€‚</strong></p></li></ul></blockquote><p><img src="https://s2.loli.net/2022/05/26/L3IHi4lEk7wpjcg.jpg" alt="ä½æ‰©å±•è¿çº¿å›¾"></p><h3 id="2ã€å­—æ‰©å±•æ³•">2ã€å­—æ‰©å±•æ³•</h3><p>å½“<strong>CPUçš„åœ°å€çº¿æ•°</strong>ä¸<strong>å­˜å‚¨èŠ¯ç‰‡çš„åœ°å€ä½æ•°</strong>ä¸ç›¸ç­‰æ—¶ï¼Œå°±è¿›è¡Œå­—æ‰©å±•ã€‚ï¼ˆé’ˆå¯¹æ•°æ®æ€»çº¿ï¼‰</p><p>è¯¥æ–¹æ³•æŠŠå¤šå‡ºæ¥çš„åœ°å€å¼•è„šæ¥åˆ°è¯‘ç å™¨ä¸Šï¼Œç”¨è¯‘ç å™¨åŒºåˆ†ä¸åŒçš„ç‰‡é€‰ä¿¡å·ï¼Œç”±è¿™äº›ç‰‡é€‰ä¿¡å·æ¥å¯åŠ¨ä¸åŒçš„å­˜å‚¨èŠ¯ç‰‡ã€‚</p><p><strong>åœ°å€æ€»çº¿ï¼ˆéƒ¨åˆ†ï¼‰ã€æ•°æ®æ€»çº¿ã€è¯»å†™æ§åˆ¶ä¿¡å·çº¿ï¼ˆWEï¼‰ç”±è¿™äº›èŠ¯ç‰‡å…±åŒä½¿ç”¨ã€‚ç‰‡é€‰ä¿¡å·ï¼ˆCSï¼‰æ¥ä¸Šè¯‘ç å™¨ä½¿ç”¨</strong></p><p><img src="https://s2.loli.net/2022/05/26/Gx1MlHn3FYIibK6.jpg" alt="å­—æ‹“å±•è¿æ¥åŸç†å›¾"></p><h3 id="3ã€å­—ä½åŒæ—¶æ‰©å±•">3ã€å­—ä½åŒæ—¶æ‰©å±•</h3><p>æœ‰äº†å‰é¢çš„ç†è§£ï¼Œæˆ‘ä»¬ç›´æ¥ä¸ŠåŸç†å›¾</p><p><img src="https://s2.loli.net/2022/05/26/yMlBZVcFHEQIh3N.jpg" alt="å­—ä½åŒæ—¶æ‰©å±•åŸç†å›¾"></p><p>16kçš„å­˜å‚¨ï¼Œå¯¹åº”2çš„14æ¬¡æ–¹ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨14æ¡çº¿æ¥è¡¨ç¤ºã€‚</p><p>é‡‡ç”¨å­—ä½åŒæ—¶æ‰©å±•æ—¶ï¼Œå„ä¸ªèŠ¯ç‰‡è¿æ¥åœ°å€çº¿çš„æ–¹å¼ç›¸åŒ</p><p>ä½†è¿æ¥æ•°æ®çº¿çš„æ–¹å¼ä¸åŒã€‚ä¸”ç‰‡é€‰ä¿¡å·éœ€è¦è¿æ¥è¯‘ç å™¨ã€‚</p><h2 id="äºŒã€å­˜å‚¨èŠ¯ç‰‡çš„åœ°å€åˆ†é…å’Œç‰‡é€‰">äºŒã€å­˜å‚¨èŠ¯ç‰‡çš„åœ°å€åˆ†é…å’Œç‰‡é€‰</h2><p>CPUé€‰æ‹©å­˜å‚¨èŠ¯ç‰‡çš„æ“ä½œå«åš<strong>ç‰‡é€‰</strong>ã€‚</p><p>é€‰ä¸­åï¼Œä¸ºé€‰ä¸­çš„èŠ¯ç‰‡æŒ‰ç…§åœ°å€ç ï¼Œé€‰æ‹©ç›¸åº”çš„å­˜å‚¨å•å…ƒï¼Œç”¨æ¥å­˜å‚¨æ•°æ®ã€‚è¿™ä¸ªæ“ä½œå«åš<strong>å­—é€‰</strong>ã€‚</p><p>ç‰‡å†…çš„å­—é€‰ï¼Œé€šå¸¸æ˜¯ç”±CPUé€å‡ºçš„Næ¡ä½ä½åœ°å€çº¿å®Œæˆçš„ã€‚</p><p>åœ°å€çº¿ç›´æ¥è¿åˆ°æ‰€æœ‰å­˜å‚¨èŠ¯ç‰‡çš„åœ°å€è¾“å…¥ç«¯</p><p>Nç”±ç‰‡å†…å­˜å‚¨å®¹é‡$ 2^{N} $å†³å®šã€‚</p><p>ç‰‡é€‰ä¿¡å·çš„äº§ç”Ÿåˆ†ä¸ºçº¿é€‰æ³•ï¼Œè¯‘ç ç‰‡é€‰æ³•</p><h3 id="1ã€çº¿é€‰æ³•">1ã€çº¿é€‰æ³•</h3><p>ä½¿ç”¨ä¸“é—¨çš„åœ°å€çº¿ç›´æ¥é“¾æ¥ï¼ˆæˆ–è€…åŠ ä¸ªåç›¸å™¨ï¼‰ï¼Œæ¥åˆ°å­˜å‚¨èŠ¯ç‰‡ä¸Šã€‚</p><ul><li>ç”±äºæ˜¯ç›´æ¥é“¾æ¥åˆ°å­˜å‚¨èŠ¯ç‰‡ï¼Œå½“ä¸“ç”¨çš„åœ°å€çº¿ï¼Œ**æœ‰ä¸¤ä¸ªåŠä»¥ä¸Šçš„ç‰‡é€‰ä¿¡å·å‘å‡ºæ—¶ï¼Œä¼šé€ æˆè®¿é—®å†²çªã€‚</li></ul><blockquote><ul><li>ä¸¾ä¸ªæ —å­ï¼Œæ¯”å¦‚åªæœ‰ä¸¤ä¸ªå­˜å‚¨èŠ¯ç‰‡ï¼Œçº¿é€‰æ³•å°±åªèƒ½åœ¨ä¸“é—¨çš„åœ°å€çº¿ï¼Œæ¯”å¦‚æœ€é«˜ä½ä¸¤ä½ï¼Œé€‰æ‹©æ§åˆ¶èŠ¯ç‰‡.</li><li>å¦‚æœæ­¤æ—¶æœ€é«˜ä½åŒæ—¶ä¸º00ï¼Œæˆ–è€…11ï¼Œå°±ä¼šå¯¼è‡´è®¿é—®æ•°æ®å‡ºç°é—®é¢˜</li><li>è€Œä¸”ä¼šå¯¼è‡´å­˜å‚¨åœ°å€ä¸è¿ç»­ã€‚00xxxxxxå’Œ11xxxxxxçš„åœ°å€å°±æ˜¯ä¸å¯ç”¨çš„ï¼Œå¯ä»¥çœ‹å‡ºæœ‰ä¸€å®šçš„å±€é™æ€§</li></ul></blockquote><h3 id="2ã€è¯‘ç ç‰‡é€‰æ³•">2ã€è¯‘ç ç‰‡é€‰æ³•</h3><p>å°±æ˜¯ä½¿ç”¨è¯‘ç å™¨ï¼Œç”¨æ¥äº§ç”Ÿç‰‡é€‰ä¿¡å·ã€‚å¯ä»¥é€šä¿—çš„ç†è§£ä¸ºï¼ŒæŠŠ8421ç è½¬æˆå•ç‹¬çš„ä¸€ä¸ªä¸ªç‰‡é€‰è¾“å‡º</p><p><img src="https://s2.loli.net/2022/05/28/Lv7K3xFkTDAd9P5.png" alt="è¯‘ç å™¨"></p><p>è™½ç„¶åœ¨è¿æ¥è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ¥å…¥è¯‘ç å™¨èŠ¯ç‰‡ï¼Œä½†æ˜¯næ¡çº¿å¯ä»¥äº§ç”Ÿ$ 2^{n}  $ä¸ªç‰‡é€‰ä¿¡å·ï¼ŒäºŒåƒåœ°å€ç©ºé—´è¿ç»­ï¼Œå®ç”¨æ€§æ›´é«˜</p><h2 id="ä¸‰ã€å¤–å­˜å‚¨å™¨">ä¸‰ã€å¤–å­˜å‚¨å™¨</h2><p>ç£è¡¨é¢å­˜å‚¨å™¨ï¼Œæ˜¯æŒ‡æŠŠæŸäº›ç£æ€§ææ–™è–„è–„åœ°æ¶‚åœ¨é“æˆ–è€…å¡‘æ–™è¡¨é¢ä¸Šï¼Œä½œä¸ºè®°å¿†è½½ä½“ï¼Œä¸€æ¬¡å­˜å‚¨ä¿¡æ¯ã€‚ç£ç›˜ã€ç£å¸¦ã€ç£é¼“å­˜å‚¨å™¨éƒ½æ˜¯ç£è¡¨é¢å­˜å‚¨å™¨</p><h3 id="1ã€ç£ç›˜å­˜å‚¨å™¨">1ã€ç£ç›˜å­˜å‚¨å™¨</h3><p>ç£ç›˜å­˜å‚¨å™¨çš„ä¼˜ç‚¹ï¼š</p><ul><li><p>å­˜å‚¨å®¹é‡å¤§ï¼Œä½ä»·æ ¼ä½ã€‚ç›¸åŒä»·ä½ä¸‹ï¼Œæœºæ¢°ç¡¬ç›˜çš„å­˜å‚¨å®¹é‡ä¼šæ¯”å›ºæ€ç¡¬ç›˜çš„å¤§</p></li><li><p>å­˜å‚¨ä»‹è´¨å¯ä»¥é‡å¤ä½¿ç”¨</p></li><li><p>è®°å½•ä¿¡æ¯å¯ä»¥é•¿æœŸä¿å­˜è€Œä¸ä¸¢å¤±ï¼Œå¯ä»¥è„±æœºå­˜æ¡£</p></li><li><p>éç ´åæ€§è¯»å‡ºï¼Œè¯»å‡ºæ—¶ä¸éœ€è¦å†ç”Ÿ</p></li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å­˜å–é€Ÿåº¦æ…¢</li><li>æœºæ¢°ç»“æ„æ¯”è¾ƒå¤æ‚</li><li>å¯¹å·¥ä½œç¯å¢ƒè¦æ±‚æ¯”è¾ƒé«˜ï¼ˆå®¹æ˜“å—åˆ°å¼ºç£åœºçš„å¹²æ‰°ï¼‰</li></ul><h4 id="1-ç£ç›˜è®¾å¤‡çš„ç»„æˆ">1. ç£ç›˜è®¾å¤‡çš„ç»„æˆ</h4><p><img src="https://s2.loli.net/2022/05/28/G3pCskQSnj6VUPq.png" alt="ç£ç›˜å­˜å‚¨å™¨åŸç†å›¾"></p><p>ç”±ç£ç›˜é©±åŠ¨å™¨ï¼Œç£ç›˜æ§åˆ¶å™¨å’Œç›˜ç‰‡ç»„æˆ</p><ul><li>ç£ç›˜é©±åŠ¨å™¨çš„æ ¸å¿ƒéƒ¨ä»¶æ˜¯ç£å¤´å’Œç›˜ç‰‡ã€‚æ¸©å½»æ–¯ç‰¹ç›˜æ˜¯ä¸€ç§å¯ç§»åŠ¨ç£å¤´ï¼Œå›ºå®šç›˜ç‰‡çš„å­˜å‚¨å™¨</li><li>ç£ç›˜æ§åˆ¶å™¨ï¼Œç¡¬ç›˜å’Œä¸»æœºçš„æ¥å£ï¼Œå¸¸è§çš„æœ‰<strong>IDEã€SCSIã€SATA</strong></li></ul><p><img src="https://s2.loli.net/2022/05/28/9gjawFxAcfXCMYo.png" alt="SCSIå­˜å‚¨æµç¨‹"></p><ul><li><p>å­˜å‚¨åŒº</p><ul><li>ä¸€å—ç¡¬ç›˜æœ‰å¾ˆå¤šä¸ªç›˜ç‰‡ï¼Œä¹Ÿå°±æ˜¯è®°å½•é¢ï¼Œæ¯ä¸ªè®°å½•é¢åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªç£é“ï¼Œæ¯æ¡ç£é“åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ‰‡åŒºï¼ˆä¹Ÿç§°ä¸ºå—ï¼‰ã€‚æ‰‡åŒºæ˜¯ç£ç›˜è¯»å†™çš„æœ€å°å•ä½ã€‚<strong>ç£ç›˜æŒ‰ç…§å—æ¥å­˜å–</strong>ã€‚</li></ul><blockquote><ul><li><p><strong>ç£å¤´æ•°-Heads</strong>ï¼šä¹Ÿå°±æ˜¯è®°å½•é¢æ•°ï¼Œè¡¨ç¤ºç¡¬ç›˜ä¸€å…±æœ‰å¤šå°‘ä¸ªç£å¤´ã€‚ç£å¤´ç”¨æ¥è¯»å–ã€å†™å…¥ç›˜ç‰‡çš„ä¿¡æ¯ï¼Œä¸€ä¸ªè®°å½•é¢å¯¹åº”ä¸€ä¸ªç£å¤´</p></li><li><p><strong>æŸ±é¢æ•°-Cylinder</strong>ï¼šè¡¨ç¤ºç¡¬ç›˜çš„æ¯ä¸ªç›˜ç‰‡ä¸Šæœ‰å¤šå°‘ä¸ªç£é“ã€‚è¿™ä¸ªåè¯å¯ä»¥ç†è§£ä¸ºï¼Œæœ‰ä¸€å ç›˜ç‰‡ï¼Œè¿™äº›ç›˜ç‰‡ä¸Šï¼Œç›¸åŒä½ç½®ï¼ˆç¼–å·ï¼‰çš„ç£é“ä»¬æ„æˆä¸€ä¸ªåœ†æŸ±çš„é¢</p><p>è¯´æŸ±é¢å·çš„æ—¶å€™ï¼Œå°±æ˜¯æŒ‡æ˜æŸä¸€æ¡ç£é“</p></li><li><p><strong>æ‰‡åŒºæ•°-Sectors</strong>ï¼šè¡¨ç¤ºæ¯ä¸ªç£é“æœ‰å¤šå°‘ä¸ªæ‰‡åŒº<sup class="refplus-num"><a href="#ref-s">[1]</a></sup>ã€‚</p><ul id="refplus" style="display:none;"><li id="ref-s" data-num="1">[1]   æ‰‡åŒºå°±æ˜¯ç›˜ç‰‡çš„ä¸€éƒ¨åˆ†æ‰‡å½¢åŒºåŸŸ</li></ul><p></p></li></ul></blockquote><p><img src="https://s2.loli.net/2022/06/03/7NBJU6bEvWACmQ5.png" alt="ç›˜ç‰‡æ­£åé¢éƒ½å¯ä»¥è¯»å†™"></p></li></ul><h4 id="2-ç£ç›˜å­˜å‚¨åŸç†">2. ç£ç›˜å­˜å‚¨åŸç†</h4><ul><li><strong>åŸç†</strong>ï¼šç£å¤´å’Œç£æ€§ä»‹è´¨ç›¸å¯¹è¿åŠ¨çš„æ—¶å€™ï¼Œé€šè¿‡ç”µç£è½¬æ¢å®Œæˆè¯»å†™æ“ä½œ</li><li><strong>ç¼–ç æ–¹æ³•</strong>ï¼šæŒ‰ç…§æŸç§æ–¹æ¡ˆæˆ–è€…è§„å¾‹ï¼ŒæŠŠä¸€è¿ä¸²çš„äºŒè¿›åˆ¶ä¿¡æ¯å˜æˆå­˜å‚¨ä»‹è´¨ä¸Šç£å±‚ä¸­ï¼ˆç£å±‚ç¿»è½¬çŠ¶æ€ï¼‰çš„åºåˆ—ï¼Œå¹¶è®©è¯»å†™æ§åˆ¶ç”µè·¯æ›´å®¹æ˜“ã€å¯é åœ°å®ç°è½¬æ¢</li><li><strong>ç£è®°å½•æ–¹å¼</strong>ï¼šé€šå¸¸é‡‡ç”¨è°ƒé¢‘æ–¹å¼ï¼ˆFMï¼‰å’Œæ”¹è¿›å‹è°ƒé¢‘ï¼ˆMFMï¼‰çš„è®°å½•æ–¹å¼</li></ul><h4 id="3-ç£ç›˜çš„æ€§èƒ½æŒ‡æ ‡">3. ç£ç›˜çš„æ€§èƒ½æŒ‡æ ‡</h4><ul><li><p><strong>è®°å½•çš„å¯†åº¦</strong></p><p>æ˜¯æŒ‡ç›˜ç‰‡ä¸Šï¼Œå•ä½é¢ç§¯å†…è®°å½•çš„ä¿¡æ¯é‡ã€‚é€šå¸¸ç”¨é“<strong>å¯†åº¦ã€ä½å¯†åº¦å’Œé¢å¯†åº¦</strong>è¡¨ç¤ºã€‚</p><ul><li><p><strong>é“å¯†åº¦</strong>ï¼šæ²¿ç£ç›˜åŠå¾„æ–¹å‘ï¼Œå•ä½é•¿åº¦ä¸Šçš„ç£é“æ•°</p></li><li><p><strong>ä½å¯†åº¦</strong>ï¼šç£é“å•ä½é•¿åº¦ä¸Šï¼Œèƒ½è®°å½•çš„äºŒè¿›åˆ¶ä»£ç ä½æ•°</p></li><li><p><strong>é¢å¯†åº¦</strong>ï¼šä½å¯†åº¦ x é“å¯†åº¦</p></li><li><p>è¡¥å……ï¼š</p><ul><li><p>ä½å¯†åº¦ï¼š</p><p>è¶Šå†…ä¾§çš„ç£é“ä½å¯†åº¦è¶Šå¤§ã€‚è¶Šé å¤–è¶Šå°</p><p>æ‰€ä»¥ä¸€ä¸ªç£ç›˜çš„å­˜å‚¨æ€§èƒ½å—åˆ°æœ€é å†…ä¾§ç£é“çš„åˆ¶çº¦</p><p>ä¸éš¾ç†è§£ï¼Œå› ä¸ºåœ¨æœ€çŸ­çš„ä¸€ä¸ªæ‰‡åŒºå†…çš„å­˜å‚¨ä¸Šé™å¾ˆä½</p><p><img src="https://s2.loli.net/2022/06/03/rELCHz4uAwXSpaR.png" alt="è¶Šé å†…ç£é“å¯†åº¦è¶Šå¤§"></p></li><li><p>æ‰€ä»¥ï¼šç£ç›˜æ‰€æœ‰ç£é“è®°å½•çš„ä¿¡æ¯é‡ä¸€å®šæ˜¯ç›¸ç­‰çš„ã€‚å¹¶ä¸æ˜¯åœ†åœˆè¶Šå¤§ä¿¡æ¯é‡è¶Šå¤šã€‚æ‰€ä»¥æ¯ä¸ªç£é“çš„ä½å¯†åº¦éƒ½ä¸ç›¸åŒï¼ˆå¤–åœˆé•¿åº¦æ›´é•¿ï¼‰</p></li></ul></li></ul></li><li><p><strong>ç£ç›˜çš„å®¹é‡</strong></p><ul><li><p>éæ ¼å¼åŒ–å®¹é‡</p><p>ç£è®°å½•è¡¨é¢å¯åˆ©ç”¨çš„ç£åŒ–å•å…ƒæ€»æ•°ï¼Œç”±é“å¯†åº¦å’Œä½å¯†åº¦è®¡ç®—æ¥çš„</p><p>ï¼ˆç£ç›˜åœ¨ç‰©ç†ä¸Šæ€»å…±å¯ä»¥å­˜å‚¨å¤šå°‘çš„æ•°æ®ï¼‰</p></li><li><p>æ ¼å¼åŒ–å®¹é‡</p><p>æŒ‰ç…§æŸç§ç‰¹å®šçš„è®°å½•æ ¼å¼ï¼Œèƒ½å¤Ÿå­˜å‚¨çš„ä¿¡æ¯æ€»é‡</p><p>ï¼ˆä¼šç•™å‡ºä¸€éƒ¨åˆ†ç©ºé—´ç”¨ä½œå…¶ä»–ç”¨é€”ã€‚æ¯”å¦‚ä¸ºäº†é˜²æ­¢ä¸ªåˆ«æ‰‡åŒºæŸåï¼Œå½±å“æ•´ä¸ªç£ç›˜çš„æ­£å¸¸å·¥ä½œï¼Œä¼šç•™å‡ºä¸€éƒ¨åˆ†å¤‡ç”¨æ‰‡åŒºç­‰ç­‰ï¼‰</p></li></ul><p>éæ ¼å¼åŒ–ç©ºé—´å¤§å° &gt; æ ¼å¼åŒ–å®¹é‡</p></li><li><p>å¹³å‡å­˜å–æ—¶é—´</p><p>ç”±ï¼š</p><blockquote><p>å¯»é“æ—¶é—´ï¼ˆç£å¤´ç§»åŠ¨åˆ°å¯¹åº”çš„ç£é“ï¼ŒèŠ±è´¹çš„æ—¶é—´ï¼‰</p><p>æ—‹è½¬å»¶è¿Ÿæ—¶é—´ï¼ˆç£å¤´æ‰¾åˆ°è¦è¯»å–çš„æ‰‡åŒºï¼ŒèŠ±è´¹çš„æ—¶é—´ï¼‰</p><p>ä¼ è¾“æ—¶é—´ï¼ˆä¼ è¾“æ•°æ®èŠ±è´¹çš„æ—¶é—´ï¼‰</p></blockquote><p>ä¸‰ä¸ªéƒ¨åˆ†ç›¸åŠ è€Œæˆã€‚</p><p>ä¹Ÿå°±æ˜¯ï¼Œå…ˆæ‰¾åˆ°ç£é“ï¼Œå†2æ‰¾åˆ°å¯¹åº”çš„æ‰‡åŒºä½ç½®ï¼Œç„¶åå†å†™æ•°æ®ã€‚</p><p>ç”±äºå¯»é“å’Œæ‰¾æ‰‡åŒºçš„è·ç¦»<strong>è¿œè¿‘ä¸ä¸€</strong>ï¼Œæ‰€ä»¥å¯»é“æ—¶é—´é€šå¸¸å–å¹³å‡å€¼ï¼Œæ—‹è½¬å»¶è¿Ÿæ—¶é—´å¯ä»¥å–<strong>è½¬åŠåœˆèŠ±è´¹çš„æ—¶é—´</strong>ã€‚</p><blockquote><p>å› ä¸ºæˆ‘ä»¬è¦è¯»å–çš„æ‰‡åŒºï¼Œåœ¨ä»»ä½•ä¸€ä¸ªä½ç½®çš„æ¦‚ç‡éƒ½æ˜¯ç›¸ç­‰çš„ã€‚æŒ‰ç…§æ¦‚ç‡è®¡ç®—æ•°å­¦æœŸæœ›çš„æ€æƒ³ï¼Œå¹³å‡æ¥çœ‹ï¼Œå°§éƒ½åŒºçš„æ‰‡åŒºè½¬åˆ°ç£å¤´è‡‚çš„ä¸‹æ–¹ï¼Œå…¶æœŸæœ›å€¼æ¥è¿‘è½¬åŠåœˆçš„æ—¶é—´ã€‚</p></blockquote><p>è¡¥å……ï¼šè®¡ç®—æœºå‘å‡ºè¯»å†™å‘½ä»¤ä¹Ÿéœ€è¦èŠ±æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯ç£ç›˜æ§åˆ¶å™¨çš„å»¶è¿ŸèŠ±è´¹çš„æ—¶é—´</p></li><li><p>æ•°æ®ä¼ è¾“ç‡</p><p>ç£ç›˜å­˜å‚¨å™¨åœ¨å•ä½æ—¶é—´å†…ï¼Œå‘ä¸»æœºä¼ é€æ•°æ®çš„å­—èŠ‚æ•°ã€‚</p><blockquote><p>å‡è®¾ç£ç›˜ä¸“å±ä¸º rè½¬/ç§’ï¼Œæ¯æ¡ç£é“çš„å®¹é‡ä¸º Nå­—èŠ‚ï¼Œæ•°æ®ä¼ è¾“ç‡è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼ˆç†è®ºæœ€å¤§å€¼ï¼‰ï¼š<br>$$<br>D_r = rN<br>$$</p></blockquote></li></ul><h4 id="4-ç£ç›˜åœ°å€">4. ç£ç›˜åœ°å€</h4><p>ä¸»æœºä¼šå‘ç£ç›˜æ§åˆ¶å™¨å‘å‡ºä¸€ä¸ªå¯»å€çš„ä¿¡æ¯ã€‚ç£ç›˜çš„åœ°å€ä¸€èˆ¬å¦‚ä¸‹è¡¨åˆ†å¸ƒï¼š</p><table><thead><tr><th>é©±åŠ¨å™¨å·</th><th>æŸ±é¢ï¼ˆç£é“ï¼‰å·</th><th>ç›˜é¢å·</th><th>æ‰‡åŒºå·</th></tr></thead><tbody><tr><td>ä¸€å°ç”µè„‘å¯ä»¥æœ‰å¤šä¸ªç£ç›˜</td><td>ç§»åŠ¨ç£å¤´è‡‚æ¥å¯»é“</td><td>æ¿€æ´»æŸä¸ªç£å¤´</td><td>é€šè¿‡æ—‹è½¬ï¼Œå°†ç‰¹å®šæ‰‡åŒºåˆ’è¿‡ç£å¤´ä¸‹æ–¹</td></tr></tbody></table><p>å‡è®¾ç³»ç»Ÿæœ‰</p><ul><li>4ä¸ªé©±åŠ¨å™¨ï¼Œæ¯ä¸ªé©±åŠ¨å™¨å¸¦1ä¸ªç£ç›˜</li><li>æ¯ä¸ªç£ç›˜æœ‰256ä¸ªç£é“ã€16ä¸ªç›˜é¢</li><li>æ¯ä¸ªç›˜é¢åˆ†ä¸º16ä¸ªæ‰‡åŒº</li></ul><p>åˆ™æ¯ä¸ªæ‰‡åŒºåœ°å€è¦18ä½æ•°æ®è¡¨ç¤º</p><table><thead><tr><th>é©±åŠ¨å™¨å·</th><th>æŸ±é¢ï¼ˆç£é“ï¼‰å·</th><th>ç›˜é¢å·</th><th>æ‰‡åŒºå·</th></tr></thead><tbody><tr><td>å 2ä½</td><td>å 8ä½</td><td>å 4ä½</td><td>å 4ä½</td></tr></tbody></table><h4 id="5-ç¡¬ç›˜çš„å·¥ä½œè¿‡ç¨‹">5. ç¡¬ç›˜çš„å·¥ä½œè¿‡ç¨‹</h4><p>ç¡¬ç›˜ä¸»è¦æ“ä½œä¸ºå¯»å€ã€è¯»ç›˜ã€å†™ç›˜ã€‚æ¯ä¸ªæ“ä½œéƒ½å¯¹åº”ä¸€ä¸ªæ§åˆ¶å­—ï¼ˆæ§åˆ¶å‘½ä»¤ï¼‰</p><p>ç¡¬ç›˜å·¥ä½œçš„æ—¶å€™ï¼Œå…ˆå–æ§åˆ¶å­—ï¼Œå†æ‰§è¡Œæ§åˆ¶å­—</p><p>æœºæ¢°ç¡¬ç›˜æ˜¯æœºæ¢°å¼çš„éƒ¨ä»¶ï¼Œè¯»å†™æ“ä½œéƒ½æ˜¯ä¸²è¡Œçš„ï¼Œä¸èƒ½åœ¨åŒä¸€ä¸ªæ—¶åˆ»åˆè¯»åˆå†™ï¼Œä¹Ÿä¸èƒ½åœ¨ç”¨ä¸€æ—¶åˆ»è¯»ä¸¤ç»„æ•°æ®æˆ–å†™ä¸¤ç»„æ•°æ®ã€‚</p><h3 id="2ã€ç£ç›˜é˜µåˆ—">2ã€ç£ç›˜é˜µåˆ—</h3><p>RAIDï¼ˆRedundant Array of Inexpensive Disksã€‚ <strong>å»‰ä»·ç£ç›˜å†—ä½™é˜µåˆ—</strong> ï¼‰ï¼šæŒ‡å°†å¤šä¸ªç‹¬ç«‹çš„ç‰©ç†ç£ç›˜ç»„æˆä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘ç›˜ã€‚æ•°æ®åœ¨å¤šä¸ªç‰©ç†ç›˜ä¸Šåˆ†å‰²äº¤å‰å­˜å‚¨ã€å¹¶è¡Œè®¿é—®ã€‚å…·æœ‰æ›´å¥½çš„å­˜å‚¨æ€§èƒ½ã€å¯é æ€§ã€å®‰å…¨æ€§ã€‚</p><ul><li>RAID0ï¼šæ— å†—ä½™å’Œæ— æ ¡éªŒçš„ç£ç›˜é˜µåˆ—</li><li>RAID1ï¼šé•œåƒç£ç›˜é˜µåˆ—</li><li>RAID2ï¼šé‡‡ç”¨çº é”™çš„æ±‰æ˜ç çš„ç£ç›˜é˜µåˆ—</li><li>RAID3ï¼šä½äº¤å‰å¥‡å¶æ ¡éªŒçš„ç£ç›˜é˜µåˆ—</li><li>RAID4ï¼šå—äº¤å‰å¥‡å¶æ ¡éªŒçš„ç£ç›˜é˜µåˆ—</li><li>RAID5ï¼šæ— ç‹¬ç«‹æ ¡éªŒçš„å¥‡å¶æ ¡éªŒç£ç›˜é˜µåˆ—</li><li>RAIDåé¢å¸¦çš„æ•°å­—è¶Šå¤§ï¼Œå†—ä½™ä¿¡æ¯è¶Šå°‘ï¼Œå¯é æ€§è¶Šé«˜</li></ul><h4 id="1ã€RAID0ï¼šæ— å†—ä½™å’Œæ— æ ¡éªŒçš„ç£ç›˜é˜µåˆ—">1ã€RAID0ï¼šæ— å†—ä½™å’Œæ— æ ¡éªŒçš„ç£ç›˜é˜µåˆ—</h4><p><img src="https://s2.loli.net/2022/06/03/pkG7cvSVmflthYq.png" alt="RAID0"></p><p>é€»è¾‘ä¸Šç›¸é‚»çš„ä¸¤ä¸ªç”šè‡³å¤šä¸ªæ‰‡åŒºï¼Œåœ¨ç‰©ç†ä¸Šå­˜åˆ°ä¸¤ä¸ªæˆ–å¤šä¸ªç£ç›˜ï¼ˆç±»æ¯”ä¸Šä¸€ç¯‡ä»‹ç»çš„<strong>ä½ä½äº¤å‰ç¼–å€çš„å¤šä½“å­˜å‚¨å™¨</strong>ï¼‰</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œé€»è¾‘ä¸Šç›¸é‚»çš„æ•°æ®å—ï¼ŒæŠŠå®ƒä»¬<strong>ä¾æ¬¡ã€åˆ†æ•£</strong>å­˜åœ¨ç‰©ç†ä¸Šå¤šä¸ªç£ç›˜å†…ã€‚</p><p>çœ‹å¾—å‡ºæ¥ï¼ŒRAID0å­˜å‚¨æ–¹å¼æ²¡æœ‰å†—ä½™çš„ä¿¡æ¯ï¼Œä¹Ÿæ²¡æœ‰æ ¡éªŒçš„åŠŸèƒ½<sup class="refplus-num"><a href="#ref-j">[1]</a></sup></p><ul id="refplus" style="display:none;"><li id="ref-j" data-num="1">[1]   å¦‚æœæŸä¸ªæ‰‡åŒºå†…æŸåæˆ–æ•°æ®é”™ä½ï¼Œå­˜åœ¨è¿™ä¸ªæ‰‡åŒºçš„ä¿¡æ¯å°±æ°¸è¿œä¸¢å¤±ï¼Œæ‰¾ä¸å›æ¥äº†ã€‚å¦‚æœå­˜æœ‰ä¸€äº›å†—ä½™ä¿¡æ¯ï¼Œéœ€è¦çš„æ—¶å€™å¯ä»¥ç”¨æ¥æ¢å¤æ•°æ®ã€‚</li></ul><p></p><h4 id="2ã€RAID1ï¼šé•œåƒç£ç›˜é˜µåˆ—">2ã€RAID1ï¼šé•œåƒç£ç›˜é˜µåˆ—</h4><p>å°±æ˜¯å­˜ä¸¤ä»½ä¸€æ ·çš„æ•°æ®</p><p><img src="https://s2.loli.net/2022/06/03/lXJ8fduW3qpZGKQ.png" alt="RAID1"></p><p>è™½ç„¶æ•°æ®å‡ºé—®é¢˜çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡æ¯”å¯¹ä¿¡æ¯ï¼Œæ¥æ¢å¤æ•°æ®ã€‚ä½†æ˜¯å†—ä½™äº†ä¸€åŠçš„å­˜å‚¨ç©ºé—´ï¼Œç¡®å®æœ‰ç‚¹å¤ªç²—æš´äº†ï¼Œä¹Ÿä¸èƒ½å¹¶è¡Œè®¿é—®</p><h4 id="3ã€é‡‡ç”¨çº é”™çš„æ±‰æ˜ç çš„ç£ç›˜é˜µåˆ—">3ã€é‡‡ç”¨çº é”™çš„æ±‰æ˜ç çš„ç£ç›˜é˜µåˆ—</h4><p>è¿™é‡Œæ¯ä¸ªç›˜çš„æ¯å—é¢œè‰²å­˜çš„ä¸æ˜¯ä¸€å—æ•°æ®ï¼Œè€Œæ˜¯ä¸€ä¸ªbitã€‚é€»è¾‘ä¸Šè¿ç»­çš„å‡ ä¸ªbitåœ¨ç‰©ç†ä¸Šåˆ†æ•£å­˜å‚¨åœ¨å„ä¸ªç›˜ä¸­ã€‚</p><p>è€Œä¸”ï¼Œ4 bitæ•°æ®+3 bitæ±‰æ˜ç ï¼Œå¯ä»¥çº æ­£ä¸€ä½é”™è¯¯ä¿¡æ¯ã€‚</p><p><img src="https://s2.loli.net/2022/06/03/dpLb4ns6XfVuJ1G.png" alt="RAID2"></p><p>åé¢å‡ ç§å·æ‡’ä¸å†™<span class="github-emoji"><span>ğŸ¶</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f436.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹<a href="https://baike.baidu.com/item/%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97/1149823?fromtitle=RAID&fromid=33858&fr=aladdin">RAIDç™¾åº¦ç™¾ç§‘</a>äº†è§£æ›´å¤š</p><h2 id="3ã€å…‰ç›˜å­˜å‚¨å™¨">3ã€å…‰ç›˜å­˜å‚¨å™¨</h2><p>ç”¨å…‰å­¦åŸç†å­˜å‚¨ä¿¡æ¯çš„è£…ç½®ã€‚ç”¨èšç„¦å…‰æŸå¯¹ä»‹è´¨å­˜ä¿¡æ¯</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å­˜å‚¨å¯†åº¦é«˜</li><li>æºå¸¦æ–¹ä¾¿</li><li>æˆæœ¬ä½ã€å®¹é‡å¤§</li><li>å­˜å‚¨æ—¶é—´é•¿ï¼Œæ›´å¥½ä¿å­˜</li><li>â€¦â€¦</li></ul><p>è“å…‰æ³¢é•¿è¾ƒçŸ­ï¼Œæ¥è¿‘ç´«å…‰ï¼Œå­˜å‚¨æ•°æ®çš„è¯ï¼Œä¿¡æ¯å¯†åº¦æ›´é«˜ã€‚å¿…å…¥è“å…‰å…‰ç›˜</p><p>å…‰ç›˜ç±»å‹å¦‚ä¸‹ï¼š</p><blockquote><ul><li>CD-ROMï¼šåªè¯»å…‰ç›˜ï¼Œæ— æ³•å†™å…¥æ•°æ®</li><li>CD-Rï¼šåªèƒ½å†™è¿›å»ä¸€æ¬¡ä¿¡æ¯ï¼Œä¹‹åä¸å¯ä¿®æ”¹</li><li>CD-RWï¼šå¯é‡å¤è¯»å†™å…‰ç›˜</li><li>DVD-ROMï¼šé«˜å®¹é‡çš„CD-ROMã€‚DVDè¡¨ç¤ºé€šç”¨æ•°å­—åŒ–å¤šåŠŸèƒ½çš„å…‰ç›˜</li></ul></blockquote><h2 id="4ã€å›ºæ€ç¡¬ç›˜SSD">4ã€å›ºæ€ç¡¬ç›˜SSD</h2><p>æ˜¯ä¸€ç§åŸºäºé—ªå­˜æŠ€æœ¯çš„å­˜å‚¨å™¨ï¼Œæ˜¯ä¸€ç§ROMã€‚å®ƒä¸Uç›˜æ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œå°±æ˜¯å®¹é‡æ›´å¤§ï¼Œå­˜å‚¨æ€§èƒ½æ›´å¥½ã€‚</p><p>ä¸€ä¸ªSSDç”±ä¸€ä¸ªæˆ–å¤šä¸ªé—ªå­˜èŠ¯ç‰‡å’Œé—ªå­˜ç¿»è¯‘å±‚ç»„æˆã€‚é—ªå­˜èŠ¯ç‰‡æ›¿ä»£ä¼ ç»Ÿæ—‹è½¬ç£ç›˜çš„æœºæ¢°é©±åŠ¨å™¨ã€‚é—ªå­˜ç¿»è¯‘å±‚ç›¸å½“äºç£ç›˜æ§åˆ¶å™¨çš„è§’è‰²ã€‚</p><p><img src="https://s2.loli.net/2022/06/03/9Zv21iXa8yIGx7H.png" alt="SSD"></p>    <style>    #refplus, #refplus li{         padding:0;        margin:0;        list-style:none;    }ï¼›    </style>    <script src="https://unpkg.com/@popperjs/core@2"></script>    <script src="https://unpkg.com/tippy.js@6"></script>    <script>    document.querySelectorAll(".refplus-num").forEach((ref) => {        let refid = ref.firstChild.href.replace(location.origin+location.pathname,'');        let refel = document.querySelector(refid);        let refnum = refel.dataset.num;        let ref_content = refel.innerText.replace(`[${refnum}]`,'');        tippy(ref, {            content: ref_content,        });    });    </script>    ]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç»„æˆ </tag>
            
            <tag> è®¡ç®—æœºçŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS é›¶ã€æ­å»ºROS1 Linuxç¯å¢ƒ</title>
      <link href="/2022/05/26/ros-0-start/"/>
      <url>/2022/05/26/ros-0-start/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>linuxå¼€å‘æ¿é…ç½®ros</h1><p>åœ¨linuxå¼€å‘æ¿åº•ä¸‹ï¼Œä½¿ç”¨å®˜æ–¹æºå³å¯ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd /etc/apt/sources.list.d/sudo touch ros-latest.listsudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" &gt; /etc/apt/sources.list.d/ros-latest.list'sudo apt install curlcurl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -sudo apt-get updatesudo apt install ros-melodic-desktop-full#â†‘ä¸ºrosæ¡Œé¢ç‰ˆå®Œæ•´å®‰è£…ï¼ŒåŒ…æ‹¬äº†ROSã€rqtã€rvizã€æœºå™¨äººé€šç”¨åº“ã€2D/3D æ¨¡æ‹Ÿå™¨å’Œ 2D/3D æ„ŸçŸ¥#è®¾ç½®æ¯æ¬¡å¯åŠ¨æ–°çš„ shell æ—¶è‡ªåŠ¨å°† ROS ç¯å¢ƒå˜é‡æ·»åŠ åˆ°æ‚¨çš„ bash ä¼šè¯ä¸­echo "source /opt/ros/melodic/setup.bash" &gt;&gt; ~/.bashrcsource ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å¦‚æœæ·»åŠ æºå‡ºç°<code>Failed to connect to raw.githubusercontent.com</code>çš„æŠ¥é”™ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å³å¯ï¼š</p><p>ç™»å½•ç½‘ç«™ï¼š<a href="https://www.ipaddress.com/">https://www.ipaddress.com</a></p><p>åœ¨æ‰“å¼€çš„ç½‘ç«™ä¸­å°†â€œ<a href="http://raw.githubusercontent.com">raw.githubusercontent.com</a>â€å¤åˆ¶åˆ°æŸ¥è¯¢æ ä¸­è¿›è¡Œæœç´¢ï¼Œå¯ä»¥çœ‹åˆ°åŸŸåå¯¹åº”çš„IPåœ°å€ä¿¡æ¯</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo chmod 777 /etc/hosts <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç”¨ç¼–è¾‘å™¨æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œ<strong>åœ¨æ–‡æœ«æ·»åŠ ä½ æŸ¥è¯¢åˆ°çš„ç»“æœ</strong>ï¼Œæ¯”å¦‚ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">151.101.84.133 raw.githubusercontent.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¿å­˜é€€å‡ºï¼Œæ”¹å›æƒé™ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo chmod 644 /etc/hosts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å³å¯æ­£å¸¸ä½¿ç”¨</p></blockquote><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»å®‰è£…äº†è¿è¡Œæ ¸å¿ƒ ROS è½¯ä»¶åŒ…æ‰€éœ€çš„ä¸œè¥¿ã€‚å¦‚æœè¦åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„ ROS å·¥ä½œåŒºï¼Œæœ‰å¤šç§å·¥å…·å’Œè¦æ±‚æ˜¯åˆ†å¼€åˆ†å‘çš„ã€‚ä¾‹å¦‚ï¼Œrosinstallæ˜¯ä¸€ç§å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ªå‘½ä»¤è½»æ¾ä¸‹è½½è®¸å¤š ROS åŒ…çš„æºä»£ç æ ‘ã€‚</p><p>è¦å®‰è£…æ­¤å·¥å…·å’Œå…¶ä»–ä¾èµ–é¡¹ä»¥æ„å»º ROS åŒ…ï¼Œå°±è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt install python-rosdep python-rosinstall python-rosinstall-generator python-wstool build-essential<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆå§‹åŒ–rosdep</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt-get install python-rosdepsudo rosdep initrosdep update<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ£€æŸ¥rosè¿è¡Œç¯å¢ƒ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">printenv | grep ROS<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://s2.loli.net/2022/05/26/GFPgOWDLtAzqHv7.png" alt=""></p><p>åˆ›å»ºcatkinå·¥ä½œåŒº</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir -p ~/catkin_ws/srccd ~/catkin_ws/catkin_makecd buildmake -j8 -l8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ºç¡®ä¿å·¥ä½œåŒºè¢«è®¾ç½®è„šæœ¬æ­£ç¡®è¦†ç›–ï¼Œè¯·ç¡®ä¿ROS_PACKAGE_PATHç¯å¢ƒå˜é‡åŒ…å«æ‰€åœ¨çš„ç›®å½•ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ..source devel/setup.bashecho $ROS_PACKAGE_PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#æ­¤ä¸ºæ‰“å°è¾“å‡ºçš„ç»“æœï¼Œå¦‚æœä¸å¦‚ä¸‹è¾“å‡ºç±»ä¼¼ï¼Œå°±æ˜¯é…ç½®æˆåŠŸ/home/HwHiAiUser/catkin_ws/src:/opt/ros/melodic/share<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="æµ‹è¯•æ­¥éª¤">æµ‹è¯•æ­¥éª¤</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">roscore<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨æ–°çš„ç»ˆç«¯è¿è¡Œ<code>rostopic list</code>ï¼Œå¦‚æœçœ‹åˆ°è¯é¢˜ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç”»é¢ï¼Œç®—æ˜¯æˆåŠŸå®‰è£…</p><p><img src="https://s2.loli.net/2022/05/26/duJ42kf1xe8jnvL.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå¼€å‘æ¿æ­å»ºrosç¯å¢ƒ</title>
      <link href="/2022/05/26/ros-start/"/>
      <url>/2022/05/26/ros-start/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>linuxå¼€å‘æ¿é…ç½®ros</h1><p>åœ¨linuxå¼€å‘æ¿åº•ä¸‹ï¼Œä½¿ç”¨å®˜æ–¹æºå³å¯ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd /etc/apt/sources.list.d/sudo touch ros-latest.listsudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" &gt; /etc/apt/sources.list.d/ros-latest.list'sudo apt install curlcurl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -sudo apt-get updatesudo apt install ros-melodic-desktop-full#â†‘ä¸ºrosæ¡Œé¢ç‰ˆå®Œæ•´å®‰è£…ï¼ŒåŒ…æ‹¬äº†ROSã€rqtã€rvizã€æœºå™¨äººé€šç”¨åº“ã€2D/3D æ¨¡æ‹Ÿå™¨å’Œ 2D/3D æ„ŸçŸ¥#è®¾ç½®æ¯æ¬¡å¯åŠ¨æ–°çš„ shell æ—¶è‡ªåŠ¨å°† ROS ç¯å¢ƒå˜é‡æ·»åŠ åˆ°æ‚¨çš„ bash ä¼šè¯ä¸­echo "source /opt/ros/melodic/setup.bash" &gt;&gt; ~/.bashrcsource ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»å®‰è£…äº†è¿è¡Œæ ¸å¿ƒ ROS è½¯ä»¶åŒ…æ‰€éœ€çš„ä¸œè¥¿ã€‚å¦‚æœè¦åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„ ROS å·¥ä½œåŒºï¼Œæœ‰å¤šç§å·¥å…·å’Œè¦æ±‚æ˜¯åˆ†å¼€åˆ†å‘çš„ã€‚ä¾‹å¦‚ï¼Œrosinstallæ˜¯ä¸€ç§å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ªå‘½ä»¤è½»æ¾ä¸‹è½½è®¸å¤š ROS åŒ…çš„æºä»£ç æ ‘ã€‚</p><p>è¦å®‰è£…æ­¤å·¥å…·å’Œå…¶ä»–ä¾èµ–é¡¹ä»¥æ„å»º ROS åŒ…ï¼Œå°±è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt install python-rosdep python-rosinstall python-rosinstall-generator python-wstool build-essential<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆå§‹åŒ–rosdep</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt-get install python-rosdepsudo rosdep initrosdep update<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ£€æŸ¥rosè¿è¡Œç¯å¢ƒ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">printenv | grep ROS<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://s2.loli.net/2022/05/26/GFPgOWDLtAzqHv7.png" alt=""></p><p>åˆ›å»ºcatkinå·¥ä½œåŒº</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir -p ~/catkin_ws/srccd ~/catkin_ws/catkin_makecd buildmake -j8 -l8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ºç¡®ä¿å·¥ä½œåŒºè¢«è®¾ç½®è„šæœ¬æ­£ç¡®è¦†ç›–ï¼Œè¯·ç¡®ä¿ROS_PACKAGE_PATHç¯å¢ƒå˜é‡åŒ…å«æ‰€åœ¨çš„ç›®å½•ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ..source devel/setup.bashecho $ROS_PACKAGE_PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#æ­¤ä¸ºæ‰“å°è¾“å‡ºçš„ç»“æœï¼Œå¦‚æœä¸å¦‚ä¸‹è¾“å‡ºç±»ä¼¼ï¼Œå°±æ˜¯é…ç½®æˆåŠŸ/home/HwHiAiUser/catkin_ws/src:/opt/ros/melodic/share<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>##æµ‹è¯•æ­¥éª¤</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">roscore<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨æ–°çš„ç»ˆç«¯è¿è¡Œrostopic listï¼Œå¦‚æœçœ‹åˆ°è¯é¢˜ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç”»é¢ï¼Œç®—æ˜¯æˆåŠŸå®‰è£…</p><p><img src="https://s2.loli.net/2022/05/26/duJ42kf1xe8jnvL.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç»„æˆæ¦‚è¿°ï¼ˆ2.1å­˜å‚¨å™¨ï¼‰</title>
      <link href="/2022/05/15/computer_organization3/"/>
      <url>/2022/05/15/computer_organization3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>è®¡ç®—æœºç»„æˆåŸç†â€”â€”2.1 å­˜å‚¨ç³»ç»Ÿ</h1><h2 id="ä¸€ã€å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„">ä¸€ã€å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„</h2><pre class="mermaid">graph TBCPU --&gt; Cache(Cacheé«˜é€Ÿç¼“å†²å‚¨å­˜å™¨)Cache --&gt; A(ä¸»å­˜/å†…å­˜)A --&gt;B(ç£ç›˜/è¾…å­˜)B --&gt;C(Uç›˜-ç£å¸¦-å…‰ç›˜/å¤–å­˜)</pre><ul><li><p>ä»ä¸Šåˆ°ä¸‹ï¼šå®¹é‡ä»å°åˆ°å¤§ã€é€Ÿåº¦ï¼Œä»·æ ¼ä»å¤§åˆ°å°</p></li><li><p>æ€§èƒ½æ›´é«˜çš„ï¼Œè¿˜ä¼šå°†cacheåˆ†ä¸ºL1ï¼ˆä¸€çº§cacheï¼‰L2ï¼ˆ äºŒçº§cacheï¼‰ç­‰ç­‰ï¼Œé€šå¸¸æ¥è¯´ï¼ŒL1æœ€å¿«ã€‚cacheæˆæœ¬æ¯”å†…å­˜å¤§å¾—å¤šã€‚</p></li><li><p>ä¸»å­˜&amp;è¾…å­˜ï¼šå®ç°è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿï¼Œè§£å†³ä¸»å­˜å®¹é‡ä¸å¤Ÿçš„é—®é¢˜ã€‚</p></li><li><p>Cache&amp;ä¸»å­˜ï¼šè§£å†³äº†ä¸»å­˜ä¸CPUé€Ÿåº¦ä¸åŒ¹é…çš„é—®é¢˜ã€‚</p></li></ul><h3 id="1ã€æŒ‰å±‚æ¬¡åˆ†ç±»">1ã€æŒ‰å±‚æ¬¡åˆ†ç±»</h3><pre class="mermaid">graph LRA(æŒ‰å±‚æ¬¡åˆ†ç±»)subgraph memoryB(é«˜é€Ÿç¼“å­˜--cache)C(ä¸»å­˜å‚¨å™¨--ä¸»å­˜ - å†…å­˜)endD(è¾…åŠ©å­˜å‚¨å™¨--è¾…å­˜ - å¤–å­˜)E(å¯ç›´æ¥è¢«CPUè¯»å†™)A --&gt;BA --&gt;CA --&gt;DB --&gt;EC --&gt;E</pre><h3 id="2ã€å­˜å‚¨ä»‹è´¨">2ã€å­˜å‚¨ä»‹è´¨</h3><ul><li>åŠå¯¼ä½“å­˜å‚¨å™¨ï¼ˆä¸»å­˜ï¼ŒCacheï¼‰</li><li>ç£æ€§ææ–™å­˜å‚¨å™¨ï¼ˆç£ç›˜ï¼Œç£å¸¦ï¼‰</li><li>å…‰å­˜å‚¨å™¨ï¼Œä»¥å…‰ä»‹è´¨å­˜å‚¨ä¿¡æ¯ï¼ˆå…‰ç›˜ï¼‰</li></ul><h3 id="3ã€å­˜å–æ–¹å¼">3ã€å­˜å–æ–¹å¼</h3><ul><li><p>éšæœºå­˜å‚¨å™¨ï¼ˆRandom Access Memoryï¼ŒRAMï¼‰</p><p>è¯»å†™ä»»ä½•ä¸€ä¸ªå­˜å‚¨å•å…ƒæ‰€éœ€è¦çš„æ—¶é—´éƒ½ç›¸åŒï¼Œä¸å­˜å‚¨å•å…ƒæ‰€åœ¨ç‰©ç†ä½ç½®æ— å…³ã€‚å¦‚å†…å­˜æ¡</p></li><li><p>é¡ºåºå­˜å‚¨å™¨ï¼ˆSequential Access Memoryï¼ŒSAMï¼‰</p><p>è¯»å†™ä¸€ä¸ªå­˜å‚¨å•å…ƒæ‰€éœ€çš„æ—¶é—´å–å†³äºå­˜å‚¨å•å…ƒæ‰€åœ¨ä½ç½®ã€‚å¦‚ç£å¸¦</p></li><li><p>ç›´æ¥å­˜å–å­˜å‚¨å™¨ï¼ˆDirect Access Memoryï¼ŒDAMï¼‰</p><p>æ—¢æœ‰éšæœºå­˜å‚¨ç‰¹æ€§ï¼Œä¹Ÿæœ‰é¡ºåºå­˜å‚¨ç‰¹æ€§ã€‚å…ˆç›´æ¥é€‰å–ä¿¡æ¯æ‰€åœ¨çš„åŒºåŸŸï¼Œç„¶åæŒ‰é¡ºåºçš„æ–¹å¼å­˜å‚¨ã€‚å¦‚ï¼šæœºæ¢°ç¡¬ç›˜</p></li><li><p>ç›¸è”å­˜å‚¨å™¨ï¼ˆAssociative Memoryï¼‰å³å¯ä»¥æŒ‰å†…å®¹è®¿é—®çš„å­˜å‚¨å™¨ï¼ˆContent Addressed Memoryï¼ŒCAMï¼‰</p><p>å¯ä»¥æŒ‰ç…§å†…å®¹æ£€ç´¢åˆ°å­˜å‚¨ä½ç½®è¿›è¡Œè¯»å†™ã€‚å¿«è¡¨<sup class="refplus-num"><a href="#ref-k">[1]</a></sup>å°±æ˜¯ä¸€ç§ç›¸è”å­˜å‚¨å™¨  </p><ul id="refplus" style="display:none;"><li id="ref-k" data-num="1">[1]  å¿«è¡¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼ˆCacheï¼‰ï¼Œå†…å®¹æ˜¯é¡µè¡¨ä¸­çš„ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨å†…å®¹ã€‚</li><li id="ref-åœ¨æ“ä½œç³»ç»Ÿä¸­å¼•å…¥å¿«è¡¨æ˜¯ä¸ºäº†åŠ å¿«åœ°å€æ˜ å°„é€Ÿåº¦" data-num="2">[2] åœ¨æ“ä½œç³»ç»Ÿä¸­å¼•å…¥å¿«è¡¨æ˜¯ä¸ºäº†åŠ å¿«åœ°å€æ˜ å°„é€Ÿåº¦ã€‚</li><li id="ref-åœ¨è™šæ‹Ÿé¡µå¼å­˜å‚¨ç®¡ç†ä¸­è®¾ç½®äº†å¿«è¡¨ï¼Œä½œä¸ºå½“å‰è¿›ç¨‹é¡µè¡¨çš„Cacheã€‚é€šå¸¸å¿«è¡¨å¤„äºMMUä¸­" data-num="3">[3] åœ¨è™šæ‹Ÿé¡µå¼å­˜å‚¨ç®¡ç†ä¸­è®¾ç½®äº†å¿«è¡¨ï¼Œä½œä¸ºå½“å‰è¿›ç¨‹é¡µè¡¨çš„Cacheã€‚é€šå¸¸å¿«è¡¨å¤„äºMMUä¸­ã€‚</li></ul><p></p></li><li><p>é¡ºåºå­˜å‚¨å’Œç›´æ¥å­˜å‚¨çš„å­˜å‚¨å™¨ç»Ÿç§°<strong>ä¸²è¡Œè®¿é—®å­˜å‚¨å™¨</strong>ï¼š</p><p>è¯»å–æŸä¸ªå­˜å‚¨å•å…ƒæ‰€éœ€æ—¶é—´ä¸å­˜å‚¨å•å…ƒçš„ç‰©ç†ä½ç½®æœ‰å…³ã€‚</p></li></ul><h3 id="4ã€ä¿¡æ¯çš„å¯æ›´æ”¹æ€§">4ã€ä¿¡æ¯çš„å¯æ›´æ”¹æ€§</h3><ul><li>è¯»å†™å­˜å‚¨å™¨ï¼ˆread/write Memoryï¼‰== å¯è¯»ä¹Ÿå¯å†™ï¼ˆç£ç›˜ï¼Œå†…å­˜ï¼Œcacheï¼‰</li><li>åªè¯»å­˜å‚¨å™¨ï¼ˆRead Only Memoryï¼‰== åªè¯»ï¼Œä¸å¯å†™ï¼ˆCD-ROMï¼ŒBIOSå­˜å‚¨çš„ROMï¼‰è¦å†™å…¥æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦å…ˆæ“¦é™¤å†å†™å…¥ã€‚</li></ul><h3 id="5ã€ä¿¡æ¯çš„å¯ä¿å­˜æ€§">5ã€ä¿¡æ¯çš„å¯ä¿å­˜æ€§</h3><ul><li>æ˜“å¤±æ€§å­˜å‚¨å™¨ï¼ˆä¸»å­˜ï¼Œcacheï¼‰ï¼šæ–­ç”µåå­˜å‚¨ä¿¡æ¯å°±æ¶ˆå¤±äº†</li><li>éæ˜“å¤±å­˜å‚¨å™¨ï¼ˆç£ç›˜ï¼Œå…‰ç›˜ï¼‰ï¼šæ–­ç”µåä¿¡æ¯è¿˜ä¿ç•™</li><li>ç ´åæ€§è¯»å‡ºï¼ˆDRAMï¼‰ï¼šä¿¡æ¯è¯»å‡ºåï¼ŒåŸå­˜å‚¨ä¿¡æ¯è¢«ç ´åã€‚DRAMè¯»å‡ºæ•°æ®åéœ€è¦è¿›è¡Œé‡å†™</li><li>éç ´åæ€§è¯»å‡ºï¼ˆSRAMï¼Œç£ç›˜ï¼Œå…‰ç›˜ï¼‰ï¼šä¿¡æ¯è¯»å‡ºåï¼ŒåŸæœ¬ä¿¡æ¯ä¸ä¼šè¢«ç ´å</li></ul><h3 id="6ã€å­˜å‚¨å™¨æ€§èƒ½æŒ‡æ ‡">6ã€å­˜å‚¨å™¨æ€§èƒ½æŒ‡æ ‡</h3><ul><li><p>å­˜å‚¨å®¹é‡ï¼šå­˜å‚¨å­—é•¿ï¼ˆMDRä½æ•°ï¼‰ x å­—é•¿ï¼ˆå¦‚ï¼š1M x 16ä½ï¼‰</p></li><li><p>å•ä½æˆæœ¬ï¼šæ¯ä½åŠ ä¸ª = æ€»æˆæœ¬ / æ€»å®¹é‡</p></li><li><p>å­˜å‚¨é€Ÿåº¦ï¼šæ•°æ®ä¼ è¾“ç‡ = æ•°æ®çš„å®½åº¦ / å­˜å‚¨å‘¨æœŸ</p></li><li><p>å­˜å–æ—¶é—´Taï¼šä»å¯åŠ¨ä¸€æ¬¡å­˜å‚¨å™¨æ“ä½œåˆ°å®Œæˆè¯¥æ“ä½œæ‰€ç»å†çš„æ—¶é—´ï¼Œåˆ†è¯»å‡ºæ—¶é—´å’Œå†™å…¥æ—¶é—´ã€‚</p></li><li><p>å­˜å–å‘¨æœŸTmï¼šå­˜å‚¨å™¨è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„è¯»å†™æ“ä½œæ‰€éœ€çš„å…¨éƒ¨æ—¶é—´ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¿ç»­ä¸¤æ¬¡ç‹¬ç«‹è®¿é—®å­˜å‚¨å™¨æ“ä½œï¼Œæ‰€éœ€çš„æœ€å°æ—¶é—´é—´éš”ï¼‰</p></li><li><p>ä¸»å­˜å¸¦å®½Bmï¼šåˆç§°æ•°æ®ä¼ è¾“ç‡ã€‚è¡¨æ¯ç§’ä»ä¸»å­˜è¿›å‡ºå¿ƒç†çš„æœ€å¤§æ•°é‡ï¼Œå•ä½ï¼šå­—/ç§’ã€å­—èŠ‚/æ¯ç§’ï¼ˆB/sï¼‰ã€ä½/ç§’ï¼ˆb/sï¼‰</p></li></ul><h2 id="äºŒã€ä¸»å­˜å‚¨å™¨åŸºæœ¬ç»„æˆ">äºŒã€ä¸»å­˜å‚¨å™¨åŸºæœ¬ç»„æˆ</h2><p>ç”±ç”µå®¹ä¸MOSå…³ç»„æˆ</p><p><img src="https://s2.loli.net/2022/05/13/fR9LpVQDsGouOe4.png" alt="åŸç†å›¾"></p><p>æˆ‘ä»¬ä½¿ç”¨è¯‘ç å™¨ï¼Œä½¿ç”¨nä½åœ°å€æ‰¾åˆ°2^nä¸ªå­˜å‚¨å•å…ƒé‡Œå¯¹åº”çš„å­˜å‚¨ä¿¡æ¯ã€‚åœ°å€ç”±MARå­˜å‚¨ã€‚CPUé€šè¿‡åœ°å€æ€»çº¿è¿æ¥MARã€‚</p><p>CPUç»™MARä¸€ä¸ªåœ°å€ï¼Œé€šè¿‡è¯‘ç å™¨æ‰¾åˆ°å¯¹åº”åœ°å€çš„å­˜å‚¨å•å…ƒï¼Œå°†å…¶æ•°æ®é€šè¿‡æ•°æ®æ€»çº¿ï¼ˆä½çº¿ï¼‰è¾“å‡ºç»™MDRï¼ŒMDRå§æ•°æ®ç»™CPUã€‚æ•°æ®æ€»çº¿çš„å®½åº¦ = å­˜å‚¨å­—é•¿</p><ul><li>æ€»å®¹é‡ = å­˜å‚¨å•å…ƒä¸ªæ•° * å­˜å‚¨å­—é•¿</li></ul><p>å…¶ä¸­ï¼ŒMARå’ŒMDRéœ€è¦é€šè¿‡<strong>æ§åˆ¶ç”µè·¯</strong>å’Œ<strong>è¯‘ç å™¨é©±åŠ¨å™¨</strong>ï¼Œå¯ä»¥ç†è§£ä¸ºè´Ÿè´£ç¨³å®šè¾“å‡ºã€‚åªæœ‰MARå’ŒMDRé‡Œçš„æ•°æ®å­˜å‚¨ç¨³å®šä¹‹åï¼Œæ§åˆ¶ç”µè·¯æ‰ä¼šæ‰“å¼€é€šè·¯çš„å¼€å…³ï¼Œè®©æ•°æ®åœ¨æ€»çº¿ä¸Šè¿›è¡Œä¼ è¾“ã€‚</p><p><img src="https://s2.loli.net/2022/05/14/Ke6lCakUjm5MNB1.png" alt=""></p><p>ç‰‡é€‰çº¿è´Ÿè´£åœ¨å¤šä¸ªå­˜å‚¨èŠ¯ç‰‡ä¸­ï¼Œé€‰æ‹©å…¶ä¸­ä¸€ä¸ªå­˜å‚¨èŠ¯ç‰‡ï¼Œåœ¨é‡Œå¤´è¯»å–æ•°æ®ã€‚</p><p><img src="https://s2.loli.net/2022/05/14/R4umtJ9oEPwWhvS.png" alt="å¤šä¸ªå­˜å‚¨èŠ¯ç‰‡"></p><p>å­˜å‚¨èŠ¯ç‰‡æ€»ç»“ä¸€å…±ç”±äºäº”ç±»å¼•è„šï¼š</p><ul><li><p>åœ°å€çº¿</p></li><li><p>æ•°æ®çº¿</p></li><li><p>ç‰‡é€‰çº¿</p></li><li><p>è¯»å†™æ§åˆ¶çº¿</p></li><li><p>ä¾›ç”µå¼•è„šä¸æ¥åœ°å¼•è„š</p></li></ul><p><strong>å¯»å€</strong></p><p>æŒ‰å­—èŠ‚å¯»å€</p><p>æŒ‰å­—å¯»å€</p><ul><li>å­—åœ°å€ç®—æœ¯å·¦ç§»ä¸€å®šä½æ•°ï¼Œå³å¯è½¬æ¢ä¸ºå¯¹åº”çš„å­—èŠ‚åœ°å€</li></ul><p>æŒ‰åŠå­—å¯»å€</p><p>æŒ‰åŒå­—å¯»å€</p><h2 id="ä¸‰ã€SRAM-DRAM">ä¸‰ã€SRAM &amp; DRAM</h2><ul><li><p>DRAMï¼ŒDynamic Random Access Memoryï¼Œå³åŠ¨æ€RAM</p><p>SRAMï¼ŒStatic Random Access Memoryï¼Œå³é™æ€RAM</p></li><li><p>DRAMç”¨äºä¸»å­˜ï¼ŒSRAMç”¨äºCache</p></li><li><p>ä¸Šè¿°ä»‹ç»çš„ â€œä¸»å­˜å‚¨å™¨åŸºæœ¬ç»„æˆâ€ å°±æ˜¯DRAMã€‚</p></li></ul><table><thead><tr><th>ç±»å‹ç‰¹ç‚¹</th><th>DRAMï¼ˆå¸¸ç”¨ä¸»å­˜ï¼‰</th><th>SRAMï¼ˆå¸¸ç”¨cacheï¼‰</th></tr></thead><tbody><tr><td>å­˜å‚¨å™¨</td><td>æ …æç”µå®¹</td><td>åŒç¨³æ€è§¦å‘å™¨</td></tr><tr><td>æ˜¯å¦ç ´åæ€§</td><td>ç”µå®¹æ”¾ç”µæ—¶ä¿¡æ¯è¢«ç ´åï¼Œæ˜¯ç ´åæ€§è¯»å‡ºï¼Œè¯»å‡ºä¹‹ååº”æœ‰é‡å†™æ“ä½œã€‚ä¹Ÿç§° â€œå†ç”Ÿâ€ ã€‚</td><td>è¯»å‡ºæ•°æ®çš„æ—¶å€™ï¼Œè§¦å‘å™¨ä¿æŒçŠ¶æ€ç¨³å®šï¼Œéç ´åæ€§è¯»å‡ºï¼Œæ— éœ€é‡å†™ã€‚</td></tr><tr><td>è¯»å†™é€Ÿåº¦</td><td>æ›´æ…¢</td><td>æ›´å¿«</td></tr><tr><td>é›†æˆåº¦&amp;æˆæœ¬</td><td>é›†æˆåº¦é«˜ï¼Œæˆæœ¬ä½</td><td>é›†æˆåº¦ä½ï¼Œæˆæœ¬é«˜</td></tr><tr><td>æ˜¯å¦æ˜“å¤±</td><td>æ˜¯ï¼Œæ–­ç”µåä¿¡æ¯æ¶ˆå¤±</td><td>æ˜¯ï¼Œæ–­ç”µåä¿¡æ¯æ¶ˆå¤±</td></tr><tr><td>éœ€è¦åˆ·æ–°</td><td>éœ€è¦ï¼Œå­˜å‚¨ä»‹è´¨æ˜¯ç”µå®¹</td><td>ä¸éœ€è¦ï¼Œå­˜å‚¨ä»‹è´¨æ˜¯è§¦å‘å™¨</td></tr><tr><td>é€è¡Œåˆ—åœ°å€</td><td>åˆ†ä¸¤æ¬¡é€</td><td>åŒæ—¶é€</td></tr><tr><td>åŠŸè€—&amp;å‘çƒ­é‡</td><td>åŠŸè€—ä½ï¼Œå‘çƒ­é‡å°</td><td>åŠŸè€—é«˜ï¼Œå‘çƒ­é‡é«˜</td></tr></tbody></table><ul><li><p>DRAMå­˜å‚¨å•å…ƒä½¿ç”¨çš„MOSç®¡æ¯”SRAMæ›´å°‘ï¼Œåœ¨èŠ¯ç‰‡é¢ç§¯ä¸å˜çš„æƒ…å†µä¸‹ï¼ŒDRAMé›†æˆåº¦æ›´é«˜ã€‚</p></li><li><p>æ ¸å¿ƒåŒºåˆ«ï¼šå­˜å‚¨å…ƒä¸ä¸€æ ·</p></li></ul><h3 id="3-1-DRAMåˆ·æ–°">3.1 DRAMåˆ·æ–°</h3><ul><li><p>åˆ·æ–°çš„æ¦‚å¿µ</p><ul><li><p>åˆ·æ–°ä¸€æ¬¡çš„æ—¶é—´é—´éš”ï¼š</p><p>DRAMä½¿ç”¨çš„ç”µå®¹å­˜å‚¨ä¿¡æ¯ï¼Œå¤§æ¦‚2msåä¿¡æ¯ä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥DRAMæ¯2mså°±éœ€è¦åˆ·æ–°ä¸€æ¬¡ã€‚</p></li><li><p>æ¯æ¬¡åˆ·æ–°å¤šå°‘ä¸ªå­˜å‚¨å•å…ƒï¼š</p><p>ç”±äºDRAMå­˜å‚¨å™¨éœ€è¦åˆ·æ–°ï¼Œå¦‚æœæˆ‘ä»¬æœ‰20æ ¹é€‰çº¿ï¼Œå°±æœ‰2^20 = 1Mæ ¹é€‰çº¿ã€‚å¦‚æœå…¨éƒ¨æ¥åœ¨ä¸€ä¸ªè¯‘ç å™¨ï¼Œéš¾åº¦ä¼šå¾ˆå¤§ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬æŠŠè¿™ä¸ªè¯‘ç å™¨æ‹†åˆ†æˆä¸¤ä¸ªï¼Œä¸ºï¼ˆè¡Œåœ°å€è¯‘ç å™¨ï¼‰å’Œï¼ˆåˆ—åœ°å€è¯‘ç å™¨ï¼‰ï¼Œæ¯ä¸ªè¯‘ç å™¨åªéœ€è¦å¤„ç†ä¸€åŠçš„åœ°å€ï¼Œå³2^10 = 1k = 1024æ ¹é€‰çº¿ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠå­˜å‚¨å•å…ƒæ’åˆ—æˆ2^{n/2} x 2^{n/2}çš„å­˜å‚¨å•å…ƒ<strong>çŸ©é˜µ</strong>ã€‚</p><p><strong>ä½¿ç”¨è¡Œåˆ—åœ°å€å¯ä»¥å‡å°‘é€‰é€šçº¿çš„æ•°é‡</strong></p></li></ul></li><li><p>å¦‚ä½•åˆ·æ–°ï¼Ÿ</p><p>æ‰€ä»¥æ¯æ¬¡åˆ·æ–°çš„æ—¶å€™ï¼Œä»¥è¡Œä¸ºå•ä½ï¼Œ<strong>æ¯æ¬¡åˆ·æ–°ä¸€è¡Œå­˜å‚¨å•å…ƒ</strong>ã€‚</p><p>è¿™é‡Œæœ‰ç¡¬ä»¶çš„æ”¯æŒï¼Œç”±å­˜å‚¨å™¨ç‹¬ç«‹å®Œæˆï¼Œä¸éœ€è¦CPUæ§åˆ¶ã€‚</p><p>è¯»å‡ºä¸€è¡Œçš„ä¿¡æ¯ä¹‹åå°±é‡æ–°å†™å…¥ã€‚</p><p>ç”±äºåˆ·æ–°ä¸€æ¬¡ç±»ä¼¼äºä¸€æ¬¡è¯»æ“ä½œï¼Œæ‰€ä»¥æ—¶é—´ä¸Šå ç”¨ä¸€ä¸ªè¯»æˆ–å†™å‘¨æœŸã€‚</p></li><li><p>åˆ·æ–°çš„æ€è·¯</p><ul><li><p>æ€è·¯ä¸€ï¼Œåˆ†æ•£åˆ·æ–°ï¼š</p><p>æ¯æ¬¡è¯»å†™å®Œéƒ½åˆ·æ–°ä¸€è¡Œ</p></li><li><p>æ€è·¯äºŒï¼Œé›†ä¸­åˆ·æ–°ï¼š</p><p>2mså†…é›†ä¸­å®‰æ’ä¸€å—æ—¶é—´å…¨éƒ¨åˆ·æ–°ã€‚é‚£å°±ä¼šå‡ºç°æœ‰ä¸€æ®µæ—¶é—´ä¸“é—¨ç”¨äºåˆ·æ–°ï¼Œæ— æ³•è®¿é—®å­˜å‚¨å™¨ï¼Œç§°ä¸ºè®¿å­˜ â€œæ­»åŒºâ€ã€‚</p></li><li><p>æ€è·¯ä¸‰ï¼Œå¼‚æ­¥åˆ·æ–°ï¼š</p><p>2mså†…æ¯è¡Œåˆ·æ–°ä¸€æ¬¡å³å¯ï¼Œé‚£æ¯éš”2mså°±ä¼šå‡ºç°ä¸€æ¬¡ â€œæ­»æ—¶é—´â€ï¼ˆå¯ä»¥ç†è§£ä¸ºåˆ†æ•£äº†æ­»åŒºï¼‰ï¼Œåœ¨è¿™æœŸé—´ï¼ŒCPUæ— æ³•è®¿é—®ã€‚<strong>å¯ä»¥åœ¨è¯‘ç é˜¶æ®µåˆ·æ–°</strong>ã€‚</p></li></ul></li><li><p>é€è¡Œåˆ—åœ°å€ï¼š</p><ul><li>å› ä¸ºDRAMä½¿ç”¨äº†ä¸¤ä¸ªè¯‘ç å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<strong>åœ°å€çº¿å¤ç”¨æŠ€æœ¯</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡ä¼ è¾“ä¸€åŠçš„åœ°å€ç»™å…¶ä¸­ä¸€ä¸ªè¯‘ç å™¨å³å¯å…ˆæ¥å—è¡Œåœ°å€ï¼Œå†æ¥å—åˆ—åœ°å€ï¼Œåˆ†ä¸¤æ¬¡ä¼ è¾“åœ°å€ï¼Œç»™ä¸¤ä¸ªè¯‘ç å™¨ã€‚æˆ‘ä»¬å°±å¯ä»¥å‡å°‘ä¸€åŠçš„åœ°å€çº¿ï¼ŒèŠ¯ç‰‡å¼•è„šä¹Ÿä¼šæ›´å°‘ã€‚</li><li>SRAMå› ä¸ºé›†æˆåº¦æ›´ä½ï¼Œæ‰€ä»¥åœ°å€æˆ‘ä»¬åŒæ—¶ä¼ è¾“å³å¯</li></ul></li><li><p>ç°åœ¨ä¸»å­˜èŠ¯ç‰‡é€šå¸¸ä½¿ç”¨<code>SDRAM</code>èŠ¯ç‰‡ï¼Œ</p></li></ul><h2 id="å››ã€åªè¯»å­˜å‚¨å™¨ROM">å››ã€åªè¯»å­˜å‚¨å™¨ROM</h2><p>RAMèŠ¯ç‰‡æ–­ç”µåæ•°æ®ä¼šæ¶ˆå¤±ï¼ˆæ˜“å¤±æ€§çš„ï¼‰ï¼Œè€Œï¼š</p><p>ROMèŠ¯ç‰‡ï¼Œæ–­ç”µåæ•°æ®ä¸ä¼šæ¶ˆå¤±ï¼ˆéæ˜“å¤±æ€§çš„ï¼‰ã€‚</p><p>ROMè¿˜å¯ä»¥ç»†åˆ†ä¸ºï¼š<code>MROM</code>ã€<code>PROM</code>ã€<code>EPROM</code>ã€<code>flashé—ªå­˜</code>ã€ <code>SSD</code></p><p>å¾ˆå¤šROMä¹Ÿå…·æœ‰ â€œéšæœºå­˜å‚¨â€ ç‰¹æ€§ã€‚</p><h3 id="1ã€MROM">1ã€MROM</h3><p>MROMï¼ˆMask Read Only Memoryï¼‰ï¼Œæ©æ¨¡å¼åªè¯»å¯„å­˜å™¨</p><p>ç”±å‚å®¶ç›´æ¥å†™å…¥ä¿¡æ¯ï¼Œåªèƒ½è¯»å‡ºï¼Œä¹‹åä»»ä½•äºº<strong>ä¸å¯é‡å†™</strong></p><p>å¯é æ€§é«˜ã€çµæ´»æ€§å·®ã€ç”Ÿäº§å‘¨æœŸé•¿ï¼Œåªé€‚åˆæ‰¹é‡ç”Ÿäº§</p><h3 id="2ã€PROM">2ã€PROM</h3><p>PROMï¼ˆProgrammable Read Only Memoryï¼‰ï¼Œå¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨</p><p>ç”¨æˆ·å¯ä»¥ç”¨ä¸“é—¨çš„è½¯ä»¶å†™å…¥ä¿¡æ¯ï¼Œ<strong>å†™ä¸€æ¬¡ä¹‹åå°±ä¸å¯æ›´æ”¹</strong></p><h3 id="3ã€EPROM">3ã€EPROM</h3><p>EPROMï¼ˆErasable Programmable Read Only Memoryï¼‰</p><p>å…è®¸ç”¨æˆ·å†™å…¥ä¿¡æ¯ï¼Œä¹‹åå¯ä»¥æ“¦é™¤æ•°æ®ï¼Œå¯è¿›è¡Œå¤šæ¬¡é‡å†™</p><h3 id="4ã€UVEPROM">4ã€UVEPROM</h3><p>UVEPROMï¼ˆUltraviolet raysï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ç´«å¤–çº¿ç…§å°„8-20åˆ†é’Ÿï¼Œæ“¦é™¤<strong>æ‰€æœ‰</strong>ä¿¡æ¯</p><h3 id="5ã€EEPROM">5ã€EEPROM</h3><p>ç¬¬ä¸€ä¸ªEè¡¨ç¤ºçš„æ˜¯Electricallyï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ä½¿ç”¨ç”µæ“¦é™¤ï¼Œæ“¦é™¤<strong>ç‰¹å®š</strong>çš„å­—ã€‚</p><h3 id="6ã€FLASH-MEMORY">6ã€FLASH MEMORY</h3><p>Flash Memoryï¼Œé—ªé€Ÿå­˜å‚¨å™¨ï¼ˆæ¯”å¦‚Uç›˜ã€sdå¡ï¼‰ï¼Œä»<code>EEPROM</code>å‘å±•æ¥çš„ã€‚æ–­ç”µåå¯ä»¥ä¿å­˜ä¿¡æ¯ï¼Œä¸”<strong>å¯ä»¥è¿›è¡Œå¤šæ¬¡å¿«é€Ÿæ“¦é™¤é‡å†™</strong>ã€‚</p><p>ç”±äºé—ªå­˜éœ€è¦å…ˆç”µæ“¦é™¤å†å†™å…¥ï¼Œæ‰€ä»¥é—ªå­˜çš„ â€œå†™â€ è¦æ¯” â€œè¯»â€ æ¥çš„æ›´æ…¢ã€‚</p><p>æ¯ä¸ªå­˜å‚¨å…ƒåªéœ€è¦ä¸€ä¸ªMOSç®¡ï¼Œä½å¯†åº¦è¦æ¯”<code>RAM</code>é«˜ã€‚</p><h3 id="7ã€SSDå›ºæ€ç¡¬ç›˜">7ã€SSDå›ºæ€ç¡¬ç›˜</h3><p>ç”±æ§åˆ¶å•å…ƒ+å­˜å‚¨å•å…ƒï¼ˆflashï¼‰ç»„æˆã€‚</p><p>ä¸é—ªå­˜çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºï¼šæ§åˆ¶å•å…ƒä¸ä¸€æ ·ã€‚</p><p>ä½†æ˜¯ç”±äºå­˜å‚¨ä»‹è´¨ç±»ä¼¼ï¼Œ<strong>å¯ä»¥è¿›è¡Œå¤šæ¬¡å¿«é€Ÿæ“¦é™¤é‡å†™</strong>ã€‚</p><p>SSDé€Ÿåº¦å¿«ã€åŠŸè€—ä½ã€ä»·æ ¼é«˜ï¼Œç›®å‰ä¸ªäººç”µè„‘å¸¸ç”¨SSDå–ä»£ä¼ ç»Ÿçš„æœºæ¢°ç¡¬ç›˜ã€‚</p><p>æ‰‹æœºè¾…å­˜ä¹Ÿæ˜¯ç”¨çš„FLASHèŠ¯ç‰‡ã€‚ç›¸æ¯”SSDä½¿ç”¨çš„èŠ¯ç‰‡ï¼Œé›†æˆåº¦é«˜ï¼ŒåŠŸè€—ä½ï¼Œä»·æ ¼è´µ</p><h2 id="äº”ã€è®¡ç®—æœºå†…é‡è¦çš„ROM">äº”ã€è®¡ç®—æœºå†…é‡è¦çš„ROM</h2><pre class="mermaid">graph TBsubgraph ä¸»æœºA[ä¸»å­˜RAM //+ROM] subgraph CPUB(è¿ç®—å™¨)C(æ§åˆ¶å™¨)endend</pre><p>CPUçš„ä»»åŠ¡æ˜¯åˆ°<strong>ä¸»å­˜</strong>ä¸­å–æŒ‡ä»¤ï¼Œç„¶åå»è¿è¡Œã€‚ä¸»å­˜RAMä¸­å­˜æ”¾ç€æŒ‡ä»¤ä¸æ•°æ®ã€‚è€Œæ–­ç”µåï¼ŒRAMæ•°æ®å…¨éƒ¨ä¸¢å¤±ã€‚</p><p>æ‰€ä»¥CPUå¼€æœºçš„æ—¶å€™ï¼Œé‡Œå¤´æ˜¯æ²¡æœ‰å­˜æ”¾æŒ‡ä»¤çš„ã€‚éœ€è¦æŠŠæ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºç›¸å…³çš„<strong>æŒ‡ä»¤ã€æ•°æ®</strong>ï¼Œé‡æ–°è°ƒå…¥ä¸»å­˜ã€‚</p><p>è€Œæˆ‘ä»¬çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿæ˜¯å®‰è£…åœ¨<strong>è¾…å­˜</strong>é‡Œé¢çš„ã€‚å¦‚ä½•å¼€æœºï¼Œä¹Ÿæ˜¯éœ€è¦CPUæ‰§è¡Œå¼€æœºæŒ‡ä»¤ã€‚ä½†æ­¤æ—¶CPUé‡Œå¤´å®Œå…¨æ²¡æœ‰æŒ‡ä»¤ã€‚</p><p>æ‰€ä»¥CPUå¼€æœºçš„æ—¶å€™ï¼Œå°±éœ€è¦åœ¨ä¸»æ¿ä¸Šçš„ROMèŠ¯ç‰‡è¯»å–å¼€æœºçš„æŒ‡ä»¤ã€‚è¿™å—ROMå°±æ˜¯<strong>BIOS</strong>ã€‚</p><ul><li>ä¸»æ¿ä¸ŠBIOSèŠ¯ç‰‡ï¼ˆROM)ï¼Œå­˜å‚¨äº†<strong>è‡ªä¸¾è£…å…¥ç¨‹åº</strong>ï¼Œè´Ÿè´£å¼•å¯¼è£…å…¥æ“ä½œç³»ç»Ÿï¼ˆå¼€æœºï¼‰</li></ul><p>é€»è¾‘ä¸Šæ¥è¯´ï¼Œä¸»å­˜ç”±RAMï¼ˆå†…å­˜ï¼‰+ROMï¼ˆBIOSï¼‰ç»„æˆï¼Œä¸”äºŒè€…é€šå¸¸ç»Ÿä¸€ç¼–å€ã€‚<strong>ä¸»æ¿ä¸ŠROMä¹Ÿæ˜¯ â€œä¸»å­˜â€ çš„ä¸€éƒ¨åˆ†</strong>ã€‚</p><h2 id="å…­ã€åŒç«¯å£RAM-å¤šæ¨¡å—å­˜å‚¨å™¨">å…­ã€åŒç«¯å£RAM &amp; å¤šæ¨¡å—å­˜å‚¨å™¨</h2><ul><li><p>å­˜å–å‘¨æœŸï¼šå­˜å–ï¼ˆå¯åŠ¨å­˜å– -&gt; å­˜å–å®Œï¼‰çš„æ—¶é—´ + æ¢å¤ï¼ˆå­˜å–å®Œ + ä¸‹æ¬¡å­˜å–ä¹‹å‰ï¼‰çš„æ—¶é—´</p><p>ä¹Ÿå¯ä»¥è¡¨ç¤ºæˆï¼šå¯ä»¥è¿ç»­è¯»å†™çš„æœ€çŸ­æ—¶é—´é—´éš”</p><ul><li>æ³¨ï¼šDRAMçš„æ¢å¤æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæœ‰å¯èƒ½ä¼šæ˜¯å­˜å–æ—¶é—´çš„å‡ å€ï¼ˆSRAMçš„æ¢å¤æ—¶é—´æ¯”è¾ƒçŸ­ï¼‰</li></ul></li></ul><p>æ¯æ¬¡è¯»å–å®Œæ•°æ®ï¼Œéƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ¢å¤ã€‚å¦‚æœæ­¤æ—¶å¤šæ ¸CPUéƒ½éœ€è¦è®¿å­˜ï¼Œé‚£æ˜¯ä¸æ˜¯æ¯ä¸ªCPUéƒ½éœ€è¦ç­‰å¾…RAMçš„æ¢å¤æ—¶é—´ï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ¬¡çš„å­˜å–ï¼Ÿä¸”å³ä½¿æ˜¯å•æ ¸CPUï¼Œè¯»å†™æ•°æ®çš„é€Ÿåº¦æ¯”ä¸»å­˜å¿«å¾ˆå¤šï¼Œä¸»å­˜æ¢å¤æ—¶é—´å¤ªé•¿äº†è¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>è¿™é‡Œå°±ä½¿ç”¨åˆ°åŒç«¯å£å­˜å‚¨å™¨</p><h3 id="6-1-åŒç«¯å£RAM">6.1 åŒç«¯å£RAM</h3><ul><li><p>ä½œç”¨ï¼š<strong>ä¼˜åŒ–å¤šæ ¸CPUè®¿é—®ä¸€æ ¹å†…å­˜æ¡çš„é€Ÿåº¦</strong>ï¼Œå¯ä»¥é€šè¿‡ä¸¤ä¸ªç«¯å£</p></li><li><p>éœ€è¦æœ‰ä¸¤ç»„å®Œå…¨ç‹¬ç«‹çš„æ•°æ®çº¿ã€åœ°å€çº¿ã€æ§åˆ¶çº¿</p></li><li><p>ä¸¤ä¸ªç«¯å£åŒæ—¶æ“ä½œä¸»å­˜æ—¶ï¼š</p><ul><li>ä¸¤ä¸ªç«¯å£åŒæ—¶å¯¹ä¸åŒçš„åœ°å€å•å…ƒå­˜æ•°æ®</li><li>ä¸¤ä¸ªç«¯å£åŒæ—¶å¯¹åŒä¸€ä¸ªåœ°å€å•å…ƒè¯»å‡ºæ•°æ®</li><li>ä¸¤ä¸ªç«¯å£åŒæ—¶å¯¹åŒä¸€ä¸ªåœ°å€å•å…ƒå†™å…¥æ•°æ®ï¼ˆä¼šé€ æˆå†™å…¥é”™è¯¯ï¼‰</li><li>ä¸¤ä¸ªç«¯å£åŒæ—¶å¯¹åŒä¸€ä¸ªåœ°å€å•å…ƒï¼Œä¸€ä¸ªå†™å…¥ï¼Œä¸€ä¸ªè¯»å‡ºï¼ˆä¼šé€ æˆè¯»å‡ºé”™è¯¯ï¼‰</li><li>è§£å†³æ–¹æ¡ˆï¼š<ul><li>æŠŠ<code>busy</code>ä¿¡å·ç½®0ï¼Œç”±åˆ¤æ–­é€»è¾‘å†³å®šæš‚æ—¶å…³é—­ä¸€ä¸ªç«¯å£ï¼ˆè¢«å»¶æ—¶ï¼‰ï¼Œæœªè¢«å…³é—­çš„ç«¯å£æ­£å¸¸è®¿é—®ï¼Œè¢«å…³é—­çš„ç«¯å£å»¶é•¿å¾ˆå°ä¸€æ®µæ—¶é—´åå¯ä»¥å†æ¬¡è®¿é—®ã€‚</li></ul></li></ul></li></ul><h3 id="6-2-å¤šä½“å¹¶è¡Œå­˜å‚¨å™¨">6.2 å¤šä½“å¹¶è¡Œå­˜å‚¨å™¨</h3><p>CPUè¯»å†™é€Ÿåº¦æ¯”å†…å­˜å¿«å¾ˆå¤šï¼Œè€Œå†…å­˜æ¯æ¬¡è¯»å†™è¿‡åï¼Œéœ€è¦ä¸€æ®µæ¢å¤çš„æ—¶é—´ã€‚å½“CPUéœ€è¦è¿ç»­è¯»å–çš„æ—¶å€™ï¼Œå°±å¿…é¡»ç­‰å¾…å†…å­˜çš„æ¢å¤æ—¶é—´ã€‚æ‰€ä»¥å¯ä»¥ç”¨ä¸Šå¤šä½“å¹¶è¡Œå­˜å‚¨å™¨</p><p>å¤šä½“å¹¶è¡Œå­˜å‚¨å™¨å¯ä»¥ç†è§£ä¸ºä½¿ç”¨äº†å¤šä¸ªå­˜å‚¨ä½“ï¼ˆæ¯ä¸ªå†…å­˜æ¡å¤§å°ä¸€è‡´ï¼Œ<strong>å‡è®¾æˆ‘ä»¬ä½¿ç”¨å››ä¸ªå­˜å‚¨ä½“</strong>ï¼‰</p><p>CPUè®¿å­˜çš„æ—¶å€™ï¼Œä¸€å®šéœ€è¦ä¸€ä¸ªåœ°å€ã€‚æœ‰ä»¥ä¸‹ä¸¤ç§ç¼–å€æ¨¡å¼</p><ul><li><p>é«˜ä½äº¤å‰ç¼–å€çš„å¤šä½“å­˜å‚¨å™¨</p><p><img src="https://s2.loli.net/2022/05/14/lQFVykqaizZ2C78.png" alt="é«˜ä½å¤šä½“å¹¶è¡Œå­˜å‚¨å™¨åŸç†å›¾"></p><p>å‡è®¾è¯´æˆ‘ä»¬ç”¨çš„å…«ä½åœ°å€ï¼Œé‚£æˆ‘ä»¬å°±ä¼šç”¨<strong>æœ€é«˜ä½</strong>æ¥åŒºåˆ†æˆ‘å­˜åœ¨ç¬¬å‡ ä¸ªå­˜å‚¨ä½“é‡Œï¼ˆæ¯”å¦‚æœ€é«˜ä¸¤æ¯”ç‰¹ä½å…±æœ‰å››ç§çŠ¶æ€ï¼‰</p><ul><li>çœ‹å›¾å¯çŸ¥ï¼Œé«˜ä½å†…æ¨¡å—åœ°å€æ˜¯è¿ç»­çš„ï¼Œå­˜å–æ–¹å¼ä»ç„¶æ˜¯ä¸²è¡Œå­˜å‚¨ã€‚<strong>ä»ç„¶æ˜¯é¡ºåºå­˜å‚¨å™¨</strong></li><li>é«˜ä½äº¤å‰çš„æ–¹å¼ä¸‹ï¼Œæ€»æ˜¯æŠŠä½ä½çš„ä½“å†…åœ°å€é€åˆ°ç”±é«˜ä½ä½“å·ç¡®å®šçš„æ¨¡å—å†…è¿›è¡Œè¯‘ç ã€‚</li><li>è®¿é—®ä¸€ä¸ªè¿ç»­ä¸»å­˜å—æ—¶ï¼Œæ€»æ˜¯å…ˆåœ¨ä¸€ä¸ªæ¨¡å—å†…è¿›è¡Œè®¿é—®ï¼Œç­‰åˆ°è¿™ä¸ªæ¨¡å—è®¿é—®ç»“æŸä¹‹åæ‰è½¬åˆ°ä¸‹ä¸€ä¸ªæ¨¡å—è¿›è¡Œè®¿é—®ã€‚</li><li>CPUæ€»æ˜¯æŒ‰é¡ºåºè®¿é—®å­˜å‚¨æ¨¡å—ï¼Œå„ä¸ªæ¨¡å—ä¸èƒ½è¢«å¹¶è¡Œè®¿é—®ï¼Œæ‰€ä»¥ä¸èƒ½æé«˜å­˜å‚¨å™¨çš„ååç‡</li></ul></li><li><p>ä½ä½äº¤å‰ç¼–å€çš„å¤šä½“å­˜å‚¨å™¨</p><p><img src="https://s2.loli.net/2022/05/14/SN7A3Kc5rlZDvXW.png" alt="ä½ä½å¤šä½“å¹¶è¡Œå­˜å‚¨å™¨åŸç†å›¾"></p><p>å‡è®¾è¯´æˆ‘ä»¬ç”¨çš„å…«ä½åœ°å€ï¼Œé‚£æˆ‘ä»¬å°±ä¼šç”¨<strong>æœ€ä½ä½</strong>æ¥åŒºåˆ†æˆ‘å­˜åœ¨ç¬¬å‡ ä¸ªå­˜å‚¨ä½“é‡Œï¼ˆæ¯”å¦‚æœ€ä½ä¸¤æ¯”ç‰¹ä½å…±æœ‰å››ç§çŠ¶æ€ï¼‰</p><ul><li><p>çœ‹å›¾å¯çŸ¥ï¼Œæ¯ä¸ªæ¨¡å—æŒ‰ç…§ â€œæ¨¡mâ€ äº¤å‰ç¼–å€ï¼Œ<strong>æ¨¡å—å· = å•å…ƒåœ°å€ % m</strong>ã€‚</p></li><li><p>ä½ä½äº¤å‰æ–¹å¼ä¸‹ï¼Œæ€»æ˜¯æŠŠé«˜ä½çš„ä½“å†…åœ°å€é€åˆ°ç”±ä½ä½ä½“å·ç¡®å®šçš„æ¨¡å—å†…è¿›è¡Œè¯‘ç ã€‚ç¨‹åºè¿ç»­æ”¾åœ¨ç›¸é‚»çš„æ¨¡å—ä¸­ï¼Œå› æ­¤ç§°è¿™ç§ç¼–å€æ–¹å¼çš„å­˜å‚¨å™¨å«<strong>äº¤å‰å­˜å‚¨å™¨</strong>ã€‚å¯ä»¥åœ¨ä¸æ”¹å˜æ¯ä¸ªæ¨¡å—å­˜å‚¨å‘¨æœŸçš„å‰æä¸‹ï¼Œä½¿ç”¨æµæ°´çº¿å¹¶è¡Œå­˜å–ï¼Œæé«˜å­˜å‚¨å™¨çš„å¸¦å®½ã€‚</p><ul><li>å¦‚æœå•æ¨¡å—å­˜å–å‘¨æœŸä¸ºTï¼Œæ€»çº¿ä¼ é€å‘¨æœŸä¸ºrï¼Œå®ç°æµæ°´çº¿å­˜å‚¨ï¼Œ<strong>å­˜å‚¨å™¨äº¤å‰æ¨¡å—æ•°m(äº¤å‰å­˜å‚¨åº¦)  åº”è¯¥å¤§äºç­‰äº<code>T/r</code></strong>ã€‚ä»¥ä¿è¯å¯åŠ¨æŸä¸ªæ¨¡å—åçš„<code>m*r</code>çš„æ—¶é—´å†…è¦å†æ¬¡å¯åŠ¨æ¨¡å—çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¨¡å—å·²ç»å­˜å–å®Œæ¯•ï¼Œå¹¶å·²ç»åº¦è¿‡äº†å†…å­˜çš„æ¢å¤æ—¶é—´ã€‚</li><li>å­˜å–å‘¨æœŸä¸ºTï¼Œå­˜å–æ—¶é—´ä¸ºrï¼Œä¸ºäº†æµæ°´çº¿ä¸é—´æ–­ï¼Œä¿è¯æ¨¡å—æ•°é‡ä¸º<code>m&gt;=T/r</code>ã€‚</li></ul></li><li><p>è¿™æ ·ä¸‹æ¥ï¼Œè¿ç»­å­˜å–mä¸ªå­—æ‰€éœ€è¦çš„æ—¶é—´ä¸º:<br>$$<br>t1 = T + (m-1)r<br>$$</p></li><li><p>è€Œé¡ºåºæ–¹å¼è¿ç»­è¯»å–mä¸ªå­—æ‰€éœ€è¦çš„æ—¶é—´ä¸ºï¼š<br>$$<br>t2 = mT<br>$$</p></li><li><p>ç»¼ä¸Šæ‰€è¿°ï¼Œä½ä½äº¤å‰å­˜å‚¨å™¨çš„å¸¦å®½å¾—åˆ°äº†å¤§å¹…åº¦çš„æé«˜ï¼ˆå¦‚ä¸‹å›¾ï¼‰</p></li></ul></li></ul><p><img src="https://s2.loli.net/2022/05/14/Wfg1po5J3sv67Od.png" alt="ä½ä½äº¤å‰ç¼–å€ç”˜ç‰¹å›¾"></p><p>ç±»ä¼¼æ•°ç»„ç­‰ç­‰æ•°æ®ï¼Œæˆ–è€…ç¼–å†™çš„æŒ‡ä»¤ä»£ç ï¼Œå…¶æ•°æ®å­˜æ”¾æ–¹å¼å°±æ˜¯è¿ç»­çš„å­˜å‚¨ï¼ˆé™¤äº†æŒ‡ä»¤è·³è½¬éƒ¨åˆ†ï¼‰ã€‚æ‰€ä»¥è¿ç»­å­˜å–çš„é€Ÿåº¦æå‡å¯¹äºè®¡ç®—æœºæ¥è¯´å¾ˆæœ‰æ„ä¹‰ã€‚</p><h3 id="6-3-å•ä½“å¤šå­—å­˜å‚¨å™¨">6.3 å•ä½“å¤šå­—å­˜å‚¨å™¨</h3><p>å¤šä½“å¹¶è¡Œå­˜å‚¨å™¨å°±æ˜¯ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰ç›¸åŒçš„å®¹é‡å’Œå­˜å‚¨é€Ÿåº¦ï¼Œæ˜¯äº’ç›¸ç‹¬ç«‹çš„ã€‚CPUå¯ä»¥è‡ªç”±é€‰æ‹©åœ¨å“ªä¸ªå­˜å‚¨ä½“çš„å“ªä¸ªä½ç½®è¯»å–æ•°æ®ã€‚</p><p>å„ä¸ªæ¨¡å—éƒ½æœ‰ç‹¬ç«‹çš„è¯»å†™æ§åˆ¶ç”µè·¯ã€åœ°å€å¯„å­˜å™¨å’Œæ•°æ®å¯„å­˜å™¨ç­‰ç­‰ã€‚å¯ä»¥<strong>å¹¶è¡Œã€äº¤å‰</strong>åœ°å·¥ä½œã€‚</p><p>å•ä½“å¤šå­—å­˜å‚¨å™¨ç›¸å½“äºåšäº†ä¸€ä¸ªåˆå¹¶ã€‚å…±ç”¨ä¸€å¥—è¯»å†™æ§åˆ¶ç”µè·¯ã€åœ°å€æ§åˆ¶å™¨å’Œæ•°æ®å¯„å­˜å™¨ï¼ˆç±»ä¼¼ä½æ‹“å±•ï¼‰ã€‚</p><p><img src="https://s2.loli.net/2022/05/15/BsiGhIDR1wzo8yc.png" alt=""></p><p>æ¯æ¬¡å¯ä»¥è¯»å–ä¸€æ•´è¡Œçš„æ•°æ®</p><p>è®¾æ¯ä¸ªå­˜å‚¨å•å…ƒï¼Œå­˜å‚¨mä¸ªå­—</p><p>æ€»çº¿å®½åº¦ä¹Ÿä¸ºmä¸ªå­—</p><p>ä¸€æ¬¡å¹¶è¡Œå³å¯è¯»å‡ºmä¸ªå­—</p><p>ç¼ºç‚¹ï¼šæŒ‡ä»¤å’Œæ•°æ®åœ¨ä¸»å­˜å†…å¿…é¡»æ˜¯è¿ç»­å­˜æ”¾çš„ã€‚ä¸€æ—¦é‡åˆ°è½¬ç§»æŒ‡ä»¤æˆ–è€…æ“ä½œæ•°ä¸èƒ½è¿ç»­å­˜æ”¾ï¼Œæé€Ÿçš„æ•ˆæœå°±ä¸æ˜æ˜¾äº†ã€‚</p>    <style>    #refplus, #refplus li{         padding:0;        margin:0;        list-style:none;    }ï¼›    </style>    <script src="https://unpkg.com/@popperjs/core@2"></script>    <script src="https://unpkg.com/tippy.js@6"></script>    <script>    document.querySelectorAll(".refplus-num").forEach((ref) => {        let refid = ref.firstChild.href.replace(location.origin+location.pathname,'');        let refel = document.querySelector(refid);        let refnum = refel.dataset.num;        let ref_content = refel.innerText.replace(`[${refnum}]`,'');        tippy(ref, {            content: ref_content,        });    });    </script>    ]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç»„æˆ </tag>
            
            <tag> è®¡ç®—æœºçŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux Aptè¿è¡ŒæŠ¥é”™æ’æŸ¥</title>
      <link href="/2022/05/12/error-linux-Unable-to-acquire-the-dpkg-frontend-lock/"/>
      <url>/2022/05/12/error-linux-Unable-to-acquire-the-dpkg-frontend-lock/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>linuxä¸­å¯¹äºUnable to acquire the dpkg frontend lockçš„è§£å†³æ–¹æ³•</h1><p>è¿è¡Œç¯å¢ƒï¼šUbuntu 18.04<br>é—®é¢˜æè¿°ï¼šåœ¨åˆ«äººé…ç½®å¥½çš„Ubuntuä¸‹å®‰è£…è½¯ä»¶æ—¶ï¼Œè¿›è¡Œ<code>apt-get</code>æ“ä½œï¼Œå‡ºç°äº†å¦‚ä¸‹æŠ¥é”™ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">E: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarily unavailable)E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è§£å†³åŠæ³•:</p><h2 id="ä¸€ã€ç»ˆæ­¢å ç”¨çš„è¿›ç¨‹">ä¸€ã€ç»ˆæ­¢å ç”¨çš„è¿›ç¨‹</h2><p>å¯¼è‡´çš„åŸå› ï¼š<strong>è¿›ç¨‹ä¸­å­˜åœ¨ä¸aptç›¸å…³çš„è¿è¡Œä¸­çš„è¿›ç¨‹</strong></p><ul><li>æ£€æŸ¥æ˜¯å¦åœ¨è¿è¡Œapt,apt-getç›¸å…³çš„è¿›ç¨‹</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ps aux | grep -i apt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>å¦‚æœå­˜åœ¨ä¸aptç›¸å…³çš„æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œkillæ‰å¯¹åº”çš„è¿›ç¨‹IDï¼›</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo kill -9 &lt;process id&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>â€‹æˆ–ä½¿ç”¨ç®€å•ç²—æš´çš„æ–¹å¼:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo killall apt apt-get <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="äºŒã€åˆ é™¤lockfileå¹¶é…ç½®dpkg">äºŒã€åˆ é™¤lockfileå¹¶é…ç½®dpkg</h2><p>é—®é¢˜ç°è±¡ï¼š<strong>è¿›ç¨‹åˆ—è¡¨ä¸­å·²ç»æ²¡æœ‰ä¸(apt/apt-get)ç›¸å…³çš„è¿›ç¨‹åœ¨è¿è¡Œï¼Œä½†ä¾ç„¶æŠ¥é”™</strong></p><p>å¯¼è‡´çš„åŸå› ï¼šlock fileæœªè¢«æ­£å¸¸åˆ é™¤</p><ul><li>lock fileç”¨äºé˜²æ­¢ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ä½¿ç”¨ç›¸åŒçš„æ•°æ®ã€‚ å½“è¿è¡ŒaptåŠå…¶ç›¸å…³æŒ‡ä»¤æ—¶ï¼Œå®ƒä¼šåœ¨å‡ ä¸ªåœ°æ–¹åˆ›å»ºlock filesã€‚<br>å½“å‰ä¸€ä¸ªaptå‘½ä»¤æœªæ­£ç¡®ç»ˆæ­¢æ—¶ï¼Œlock fileå°±ä¸ä¼šè¢«åˆ é™¤ã€‚å› æ­¤å®ƒä»¬ä¼šé˜»æ­¢ä»»ä½•æ–°çš„apt / apt-getå‘½ä»¤å®ä¾‹ï¼Œ</li><li>æ¯”å¦‚æ­£åœ¨æ‰§è¡Œ<code>apt-get update</code>ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç›´æ¥ctrl+cå–æ¶ˆäº†è¯¥æ“ä½œï¼Œå¾ˆæœ‰å¯èƒ½å°±ä¼šé€ æˆè¿™ç§æƒ…å†µã€‚</li><li>è¦è§£å†³æ­¤é—®é¢˜ï¼Œé¦–å…ˆè¦åˆ é™¤lock fileã€‚<br>ä½¿ç”¨<code>lsof</code>å‘½ä»¤è·å–æŒæœ‰lock fileçš„è¿›ç¨‹çš„è¿›ç¨‹ID,ä¾æ¬¡è¿è¡Œå¦‚ä¸‹å‘½ä»¤:</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">lsof /var/lib/dpkg/locklsof /var/lib/apt/lists/locklsof /var/cache/apt/archives/lock<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯</p><p>ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œç»“æœå¦‚æœæ— è¿”å›ï¼Œè¯´æ˜æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</p><p>å¦‚æœè¿”å›äº†ç›¸åº”çš„è¿›ç¨‹ï¼Œå°±éœ€è¦killæ‰ã€‚</p><p>åˆ é™¤æ‰€æœ‰çš„lock file</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo rm /var/lib/apt/lists/locksudo rm /var/cache/apt/archives/locksudo rm /var/lib/dpkg/lock<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æœ€åé‡æ–°é…ç½®ä¸€ä¸‹dpkgï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo dpkg --configure -a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœä¸Šè¿°å‘½ä»¤ä¸å‡ºä»»ä½•é”™è¯¯ï¼Œå°±ä¸‡äº‹å¤§å‰äº†ã€‚</p><hr><p>ä½†æ˜¯æœ‰æ—¶å€™ï¼Œæ‰§è¡Œé…ç½®å‘½ä»¤æ—¶å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">dpkg: error: dpkg frontend is locked by another process<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ—¶éœ€è¦æ‰¾å‡ºæ­£åœ¨é”å®šlock fileçš„è¿›ç¨‹:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">lsof /var/lib/dpkg/lock-frontend<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>killæ‰è¾“å‡ºçš„è¿›ç¨‹ï¼ˆå¦‚æœè¾“å‡ºä¸ºç©ºåˆ™å¿½ç•¥ï¼‰</p><pre class="line-numbers language-none"><code class="language-none">sudo kill -9 &lt;process id&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ é™¤lock fileå¹¶é‡æ–°é…ç½®dpkg:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo rm /var/lib/dpkg/lock-frontendsudo dpkg --configure -a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ¥é”™æ’æŸ¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç»„æˆæ¦‚è¿°ï¼ˆ1.æ¦‚è¿°ï¼‰</title>
      <link href="/2022/04/19/computer_organization1/"/>
      <url>/2022/04/19/computer_organization1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>è®¡ç®—æœºç»„æˆåŸç†â€”â€”ç¬¬ä¸€ç« </h1><h2 id="1-1-è®¡ç®—æœºä¸æ¡ˆä»¶çš„æ›´æ–°æ¢ä»£">1.1 è®¡ç®—æœºä¸æ¡ˆä»¶çš„æ›´æ–°æ¢ä»£</h2><ol><li><strong>æ‘©å°”å®šå¾‹</strong>ï¼šå½“ä»·æ ¼ä¸å˜ï¼Œé›†æˆç”µè·¯ä¸Šå¯å®¹çº³çš„æ™¶ä½“ç®¡çš„æ•°ç›®ï¼Œçº¦æ¯éš”18ä¸ªæœˆä¾¿ä¼šå¢åŠ ä¸€å€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç°åœ¨å’Œ18ä¸ªæœˆåèŠ±åŒæ ·ä»·é’±ä¹°åˆ°çš„CPUï¼Œåè€…çš„æ€§èƒ½æ˜¯å‰è€…çš„2å€ã€‚</li><li><strong>åŠå¯¼ä½“å­˜å‚¨å™¨çš„å‘å±•</strong>ï¼š1970å¹´ï¼Œä»™ç«¥åŠå¯¼ä½“å…¬å¸äº§å‡ºç¬¬ä¸€ä¸ªè¾ƒå¤§å®¹é‡çš„åŠå¯¼ä½“å­˜å‚¨å™¨ã€‚</li><li><strong>å¾®å¤„ç†æœºæœºå™¨å­—é•¿</strong>ï¼š32ä½å’Œ64ä½æŒ‡çš„æ˜¯æœºå™¨å­—é•¿ã€‚æŒ‡<strong>è®¡ç®—æœºè¿›è¡Œä¸€æ¬¡æ•´æ•°è®¡ç®—æ‰€èƒ½å¤„ç†çš„äºŒè¿›åˆ¶æ•°æ®çš„ä½æ•°</strong>ã€‚</li><li>*ç¡¬ä»¶å‘å±•ï¼šé€»è¾‘å…ƒä»¶ä»ç”µå­ç®¡ -&gt; æ™¶ä½“ç®¡ -&gt; ä¸­å°è§„æ¨¡é›†æˆç”µè·¯ -&gt; å¤§è§„æ¨¡ã€è¶…å¤§è§„æ¨¡é›†æˆç”µè·¯</li></ol><h2 id="1-2-è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶">1.2 è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶</h2><ul><li>ç³»ç»Ÿè½¯ä»¶ï¼ˆç®¡ç†æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿï¼Œå¦‚æ“ä½œç³»ç»Ÿ<strong>OS</strong>ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ<strong>DBMS</strong>ã€æ ‡å‡†ç¨‹åºåº“ã€ç½‘ç»œè½¯ä»¶ã€æœåŠ¡ç¨‹åºï¼‰</li><li>åº”ç”¨è½¯ä»¶ï¼ˆæŒ‰ä»»åŠ¡éœ€è¦ç¼–å†™çš„ç¨‹åºï¼‰</li><li>ç¡¬ä»¶æ˜¯è®¡ç®—æœºç‰©ç†åŸºç¡€ã€‚å†³å®šäº†è®¡ç®—æœºçš„ â€œå¤©èŠ±æ¿â€ ã€â€œç“¶é¢ˆâ€åœ¨å“ªï¼Œè½¯ä»¶å†³å®šäº†æˆ‘ä»¬å¯ä»¥æŠŠç¡¬ä»¶æ€§èƒ½å‘æŒ¥åˆ°ä»€ä¹ˆç¨‹åº¦ã€‚</li></ul><h3 id="1-2-1-è®¡ç®—æœºç¡¬ä»¶">1.2.1 è®¡ç®—æœºç¡¬ä»¶</h3><h4 id="1-å†¯Â·è¯ºä¾æ›¼æœºçš„åŸºæœ¬æ€æƒ³">1. å†¯Â·è¯ºä¾æ›¼æœºçš„åŸºæœ¬æ€æƒ³</h4><p>å†¯Â·è¯ºä¾æ›¼åœ¨ç ”ç©¶<strong>EDVAC</strong>åŠæ—¶æå‡ºäº†â€œå­˜å‚¨ç¨‹åºâ€çš„æ¦‚å¿µã€‚ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>é‡‡ç”¨<strong>å­˜å‚¨ç¨‹åº</strong>çš„ç»“æ„ï¼Œå°†æŒ‡ä»¤ä»¥äºŒè¿›åˆ¶ä»£ç çš„å½¢å¼ï¼Œäº‹å…ˆè¾“å…¥è®¡ç®—æœºçš„ä¸»å‚¨å­˜å™¨ï¼Œç„¶åæŒ‰å…¶åœ¨å‚¨å­˜å™¨ä¸­çš„é¦–åœ°å€æ‰§è¡Œç¨‹åºçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œä»¥åå°±æŒ‰è¯¥ç¨‹åºçš„è§„å®šé¡ºåºæ‰§è¡Œå…¶ä»–æŒ‡ä»¤ï¼Œç›´è‡³ç¨‹åºæ‰§è¡Œç»“æŸã€‚</li><li>è®¡ç®—æœºç¡¬ä»¶ç”±è¿ç®—å™¨ã€å­˜å‚¨å™¨ã€æ§åˆ¶å™¨ã€è¾“å…¥è®¾å¤‡ã€è¾“å‡ºè®¾å¤‡ç»„æˆ</li><li>æŒ‡ä»¤å’Œæ•°æ®ä»¥åŒç­‰åœ°ä½å­˜å‚¨åœ¨å­˜å‚¨å™¨ä¸­</li></ul><p><img src="https://s2.loli.net/2022/04/14/IOwrRx7jsXD3u29.png" alt="Schematic_diagram_of_von_Neumann_machine"></p><p>å›¾ä¸­å®çº¿è¡¨ç¤ºæ•°æ®ä¼ è¾“ï¼Œè™šçº¿è¡¨ç¤ºæ§åˆ¶çº¿ä»¥åŠåé¦ˆçº¿</p><ul><li><p>è¾“å…¥è®¾å¤‡ï¼šå°†ä¿¡æ¯è½¬æˆåŠå…¶èƒ½è¯†åˆ«çš„å½¢å¼</p></li><li><p>å­˜å‚¨å™¨ï¼šå­˜æ•°æ®å’Œç¨‹åºã€‚å­˜å‚¨å™¨è¿˜åˆ†ä¸º<strong>ä¸»å­˜å’Œè¾…å­˜</strong></p><ul><li>ä¸»å­˜ï¼šå†…å­˜</li><li>è¾…å­˜ï¼šæœºæ¢°ç¡¬ç›˜ã€å›ºæ€ç¡¬ç›˜ç­‰ç­‰ã€‚å¹³æ—¶åº”ç”¨ç¨‹å‹‹å­˜åœ¨è¾…å­˜ä¸­ï¼Œéœ€è¦çš„æ—¶å€™æ‰è¯»å…¥ä¸»å­˜ï¼Œæ‰€ä»¥è¾…å­˜ä¹Ÿç®—æ˜¯ä¸€ç§I/Oè®¾å¤‡</li></ul></li><li><p>è¿ç®—å™¨ï¼šaluç®—æ•°è¿ç®—å’Œé€»è¾‘è¿ç®—</p></li><li><p>è¾“å‡ºè®¾å¤‡ï¼šå°†ç»“æœè½¬æˆäººä»¬ç†Ÿæ‚‰çš„å½¢å¼</p></li><li><p>æ§åˆ¶å™¨ï¼šè§£ææŒ‡ä»¤ &amp; æŒ‡æŒ¥ç¨‹åºè¿è¡Œ</p></li><li><p>ä»¥ä¸Šäº”ä¸ªè®¾å¤‡æ€»å’Œï¼šç¡¬ä»¶</p></li><li><p>æ•°æ®ç¨‹åºï¼šè½¯ä»¶</p></li></ul><p>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œè½¯ä»¶å’Œç¡¬ä»¶åœ¨é€»è¾‘ä¸Šæ˜¯ç­‰æ•ˆçš„</p><ul><li>egï¼šä¹˜æ³•è¿ç®—ï¼Œå¯ä»¥è®¾è®¡ä¸“é—¨çš„ç¡¬ä»¶ç”µè·¯å»å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨è½¯ä»¶æ‰§è¡Œå¤šæ¬¡åŠ æ³•æ¥å®ç°</li></ul><h4 id="2-å†¯Â·è¯ºä¾æ›¼æœºçš„ç‰¹ç‚¹">2. å†¯Â·è¯ºä¾æ›¼æœºçš„ç‰¹ç‚¹</h4><ul><li><p>è®¡ç®—æœºæœ‰äº”å¤§éƒ¨ä»¶ç»„æˆï¼ˆè¾“å…¥è¾“å‡ºè®¾å¤‡ç»Ÿç§°<strong>I/Oè®¾å¤‡ï¼ˆinput &amp; outputï¼‰</strong>ï¼‰</p></li><li><p>æŒ‡ä»¤å’Œæ•°æ®ï¼Œä»¥åŒç­‰åœ°ä½å­˜äºå­˜å‚¨å™¨ï¼Œå¯ä»¥ç”¨åœ°å€å»å¯»è®¿</p></li><li><p>æŒ‡ä»¤å’Œæ•°æ®ç”¨äºŒè¿›åˆ¶è¡¨ç¤º</p></li><li><p>æŒ‡ä»¤æœ‰æ“ä½œç å’Œåœ°å€ç ç»„æˆ</p></li><li><p>å¯ä»¥å­˜å‚¨ç¨‹åº</p></li><li><p>ä»¥è¿ç®—å™¨ä¸ºä¸­å¿ƒï¼ˆè¿™æ ·ä¼šå¯¼è‡´å„ç§æ•°æ®ä¼ è¾“æ•ˆç‡ä½ä¸‹ï¼Œæ‰€ä»¥çº¿ä»£è®¡ç®—æœºä»¥å­˜å‚¨å™¨ä¸ºä¸­å¿ƒï¼Œä»¥ä¸‹æ˜¯åŸç†å›¾ï¼‰</p></li></ul><p><img src="https://s2.loli.net/2022/04/14/4VwFux6RtiYblCj.png" alt="Schematic_diagram_of_modern_computer"></p><p>ç”±äº<strong>è¿ç®—å™¨</strong>å’Œ<strong>æ§åˆ¶å™¨</strong>ä¹‹é—´é€»è¾‘å…³ç³»ååˆ†ç´§å¯†ï¼Œæ‰€ä»¥åœ¨å¤§è§„æ¨¡é›†æˆç”µè·¯å·¥è‰ºå‡ºç°ä¹‹åï¼Œè¿™ä¸¤ä¸ªéƒ¨ä»¶é€šå¸¸æ˜¯æ•´åˆåœ¨ä¸€ä¸ªèŠ¯ç‰‡ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨çš„<strong>CPU</strong>ã€‚ä»¥ä¸‹æ˜¯ç®€åŒ–åŸç†å›¾ã€‚</p><p><img src="https://s2.loli.net/2022/04/14/R9xEMKVUvYGLz8h.png" alt="Simplified_schematic_d_agram_of_computer"></p><p><strong>åœ¨è®¡ç®—æœºç»„æˆåŸç†ä¸­ï¼ŒCPUå’Œä¸»å­˜å‚¨å™¨ç»Ÿç§°ä¸»æœºï¼Œè€Œä¸”å¹¶ä¸æ˜¯æŒ‡å¹³æ—¶æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ç”µè„‘ä¸»æœº</strong></p><pre class="mermaid">graph LRA(ç¡¬ä»¶) --&gt;B(ä¸»æœº)B --&gt;B1(CPU)B --&gt;B2(ä¸»å­˜)A --&gt;C(IOè®¾å¤‡)C --&gt;C1(è¾…å­˜)C --&gt;C2(è¾“å…¥è®¾å¤‡)C --&gt;C3(è¾“å‡ºè®¾å¤‡)B2 --&gt;D(å­˜å‚¨å™¨)C1 --&gt;DB1 --&gt;E(è¿ç®—å™¨)B1 --&gt;F(æ§åˆ¶å™¨)</pre><h2 id="1-3-ç¡¬ä»¶å„ä¸ªéƒ¨ä»¶">1.3 ç¡¬ä»¶å„ä¸ªéƒ¨ä»¶</h2><h3 id="1-ä¸»å­˜å‚¨å™¨">1.ä¸»å­˜å‚¨å™¨</h3><p>MARï¼šåœ°å€å¯„å­˜å™¨</p><p>MDRï¼šæ•°æ®å¯„å­˜å™¨</p><p>çº¿ä»£è®¡ç®—æœºé€šå¸¸æŠŠMAR&amp;MDRé›†æˆåœ¨CPUå†…</p><pre class="mermaid">graph TBsubgraph memoryA[å­˜å‚¨ä½“] subgraph registerMAR(MARåœ°å€å¯„å­˜å™¨)MDR(MDRæ•°æ®å¯„å­˜å™¨)endend</pre><p>åœ¨MARç»™ä¸ªåœ°å€ï¼ŒMARå»å­˜å‚¨å™¨å¯»æ‰¾å¯¹åº”çš„æ•°æ®ï¼Œç„¶åå­˜æ”¾è‡³MDRã€‚å¯ä»¥ç±»æ¯”ä¸ºä¸‹å›¾ï¼š</p><pre class="mermaid">graph TBsubgraph memoryA[ä»“åº“,æœºå™¨äººå»æ‰¾è´§ç‰©] subgraph registerMAR(MARæœºå™¨äºº,ç»™æœºå™¨äººåœ°å€) MDR(MDRæŸœå°,æœºå™¨äººç»™ä½ è´§ç‰©)endMAR --&gt;AA --&gt;MDRend</pre><p>å…¶ä¸­ï¼Œä½ è¦å»å–è¿™ä¸ªè´§ç‰©ï¼Œå°±å¥½æ¯”CPUè¦å»å–å­˜å‚¨å™¨çš„æ•°æ®ï¼Œä»è€Œå®Œæˆæ•´ä¸ªæ•°æ®è®¿é—®è¿‡ç¨‹ã€‚</p><p>å¦‚æœè¦å­˜æ•°æ®ï¼Œå°±æŠŠè¦å­˜çš„æ•°æ®æ”¾åœ¨MDRï¼Œå¯¹åº”åœ°å€ç»™MARï¼Œç„¶åé€šè¿‡æ€»çº¿æŠŠæ•°æ®å­˜è¿›å­˜å‚¨ä½“ï¼ˆä»“åº“ï¼‰ã€‚</p><ul><li><p>å­˜å‚¨ä½“</p><p>æœ¬èº«ä¼šè¢«åˆ†ä¸ºä¸€ä¸ªä¸ªçš„å­˜å‚¨å•å…ƒï¼ŒæŒ‰åœ°å€å­˜å‚¨ã€‚</p><ul><li><p>å­˜å‚¨å•å…ƒï¼šæ¯ä¸ªå­˜å‚¨å•å…ƒå­˜æ”¾ä¸€ä¸²äºŒè¿›åˆ¶ä»£ç ï¼Œæ¯ä¸ªåœ°å€å¯¹åº”ä¸€ä¸ªå­˜å‚¨å•å…ƒã€‚</p></li><li><p>å­˜å‚¨è‡ªï¼ˆwordï¼‰ï¼šå­˜å‚¨å•å…ƒä¸­äºŒè¿›åˆ¶ä»£ç çš„ç»„åˆ</p></li><li><p>å­˜å‚¨å­—é•¿ï¼šå­˜å‚¨å•å…ƒä¸­äºŒè¿›åˆ¶ä»£ç çš„ä½æ•°ï¼Œé€šå¸¸æ˜¯8bitçš„æ•´æ•°å€</p></li><li><p>*å­˜å‚¨å…ƒï¼šå­˜äºŒè¿›åˆ¶çš„ç”µå®¹ï¼Œæ¯ä¸ªå­˜1bit</p></li><li><p>MARä½æ•°åæ˜ å­˜å‚¨å•å…ƒçš„ä¸ªæ•°</p></li></ul></li><li><p>egï¼šMAR = 8 ä½ -&gt; æ€»å…±æœ‰ 2çš„8æ¬¡æ–¹ ä¸ªå­˜å‚¨å•å…ƒ</p><ul><li><p>MARä½æ•° = å­˜å‚¨å­—é•¿</p></li><li><p>egï¼šMDR = 32ä½ -&gt; æ¯ä¸ªå­˜å‚¨å•å…ƒå¯å­˜æ”¾32bitï¼Œä¸€ä¸ªå­— = 32 bit</p></li><li><p>å­—ï¼ˆwordï¼‰å’Œå­—èŠ‚ï¼ˆbyteï¼‰</p><p>ä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰= 8 bit</p><p>1B = ä¸€ä¸ªå­—èŠ‚ï¼Œ1b = 1ä¸ªbit</p></li></ul></li></ul><h3 id="2-è¿ç®—å™¨">2. è¿ç®—å™¨</h3><p>ç”¨äºå®ç°ç®—æœ¯è¿ç®—ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰å’Œé€»è¾‘è¿ç®—ï¼ˆä¸æˆ–éï¼‰</p><p>ACC: ç´¯åŠ å™¨ï¼Œç”¨æ¥å­˜æ”¾æ“ä½œæ•° / è¿ç®—ç»“æœ</p><p>MQ: ä¹˜å•†å¯„å­˜å™¨ï¼Œæƒ©å¤„è¿ç®—ç”¨æ¥å­˜æ”¾æ“ä½œæ•° / è¿ç®—ç»“æœ</p><p>x: é€šç”¨çš„ æ“ä½œæ•°å¯„å­˜å™¨ï¼Œå­˜æ”¾æ“ä½œæ•°</p><p>ALU: ç®—æœ¯é€»è¾‘å•å…ƒï¼Œå®ç°ç®—æœ¯è¿ç®—å’Œé€»è¾‘è¿ç®—</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">åŠ </th><th style="text-align:center">å‡</th><th style="text-align:center">ä¹˜</th><th style="text-align:center">é™¤</th></tr></thead><tbody><tr><td style="text-align:center">ACC</td><td style="text-align:center">è¢«åŠ æ•°ã€å’Œ</td><td style="text-align:center">è¢«å‡æ•°ã€å·®</td><td style="text-align:center">ä¹˜ç§¯é«˜ä½</td><td style="text-align:center">è¢«é™¤æ•°ã€ä½™æ•°</td></tr><tr><td style="text-align:center">MQ</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">æˆç†Ÿã€ä¹˜ç§¯ä½ä½</td><td style="text-align:center">å•†</td></tr><tr><td style="text-align:center">X</td><td style="text-align:center">åŠ æ•°</td><td style="text-align:center">å‡æ•°</td><td style="text-align:center">è¢«ä¹˜æ•°</td><td style="text-align:center">é™¤æ•°</td></tr></tbody></table><h3 id="3-æ§åˆ¶å™¨">3. æ§åˆ¶å™¨</h3><p>CUï¼š æ§åˆ¶å•å…ƒï¼Œåˆ†ææŒ‡ä»¤ï¼Œç»™å‡ºæ§åˆ¶ä¿¡å·</p><p>IRï¼šæŒ‡ä»¤å¯„å­˜å™¨ï¼Œå­˜æ”¾å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤</p><p>PCï¼šç¨‹åºè®¡æ•°å™¨ï¼Œå­˜æ”¾å“ä¸€è·³æŒ‡ä»¤çš„åœ°å€ï¼Œæœ‰è‡ªåŠ¨+1çš„åŠŸèƒ½</p><p>å®Œæˆä¸€æ¡æŒ‡ä»¤çš„æµç¨‹ï¼š</p><ul><li>å–æŒ‡ä»¤ï¼šPC</li><li>åˆ†ææŒ‡ä»¤ï¼šIR</li><li>æ‰§è¡ŒæŒ‡ä»¤ï¼šCU</li><li>æŒ‡ä»¤ï¼šæ“ä½œç  +åœ°å€ç </li><li>OP(IR)ï¼šå–æ“ä½œç </li><li>Ad(IR)ï¼šå–åœ°å€ç <ul><li>CPUåŒºåˆ†æŒ‡ä»¤å’Œæ•°æ®çš„ä¾æ®ï¼šæŒ‡ä»¤å‘¨æœŸçš„ä¸åŒé˜¶æ®µ</li></ul></li></ul><p><img src="https://s2.loli.net/2022/04/14/7s1virCB4IFyPWd.png" alt="schematic_diagram"></p><ul><li>è¿ç®—å™¨çš„æ ¸å¿ƒéƒ¨ä»¶æ˜¯ALUï¼Œæ§åˆ¶å™¨çš„æ ¸å¿ƒéƒ¨ä»¶æ˜¯CUã€‚</li></ul><h2 id="1-4-è®¡ç®—æœºç³»ç»Ÿå±‚æ¬¡ç»“æ„">1.4 è®¡ç®—æœºç³»ç»Ÿå±‚æ¬¡ç»“æ„</h2><p>ä»£ç éœ€è¦ç¿»è¯‘æˆæœºå™¨è¯­è¨€ï¼ŒCPUåœ¨æ‰§è¡Œè¿™äº›æœºå™¨æŒ‡ä»¤çš„æ—¶å€™ï¼Œè¿˜éœ€è¦ç»†åˆ†ä¸ºæ›´ç»†çš„å°æ­¥éª¤æ¥æ‰§è¡Œï¼Œè¿™äº›å°æ­¥éª¤ç§°ä¸º<strong>å¾®æŒ‡ä»¤/å¾®æ“ä½œ</strong>ã€‚</p><p>ç”¨å¾®ç¨‹åºæœºå™¨çš„å¾®æŒ‡ä»¤ï¼Œé€æ­¥è§£æä¼ ç»Ÿæœºå™¨çš„æ¯ä¸€æ¡æœºå™¨æŒ‡ä»¤ï¼Œå¹¶æ‰§è¡Œã€‚</p><p>è¿™æ ·è®¾è®¡ç¨‹åºæ˜¯å¾ˆä¸æ–¹ä¾¿çš„ï¼Œæ‰€ä»¥ç°åœ¨å‡ºç°äº†<strong>ç¬¦å·å¼ç¨‹åºè®¾è®¡è¯­è¨€</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>æ±‡ç¼–è¯­è¨€</strong>ã€‚è¯†åˆ«æ±‡ç¼–è¯­è¨€çš„æœºå™¨å«<strong>è™šæ‹Ÿæœºå™¨</strong>ã€‚ï¼ˆå› ä¸ºè™½ç„¶ç¨‹åºå‘˜çœ‹è¿™å°æœºå™¨ï¼Œå¥½åƒå¯ä»¥ç›´æ¥è¯†åˆ«æ±‡ç¼–è¯­è¨€ï¼Œä½†å…¶å®æœºå™¨ä¸å¯èƒ½çœŸçš„è¯†åˆ«å‡ºæ±‡ç¼–è¯­è¨€ï¼Œæ±‡ç¼–è¯­è¨€å¿…é¡»å…ˆç¿»è¯‘æˆæœºå™¨è¯­è¨€ã€‚æ‰å«è™šæ‹Ÿæœºå™¨ï¼‰</p><pre class="mermaid">graph TBsubgraph softwareM4(M4è™šæ‹Ÿæœºå™¨--é«˜çº§è¯­è¨€æœºå™¨)M3(M3è™šæ‹Ÿæœºå™¨--æ±‡ç¼–è¯­è¨€æœºå™¨)M2(M2è™šæ‹Ÿæœºå™¨--æ“ä½œç³»ç»Ÿæœºå™¨)endsubgraph hardwareM1(M1è™šæ‹Ÿæœºå™¨--æœºå™¨è¯­è¨€æœºå™¨)M0(M0è™šæ‹Ÿæœºå™¨--å¾®æŒ‡ä»¤ç³»ç»Ÿ)endM4 --&gt;M3M3 --&gt;M2 M2 --&gt;M1M1 --&gt;M0</pre><p>ç¿»è¯‘ç¨‹åºæœ‰ä»¥ä¸‹ä¸‰ç±»ï¼š</p><ul><li><p>æ±‡ç¼–ç¨‹åºï¼šæ±‡ç¼–å™¨</p></li><li><p>è§£é‡Šç¨‹åºï¼šè§£é‡Šå™¨</p></li><li><p>ç¼–è¯‘ç¨‹åºï¼šç¼–è¯‘å™¨</p></li><li><p>æ±‡ç¼–è¯­è¨€æ˜¯ä¸€ç§ â€œåŠ©è®°ç¬¦â€ï¼Œå¸®åŠ©äººç±»è®°å¿†ç”¨çš„ï¼Œæœ¬è´¨ä¸Šå’Œæœºå™¨è¯­è¨€æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p></li><li><p>é«˜çº§è¯­è¨€éœ€è¦å…ˆç»è¿‡æ±‡ç¼–ï¼Œå†ç¿»è¯‘æˆæœºå™¨è¯­è¨€ã€‚å¦‚æœä½¿ç”¨å…¶ä»–çš„åº“å‡½æ•°ï¼Œè¿˜éœ€è¦è¿›è¡Œé“¾æ¥ã€‚ä½¿ç”¨ç¼–è¯‘ç¨‹åº</p></li><li><p>æœ‰çš„é«˜çº§è¯­è¨€ä¸æ˜¯é€šè¿‡ç¼–è¯‘ç¨‹åºï¼Œè€Œæ˜¯ç”¨è§£é‡Šå™¨ï¼Œå°†ç¨‹åºç¿»è¯‘æˆä¸ä¹‹å¯¹ç­‰çš„æœºå™¨è¯­è¨€ã€‚å¾ˆå¤šè„šæœ¬ç±»çš„è¯­è¨€éƒ½æ˜¯ä½¿ç”¨è§£é‡Šå™¨ï¼Œpythonã€JavaScriptï¼Œshellç­‰ç­‰ã€‚</p></li><li><p>ç¼–è¯‘ç¨‹åºï¼šå°†é«˜çº§è¯­è¨€ç¼–å†™çš„æºç¨‹åºå…¨éƒ¨è¯­å¥ä¸€æ¬¡å…¨éƒ¨ç¿»è¯‘æˆæœºå™¨è¯­è¨€ï¼Œè€Œååœ¨æ‰§è¡Œæœºå™¨è¯­è¨€ç¨‹åºï¼ˆåªèƒ½ç¿»è¯‘ä¸€æ¬¡ï¼‰</p><p>ä¼šç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ <code>*.exe</code>ç¨‹åºç­‰ç­‰ã€‚</p></li><li><p>è§£é‡Šç¨‹åºï¼šå°†æºç¨‹åºçš„ä¸€æ¡è¯­å¥ç¿»è¯‘æˆå¯¹åº”äºæœºå™¨è¯­è¨€çš„è¯­å¥ï¼Œå¹¶ç«‹å³æ‰§è¡Œï¼Œç´§æ¥ç€å†ç¿»è¯‘ä¸‹ä¸€å¥ï¼ˆæ¯æ¬¡æ‰§è¡Œéƒ½éœ€è¦ç¿»è¯‘ï¼‰</p></li><li><p>ç¼–è¯‘å‹çš„æ‰§è¡Œæ•ˆç‡æ›´é«˜ä¸€äº›ï¼Œè§£é‡Šæ€§çš„æ‰§è¡Œæ•ˆç‡æ›´ä½ä¸€äº›ã€‚</p></li><li><p>ç¼–è¯‘ã€æ±‡ç¼–ã€è§£é‡Šç¨‹åºï¼Œå¯ç»Ÿç§°ä¸º <strong>ç¿»è¯‘ç¨‹åº</strong>ã€‚</p></li><li><p>*è®¡ç®—æœºä½“ç³»ç»“æ„å­¦ä¹ çš„æ˜¯ï¼šå¦‚ä½•è®¾è®¡ç¡¬ä»¶ä¸è½¯ä»¶ä¹‹é—´çš„æ¥å£</p><p>è®¡ç®—æœºç»„æˆåŸç†å­¦ä¹ çš„æ˜¯ï¼šå¦‚ä½•ç”¨ç¡¬ä»¶å®ç°æ‰€å®šä¹‰çš„æ¥å£</p></li></ul><h2 id="1-5-è®¡ç®—æœºæ€§èƒ½æŒ‡æ ‡">1.5 è®¡ç®—æœºæ€§èƒ½æŒ‡æ ‡</h2><h3 id="1-ä¸»å‚¨å­˜å™¨çš„æ€§èƒ½æŒ‡æ ‡">1 ä¸»å‚¨å­˜å™¨çš„æ€§èƒ½æŒ‡æ ‡</h3><ul><li><p><strong>MAR</strong>ä½æ•°åæ˜ <strong>å­˜å‚¨å•å…ƒ</strong>ï¼Œ<code>æœ€å¤š</code>æ”¯æŒçš„ä¸ªæ•°ï¼Œå¯æ”¯æŒ 2çš„MARæ¬¡æ–¹</p></li><li><p><strong>MDR</strong>ä½æ•°=å­˜å‚¨å­—é•¿=æ¯ä¸ªå­˜å‚¨å•å…ƒçš„å¤§å°</p></li><li><p><strong>æ€»å®¹é‡ = å­˜å‚¨å•å…ƒä¸ªæ•° * å­˜å‚¨å­—é•¿ bit = å­˜å‚¨å•å…ƒä¸ªæ•° *å­˜å‚¨å­—é•¿ / 8 Byte</strong>ï¼Œ<code>1 Byte = 8 bit</code></p><p>egï¼šMAR=32ä½ï¼ŒMDR=8ä½ï¼Œæ€»å®¹é‡ = 2^32 * 8 bit = 4GB</p></li></ul><p>$$<br>K=2^{10}\\M=2^{20}\\G=2^{30}\\T=2^{40}<br>$$</p><h3 id="2-cpuçš„æ€§èƒ½æŒ‡æ ‡">2 cpuçš„æ€§èƒ½æŒ‡æ ‡</h3><ul><li>cpuçš„æ—¶é’Ÿå‘¨æœŸï¼š<br>æŠŠCPUçš„æ¯ä¸€ä¸ªè„‰å†²ä¿¡å·çš„æ—¶é—´å‘¨æœŸå«åš<strong>cpuçš„æ—¶é’Ÿå‘¨æœŸ</strong>ï¼Œå•ä½æ˜¯å¾®ç§’æˆ–çº³ç§’ã€‚</li></ul><p>$$<br>CPUä¸»é¢‘ï¼ˆæ—¶é’Ÿé¢‘ç‡ï¼‰ = \frac{1}{CPUæ—¶é’Ÿå‘¨æœŸ}<br>$$</p><ul><li><p><strong>CPIï¼ˆClock cycle Per Instructionï¼‰</strong>ï¼šæ‰§è¡Œä¸€æ¡æŒ‡ä»¤æ‰€éœ€çš„æ—¶é—´å‘¨æœŸæ•°</p><p>ä¸åŒçš„æŒ‡ä»¤ï¼Œä¸åŒçš„CPIï¼›ç”šè‡³ç›¸åŒçš„æŒ‡ä»¤ï¼ŒCPIä¹Ÿå¯èƒ½ä¸åŒ</p></li></ul><p>$$<br>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„è€—æ—¶ = \frac{CPI}{CPUçš„æ—¶é’Ÿå‘¨æœŸ} \\<br>CPUæ‰§è¡Œæ—¶é—´(æ•´ä¸ªç¨‹åºè€—æ—¶) = \frac{CPUæ—¶é’Ÿå‘¨æœŸ}{ä¸»é¢‘} = \frac{(æŒ‡ä»¤æ¡æ•°*CPI)}{ä¸»é¢‘}<br>$$</p><ul><li><p><strong>IPS  (Instructions Per Second)</strong> :<code>æ¯ç§’</code>æ‰§è¡Œå¤šå°‘æ¡æŒ‡ä»¤</p><ul><li>å¯ç»†åˆ†ä¸º<code>KIPS</code>ï¼Œ<code>MIPS</code><br>$$<br>IPS = \frac{ä¸»é¢‘}{å¹³å‡CPI}<br>$$</li></ul></li><li><p><strong>FLOPS  (Floating-point Operations Per Second)</strong> æ¯ç§’æ‰§è¡Œå¤šå°‘æ¬¡<strong>æµ®ç‚¹è¿ç®—</strong></p><ul><li>å¯ç»†åˆ†ä¸º<code>KFLOPS</code>ï¼Œ<code>MFLOPS</code>, <code>GFLOPS</code>ï¼Œ<code>TFLOPS</code></li></ul></li><li><p>æ­¤å¤„Kã€Mã€Gã€Tä¸ºæ•°é‡å•ä½ï¼Œ<strong>è¦ä¸æ–‡ä»¶å¤§å°çš„æŒ‡æ ‡åŒºåˆ†å¼€</strong><br>$$<br>K=kilo=10^3  \\ M=million=10^6 \\ G=giga=10^9 \\ T=tera=10^{12}<br>$$</p></li></ul><h3 id="3-ç³»ç»Ÿæ•´ä½“çš„æ€§èƒ½æŒ‡æ ‡">3 ç³»ç»Ÿæ•´ä½“çš„æ€§èƒ½æŒ‡æ ‡</h3><ul><li><p>æ•°æ®é€šè·¯å¸¦å®½ï¼šæ•°æ®æ€»çº¿ä¸€æ¬¡æ‰€èƒ½å¹¶è¡Œä¼ é€çš„ä¿¡æ¯çš„ä½æ•°ï¼ˆå„ä¸ªç¡¬ä»¶éƒ¨ä»¶é€šè¿‡æ•°æ®æ€»çº¿ä¼ è¾“æ•°æ®ï¼‰</p></li><li><p>ååé‡ï¼šæŒ‡ç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…å¤„ç†è¯·æ±‚çš„æ•°é‡</p></li><li><p>å“åº”æ—¶é—´ï¼šæŒ‡ä»ç”¨æˆ·å‘è®¡ç®—æœºå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œåˆ°ç³»ç»Ÿå¯¹è¿™ä¸ªè¯·æ±‚ä½œå‡ºå“åº”ï¼Œå¹¶è·å¾—å®ƒæ‰€éœ€çš„ç»“æœ çš„ç­‰å¾…æ—¶é—´</p></li><li><p>åŸºå‡†ç¨‹åºï¼ˆè·‘åˆ†è½¯ä»¶ï¼‰ï¼šç”¨æ¥æµ‹é‡è®¡ç®—æœºå¤„ç†é€Ÿåº¦çš„ä¸€ç§ç¨‹åºã€‚</p><p>ä¾¿äºè¢«æµ‹é‡çš„è®¡ç®—æœºæ€§èƒ½å¯ä»¥ä¸è¿è¡Œç›¸åŒçš„ç¨‹åºçš„å…¶ä»–è®¡ç®—æœºæ€§èƒ½è¿›è¡Œæ¯”è¾ƒ</p></li></ul><p>æ€è€ƒé—®é¢˜:</p><ul><li>Qï¼šä¸»é¢‘é«˜çš„CPUä¸€èˆ¬æ¯”ä¸»é¢‘ä½çš„CPUå¿«å—ï¼Ÿ</li><li>Aï¼šä¸ä¸€å®šï¼Œéœ€è¦çœ‹CPIï¼Œä»¥åŠä¸åŒæŒ‡ä»¤ç³»ç»Ÿ<br>(å¦‚æœæŒ‡ä»¤ç³»ç»Ÿåšè¿‡ä¼˜åŒ–ï¼Œå³ä½¿ä¸»é¢‘å’ŒCPIä¸å ä¼˜åŠ¿ï¼Œä¹Ÿæœ‰å¯èƒ½åœ¨æŸä¸ªæ–¹é¢æ€§èƒ½æ›´å¼º)</li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç»„æˆ </tag>
            
            <tag> è®¡ç®—æœºçŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»Ÿæ¦‚è¿°(2.2å¤„ç†æœºè°ƒåº¦)</title>
      <link href="/2022/04/19/operating_system2-2/"/>
      <url>/2022/04/19/operating_system2-2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>æ“ä½œç³»ç»Ÿâ€”â€”2.2 å¤„ç†æœºè°ƒåº¦</h1><h2 id="ä¸€ã€åŸºæœ¬æ¦‚å¿µ">ä¸€ã€åŸºæœ¬æ¦‚å¿µ</h2><p>è¿›ç¨‹è°ƒåº¦ï¼ˆä½çº§è°ƒåº¦ï¼‰ï¼Œå°±æ˜¯æŒ‰ç…§æŸç§ç®—æ³•ï¼Œä»å°±ç»ªé˜Ÿåˆ—ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸ºå…¶åˆ†é…å¤„ç†æœºã€‚</p><p>å½“æœ‰ä¸€å †ä»»åŠ¡è¦å¤„ç†çš„æ—¶å€™ï¼Œç”±äºèµ„æºæœ‰é™ï¼Œè¿™äº›äº‹æƒ…æ²¡åŠæ³•åŒæ—¶å¤„ç†ï¼Œè¿™å°±éœ€è¦ç¡®å®šæŸç§è§„åˆ™æ¥å†³å®šå¤„ç†è¿™äº›ä»»åŠ¡çš„é¡ºåºï¼Œè¿™å°±æ˜¯<strong>è°ƒåº¦</strong>ç ”ç©¶çš„é—®é¢˜ã€‚</p><p>ä¸€äº›æ¦‚å¿µçš„ä»‹ç»ï¼š</p><ul><li>ä½œä¸šï¼šä¸€ä¸ªå…·ä½“çš„è¿è¡Œä»»åŠ¡</li><li>ç”¨æˆ·å‘ç³»ç»Ÿæäº¤ä¸€ä¸ªä½œä¸š <strong>â‰ˆ</strong>ç”¨æˆ·è®©æ“ä½œç³»ç»Ÿå¯åŠ¨ä¸€ä¸ªç¨‹åºï¼ˆæ¥å¤„ç†ä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡ï¼‰</li></ul><h3 id="1-1é«˜çº§è°ƒåº¦ï¼ˆä½œä¸šè°ƒåº¦ï¼‰">1.1é«˜çº§è°ƒåº¦ï¼ˆä½œä¸šè°ƒåº¦ï¼‰</h3><p>æŒ‰ä¸€å®šçš„åŸåˆ™ä»å¤–å­˜çš„ä½œä¸šåå¤‡é˜Ÿåˆ—ä¸­æŒ‘é€‰ä¸€ä¸ªä½œä¸šè°ƒå…¥å†…å­˜ï¼Œå¹¶åˆ›å»ºè¿›ç¨‹ã€‚<strong>æ¯ä¸ªä½œä¸šåªè°ƒå…¥ä¸€æ¬¡ï¼Œè°ƒå‡ºä¸€æ¬¡</strong>ã€‚ä½œä¸šè°ƒå…¥ä¼šå»ºç«‹PCBï¼Œè°ƒå‡ºæ—¶æ‰æ’¤é”€PCBã€‚</p><ul><li>ç®€å•ç†è§£å°±æ˜¯ï¼šå¥½å‡ ä¸ªç¨‹åºéœ€è¦å¯åŠ¨ï¼Œè¿™ä¸ªè°ƒåº¦æ–¹å¼è¦ç¡®å®šå…ˆè°ƒåº¦å“ªä¸ªã€‚</li><li>***ä½œä¸šæ§åˆ¶å—ï¼ˆJCBï¼‰ï¼š**æ“ä½œç³»ç»Ÿæƒ³ç”¨æˆ·æä¾›çš„ä¸€ç»„ä½œä¸šæ§åˆ¶è¯­è¨€ï¼Œç”¨æˆ·å°†è¿™ç§è¯­è¨€å†™ä½œä¸šè¯´æ˜ä¹¦ï¼Œç„¶åç¨‹åºã€æ•°æ®å’Œä½œä¸šä¸€èµ·äº¤ç»™ç³»ç»Ÿæ“ä½œå‘˜ã€‚</li><li>*å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿé€šå¸¸é…æœ‰ä½œä¸šè°ƒåº¦ï¼Œå…¶ä»–ç³»ç»Ÿä¸­é€šå¸¸ä¸éœ€è¦é…ç½®ä½œä¸šè°ƒåº¦ã€‚</li></ul><h3 id="1-2-ä¸­çº§è°ƒåº¦ï¼ˆå†…å­˜è°ƒåº¦ï¼‰">1.2 ä¸­çº§è°ƒåº¦ï¼ˆå†…å­˜è°ƒåº¦ï¼‰</h3><p>æŒ‰ç…§æŸç§ç­–ç•¥å†³å®šå°†é‚£ä¸ªå¤„äºæŒ‚èµ·çŠ¶æ€çš„è¿›ç¨‹é‡æ–°è°ƒå…¥å†…å­˜ã€‚</p><ul><li><p>å¼•å…¥ä¸­çº§è°ƒåº¦çš„ç›®çš„æ˜¯æé«˜å†…å­˜åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ã€‚</p></li><li><p>å†…å­˜ä¸å¤Ÿæ—¶ï¼Œå¯å°†é‚£äº›æš‚æ—¶ç”¨ä¸ä¸Šçš„è¿›ç¨‹è°ƒåº¦è‡³å¤–å­˜ç­‰å¾…ï¼Œç­‰å†…å­˜ç©ºé—²æˆ–è€…è¿›ç¨‹éœ€è¦è¿è¡Œçš„æ—¶å€™å†é‡æ–°è°ƒå…¥å†…å­˜ã€‚</p></li><li><p>æ­¤æ—¶è¿›ç¨‹çŠ¶æ€ä¸º<strong>æŒ‚èµ·æ€</strong>ï¼Œè¢«æŒ‚èµ·çš„è¿›ç¨‹PCBä¼šè¢«ç»„ç»‡æˆ<strong>æŒ‚èµ·é˜Ÿåˆ—</strong>ã€‚</p></li></ul><p>ä¸­çº§è°ƒåº¦å®é™…ä¸Šæ˜¯å­˜å‚¨å™¨ç®¡ç†ä¸­çš„å¯¹æ¢åŠŸèƒ½ã€‚</p><ul><li>ä¸€ä¸ªè¿›ç¨‹å¯èƒ½ä¼šè¢«å¤šæ¬¡è°ƒå‡ºã€è°ƒå…¥å†…å­˜ï¼Œå› æ­¤ä¸­çº§è°ƒåº¦å‘ç”Ÿçš„é¢‘ç‡æ¯”é«˜çº§è°ƒåº¦æ›´é«˜ã€‚</li></ul><h3 id="1-3-ä½çº§è°ƒåº¦ï¼ˆè¿›ç¨‹è°ƒåº¦-å¤„ç†æœºè°ƒåº¦ï¼‰">1.3 ä½çº§è°ƒåº¦ï¼ˆè¿›ç¨‹è°ƒåº¦ / å¤„ç†æœºè°ƒåº¦ï¼‰</h3><p>æŒ‰ç…§æŸç§ç­–ç•¥ï¼Œä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å–ä¸€ä¸ªè¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å®ƒã€‚</p><p>è¿™æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„è°ƒåº¦ï¼Œè°ƒç”¨é¢‘ç‡æœ€é«˜ã€‚</p><h3 id="1-4-è¿›ç¨‹çš„æŒ‚èµ·">1.4 è¿›ç¨‹çš„æŒ‚èµ·</h3><p>è¢«æŒ‚èµ·çš„è¿›ç¨‹ç§°ä¸º <u>æŒ‚èµ·æ€ï¼ˆsuspendï¼‰</u></p><p>æŒ‚èµ·æ€å¯ä»¥è¿›ä¸€æ­¥åˆ†ä¸º<strong>å°±ç»ªæŒ‚èµ·</strong>å’Œ<strong>é˜»å¡æŒ‚èµ·</strong>ã€‚</p><ul><li>è¿›ç¨‹åœ¨å°±ç»ªæ€å¯ä»¥æŒ‚èµ·ä¸ºå°±ç»ªæŒ‚èµ·ï¼Œå°±ç»ªæŒ‚èµ·å¯ä»¥æ¿€æ´»ä¸ºå°±ç»ªæ€</li><li>è¿›ç¨‹åœ¨é˜»å¡æ€å¯ä»¥æŒ‚èµ·ä¸ºé˜»å¡æŒ‚èµ·ï¼Œé˜»å¡æŒ‚èµ·å¯ä»¥æ¿€æ´»ä¸ºé˜»å¡æ€</li><li>é˜»å¡æŒ‚èµ·å¯ä»¥åœ¨äº‹ä»¶å‡ºç°çš„æ—¶å€™å˜æˆå°±ç»ªæŒ‚èµ·</li><li>å¹¶ä¸”ï¼Œåœ¨åˆ›å»ºæ€å’Œè¿è¡Œæ€çš„è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‚èµ·ä¸ºå°±ç»ªæŒ‚èµ·</li></ul><p><strong>ï¼æŒ‚èµ·å’Œé˜»å¡çš„åŒºåˆ«ï¼š</strong></p><ul><li>ä¸¤ç§çŠ¶æ€éƒ½æ˜¯å‚æ•°ä¸èƒ½è·å¾—CPUçš„æœåŠ¡çš„</li><li><strong>æŒ‚èµ·æ€</strong>æ˜¯å°†è¿›ç¨‹è°ƒåˆ°å¤–å­˜å»äº†ï¼Œ<strong>é˜»å¡æ€</strong>ä¸‹çš„è¿›ç¨‹è¿˜åœ¨å†…å­˜ä¸­ã€‚</li><li>æœ‰çš„æ“ä½œç³»ç»Ÿä¼šæŠŠ<strong>å°±ç»ªæŒ‚èµ·</strong>ï¼Œ<strong>é˜»å¡æŒ‚èµ·</strong>åˆ†ä¸ºä¸¤ä¸ªæŒ‚èµ·é˜Ÿåˆ—ï¼Œç”šè‡³ä¼šæ ¹æ®é˜»å¡åŸå› ä¸åŒï¼ŒæŠŠæŒ‚èµ·é˜Ÿåˆ—ç»†åˆ†ä¸ºå¤šä¸ªé˜Ÿåˆ—ã€‚</li></ul><table><thead><tr><th>è°ƒåº¦</th><th>è°ƒåº¦å‘ç”Ÿåœ¨</th><th>å‘ç”Ÿé¢‘ç‡</th><th>å¯¹è¿›ç¨‹çŠ¶æ€çš„å½±å“</th></tr></thead><tbody><tr><td>é«˜çº§è°ƒåº¦ï¼ˆä½œä¸šè°ƒåº¦ï¼‰</td><td>å¤–å­˜-&gt;å†…å­˜ï¼ˆé¢å‘ä½œä¸šï¼‰</td><td>æœ€ä½</td><td>æ— -&gt;åˆ›å»ºæ€-&gt;å°±ç»ªæ€</td></tr><tr><td>ä¸­çº§è°ƒåº¦ï¼ˆå†…å­˜è°ƒåº¦ï¼‰</td><td>å¤–å­˜-&gt;å†…å­˜ï¼ˆé¢å‘è¿›ç¨‹ï¼‰</td><td>ä¸­ç­‰</td><td>æŒ‚èµ·æ€-&gt;å°±ç»ªæ€ï¼ˆé˜»å¡æŒ‚èµ·-&gt;é˜»å¡æ€ï¼‰</td></tr><tr><td>ä½çº§è°ƒåº¦ï¼ˆè¿›ç¨‹è°ƒåº¦ï¼‰</td><td>å†…å­˜-&gt;CPU</td><td>æœ€é«˜</td><td>å°±ç»ªæ€-&gt;è¿è¡Œæ€</td></tr></tbody></table><h2 id="äºŒã€è¿›ç¨‹è°ƒåº¦æ–¹å¼">äºŒã€è¿›ç¨‹è°ƒåº¦æ–¹å¼</h2><h3 id="2-1è¿›ç¨‹è°ƒåº¦çš„æ—¶æœº">2.1è¿›ç¨‹è°ƒåº¦çš„æ—¶æœº</h3><p><strong>ï¼<strong>ä»€ä¹ˆæ—¶å€™</strong>éœ€è¦</strong>è¿›ç¨‹è°ƒåº¦</p><ul><li><p>å½“å‰è¿è¡Œçš„è¿›ç¨‹<strong>ä¸»åŠ¨æ”¾å¼ƒ</strong>å¤„ç†æœº</p><ul><li>è¿›ç¨‹ç»ˆæ­¢</li><li>è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸è€Œç»ˆæ­¢</li><li>è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚é˜»å¡ï¼ˆå¦‚ï¼šç­‰å¾…IOï¼‰</li><li>æœ‰çš„ç³»ç»Ÿä¸­ï¼Œåªå…è®¸è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœº</li></ul></li><li><p>å½“å‰è¿è¡Œçš„è¿›ç¨‹<strong>è¢«åŠ¨æ”¾å¼ƒ</strong>å¤„ç†æœº</p><ul><li>åˆ†ç»™è¿›ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œ</li><li>æœ‰æ›´ç´§æ€¥çš„äº‹éœ€è¦å¤„ç†ï¼ˆå¦‚ï¼šIOä¸­æ–­ï¼‰</li><li>æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—<ul><li>æœ‰çš„ç³»ç»Ÿä¸­ï¼Œå½“æœ‰æ›´ç´§æ€¥çš„ä»»åŠ¡éœ€è¦å¤„ç†çš„æ—¶å€™ï¼Œä¹Ÿä¼šå¼ºè¡Œå‰¥å¤ºå¤„ç†æœºï¼ˆè¢«åŠ¨æ”¾å¼ƒï¼‰</li></ul></li></ul></li></ul><p><strong>ï¼<strong>ä»€ä¹ˆæ—¶å€™</strong>ä¸èƒ½</strong>è¿›ç¨‹è°ƒåº¦</p><ul><li><strong>å¤„ç†ä¸­æ–­çš„è¿‡ç¨‹ä¸­</strong>ï¼šå¤„ç†ä¸­æ–­è¿‡ç¨‹å¤æ‚ï¼Œä¸ç¡¬ä»¶å¯†åˆ‡ç›¸å…³ï¼Œå¾ˆéš¾åœ¨å†²æ®µå¤„ç†çš„æ—¶å€™è¿›è¡Œè¿›ç¨‹åˆ‡æ¢</li><li>è¿›ç¨‹åœ¨<strong>æ“ä½œç³»ç»Ÿå†…æ ¸ç¨‹åºä¸´ç•ŒåŒºä¸­</strong>ã€‚ä½†æ˜¯è¿›ç¨‹åœ¨æ™®é€šä¸´ç•ŒåŒºä¸­æ˜¯å¯ä»¥è¿›è¡Œè°ƒåº¦å’Œåˆ‡æ¢çš„ã€‚</li><li>åœ¨<strong>åŸå­æ“ä½œè¿‡ç¨‹ä¸­ï¼ˆåŸè¯­ï¼‰</strong>ã€‚åŸå­æ“ä½œä¸å¯ä¸­æ–­ï¼ˆå¦‚ä¿®æ”¹PCBä¸­è¿›ç¨‹çŠ¶æ€æ ‡å¿—ï¼Œå¹¶æ”¾ç½®åœ¨ç›¸åº”é˜Ÿåˆ—ï¼‰</li></ul><p><strong>ï¼egï¼š<strong>è¿›ç¨‹åœ¨</strong>æ“ä½œç³»ç»Ÿå†…æ ¸ä¸´ç•ŒåŒº</strong>ä¸­<strong>ä¸èƒ½</strong>è¿›è¡Œè°ƒåº¦åˆ‡æ¢ï¼ˆâˆšï¼‰</p><p><strong>ï¼egï¼š<strong>è¿›ç¨‹å¤„äº</strong>ä¸´ç•ŒåŒº</strong>æ—¶<strong>ä¸èƒ½</strong>è¿›è¡Œå¤„ç†æœºè°ƒåº¦ï¼ˆÃ—ï¼‰</p><p><strong>ï¼ä¸´ç•Œèµ„æºï¼š<strong>ä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æºã€‚ä¸ªè¿›ç¨‹éœ€è¦</strong>äº’æ–¥åœ°</strong>è®¿é—®ä¸´ç•Œèµ„æºã€‚</p><p>**ï¼ä¸´ç•Œ    åŒºï¼š**è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç ã€‚</p><p><strong>å†…æ ¸ç¨‹åºä¸´ç•ŒåŒº</strong>ä¸€èˆ¬æ˜¯ç”¨æ¥è®¿é—®<strong>æŸç§å†…æ ¸æ•°æ®ç»“æ„çš„</strong>ï¼Œæ¯”å¦‚è¯´è¿›ç¨‹çš„å°±ç»ªé˜Ÿåˆ—ï¼ˆç”±å„ä¸ªå°±ç»ªè¿›ç¨‹çš„PCBç»„æˆï¼‰</p><ul><li>ä¸¾ä¸ªæ —å­ï¼š</li></ul><p>æ¯”å¦‚æœ‰ä¸€ä¸ªå†…æ ¸è¿›ç¨‹ï¼Œè¦è®¿é—®å°±ç»ªé˜Ÿåˆ—</p><pre class="mermaid">graph LRA(è¿›ç¨‹) --&gt;B(å°±ç»ªé˜Ÿåˆ—)</pre><p>é‚£å°±éœ€è¦å…ˆé”ä½<span class="github-emoji"><span>ğŸ”’</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f512.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å°±ç»ªé˜Ÿåˆ— ã€‚å¦‚æœè¿˜æ²¡é€€å‡ºä¸´ç•ŒåŒºï¼ˆè¿˜æ²¡è§£é”ï¼‰å°±è¿›è¡Œè¿›ç¨‹è°ƒåº¦ï¼Œä½†ç»å¸¸è°ƒåº¦ç›¸å…³ç¨‹åºä¹Ÿéœ€è¦è®¿é—®å°±ç»ªé˜Ÿåˆ—ï¼Œæ­¤æ—¶å°±ç»ªé˜Ÿåˆ—åˆè¢«é”ä½äº†ï¼Œå› æ­¤æœ‰æ— æ³•é¡ºåˆ©è¿›è¡Œè¿›ç¨‹è°ƒåº¦ã€‚</p><p>ç”±æ­¤å¯è§ï¼Œå†…æ ¸ç¨‹åºä¸´ç•ŒåŒºè®¿é—®çš„ä¸´ç•Œèµ„æºï¼Œå¦‚æœä¸å°½å¿«é‡Šæ”¾ï¼Œå¾ˆæœ‰å¯èƒ½å› æ­¤å½±å“åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„å…¶ä»–ç®¡ç†å·¥ä½œã€‚æ‰€ä»¥ï¼Œè®¿é—®å†…æ ¸ç¨‹åºä¸´ç•ŒåŒºæœŸé—´ä¸å¯ä»¥è¿›è¡Œè°ƒåº¦ä¸åˆ‡æ¢ã€‚</p><ul><li>å†ä¸¾ä¸ªæ —å­ï¼š</li></ul><p>æœ‰ä¸€ä¸ªè¿›ç¨‹è¦æ§åˆ¶æ‰“å°æœºï¼Œåœ¨æ‰“å°æœºæ‰“å°å®Œæˆä¹‹å‰ï¼Œè¿›ç¨‹ä¸€ç›´å¤„äºä¸´ç•ŒåŒºå†…ï¼Œä¸´ç•Œèµ„æºä¸ä¼šè§£é”ã€‚ä½†æ˜¯æ‰“å°æœºæ˜¯æ…¢é€Ÿçš„è®¾å¤‡ï¼Œå¦‚æœä¸€ç›´ä¸å…è®¸è¿›ç¨‹è°ƒåº¦ï¼Œä¼šå¯¼è‡´CPUä¸€ç›´ç©ºé—²ã€‚</p><p>æ™®é€šä¸´ç•ŒåŒºè®¿é—®çš„ä¸´ç•Œèµ„æºä¸ä¼šç›´æ¥å½±å“æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç®¡ç†å·¥ä½œã€‚è®¿é—®æ™®é€šä¸´ç•ŒåŒºæ—¶å¯ä»¥è¿›è¡Œè°ƒåº¦ä¸åˆ‡æ¢ã€‚</p><h3 id="2-1-è¿›ç¨‹è°ƒåº¦çš„æ–¹å¼">2.1 è¿›ç¨‹è°ƒåº¦çš„æ–¹å¼</h3><h5 id="éå‰¥å¤ºæ–¹å¼ï¼ˆéæŠ¢å æ–¹å¼ï¼‰">éå‰¥å¤ºæ–¹å¼ï¼ˆéæŠ¢å æ–¹å¼ï¼‰</h5><p>åªå…è®¸è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºï¼Œå¦‚æœè¿è¡Œè¿‡ç¨‹ä¸­æœ‰æ›´ç´§è¿«çš„ä»»åŠ¡åˆ°è¾¾ï¼Œå½“å‰è¿›ç¨‹è¿˜ä¼šç»§ç»­ä½¿ç”¨å¤„ç†æœºï¼Œç›´åˆ°è¯¥è¿›ç¨‹ç»ˆæ­¢æˆ–ä¸»åŠ¨è¿›å…¥é˜»å¡æ€ã€‚</p><ul><li>å®ç°ç®€å•ï¼Œç³»ç»Ÿå¼€é”€å°ï¼Œä½†æ— æ³•åŠæ—¶å¤„ç†ç´§æ€¥ä»»åŠ¡ã€‚é€‚ç”¨æ—©æœŸçš„æ‰¹å¤„ç†ç³»ç»Ÿã€‚</li></ul><h5 id="å‰¥å¤ºæ–¹å¼ï¼ˆæŠ¢å æ–¹å¼ï¼‰">å‰¥å¤ºæ–¹å¼ï¼ˆæŠ¢å æ–¹å¼ï¼‰</h5><p>å½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨å¤„ç†æœºä¸Šæ‰§è¡Œæ—¶ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ›´é‡è¦çš„ä»»åŠ¡åˆ°è¾¾ï¼Œåˆ™ç«‹å³æš‚åœæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™é‚£ä¸ªç´§è¿«çš„è¿›ç¨‹ã€‚</p><ul><li>å¯ä»¥ä¼˜å…ˆå¤„ç†æ›´ç´§æ€¥çš„è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥è®©å„ä¸ªè¿›ç¨‹æŒ‰æ—¶é—´ç‰‡è½®æµæ‰§è¡Œçš„åŠŸèƒ½ï¼ˆé€šè¿‡ä½¿ç”¨æ—¶é’Ÿä¸­æ–­ï¼‰ã€‚é€‚ç”¨äºåˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œå®æ—¶æ“ä½œç³»ç»Ÿã€‚</li></ul><h5 id="ç»†åˆ†è¿›ç¨‹è°ƒåº¦">ç»†åˆ†è¿›ç¨‹è°ƒåº¦</h5><ul><li><p>ç‹­ä¹‰çš„è¿›ç¨‹è°ƒåº¦ï¼šä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰ä¸­ä¸€ä¸ªè¦è¿è¡Œçš„è¿›ç¨‹</p></li><li><p>å¹¿ä¹‰çš„è¿›ç¨‹è°ƒåº¦ï¼šåŒ…å«äº†é€‰æ‹©è¿›ç¨‹å’Œè¿›ç¨‹åˆ‡æ¢ä¸¤ä¸ªæ­¥éª¤</p><ul><li>å¯¹åŸæ¥è¿è¡Œçš„è¿›ç¨‹çš„æ•°æ®è¿›è¡Œä¿å­˜</li><li>å¯¹æ–°è¿›ç¨‹çš„æ•°æ®æ¢å¤ï¼ˆé€šå¸¸è¿™äº›ä¿¡æ¯ä¿å­˜åœ¨PCBï¼‰</li><li>ï¼è¿›ç¨‹åˆ‡æ¢æ˜¯æœ‰ä»£ä»·çš„ã€‚å› æ­¤å¦‚æœè¿‡äºé¢‘ç¹çš„è¿›è¡Œè¿›ç¨‹è°ƒåº¦ã€åˆ‡æ¢ï¼Œå¿…ç„¶ä¼šé™ä½æ•´ä¸ªç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ã€‚å¹¶ä¸æ˜¯è°ƒåº¦è¶Šé¢‘ç¹ã€å¹¶å‘åº¦è¶Šé«˜</li></ul></li></ul><h2 id="ä¸‰ã€è°ƒåº¦ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡">ä¸‰ã€è°ƒåº¦ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡</h2><h3 id="1-CPUåˆ©ç”¨ç‡ï¼š">1 CPUåˆ©ç”¨ç‡ï¼š</h3><ul><li>CPUå¤„äºå¿™ç¢Œçš„æ—¶é—´å æ€»æ—¶é—´çš„æ¯”ä¾‹ã€‚</li></ul><p>$$<br>åˆ©ç”¨ç‡ = \frac{æœ‰æ•ˆå·¥ä½œçš„æ—¶é—´}{æ€»æ—¶é—´ â€“ ç©ºé—²+å·¥ä½œçš„æ—¶é—´}<br>$$</p><h3 id="2-ç³»ç»Ÿååé‡ï¼š">2 ç³»ç»Ÿååé‡ï¼š</h3><ul><li>å•ä½æ—¶é—´å†…å®Œæˆçš„ä½œä¸šæ•°é‡</li></ul><p>$$<br>ç³»ç»Ÿååé‡ = \frac{æ€»å®Œæˆçš„ä½œä¸šæ•°é‡}{æ€»å…±èŠ±è´¹çš„æ—¶é—´}<br>$$</p><h3 id="3-å‘¨è½¬æ—¶é—´ï¼š">3 å‘¨è½¬æ—¶é—´ï¼š</h3><ul><li>ä½œä¸šæäº¤ç»™ç³»ç»Ÿå¼€å§‹ï¼Œåˆ°ä½œä¸šå®Œæˆä¸ºæ­¢çš„æ—¶é—´é—´éš”</li></ul><p>åŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>ä½œä¸šåœ¨å¤–å­˜åå¤‡é˜Ÿåˆ—ç­‰å¾…è°ƒåº¦çš„æ—¶é—´ï¼ˆé«˜çº§è°ƒåº¦ï¼‰</li><li>è¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸Šç­‰å¾…è°ƒåº¦çš„æ—¶é—´ï¼ˆä½çº§è°ƒåº¦ï¼‰</li><li>è¿›ç¨‹ä¸ŠCPUæ‰§è¡Œçš„æ—¶é—´</li><li>è¿›ç¨‹ç­‰å¾…I/Oæ“ä½œå®Œæˆçš„æ—¶é—´<ul><li>å…¶ä¸­åä¸‰é¡¹åœ¨ä½œä¸šæ•´ä¸ªå¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å‘ç”Ÿå¤šæ¬¡</li></ul></li></ul><p>$$<br>ä½œä¸šå‘¨è½¬æ—¶é—´ = ä½œä¸šå®Œæˆæ—¶é—´ - ä½œä¸šæäº¤æ—¶é—´ \\<br>å¹³å‡å‘¨è½¬æ—¶é—´ = \frac{\sum_{i=1}^nä½œä¸šnçš„å‘¨è½¬æ—¶é—´}{ä½œä¸šæ•°} \\<br>å¸¦æƒå‘¨è½¬æ—¶é—´ = \frac{ä½œä¸šå‘¨è½¬æ—¶é—´}{ä½œä¸šå®é™…è¿è¡Œæ—¶é—´} \\ = \frac{ä½œä¸šå®Œæˆæ—¶é—´ - ä½œä¸šæäº¤æ—¶é—´}{ä½œä¸šå®é™…è¿è¡Œæ—¶é—´}\\<br>å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´ = \sum_{i=1}^n ä½œä¸šnçš„å¸¦æƒå‘¨è½¬æ—¶é—´<br>$$</p><p>å…¶ä¸­ï¼Œå¸¦æƒå‘¨è½¬æ—¶é—´å¯ä»¥ç†è§£ä¸ºï¼šå‘¨è½¬æ—¶é—´æ¯”è¿è¡Œæ—¶é—´å¤§å¤šå°‘å€ã€‚å¦‚æœå¸¦æƒå‘¨è½¬æ—¶é—´å¤ªå¤§ï¼Œè¯´æ˜åŸæœ¬åªéœ€è¦å°‘é‡æ—¶é—´è®©CPUä¸ºå…¶æœåŠ¡ï¼Œå´è®©ä»–ç­‰å¾…äº†å¾ˆé•¿çš„æ—¶é—´ã€‚</p><h3 id="4-ç­‰å¾…æ—¶é—´ï¼š">4 ç­‰å¾…æ—¶é—´ï¼š</h3><ul><li>æŒ‡è¿›ç¨‹/ä½œä¸š<strong>å¤„äºç­‰å¾…å¤„ç†æœºçª—å°æ—¶é—´ä¹‹å’Œ</strong>ã€‚ç­‰å¾…æ—¶é—´è¶Šé•¿ï¼Œç”¨æˆ·æ»¡æ„åº¦è¶Šä½ã€‚</li></ul><p>å› ä¸ºå¤„ç†æœºè°ƒåº¦ç®—æ³•ä¸å½±å“ä½œä¸šæ‰§è¡Œæˆ–è€…I/Oæ—¶é—´ï¼Œåªå½±å“ä½œä¸šåœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…æ‰€èŠ±çš„æ—¶é—´ã€‚</p><p>å› æ­¤ï¼Œè¡¡é‡ä¸€ä¸ªè°ƒåº¦ç®—æ³•çš„ä¼˜åŠ£ï¼Œåªéœ€è¦ç®€å•çš„çœ‹ç­‰å¾…æ—¶é—´ã€‚</p><ul><li>å¯¹äº<strong>è¿›ç¨‹</strong>æ¥è¯´ï¼Œç­‰å¾…æ—¶é—´å°±æ˜¯æŒ‡è¿›ç¨‹å»ºç«‹å<strong>ç­‰å¾…è¢«æœåŠ¡çš„æ—¶é—´ä¹‹å’Œ</strong>ã€‚ç­‰å¾…I/Oå®Œæˆçš„æœŸé—´å…¶å®è¿›ç¨‹ä¹Ÿæ˜¯åœ¨è¢«æœåŠ¡çš„ï¼Œæ‰€ä»¥ä¸è®¡å…¥ç­‰å¾…æ—¶é—´ã€‚</li><li>å¯¹äº<strong>ä½œä¸š</strong>æ¥è¯´ï¼Œä¸ä»…è¦è€ƒè™‘<strong>å»ºç«‹è¿›ç¨‹åç­‰å¾…çš„æ—¶é—´ï¼Œè¿˜è¦åŠ ä¸Šä½œä¸šåœ¨å¤–å­˜åå¤‡é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ—¶é—´</strong>ã€‚</li><li>ä¸€ä¸ªä½œä¸šæ€»å…±éœ€è¦è¢«CPUæœåŠ¡å¤šä¹…ï¼Œè¢«I/Oè®¾å¤‡æœåŠ¡å¤šä¹…ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ˜¯ç¡®å®šä¸å˜çš„ã€‚è°ƒåº¦ç®—æ³•å€¼å½±å“ä½œä¸šã€è¿›ç¨‹çš„ç­‰å¾…æ—¶é—´ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>å¹³å‡ç­‰å¾…æ—¶é—´</strong>æ¥è¯„ä»·æ•´ä½“æ€§èƒ½ã€‚</li></ul><h3 id="5-å“åº”æ—¶é—´">5 å“åº”æ—¶é—´</h3><ul><li>æŒ‡ç”¨æˆ·æäº¤è¯·æ±‚åˆ°é¦–æ¬¡äº§ç”Ÿå“åº”æ‰€ä½¿ç”¨çš„æ—¶é—´</li></ul><h2 id="å››ã€è°ƒåº¦ç®—æ³•">å››ã€è°ƒåº¦ç®—æ³•</h2><h3 id="1ã€å…ˆæ¥å…ˆæœåŠ¡â€”â€”FCFS">1ã€å…ˆæ¥å…ˆæœåŠ¡â€”â€”FCFS</h3><h4 id="1-ç®—æ³•æ€æƒ³">1 ç®—æ³•æ€æƒ³</h4><p>ä¸»è¦ä»<strong>å…¬å¹³</strong>çš„è§’åº¦å»è€ƒè™‘ï¼ˆç±»æ¯”é£Ÿå ‚æ’é˜Ÿæ‰“é¥­çš„ä¾‹å­ï¼‰</p><h4 id="2-ç®—æ³•è§„åˆ™">2 ç®—æ³•è§„åˆ™</h4><p>æŒ‰ç…§ä½œä¸š/è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºè¿›è¡ŒæœåŠ¡</p><h4 id="3-ç”¨äºä½œä¸š-è¿›ç¨‹è°ƒåº¦">3 ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦</h4><p>ä½œä¸šè°ƒåº¦ï¼šè€ƒè™‘çš„æ˜¯å“ªä¸ªä½œä¸šå…ˆåˆ°è¾¾åå¤‡é˜Ÿåˆ—</p><p>è¿›ç¨‹è°ƒåº¦ï¼šè€ƒè™‘çš„æ˜¯å“ªä¸ªè¿›ç¨‹å…ˆåˆ°è¾¾å°±ç»ªé˜Ÿåˆ—</p><h4 id="4-æ˜¯å¦å¯æŠ¢å ">4 æ˜¯å¦å¯æŠ¢å </h4><p>ä½¿ç”¨éæŠ¢å å¼ç®—æ³•</p><h4 id="5-ä¼˜ç¼ºç‚¹">5 ä¼˜ç¼ºç‚¹</h4><ul><li>ä¼˜ç‚¹ï¼šå…¬å¹³ï¼Œå®ç°ç®€å•</li><li>ç¼ºç‚¹ï¼šæ’åœ¨é•¿ä½œä¸š/è¿›ç¨‹åé¢çš„çŸ­ä½œä¸šéœ€è¦ç­‰å¾…å¾ˆé•¿çš„æ—¶é—´ï¼Œå¸¦æƒå‘¨è½¬æ—¶é—´å¾ˆå¤§ï¼Œå¯¹çŸ­ä½œä¸šç”¨æˆ·æ¥è¯´ï¼Œä½“éªŒä¸å¥½ã€‚</li><li>æ€»ç»“ï¼šFCFS<strong>å¯¹é•¿ä½œä¸šæœ‰åˆ©ï¼Œå¯¹çŸ­ä½œä¸šä¸åˆ©</strong>ã€‚</li></ul><h4 id="6-æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿">6 æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿</h4><p>ä¸ä¼šã€‚æ’åœ¨å‰é¢çš„ä½œä¸šæ€»ä¼šå¤„ç†å®Œã€‚</p><ul><li>é¥¥é¥¿çš„æ¦‚å¿µï¼šæŸä¸ªä½œä¸šæˆ–è€…è¿›ç¨‹é•¿æ—¶é—´å¾—ä¸åˆ°æœåŠ¡</li></ul><h3 id="2ã€çŸ­ä½œä¸šä¼˜å…ˆâ€”â€”SJF">2ã€çŸ­ä½œä¸šä¼˜å…ˆâ€”â€”SJF</h3><h4 id="1-ç®—æ³•æ€æƒ³-2">1 ç®—æ³•æ€æƒ³</h4><p>è¿½æ±‚æœ€å°‘çš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œæœ€å°‘çš„å¹³å‡å‘¨è½¬æ—¶é—´ï¼Œæœ€å°‘çš„å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´</p><h4 id="2-ç®—æ³•è§„åˆ™-2">2 ç®—æ³•è§„åˆ™</h4><p>æœ€çŸ­çš„ä½œä¸š/è¿›ç¨‹ä¼˜å…ˆå¾—åˆ°æœåŠ¡ï¼ˆæŒ‡è¦æ±‚æœåŠ¡çš„æ—¶é—´æœ€çŸ­ï¼‰</p><h4 id="3-ç”¨äºä½œä¸š-è¿›ç¨‹è°ƒåº¦-2">3 ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦</h4><p>ä¸¤ç§éƒ½å¯ä»¥ç”¨ã€‚å¯¹è¿›ç¨‹æ¥è¯´ï¼Œå«**çŸ­è¿›ç¨‹ä¼˜å…ˆï¼ˆSPFï¼Œshortest process firstï¼‰**ç®—æ³•</p><h4 id="4-æ˜¯å¦å¯æŠ¢å -2">4 æ˜¯å¦å¯æŠ¢å </h4><p>SJFå’ŒSPFæ˜¯éæŠ¢å å¼çš„ç®—æ³•ã€‚ä½†ä¹Ÿæœ‰æŠ¢å å¼çš„ç‰ˆæœ¬ï¼Œå«<strong>æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSRTN Shortest Remaining Time Nextï¼‰</strong></p><ul><li><p>SRTNï¼šå½“æœ‰è¿›ç¨‹<strong>åŠ å…¥å°±ç»ªé˜Ÿåˆ—æ”¹å˜æ—¶å°±éœ€è¦è°ƒåº¦</strong>ã€‚å¦‚æœæ–°åˆ°è¾¾çš„è¿›ç¨‹<strong>å‰©ä½™æ—¶é—´</strong>æ¯”å½“å‰è¿è¡Œçš„è¿›ç¨‹å‰©ä½™æ—¶é—´æ›´çŸ­ï¼Œåˆ™ç”±æ–°è¿›ç¨‹<strong>æŠ¢å </strong>å¤„ç†æœºã€‚å½“å‰è¿è¡Œè¿›ç¨‹é‡æ–°å›åˆ°å°±ç»ªé˜Ÿåˆ—ã€‚</p><p><strong>! å¦å¤–</strong>ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹å®Œæˆæ—¶<sup class="refplus-num"><a href="#ref-f">[1]</a></sup>ä¹Ÿéœ€è¦ç”¨è¿™ç§ç®—æ³•è¿›è¡Œè°ƒåº¦ã€‚  </p><ul id="refplus" style="display:none;"><li id="ref-f" data-num="1">[1]  è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºçš„æ—¶å€™</li></ul><p></p></li><li><p>ç»†èŠ‚ï¼š</p><ul><li><p>å¹³æ—¶è®¨è®ºçŸ­ä½œä¸šä¼˜å…ˆé»˜è®¤æ˜¯<code>SJF / SPF</code>ï¼Œæ˜¯éæŠ¢å å¼çš„</p></li><li><p>å…¶å®<code>SRTN</code>æ¯”<code>SJF</code>çš„å¹³å‡çš„ç­‰å¾…æ—¶é—´ï¼Œå¹³å‡å‘¨è½¬æ—¶é—´è¦æ›´å°‘ã€‚</p><p>åº”è¯¥è¯´ï¼š<strong>åœ¨æ‰€æœ‰è¿›ç¨‹åŒæ—¶å¯è¿è¡Œæ—¶</strong>ï¼Œæˆ–è€…<strong>åœ¨æ‰€æœ‰è¿›ç¨‹éƒ½å‡ ä¹åŒæ—¶åˆ°è¾¾çš„æ—¶å€™</strong>ï¼Œé‡‡ç”¨<code>SJF</code>è°ƒåº¦ç®—æ³•çš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå¹³å‡å‘¨è½¬æ—¶é—´æœ€å°‘ã€‚</p></li><li><p>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>SJF</code>çš„å¹³å‡ç­‰å¾…æ—¶é—´å’Œå¹³å‡å‘¨è½¬æ—¶é—´ï¼Œæ¯”é™¤äº†SRTNä»¥å¤–çš„ç®—æ³•ï¼ˆå¦‚FCFSï¼‰è¦æ›´å°‘ã€‚</p></li><li><p>ä¸è¿‡è¯´<code>SJF</code>æ˜¯å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå¹³å‡å‘¨è½¬æ—¶é—´æœ€å°‘ï¼Œä»ç„¶æ˜¯ä¸å¤Ÿä¸¥è°¨çš„</p></li></ul></li></ul><h4 id="5-ä¼˜ç¼ºç‚¹-2">5 ä¼˜ç¼ºç‚¹</h4><ul><li>ä¼˜ç‚¹ï¼šâ€œæœ€çŸ­çš„â€ å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´</li><li>ç¼ºç‚¹ï¼š<ul><li>ä¸å…¬å¹³ã€‚<strong>å¯¹çŸ­ä½œä¸šæœ‰åˆ©ï¼Œå¯¹é•¿ä½œä¸šä¸åˆ©</strong>ã€‚å¯èƒ½äº§ç”Ÿ<strong>é¥¥é¥¿</strong>ç°è±¡ã€‚</li><li>ä½œä¸š/è¿›ç¨‹çš„è¿è¡Œæ—¶é—´ï¼Œæ˜¯ç”±ç”¨æˆ·æä¾›çš„ï¼Œå¹¶ä¸ä¸€å®šå®Œå…¨å‡†ç¡®ï¼Œä¸ä¸€å®šçœŸæ­£å¯ä»¥å®ç°çŸ­ä½œä¸šä¼˜å…ˆã€‚</li><li>è¯¥ç®—æ³•å®Œå…¨æ²¡æœ‰è€ƒè™‘ä½œä¸šçš„ç´§è¿«ç¨‹åº¦ï¼Œä¸èƒ½ä¿è¯ç´§è¿«æ€§ä½œä¸šä¼šè¢«åŠæ—¶å¤„ç†ã€‚</li></ul></li></ul><h4 id="6-æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿-2">6 æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿</h4><p>ä¼šã€‚å¦‚æœæºæºä¸æ–­æœ‰å¤§é‡çŸ­ä½œä¸š/è¿›ç¨‹åˆ°æ¥ï¼Œå¯èƒ½ä¼šä½¿é•¿ä½œä¸šå¾ˆé•¿æ—¶é—´éƒ½å¾—ä¸åˆ°æœåŠ¡ã€‚äº§ç”Ÿé¥¥é¥¿ç°è±¡ã€‚</p><p>å¦‚æœä¸€ç›´å¾—ä¸åˆ°æœåŠ¡ï¼Œåˆ™ç§°ä¹‹ä¸º â€œé¥¿æ­»â€ã€‚</p><h3 id="3ã€é«˜å“åº”æ¯”ä¼˜å…ˆâ€”â€”HRRN">3ã€é«˜å“åº”æ¯”ä¼˜å…ˆâ€”â€”HRRN</h3><h4 id="1-ç®—æ³•æ€æƒ³-3">1 ç®—æ³•æ€æƒ³</h4><p>ç»¼åˆè€ƒè™‘ ä½œä¸š/è¿›ç¨‹ çš„ç­‰å¾…æ—¶é—´å’Œè¦æ±‚æœåŠ¡çš„æ—¶é—´ã€‚</p><h4 id="2-ç®—æ³•è§„åˆ™-3">2 ç®—æ³•è§„åˆ™</h4><p>åœ¨æ¯æ¬¡è°ƒåº¦æ—¶ï¼Œå…ˆè®¡ç®—å„ä¸ª ä½œä¸š/è¿›ç¨‹ çš„<strong>å“åº”æ¯”</strong>ï¼Œé€‰æ‹©<strong>å“åº”æ¯”æœ€é«˜çš„</strong> ä½œä¸š/è¿›ç¨‹ ä¸ºå…¶æœåŠ¡ã€‚<br>$$<br>å“åº”æ¯” = \frac{ç­‰å¾…æ—¶é—´+è¦æ±‚æœåŠ¡æ—¶é—´}{è¦æ±‚æœåŠ¡æ—¶é—´}<br>\geq 1<br>$$</p><h4 id="3-ç”¨äºä½œä¸š-è¿›ç¨‹è°ƒåº¦-3">3 ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦</h4><p>éƒ½å¯ä»¥ä½¿ç”¨</p><h4 id="4-æ˜¯å¦å¯æŠ¢å -3">4 æ˜¯å¦å¯æŠ¢å </h4><p>éæŠ¢å å¼ç®—æ³•ï¼Œåªæœ‰å½“å‰è¿è¡Œä¸­çš„ä½œä¸šæˆ–è¿›ç¨‹<strong>ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºæ—¶</strong>ï¼Œæ‰éœ€è¦è°ƒåº¦ï¼Œæ‰éœ€è¦è®¡ç®—å“åº”æ¯”ã€‚è°ƒåº¦æ—¶<strong>è®¡ç®—æ‰€æœ‰å°±ç»ªè¿›ç¨‹çš„å“åº”æ¯”ï¼Œé€‰ä¸­å“åº”æ¯”æœ€é«˜çš„</strong>è¿›ç¨‹ä¸Šå¤„ç†æœºã€‚</p><h4 id="5-ä¼˜ç‚¹">5 ä¼˜ç‚¹</h4><ul><li>ç»¼åˆè€ƒè™‘äº†ç­‰å¾…æ—¶é—´å’Œè¿è¡Œæ—¶é—´ï¼ˆè¦æ±‚æœåŠ¡æ—¶é—´ï¼‰</li><li>ç­‰å¾…æ—¶é—´ç›¸åŒæ—¶ï¼Œè¦æ±‚æœåŠ¡æ—¶é—´çŸ­çš„ä¼˜å…ˆï¼ˆSJFçš„ä¼˜ç‚¹ï¼‰</li><li>è¦æ±‚æœåŠ¡æ—¶é—´ç›¸åŒæ—¶ï¼Œç­‰å¾…æ—¶é—´é•¿çš„ä¼˜å…ˆï¼ˆFCFSçš„ä¼˜ç‚¹ï¼‰</li><li>å¯¹äºé•¿ä½œä¸šæ¥è¯´ï¼Œéšç€ç­‰å¾…æ—¶é—´è¶Šæ¥è¶Šä¹…ï¼Œå…¶å“åº”æ¯”å¤œå£¶è¶Šæ¥è¶Šå¤§ï¼Œä»è€Œé¿å…äº†é•¿ä½œä¸šé¥¥é¥¿çš„é—®é¢˜ã€‚</li></ul><h4 id="6-æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿-3">6 æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿</h4><p>ä¸ä¼š</p><ul><li>ä»¥ä¸Šä¸‰ç§ç®—æ³•æ€»ç»“</li></ul><p>è¿™å‡ ç§ç®—æ³•ä¸»è¦å…³å¿ƒå¯¹ç”¨æˆ·çš„å…¬å¹³æ€§ï¼Œå¹³å‡å‘¨è½¬æ—¶é—´ï¼Œå¹³å‡ç­‰å¾…æ—¶é—´ç­‰è¯„ä»·ç³»ç»Ÿæ€§èƒ½çš„æŒ‡æ ‡ã€‚ä½†æ˜¯ä¸å…³å¿ƒ â€œå“åº”æ—¶é—´â€ ï¼Œä¹Ÿä¸åŒºåˆ†ä»»åŠ¡çš„ç´§æ€¥ç¨‹åº¦ã€‚</p><p>å› æ­¤ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œäº¤äº’æ€§å¾ˆå·®ï¼Œè¿™ä¸‰ç§ç®—æ³•ä¸€èˆ¬é€‚ç”¨äº<strong>æ—©æœŸçš„æ‰¹å¤„ç†ç³»ç»Ÿ</strong>ã€‚</p><p>å½“ç„¶ï¼Œ<code>FCFS</code>ä¹Ÿå¸¸ç»“åˆå…¶ä»–ç®—æ³•ä½¿ç”¨ã€‚</p><h3 id="4ã€æ—¶é—´ç‰‡è½®è½¬ï¼ˆRR-Round-Robinï¼‰">4ã€æ—¶é—´ç‰‡è½®è½¬ï¼ˆRR, Round-Robinï¼‰</h3><h4 id="1-ç®—æ³•æ€æƒ³-4">1 ç®—æ³•æ€æƒ³</h4><p>å…¬å¹³åœ°ã€è½®æµåœ°ä¸ºå„ä¸ªè¿›ç¨‹æœåŠ¡ï¼Œè®©æ¯ä¸ªè¿›ç¨‹åœ¨ä¸€å®šæ—¶é—´å†…éƒ½å¯ä»¥å¾—åˆ°å“åº”</p><p><strong>ï¼å¸¸ç”¨äºåˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œæ›´æ³¨é‡ â€œå“åº”æ—¶é—´â€</strong></p><h4 id="2-ç®—æ³•è§„åˆ™-4">2 ç®—æ³•è§„åˆ™</h4><p>æŒ‰ç…§å„ä¸ªè¿›ç¨‹åˆ°è¾¾å°±ç»ªé˜Ÿåˆ—çš„é¡ºåºï¼Œè½®æµè®©å„ä¸ªè¿›ç¨‹æ‰§è¡Œä¸€ä¸ª<strong>æ—¶é—´ç‰‡</strong>ã€‚</p><p>è‹¥è¿›ç¨‹æœªåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…æ‰§è¡Œå®Œï¼Œåˆ™å‰¥å¤ºå¤„ç†æœºï¼Œå°†è¿›ç¨‹ç¨‹åºæ”¾åˆ°å°±ç»ªé˜Ÿåˆ—é˜Ÿå°¾é‡æ–°æ’é˜Ÿã€‚</p><p><strong>ï¼æ—¶é—´ç‰‡åˆ’åˆ†éœ€è¦æ³¨æ„ï¼š</strong></p><ul><li><p>å¦‚æœæ—¶é—´ç‰‡å¤ªå¤§ï¼š</p><p>ä½¿æ¯ä¸ªè¿›ç¨‹åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…å°±å¯ä»¥å®Œæˆã€‚åˆ™è¯¥ç®—æ³•ä¼šé€€åŒ–æˆFCFSï¼ˆå…ˆåˆ°å…ˆæœåŠ¡ï¼‰ç®—æ³•ï¼Œå¹¶å¢å¤§è¿›ç¨‹å“åº”æ—¶é—´ã€‚</p></li><li><p>å¦‚æœæ—¶é—´ç‰‡å¤ªå°ï¼š</p><p>ä¼šå¯¼è‡´è¿›ç¨‹åˆ‡æ¢è¿‡äºé¢‘ç¹ï¼Œç³»ç»Ÿè¦èŠ±å¤§é‡çš„æ—¶é—´æ¥å¤„ç†è¿›ç¨‹åˆ‡æ¢ã€‚ä»è€Œå¯¼è‡´å®é™…ç”¨äºè¿›ç¨‹æ‰§è¡Œçš„æ—¶é—´æ¯”ä¾‹å‡å°‘ã€‚</p></li><li><p>* ä¸€èˆ¬æ¥è¯´è®¾è®¡æ—¶é—´ç‰‡æ—¶éœ€è¦è®©åˆ‡æ¢è¿›ç¨‹çš„å¼€é”€æ¯”ä¾‹ä¸è¶…è¿‡ 1%ã€‚</p></li></ul><h4 id="3-ç”¨äºä½œä¸š-è¿›ç¨‹è°ƒåº¦-4">3 ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦</h4><p>ç”¨äºè¿›ç¨‹è°ƒåº¦ï¼ˆåªæœ‰ä½œä¸šæ”¾å…¥å†…å­˜å»ºç«‹äº†ç›¸åº”çš„è¿›ç¨‹åï¼Œæ‰èƒ½è¢«åˆ†é…å¤„ç†æœºæ—¶é—´ç‰‡ï¼‰</p><h4 id="4-æ˜¯å¦å¯æŠ¢å -4">4 æ˜¯å¦å¯æŠ¢å </h4><p>æŠ¢å å¼ç®—æ³•ã€‚</p><p>è‹¥è¿›ç¨‹æœªèƒ½åœ¨æ—¶é—´ç‰‡å†…è¿è¡Œå®Œï¼Œå°†è¢«å¼ºåˆ¶å‰¥å¤ºå¤„ç†æœºä½¿ç”¨æƒã€‚</p><p>ç”±æ—¶é’Ÿè£…ç½®å‘å‡ºçš„<strong>æ—¶é’Ÿä¸­æ–­</strong>æ¥é€šçŸ¥CPUæ—¶é—´ç‰‡å·²åˆ°æ—¶ã€‚</p><h4 id="5-ä¼˜ç¼ºç‚¹-3">5 ä¼˜ç¼ºç‚¹</h4><ul><li><p>ä¼˜ç‚¹ï¼š</p><p>å…¬å¹³ï¼Œå“åº”å¿«ï¼Œé€‚ç”¨äºåˆ†æ—¶æ“ä½œç³»ç»Ÿ</p></li><li><p>ç¼ºç‚¹ï¼š</p><ul><li><p>ç”±äºé«˜é¢‘ç‡çš„è¿›ç¨‹åˆ‡æ¢ï¼Œå› æ­¤æœ‰ä¸€å®šçš„å¼€é”€</p></li><li><p>ä¸åŒºåˆ†ä»»åŠ¡ç´§æ€¥ç¨‹åº¦</p></li></ul></li></ul><h4 id="6-æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿-4">6 æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿</h4><p>ä¸ä¼š</p><h3 id="5ã€ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•">5ã€ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•</h3><h4 id="1-ç®—æ³•æ€æƒ³-5">1 ç®—æ³•æ€æƒ³</h4><p>å®æ—¶æ“ä½œç³»ç»Ÿçš„å‡ºç°ï¼Œè¶Šæ¥è¶Šå¤šçš„åº”ç”¨åœºæ™¯éœ€è¦æ ¹æ®ä»»åŠ¡çš„ç´§æ€¥ç¨‹åº¦æ¥å†³å®šå¤„ç†é¡ºåºã€‚</p><h4 id="2-ç®—æ³•è§„åˆ™-5">2 ç®—æ³•è§„åˆ™</h4><p>ç»™æ¯ä¸€ä¸ª ä½œä¸š/è¿›ç¨‹ å„è‡ªçš„ä¼˜å…ˆçº§ï¼Œè°ƒåº¦çš„æ—¶å€™é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„ ä½œä¸š/è¿›ç¨‹ ã€‚</p><h4 id="3-ç”¨äºä½œä¸š-è¿›ç¨‹è°ƒåº¦-5">3 ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦</h4><p>å¯ç”¨äºä½œä¸šè°ƒåº¦ã€è¿›ç¨‹è°ƒåº¦ã€ä»¥åŠI/Oè°ƒåº¦ã€‚</p><h4 id="4-æ˜¯å¦å¯æŠ¢å -5">4 æ˜¯å¦å¯æŠ¢å </h4><p>æŠ¢å å¼&amp;éæŠ¢å å¼ã€‚</p><p>åŒºåˆ«ï¼š</p><ul><li>éæŠ¢å å¼åªéœ€åœ¨è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºæ—¶è¿›è¡Œè°ƒåº¦å³å¯</li><li>æŠ¢å å¼è¿˜éœ€åœ¨å°±ç»ªé˜Ÿåˆ—å˜åŒ–æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦ä¼šå‘ç”Ÿè¿›ç¨‹ä¹‹é—´çš„æŠ¢å </li></ul><p>è¦æ³¨æ„çš„æ˜¯ï¼Œå°±ç»ªé˜Ÿåˆ—æœªå¿…åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æŒ‰ç…§ä¼˜å…ˆçº§ä¸åŒæ¥ç»„ç»‡ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥æŠŠä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹æ’åœ¨æ›´é è¿‘é˜Ÿå¤´çš„ä½ç½®ã€‚</p><ul><li><p>ä¼˜å…ˆçº§</p><ul><li><p>é™æ€ä¼˜å…ˆçº§ï¼šå…‰å‰‘è¿›ç¨‹æ—¶å€™ç¡®å®šçš„ï¼Œä¹‹åä¸€ç›´ä¸å˜</p><ul><li><p>é€šå¸¸æ¥è¯´ï¼š</p><ul><li><p>ç³»ç»Ÿè¿›ç¨‹ä¼˜å…ˆçº§ é«˜äº ç”¨æˆ·è¿›ç¨‹</p></li><li><p>å‰å°è¿›ç¨‹ä¼˜å…ˆçº§ é«˜äº åå°è¿›ç¨‹</p></li><li><p>æ“ä½œç³»ç»Ÿæ›´åå¥½I/Oå‹è¿›ç¨‹ï¼ˆI/Oç¹å¿™å‹è¿›ç¨‹ï¼‰</p><p>I/Oè®¾å¤‡å¯ä»¥å’ŒCPUè®¾å¤‡å¹¶è¡Œå·¥ä½œã€‚</p><p>è®©I/Oè®¾å¤‡å°½æ—©æŠ•å…¥å·¥ä½œï¼Œèµ„æºåˆ©ç”¨ç‡ã€ç³»ç»Ÿååé‡ä¼šå¾—åˆ°æå‡ã€‚</p></li><li><p>ä¸I/Oå‹è¿›ç¨‹å…ˆå¯¹çš„æ˜¯<strong>è®¡ç®—å‹è¿›ç¨‹ï¼ˆCPUç¹å¿™è¿›ç¨‹ï¼‰</strong></p></li></ul></li></ul></li><li><p>åŠ¨æ€ä¼˜å…ˆçº§ï¼šåˆ›å»ºçš„æ—¶å€™æœ‰ä¸ªåˆå§‹å€¼ï¼Œä¹‹åä¼šæ ¹æ®æƒ…å†µåŠ¨æ€åœ°è°ƒæ•´ä¼˜å…ˆçº§</p><ul><li>å¦‚æœè¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…å¾ˆé•¿æ—¶é—´ï¼Œå°±å¯ä»¥é€‚å½“æå‡ä¼˜å…ˆçº§</li><li>å¦‚æœè¿›ç¨‹å ç”¨å¤„ç†æœºå¾ˆé•¿æ—¶é—´ï¼Œåˆ™å¯ä»¥é€‚å½“é™ä½ä¼˜å…ˆçº§</li><li>å¦‚æœå‘ç°ä¸€ä¸ªè¿›ç¨‹é¢‘ç¹åœ°è¿›è¡ŒI/Oæ“ä½œï¼Œåˆ™å¯ä»¥é€‚å½“æå‡ä¼˜å…ˆçº§</li></ul></li></ul></li></ul><h4 id="5-ä¼˜ç¼ºç‚¹-4">5 ä¼˜ç¼ºç‚¹</h4><ul><li><p>ä¼˜ç‚¹ï¼š</p><p>ç”¨ä¼˜å…ˆçº§åŒºåˆ†ä»»åŠ¡ç´§æ€¥ç¨‹åº¦ã€‚é€‚ç”¨äºå®æ—¶æ“ä½œç³»ç»Ÿã€‚å¯ä»¥çµæ´»åœ°è°ƒæ•´å¯¹å„ä¸ª ä½œä¸š/è¿›ç¨‹ çš„åå¥½ç¨‹åº¦</p></li><li><p>ç¼ºç‚¹</p><p>å¦‚æœæºæºä¸æ–­çš„æœ‰é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹è¿›æ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¥¥é¥¿</p></li></ul><h4 id="6-æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿-5">6 æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿</h4><p>ä¼š</p><h3 id="6ã€å¤šçº§åé¦ˆé˜Ÿåˆ—">6ã€å¤šçº§åé¦ˆé˜Ÿåˆ—</h3><h4 id="1-ç®—æ³•æ€æƒ³-6">1 ç®—æ³•æ€æƒ³</h4><p>å¯¹å…¶ä»–è°ƒåº¦ç®—æ³•çš„æ•´ç†é›†ä¸­</p><h4 id="2-ç®—æ³•è§„åˆ™-6">2 ç®—æ³•è§„åˆ™</h4><ol><li><p>è®¾ç½®å¤šä¸ªå°±ç»ªé˜Ÿåˆ—</p><p><strong>å„çº§é˜Ÿåˆ—ä¼˜å…ˆçº§ ä»é«˜åˆ°ä½ï¼Œæ—¶é—´ç‰‡ ä»å°åˆ°å¤§</strong></p></li><li><p>æ–°è¿›ç¨‹åˆ°å¤§æ—¶ï¼Œå…ˆè¿›å…¥1çº§é˜Ÿåˆ—ï¼ŒæŒ‰<code>FCFS</code>åŸåˆ™æ’é˜Ÿç­‰å¾…è¢«åˆ†é…ã€‚</p><p>è‹¥ç”¨å®Œæ—¶é—´ç‰‡è¿›ç¨‹è¿˜æœªç»“æŸï¼Œåˆ™è¿›å…¥ä¸‹ä¸€çº§é˜Ÿåˆ—çš„é˜Ÿå°¾ã€‚</p><p>å¦‚æœæ­¤æ—¶å·²ç»åœ¨æœ€ä¸‹çº§çš„é˜Ÿåˆ—ï¼Œåˆ™é‡æ–°æ”¾å›è¯¥é˜Ÿé˜Ÿå°¾ã€‚</p></li><li><p>åªæœ‰ç¬¬kçº§é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šä¸ºk+1çº§çš„é˜Ÿåˆ—åˆ†é…æ—¶é—´ç‰‡</p></li></ol><h4 id="3-ç”¨äºä½œä¸š-è¿›ç¨‹è°ƒåº¦-6">3 ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦</h4><p>ç”¨äºè¿›ç¨‹è°ƒåº¦</p><h4 id="4-æ˜¯å¦å¯æŠ¢å -6">4 æ˜¯å¦å¯æŠ¢å </h4><p>æŠ¢å å¼ç®—æ³•ã€‚</p><p>åœ¨kçº§é˜Ÿåˆ—çš„è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè‹¥æ›´ä¸Šçº§çš„é˜Ÿåˆ—ä¸­è¿›äº†ä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œåˆ™ç”±äºæ–°è¿›ç¨‹å¤„äºä¼˜å…ˆçº§æ›´é«˜çš„é˜Ÿåˆ—ä¸­ï¼Œå› æ­¤æ–°è¿›ç¨‹ä¼šæŠ¢å å¤„ç†æœºï¼ŒåŸæ¥è¿è¡Œçš„è¿›ç¨‹æ”¾å›kçº§é˜Ÿåˆ—é˜Ÿå°¾ã€‚</p><h4 id="5-ä¼˜ç¼ºç‚¹-5">5 ä¼˜ç¼ºç‚¹</h4><ul><li><p>ä¼˜ç‚¹ï¼š</p><ul><li><p>å¯¹å„ç±»å‹è¿›ç¨‹ç›¸å¯¹å…¬å¹³ï¼ˆFCFSçš„ä¼˜ç‚¹ï¼‰</p></li><li><p>æ¯ä¸ªæ–°åˆ°è¾¾çš„è¿›ç¨‹éƒ½è‹¦å¾ˆå¿«å¾—åˆ°å“åº”ï¼ˆRRçš„ä¼˜ç‚¹ï¼‰</p></li><li><p>çŸ­è¿›ç¨‹åªç”¨è¾ƒå°‘çš„æ—¶é—´å°±å¯ä»¥å®Œæˆï¼ˆSPFçš„ä¼˜ç‚¹ï¼‰</p></li><li><p>ä¸æ¯”å®ç°ä¼°è®¡è¿›ç¨‹çš„è¿è¡Œæ—¶é—´ï¼ˆé¿å…ç”¨æˆ·æä¾›çš„è¿è¡Œæ—¶é—´ä¸å‡†ç¡®ï¼‰</p></li><li><p>å¯ä»¥çµæ´»åœ°è°ƒæ•´å¯¹å„ç±»è¿›ç¨‹çš„åå¥½ç¨‹åº¦ï¼Œæ¯”å¦‚CPUå¯†é›†å‹è¿›ç¨‹ï¼ŒI/Oå¯†é›†å‹è¿›ç¨‹</p><p>ï¼ˆå¯ä»¥å°†å› I/Oè€Œé˜»å¡çš„è¿›ç¨‹é‡æ–°æ”¾å›åŸé˜Ÿåˆ—ï¼Œè¿™æ ·I/Oå‹è¿›ç¨‹å°±å¯ä»¥ä¿æŒè¾ƒé«˜çš„ä¼˜å…ˆçº§ï¼‰</p></li></ul></li><li><p>ç¼ºç‚¹ï¼š</p><p>å¯èƒ½ä¼šå¯¼è‡´é¥¥é¥¿</p></li></ul><h4 id="6-æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿-6">6 æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿</h4><p>ä¼š</p><p>å¦‚æœæºæºä¸æ–­æœ‰çŸ­è¿›ç¨‹è¿›å…¥é˜Ÿåˆ—ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¥¥é¥¿</p><ul><li>åä¸‰ç§ç®—æ³•é€‚ç”¨äºäº¤äº’å¼çš„ç³»ç»Ÿï¼ˆæ¯”å¦‚Unixå°±æ˜¯ä½¿ç”¨å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼‰</li></ul>    <style>    #refplus, #refplus li{         padding:0;        margin:0;        list-style:none;    }ï¼›    </style>    <script src="https://unpkg.com/@popperjs/core@2"></script>    <script src="https://unpkg.com/tippy.js@6"></script>    <script>    document.querySelectorAll(".refplus-num").forEach((ref) => {        let refid = ref.firstChild.href.replace(location.origin+location.pathname,'');        let refel = document.querySelector(refid);        let refnum = refel.dataset.num;        let ref_content = refel.innerText.replace(`[${refnum}]`,'');        tippy(ref, {            content: ref_content,        });    });    </script>    ]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºçŸ¥è¯† </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Numpy æ€»ç»“ç¬”è®°</title>
      <link href="/2022/04/17/numpy-summary/"/>
      <url>/2022/04/17/numpy-summary/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>numpy æ€»ç»“ç¬”è®°</h1><p>å¶ç„¶ç¿»åˆ°ä¸€ç¯‡ä»¥å‰æ•´ç†çš„numpyç¬”è®°ï¼Œç”±äºæ•°æ®åˆ†ææ˜¯äººå·¥æ™ºèƒ½å¾ˆé‡è¦å¾ˆåŸºç¡€çš„å†…å®¹ï¼Œå› æ­¤ç¨ä½œæ•´ç†å’Œå¤§å®¶å…±äº«</p><h2 id="ä¸€ã€Ndarray-å¯¹è±¡">ä¸€ã€Ndarray å¯¹è±¡</h2><p>ndarray å†…éƒ¨ç”±ä»¥ä¸‹å†…å®¹ç»„æˆï¼š</p><ul><li><p>ä¸€ä¸ªæŒ‡å‘æ•°æ®ï¼ˆå†…å­˜ | å†…å­˜æ˜ å°„æ–‡ä»¶ä¸­çš„ä¸€å—æ•°æ®ï¼‰çš„æŒ‡é’ˆã€‚</p></li><li><p>æ•°æ®ç±»å‹æˆ– dtypeï¼Œæè¿°åœ¨æ•°ç»„ä¸­çš„ å›ºå®šå¤§å°å€¼çš„æ ¼å­ã€‚</p></li><li><p>ä¸€ä¸ªè¡¨ç¤ºæ•°ç»„å½¢çŠ¶ï¼ˆshapeï¼‰çš„å…ƒç»„ï¼Œè¡¨å„ç»´åº¦å¤§å°çš„å…ƒç»„ã€‚</p></li><li><p>ä¸€ä¸ªè·¨åº¦å…ƒç»„ï¼ˆstrideï¼‰ï¼Œå…¶ä¸­çš„æ•´æ•°æŒ‡çš„æ˜¯ ä¸ºäº†å‰è¿›åˆ°å½“å‰ç»´åº¦ ä¸‹ä¸€ä¸ªå…ƒç´ éœ€è¦"è·¨è¿‡"çš„å­—èŠ‚æ•°ã€‚</p></li></ul><p><img src="https://s2.loli.net/2022/04/17/D6L4eZEcpbjw1AR.png" alt="np-nparray"></p><p>è·¨åº¦å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œè¿™æ ·ä¼šä½¿æ•°ç»„åœ¨å†…å­˜ä¸­åå‘ç§»åŠ¨ï¼Œåˆ‡ç‰‡ä¸­ obj[::-1] æˆ– obj[:,::-1] å°±æ˜¯å¦‚æ­¤ã€‚</p><p>åˆ›å»ºä¸€ä¸ª ndarray åªéœ€è°ƒç”¨ NumPy çš„ array å‡½æ•°å³å¯ï¼š</p><p><code>numpy.array(object, dtype = None, copy = True, order = None, subok = False, ndmin = 0)</code></p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th><strong>åç§°</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td><strong>object</strong></td><td>æ•°ç»„æˆ–åµŒå¥—çš„æ•°åˆ—</td></tr><tr><td><strong>dtype</strong></td><td>æ•°ç»„å…ƒç´ çš„æ•°æ®ç±»å‹ï¼Œå¯é€‰</td></tr><tr><td><strong>copy</strong></td><td>å¯¹è±¡æ˜¯å¦éœ€è¦å¤åˆ¶ï¼Œå¯é€‰</td></tr><tr><td><strong>order</strong></td><td>åˆ›å»ºæ•°ç»„çš„æ ·å¼ï¼ŒCä¸ºè¡Œæ–¹å‘ï¼ŒFä¸ºåˆ—æ–¹å‘ï¼ŒAä¸ºä»»æ„æ–¹å‘ï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td><strong>subok</strong></td><td>é»˜è®¤è¿”å›ä¸€ä¸ªä¸åŸºç±»ç±»å‹ä¸€è‡´çš„æ•°ç»„</td></tr><tr><td><strong>ndmin</strong></td><td>æŒ‡å®šç”Ÿæˆæ•°ç»„çš„æœ€å°ç»´åº¦</td></tr></tbody></table><h2 id="äºŒã€NumPy-æ•°æ®ç±»å‹">äºŒã€NumPy æ•°æ®ç±»å‹</h2><h3 id="1ï¼‰ï¼šåŸºæœ¬æ•°æ®ç±»å‹">1ï¼‰ï¼šåŸºæœ¬æ•°æ®ç±»å‹</h3><table><thead><tr><th><strong>åç§°</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>bool_</td><td>å¸ƒå°”å‹æ•°æ®ç±»å‹ï¼ˆTrue æˆ–è€… Falseï¼‰</td></tr><tr><td>int_</td><td>é»˜è®¤çš„æ•´æ•°ç±»å‹ï¼ˆç±»ä¼¼äº C è¯­è¨€ä¸­çš„ longï¼Œint32 æˆ– int64ï¼‰</td></tr><tr><td>intc</td><td>ä¸ C çš„ int ç±»å‹ä¸€æ ·ï¼Œä¸€èˆ¬æ˜¯ int32 æˆ– int 64</td></tr><tr><td>intp</td><td>ç”¨äºç´¢å¼•çš„æ•´æ•°ç±»å‹ï¼ˆç±»ä¼¼äº C çš„ ssize_tï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä»ç„¶æ˜¯ int32 æˆ– int64ï¼‰</td></tr><tr><td>int8</td><td>å­—èŠ‚ï¼ˆ-128 to 127ï¼‰</td></tr><tr><td>int16</td><td>æ•´æ•°ï¼ˆ-32768 to 32767ï¼‰</td></tr><tr><td>int32</td><td>æ•´æ•°ï¼ˆ-2147483648 to 2147483647ï¼‰</td></tr><tr><td>int64</td><td>æ•´æ•°ï¼ˆ-9223372036854775808 to 9223372036854775807ï¼‰</td></tr><tr><td>uint8</td><td>æ— ç¬¦å·æ•´æ•°ï¼ˆ0 to 255ï¼‰</td></tr><tr><td>uint16</td><td>æ— ç¬¦å·æ•´æ•°ï¼ˆ0 to 65535ï¼‰</td></tr><tr><td>uint32</td><td>æ— ç¬¦å·æ•´æ•°ï¼ˆ0 to 4294967295ï¼‰</td></tr><tr><td>uint64</td><td>æ— ç¬¦å·æ•´æ•°ï¼ˆ0 to 18446744073709551615ï¼‰</td></tr><tr><td>float_</td><td>float64 ç±»å‹çš„ç®€å†™</td></tr><tr><td>float16</td><td>åŠç²¾åº¦æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬ï¼š1 ä¸ªç¬¦å·ä½ï¼Œ5 ä¸ªæŒ‡æ•°ä½ï¼Œ10 ä¸ªå°¾æ•°ä½</td></tr><tr><td>float32</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬ï¼š1 ä¸ªç¬¦å·ä½ï¼Œ8 ä¸ªæŒ‡æ•°ä½ï¼Œ23 ä¸ªå°¾æ•°ä½</td></tr><tr><td>float64</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬ï¼š1 ä¸ªç¬¦å·ä½ï¼Œ11 ä¸ªæŒ‡æ•°ä½ï¼Œ52 ä¸ªå°¾æ•°ä½</td></tr><tr><td>complex_</td><td>complex128 ç±»å‹çš„ç®€å†™ï¼Œå³ 128 ä½å¤æ•°</td></tr><tr><td>complex64</td><td>å¤æ•°ï¼Œè¡¨ç¤ºåŒ 32 ä½æµ®ç‚¹æ•°ï¼ˆå®æ•°éƒ¨åˆ†å’Œè™šæ•°éƒ¨åˆ†ï¼‰</td></tr><tr><td>complex128</td><td>å¤æ•°ï¼Œè¡¨ç¤ºåŒ 64 ä½æµ®ç‚¹æ•°ï¼ˆå®æ•°éƒ¨åˆ†å’Œè™šæ•°éƒ¨åˆ†ï¼‰</td></tr></tbody></table><ul><li><p>numpy çš„æ•°å€¼ç±»å‹å®é™…ä¸Šæ˜¯ dtype å¯¹è±¡çš„å®ä¾‹ï¼Œå¹¶ä¸”å¯¹åº”å”¯ä¸€çš„å­—ç¬¦ï¼Œå¦‚ np.bool_ï¼Œnp.int32ï¼Œnp.float32ï¼Œç­‰ç­‰ã€‚</p></li><li><p>int8, int16, int32, int64 å››ç§æ•°æ®ç±»å‹å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸² â€˜i1â€™, â€˜i2â€™,â€˜i4â€™,â€˜i8â€™ ä»£æ›¿</p></li></ul><h3 id="2ï¼‰ï¼šæ•°æ®ç±»å‹å¯¹è±¡dtype">2ï¼‰ï¼šæ•°æ®ç±»å‹å¯¹è±¡dtype</h3><p>dtype å¯¹è±¡ä½¿ç”¨ä»¥ä¸‹è¯­æ³•æ„é€ ï¼š</p><p><code>numpy.dtype(object, align, copy)</code></p><ul><li><p>object è¦è½¬æ¢ä¸ºçš„æ•°æ®ç±»å‹å¯¹è±¡</p></li><li><p>alignå¦‚æœä¸º trueï¼Œå¡«å……å­—æ®µä½¿å…¶ç±»ä¼¼ C çš„ç»“æ„ä½“ã€‚</p></li><li><p>copyå¤åˆ¶ dtype å¯¹è±¡ ï¼Œè‹¥ä¸º falseï¼Œåˆ™æ˜¯å¯¹å†…ç½®æ•°æ®ç±»å‹å¯¹è±¡çš„å¼•ç”¨</p></li></ul><p>æ¯ä¸ªå†…å»ºç±»å‹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€å®šä¹‰å®ƒçš„å­—ç¬¦ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p><table><thead><tr><th>å­—ç¬¦</th><th>å¯¹åº”ç±»å‹</th></tr></thead><tbody><tr><td>b</td><td>å¸ƒå°”å‹</td></tr><tr><td>i</td><td>(æœ‰ç¬¦å·) æ•´å‹</td></tr><tr><td>u</td><td>æ— ç¬¦å·æ•´å‹ integer</td></tr><tr><td>f</td><td>æµ®ç‚¹å‹</td></tr><tr><td>c</td><td>å¤æ•°æµ®ç‚¹å‹</td></tr><tr><td>m</td><td>timedeltaï¼ˆæ—¶é—´é—´éš”ï¼‰</td></tr><tr><td>M</td><td>datetimeï¼ˆæ—¥æœŸæ—¶é—´ï¼‰</td></tr><tr><td>O</td><td>(Python) å¯¹è±¡</td></tr><tr><td>S, a</td><td>(byte-)å­—ç¬¦ä¸²</td></tr><tr><td>U</td><td>Unicode</td></tr><tr><td>V</td><td>åŸå§‹æ•°æ® (void)</td></tr></tbody></table><p>å®ä¾‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>dtype<span class="token punctuation">(</span>np<span class="token punctuation">.</span>int32<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>int32<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>dtype<span class="token punctuation">(</span><span class="token string">'i4'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>int32<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>dtype<span class="token punctuation">(</span><span class="token string">'&lt;i4'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>int32<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>dtype<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>int8<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'i1'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>dt <span class="token operator">=</span> np<span class="token punctuation">.</span>dtype<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>int8<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype <span class="token operator">=</span> dt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">]</span>dt <span class="token operator">=</span> np<span class="token punctuation">.</span>dtype<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>int8<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> a <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype <span class="token operator">=</span> dt<span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token number">10</span> <span class="token number">20</span> <span class="token number">30</span><span class="token punctuation">]</span>student <span class="token operator">=</span> np<span class="token punctuation">.</span>dtype<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'S20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'i1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'marks'</span><span class="token punctuation">,</span> <span class="token string">'f4'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'S20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'i1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'marks'</span><span class="token punctuation">,</span> <span class="token string">'f4'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>student <span class="token operator">=</span> np<span class="token punctuation">.</span>dtype<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'S20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'i1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'marks'</span><span class="token punctuation">,</span> <span class="token string">'f4'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'xyz'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype <span class="token operator">=</span> student<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'xyz'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">75.0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸‰ã€æ•°ç»„">ä¸‰ã€æ•°ç»„</h2><h3 id="1ï¼‰ï¼šæ•°ç»„å±æ€§">1ï¼‰ï¼šæ•°ç»„å±æ€§</h3><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ndarray.ndim</td><td>ç§©ï¼Œå³è½´çš„æ•°é‡æˆ–ç»´åº¦çš„æ•°é‡</td></tr><tr><td>ndarray.shape</td><td>æ•°ç»„çš„ç»´åº¦ï¼Œå¯¹äºçŸ©é˜µï¼Œn è¡Œ m åˆ—</td></tr><tr><td>ndarray.size</td><td>æ•°ç»„å…ƒç´ çš„æ€»ä¸ªæ•°ï¼Œç›¸å½“äº .shape ä¸­ n*m çš„å€¼</td></tr><tr><td>ndarray.dtype</td><td>ndarray å¯¹è±¡çš„å…ƒç´ ç±»å‹</td></tr><tr><td>ndarray.itemsize</td><td>ndarray å¯¹è±¡ä¸­æ¯ä¸ªå…ƒç´ çš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½</td></tr><tr><td>ndarray.flags</td><td>ndarray å¯¹è±¡çš„å†…å­˜ä¿¡æ¯</td></tr><tr><td>ndarray.real</td><td>ndarray å…ƒç´ çš„å®éƒ¨</td></tr><tr><td>ndarray.imag</td><td>ndarray å…ƒç´ çš„è™šéƒ¨</td></tr><tr><td>ndarray.data</td><td>åŒ…å«å®é™…æ•°ç»„å…ƒç´ çš„ç¼“å†²åŒºç”±äºä¸€èˆ¬é€šè¿‡æ•°ç»„çš„ç´¢å¼•è·å–å…ƒç´ ï¼Œæ‰€ä»¥é€šå¸¸ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ªå±æ€§ã€‚</td></tr><tr><td>ndarray.reshape</td><td>ndarrayé‡æ–°åˆ†é…å¤§å°ï¼ŒåŒ…æ‹¬ç§©ç­‰ç­‰éƒ½å¯ä»¥å˜æ¢</td></tr></tbody></table><p>ndarray.flags è¿”å› ndarray å¯¹è±¡çš„å†…å­˜ä¿¡æ¯ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š</p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>C_CONTIGUOUS Â©</td><td>æ•°æ®æ˜¯åœ¨ä¸€ä¸ªå•ä¸€çš„Cé£æ ¼çš„è¿ç»­æ®µä¸­</td></tr><tr><td>F_CONTIGUOUS (F)</td><td>æ•°æ®æ˜¯åœ¨ä¸€ä¸ªå•ä¸€çš„Fortrané£æ ¼çš„è¿ç»­æ®µä¸­</td></tr><tr><td>OWNDATA (O)</td><td>æ•°ç»„æ‹¥æœ‰å®ƒæ‰€ä½¿ç”¨çš„å†…å­˜æˆ–ä»å¦ä¸€ä¸ªå¯¹è±¡ä¸­å€Ÿç”¨å®ƒ</td></tr><tr><td>WRITEABLE (W)</td><td>æ•°æ®åŒºåŸŸå¯ä»¥è¢«å†™å…¥ï¼Œå°†è¯¥å€¼è®¾ç½®ä¸º Falseï¼Œåˆ™æ•°æ®ä¸ºåªè¯»</td></tr><tr><td>ALIGNED (A)</td><td>æ•°æ®å’Œæ‰€æœ‰å…ƒç´ éƒ½é€‚å½“åœ°å¯¹é½åˆ°ç¡¬ä»¶ä¸Š</td></tr><tr><td>UPDATEIFCOPY (U)</td><td>è¿™ä¸ªæ•°ç»„æ˜¯å…¶å®ƒæ•°ç»„çš„ä¸€ä¸ªå‰¯æœ¬å½“è¿™ä¸ªæ•°ç»„è¢«é‡Šæ”¾æ—¶ï¼ŒåŸæ•°ç»„çš„å†…å®¹å°†è¢«æ›´æ–°</td></tr></tbody></table><p>å®ä¾‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>flags<span class="token punctuation">)</span><span class="token operator">&gt;</span>C_CONTIGUOUS <span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token operator">&gt;</span>F_CONTIGUOUS <span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token operator">&gt;</span>OWNDATA <span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token operator">&gt;</span>WRITEABLE <span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token operator">&gt;</span>ALIGNED <span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token operator">&gt;</span>WRITEBACKIFCOPY <span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token operator">&gt;</span>UPDATEIFCOPY <span class="token punctuation">:</span> <span class="token boolean">False</span>a <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> a<span class="token punctuation">.</span>shape <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">3</span> <span class="token number">4</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">5</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token comment"># æ•°ç»„çš„ dtype ä¸º int8ï¼ˆä¸€ä¸ªå­—èŠ‚ï¼‰ </span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype <span class="token operator">=</span> np<span class="token punctuation">.</span>int8<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>itemsize<span class="token punctuation">)</span> <span class="token comment"># æ•°ç»„çš„ dtype ç°åœ¨ä¸º float64ï¼ˆå…«ä¸ªå­—èŠ‚ï¼‰ </span>y <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype <span class="token operator">=</span> np<span class="token punctuation">.</span>float64<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>y<span class="token punctuation">.</span>itemsize<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸ºfloat64çš„æ•°ç»„ï¼Œitemsizeå±æ€§å€¼ä¸º8(float64å ç”¨64ä¸ªbitsï¼Œæ¯ä¸ªå­—èŠ‚é•¿åº¦ä¸º8ï¼Œæ‰€ä»¥64/8å ç”¨ 8 ä¸ªå­—èŠ‚ï¼‰</p></li><li><p>ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸ºcomplex32çš„æ•°ç»„itemå±æ€§ä¸º4ï¼ˆ32/8ï¼‰</p></li></ul><h3 id="2ï¼‰ï¼šåˆ›å»ºæ•°ç»„">2ï¼‰ï¼šåˆ›å»ºæ•°ç»„</h3><p><code>numpy.zeros(shape, dtype = float, order = 'C')</code></p><p><code>numpy.ones(shape, dtype = None, order = 'C')</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># é»˜è®¤ä¸ºæµ®ç‚¹æ•° </span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment"># è®¾ç½®ç±»å‹ä¸ºæ•´æ•° </span>y <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token comment"># è‡ªå®šä¹‰ç±»å‹ </span>z <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'i4'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'i4'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token comment"># è¾“å‡º</span><span class="token punctuation">[</span><span class="token number">1.</span> <span class="token number">1.</span> <span class="token number">1.</span> <span class="token number">1.</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3ï¼‰ï¼šä»å·²æœ‰çš„æ•°ç»„åˆ›å»ºæ•°ç»„">3ï¼‰ï¼šä»å·²æœ‰çš„æ•°ç»„åˆ›å»ºæ•°ç»„</h3><h4 id="1ã€asarray">1ã€asarray</h4><p><code>numpy.asarray(a, dtype = None, order = None)</code></p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>a</td><td>ä»»æ„å½¢å¼çš„è¾“å…¥å‚æ•°ï¼Œå¯ä»¥æ˜¯ åˆ—è¡¨, åˆ—è¡¨çš„å…ƒç»„, å…ƒç»„, å…ƒç»„çš„å…ƒç»„, å…ƒç»„çš„åˆ—è¡¨ï¼Œå¤šç»´æ•°ç»„</td></tr><tr><td>dtype</td><td>æ•°æ®ç±»å‹ï¼Œå¯é€‰</td></tr><tr><td>order</td><td>å¯é€‰ï¼Œæœ‰"C"å’Œ"F"ä¸¤ä¸ªé€‰é¡¹,åˆ†åˆ«ä»£è¡¨ï¼Œè¡Œä¼˜å…ˆå’Œåˆ—ä¼˜å…ˆï¼Œåœ¨è®¡ç®—æœºå†…å­˜ä¸­çš„å­˜å‚¨å…ƒç´ çš„é¡ºåºã€‚</td></tr></tbody></table><pre class="line-numbers language-python" data-language="python"><code class="language-python">x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span> a <span class="token operator">=</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment"># è¾“å‡º</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2ã€numpy-frombuffer">2ã€numpy.frombuffer</h4><p>numpy.frombuffer ç”¨äºå®ç°åŠ¨æ€æ•°ç»„ã€‚</p><p>numpy.frombuffer æ¥å— buffer è¾“å…¥å‚æ•°ï¼Œä»¥æµçš„å½¢å¼è¯»å…¥è½¬åŒ–æˆ ndarray å¯¹è±¡ã€‚</p><p><code>numpy.frombuffer(buffer, dtype = float, count = -1, offset = 0)</code></p><ul><li>æ³¨ï¼š<br>bufferæ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼ŒPython3é»˜è®¤stræ˜¯Unicode ç±»å‹æ‰€ä»¥è¦è½¬æˆbytestringåœ¨åŸstrå‰åŠ ä¸Šbã€‚</li></ul><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>buffer</td><td>å¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ï¼Œä¼šä»¥æµçš„å½¢å¼è¯»å…¥</td></tr><tr><td>dtype</td><td>è¿”å›æ•°ç»„çš„æ•°æ®ç±»å‹ï¼Œå¯é€‰</td></tr><tr><td>count</td><td>è¯»å–çš„æ•°æ®æ•°é‡ï¼Œé»˜è®¤ä¸º-1ï¼Œè¯»å–æ‰€æœ‰æ•°æ®</td></tr><tr><td>offset</td><td>è¯»å–çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º0</td></tr></tbody></table><pre class="line-numbers language-python" data-language="python"><code class="language-python">s <span class="token operator">=</span> <span class="token string">b'Hello World'</span> a <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>s<span class="token punctuation">,</span> dtype <span class="token operator">=</span> <span class="token string">'S1'</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment"># è¾“å‡º</span><span class="token punctuation">[</span><span class="token string">b'H'</span> <span class="token string">b'e'</span> <span class="token string">b'l'</span> <span class="token string">b'l'</span> <span class="token string">b'o'</span> <span class="token string">b' '</span> <span class="token string">b'W'</span> <span class="token string">b'o'</span> <span class="token string">b'r'</span> <span class="token string">b'l'</span> <span class="token string">b'd'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3ã€numpy-fromiter">3ã€numpy.fromiter</h4><p>numpy.fromiter æ–¹æ³•ä»å¯è¿­ä»£å¯¹è±¡ä¸­å»ºç«‹ ndarray å¯¹è±¡ï¼Œè¿”å›ä¸€ç»´æ•°ç»„ã€‚</p><p><code>numpy.fromiter(iterable, dtype, count=-1)</code></p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>iterable</td><td>å¯è¿­ä»£å¯¹è±¡</td></tr><tr><td>dtype</td><td>è¿”å›æ•°ç»„çš„æ•°æ®ç±»å‹</td></tr><tr><td>count</td><td>è¯»å–çš„æ•°æ®æ•°é‡ï¼Œé»˜è®¤ä¸º-1ï¼Œè¯»å–æ‰€æœ‰æ•°æ®</td></tr></tbody></table><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä½¿ç”¨ range å‡½æ•°åˆ›å»ºåˆ—è¡¨å¯¹è±¡ </span><span class="token builtin">list</span><span class="token operator">=</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> it<span class="token operator">=</span><span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span> <span class="token comment"># ä½¿ç”¨è¿­ä»£å™¨åˆ›å»º ndarray </span>x<span class="token operator">=</span>np<span class="token punctuation">.</span>fromiter<span class="token punctuation">(</span>it<span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment"># è¾“å‡º</span><span class="token punctuation">[</span><span class="token number">0.</span> <span class="token number">1.</span> <span class="token number">2.</span> <span class="token number">3.</span> <span class="token number">4.</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4ï¼‰ï¼šä»æ•°å€¼èŒƒå›´åˆ›å»ºæ•°ç»„">4ï¼‰ï¼šä»æ•°å€¼èŒƒå›´åˆ›å»ºæ•°ç»„</h3><h4 id="1ã€numpy-arange">1ã€numpy.arange</h4><p>numpy åŒ…ä¸­çš„ä½¿ç”¨ arange å‡½æ•°åˆ›å»ºæ•°å€¼èŒƒå›´å¹¶è¿”å› ndarray å¯¹è±¡ï¼š</p><p><code>numpy.arange(start, stop, step, dtype)</code></p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>start</td><td>åºåˆ—çš„èµ·å§‹å€¼</td></tr><tr><td>stop</td><td>åºåˆ—çš„ç»ˆæ­¢å€¼ï¼Œè‹¥endpointä¸ºtrueï¼Œè¯¥å€¼åŒ…å«äºæ•°åˆ—ä¸­</td></tr><tr><td>num</td><td>è¦ç”Ÿæˆçš„ç­‰æ­¥é•¿çš„æ ·æœ¬æ•°é‡ï¼Œé»˜è®¤ä¸º50</td></tr><tr><td>endpoint</td><td>è¯¥å€¼ä¸º true æ—¶ï¼Œæ•°åˆ—ä¸­åŒ…å«stopå€¼ï¼Œåä¹‹ä¸åŒ…å«ï¼Œé»˜è®¤True</td></tr><tr><td>retstep</td><td>å¦‚æœä¸º True æ—¶ï¼Œç”Ÿæˆçš„æ•°ç»„ä¸­ä¼šæ˜¾ç¤ºé—´è·ï¼Œåä¹‹ä¸æ˜¾ç¤º</td></tr><tr><td>dtype</td><td>ndarray çš„æ•°æ®ç±»å‹</td></tr></tbody></table><h4 id="2ã€numpy-logspace">2ã€numpy.logspace</h4><p>numpy.logspace å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªäºç­‰æ¯”æ•°åˆ—ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p><p><code>np.logspace(start, stop, num=50, endpoint=True, base=10.0, dtype=None)</code></p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>start</td><td>åºåˆ—çš„èµ·å§‹å€¼ä¸ºï¼šbase ** start</td></tr><tr><td>stop</td><td>åºåˆ—çš„ç»ˆæ­¢å€¼ä¸ºï¼šbase ** stopã€‚å¦‚æœendpointä¸ºtrueï¼Œè¯¥å€¼åŒ…å«äºæ•°åˆ—ä¸­</td></tr><tr><td>num</td><td>è¦ç”Ÿæˆçš„ç­‰æ­¥é•¿çš„æ ·æœ¬æ•°é‡ï¼Œé»˜è®¤ä¸º50</td></tr><tr><td>endpoint</td><td>è¯¥å€¼ä¸ºtrueæ—¶ï¼Œæ•°åˆ—ä¸­ä¸­åŒ…å«stopå€¼ï¼Œåä¹‹ä¸åŒ…å«ï¼Œé»˜è®¤True</td></tr><tr><td>base</td><td>å¯¹æ•° log çš„åº•æ•°ï¼Œå–å¯¹æ•°çš„æ—¶å€™ log çš„ä¸‹æ ‡</td></tr><tr><td>dtype</td><td>ndarray çš„æ•°æ®ç±»å‹</td></tr></tbody></table><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span>logspace<span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span> <span class="token number">10.</span>           <span class="token number">12.91549665</span>     <span class="token number">16.68100537</span>      <span class="token number">21.5443469</span>  <span class="token number">27.82559402</span>        <span class="token number">35.93813664</span>   <span class="token number">46.41588834</span>     <span class="token number">59.94842503</span>      <span class="token number">77.42636827</span>    <span class="token number">100.</span>    <span class="token punctuation">]</span>  <span class="token keyword">print</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span>logspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span>base<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>  <span class="token number">1.</span>   <span class="token number">2.</span>   <span class="token number">4.</span>   <span class="token number">8.</span>  <span class="token number">16.</span>  <span class="token number">32.</span>  <span class="token number">64.</span> <span class="token number">128.</span> <span class="token number">256.</span> <span class="token number">512.</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3ã€ç´¢å¼•ã€åˆ‡ç‰‡">3ã€ç´¢å¼•ã€åˆ‡ç‰‡</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> s <span class="token operator">=</span> <span class="token builtin">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># ä»ç´¢å¼• 2 å¼€å§‹åˆ°ç´¢å¼• 7 åœæ­¢ï¼Œé—´éš”ä¸º2 </span><span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token number">2</span>  <span class="token number">4</span>  <span class="token number">6</span><span class="token punctuation">]</span>b <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment"># ä»ç´¢å¼• 2 å¼€å§‹åˆ°ç´¢å¼• 7 åœæ­¢ï¼Œé—´éš”ä¸º 2 </span><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token number">2</span>  <span class="token number">4</span>  <span class="token number">6</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ‡ç‰‡è¿˜å¯ä»¥åŒ…æ‹¬çœç•¥å· <code>â€¦</code>ï¼Œæ¥ä½¿é€‰æ‹©å…ƒç»„çš„é•¿åº¦ä¸æ•°ç»„çš„ç»´åº¦ç›¸åŒã€‚</p><p>å¦‚æœåœ¨è¡Œä½ç½®ä½¿ç”¨çœç•¥å·ï¼Œå®ƒå°†è¿”å›åŒ…å«è¡Œä¸­å…ƒç´ çš„ ndarrayã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># ç¬¬2åˆ—å…ƒç´  </span><span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># ç¬¬2è¡Œå…ƒç´  </span><span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># ç¬¬2åˆ—åŠå‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ </span><span class="token comment"># è¾“å‡º</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token number">3</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">5</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4ã€é«˜çº§ç´¢å¼•">4ã€é«˜çº§ç´¢å¼•</h4><ul><li>æ•´æ•°ç´¢å¼•</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> y <span class="token operator">=</span> x<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token comment"># è¾“å‡º</span><span class="token punctuation">[</span><span class="token number">1</span>  <span class="token number">4</span>  <span class="token number">5</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¸ƒå°”ç´¢å¼•</li></ul><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå¸ƒå°”æ•°ç»„æ¥ç´¢å¼•ç›®æ ‡æ•°ç»„ã€‚</p><p>å¸ƒå°”ç´¢å¼•é€šè¿‡å¸ƒå°”è¿ç®—ï¼ˆå¦‚ï¼šæ¯”è¾ƒè¿ç®—ç¬¦ï¼‰æ¥è·å–ç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å…ƒç´ çš„æ•°ç»„ã€‚</p><p>å¦‚å¤§äº 5 çš„å…ƒç´ ï¼š<code>print (x[x &gt; 5])</code></p><p>ä½¿ç”¨ <code>~</code>ï¼ˆå–è¡¥è¿ç®—ç¬¦ï¼‰æ¥è¿‡æ»¤ NaNï¼š</p><p><code>a = np.array([np.nan, 1,2,np.nan,3,4,5]) print (a[~np.isnan(a)])</code></p><ul><li>èŠ±å¼ç´¢å¼•</li></ul><p>å…³äº np.ix_ çš„å…·ä½“ä½¿ç”¨ï¼š</p><p><code>x[np.ix_([1,5,7,2],[0,3,1,2])]</code>è¿™å¥è¯ä¼šè¾“å‡ºä¸€ä¸ª4*4çš„çŸ©é˜µï¼Œå…¶ä¸­çš„å…ƒç´ åˆ†åˆ«æ˜¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">x[1,0] x[1,3] x[1,1] x[1,2]x[5,0] x[5,3] x[5,1] x[5,2]x[7,0] x[7,3] x[7,1] x[7,2]x[2,0] x[2,3] x[2,1] x[2,2]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç›¸å½“äºï¼š</p><pre class="line-numbers language-none"><code class="language-none">y=np.array([[x[1,0], x[1,3], x[1,1], x[1,2]],\            [x[5,0], x[5,3], x[5,1],x[5,2]],\      [x[7,0] ,x[7,3], x[7,1], x[7,2]],\          [x[2,0], x[2,3], x[2,1], x[2,2]]])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å°±æ˜¯è¯´ï¼Œå¦‚æœ np.xi_ ä¸­è¾“å…¥ä¸¤ä¸ªåˆ—è¡¨ï¼Œåˆ™ç¬¬ä¸€ä¸ªåˆ—è¡¨å­˜çš„æ˜¯å¾…æå–å…ƒç´ çš„è¡Œæ ‡ï¼Œç¬¬äºŒä¸ªåˆ—è¡¨å­˜çš„æ˜¯å¾…æå–å…ƒç´ çš„åˆ—æ ‡ï¼Œç¬¬ä¸€ä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä¼šéå†ç¬¬äºŒä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸ªå€¼ï¼Œæ„æˆæ–°çŸ©é˜µçš„ä¸€è¡Œå…ƒç´ ã€‚</p><h4 id="5ã€æ•°ç»„å¹¿æ’­">5ã€æ•°ç»„å¹¿æ’­</h4><p>å¹¿æ’­çš„è§„åˆ™:</p><ul><li><p>è®©æ‰€æœ‰è¾“å…¥æ•°ç»„éƒ½å‘å…¶ä¸­å½¢çŠ¶æœ€é•¿çš„æ•°ç»„çœ‹é½ï¼Œå½¢çŠ¶ä¸­ä¸è¶³çš„éƒ¨åˆ†éƒ½é€šè¿‡åœ¨å‰é¢åŠ  1 è¡¥é½ã€‚</p></li><li><p>è¾“å‡ºæ•°ç»„çš„å½¢çŠ¶æ˜¯è¾“å…¥æ•°ç»„å½¢çŠ¶çš„å„ä¸ªç»´åº¦ä¸Šçš„æœ€å¤§å€¼ã€‚</p></li><li><p>å¦‚æœè¾“å…¥æ•°ç»„çš„æŸä¸ªç»´åº¦å’Œè¾“å‡ºæ•°ç»„çš„å¯¹åº”ç»´åº¦çš„é•¿åº¦ç›¸åŒæˆ–è€…å…¶é•¿åº¦ä¸º 1 æ—¶ï¼Œè¿™ä¸ªæ•°ç»„èƒ½å¤Ÿç”¨æ¥è®¡ç®—ï¼Œå¦åˆ™å‡ºé”™ã€‚</p></li><li><p>å½“è¾“å…¥æ•°ç»„çš„æŸä¸ªç»´åº¦çš„é•¿åº¦ä¸º 1 æ—¶ï¼Œæ²¿ç€æ­¤ç»´åº¦è¿ç®—æ—¶éƒ½ç”¨æ­¤ç»´åº¦ä¸Šçš„ç¬¬ä¸€ç»„å€¼ã€‚</p></li></ul><p>ç®€å•ç†è§£ï¼šå¯¹ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«æ¯”è¾ƒä»–ä»¬çš„æ¯ä¸€ä¸ªç»´åº¦ï¼ˆè‹¥å…¶ä¸­ä¸€ä¸ªæ•°ç»„æ²¡æœ‰å½“å‰ç»´åº¦åˆ™å¿½ç•¥ï¼‰ï¼Œæ»¡è¶³ï¼š</p><ul><li><p>æ•°ç»„æ‹¥æœ‰ç›¸åŒå½¢çŠ¶ã€‚</p></li><li><p>å½“å‰ç»´åº¦çš„å€¼ç›¸ç­‰ã€‚</p></li><li><p>å½“å‰ç»´åº¦çš„å€¼æœ‰ä¸€ä¸ªæ˜¯ 1ã€‚</p></li></ul><p>è‹¥æ¡ä»¶ä¸æ»¡è¶³ï¼ŒæŠ›å‡º â€œValueError: frames are not alignedâ€ å¼‚å¸¸ã€‚</p><h4 id="6ã€è¿­ä»£å™¨">6ã€è¿­ä»£å™¨</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'è¿­ä»£è¾“å‡ºï¼š'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> np<span class="token punctuation">.</span>nditer<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">", "</span> <span class="token punctuation">)</span> <span class="token comment"># è¿­ä»£è¾“å‡ºï¼š</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ§åˆ¶éå†é¡ºåº</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> x <span class="token keyword">in</span> np<span class="token punctuation">.</span>nditer<span class="token punctuation">(</span>a<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token string">'F'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>Fortran orderï¼Œå³æ˜¯åˆ—åºä¼˜å…ˆï¼›<span class="token keyword">for</span> x <span class="token keyword">in</span> np<span class="token punctuation">.</span>nditer<span class="token punctuation">(</span>a<span class="token punctuation">.</span>T<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>C orderï¼Œå³æ˜¯è¡Œåºä¼˜å…ˆï¼›<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>ä¿®æ”¹æ•°ç»„ä¸­å…ƒç´ çš„å€¼</li></ul><p>nditer å¯¹è±¡å¦ä¸€ä¸ªå¯é€‰å‚æ•° op_flags</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œnditer å°†è§†å¾…è¿­ä»£éå†çš„æ•°ç»„ä¸ºåªè¯»å¯¹è±¡ï¼ˆread-onlyï¼‰</p><p>ä¸ºäº†åœ¨éå†æ•°ç»„çš„åŒæ—¶ï¼Œå®ç°å¯¹æ•°ç»„å…ƒç´ å€¼å¾—ä¿®æ”¹</p><p>å¿…é¡»æŒ‡å®š read-write æˆ–è€… write-only çš„æ¨¡å¼ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span> a <span class="token operator">=</span> a<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'åŸå§‹æ•°ç»„ï¼š'</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> np<span class="token punctuation">.</span>nditer<span class="token punctuation">(</span>a<span class="token punctuation">,</span> op_flags<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'readwrite'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>x <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'æ”¹åæ•°ç»„ï¼š'</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">#åŸå§‹æ•°ç»„ï¼šæ”¹åæ•°ç»„ï¼š</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">0</span>  <span class="token number">5</span> <span class="token number">10</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span>  <span class="token number">0</span>  <span class="token number">10</span>  <span class="token number">20</span>  <span class="token number">30</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">20</span> <span class="token number">25</span> <span class="token number">30</span> <span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token number">40</span>  <span class="token number">50</span>  <span class="token number">60</span>  <span class="token number">70</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">40</span> <span class="token number">45</span> <span class="token number">50</span> <span class="token number">55</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token number">80</span>  <span class="token number">90</span> <span class="token number">100</span> <span class="token number">110</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å¤–éƒ¨å¾ªç¯</strong></p><p>nditer ç±»çš„æ„é€ å™¨æ‹¥æœ‰ flags å‚æ•°ï¼Œå®ƒå¯ä»¥æ¥å—ä¸‹åˆ—å€¼ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>c_index</td><td>å¯ä»¥è·Ÿè¸ª C é¡ºåºçš„ç´¢å¼•</td></tr><tr><td>f_index</td><td>å¯ä»¥è·Ÿè¸ª Fortran é¡ºåºçš„ç´¢å¼•</td></tr><tr><td>multi_index</td><td>æ¯æ¬¡è¿­ä»£å¯ä»¥è·Ÿè¸ªä¸€ç§ç´¢å¼•ç±»å‹</td></tr><tr><td>external_loop</td><td>ç»™å‡ºçš„å€¼æ˜¯å…·æœ‰å¤šä¸ªå€¼çš„ä¸€ç»´æ•°ç»„ï¼Œè€Œä¸æ˜¯é›¶ç»´æ•°ç»„</td></tr></tbody></table><h4 id="7ã€æ•°ç»„æ“ä½œ">7ã€æ•°ç»„æ“ä½œ</h4><ul><li>ä¿®æ”¹æ•°ç»„å½¢çŠ¶</li></ul><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>reshape</td><td>ä¸æ”¹å˜æ•°æ®çš„æ¡ä»¶ä¸‹ä¿®æ”¹å½¢çŠ¶</td></tr><tr><td>flat</td><td>æ•°ç»„å…ƒç´ è¿­ä»£å™¨</td></tr><tr><td>flatten</td><td>è¿”å›ä¸€ä»½æ•°ç»„æ‹·è´ï¼Œå¯¹æ‹·è´æ‰€åšçš„ä¿®æ”¹ä¸ä¼šå½±å“åŸå§‹æ•°ç»„</td></tr><tr><td>ravel</td><td>è¿”å›å±•å¼€æ•°ç»„</td></tr></tbody></table><p><code>numpy.reshape(arr, newshape, order='C')</code></p><ul><li><p>arrï¼šè¦ä¿®æ”¹å½¢çŠ¶çš„æ•°ç»„</p></li><li><p>newshapeï¼šæ•´æ•°æˆ–è€…æ•´æ•°æ•°ç»„ï¼Œæ–°çš„å½¢çŠ¶åº”å½“å…¼å®¹åŸæœ‰å½¢çŠ¶</p></li><li><p>orderï¼šâ€˜Câ€™ â€“ æŒ‰è¡Œï¼Œâ€˜Fâ€™ â€“ æŒ‰åˆ—ï¼Œâ€˜Aâ€™ â€“ åŸé¡ºåºï¼Œâ€˜kâ€™ â€“ å…ƒç´ åœ¨å†…å­˜ä¸­çš„å‡ºç°é¡ºåºã€‚</p></li></ul><p><code>ndarray.flatten(order='C')</code></p><p><code>numpy.ravel(a, order='C')</code></p><ul><li><p>numpy.ravel() å±•å¹³çš„æ•°ç»„å…ƒç´ ï¼Œé¡ºåºé€šå¸¸æ˜¯"Cé£æ ¼"ï¼Œè¿”å›çš„æ˜¯æ•°ç»„è§†å›¾ï¼ˆviewï¼Œç±»ä¼¼ C/C++å¼•ç”¨referenceï¼‰ï¼Œä¿®æ”¹ä¼šå½±å“åŸå§‹æ•°ç»„ã€‚</p></li><li><p>ç¿»è½¬æ•°ç»„</p></li></ul><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>transpose</td><td>å¯¹æ¢æ•°ç»„çš„ç»´åº¦</td></tr><tr><td>ndarray.T</td><td>å’Œ self.transpose() ç›¸åŒï¼Œè½¬ç½®</td></tr><tr><td>rollaxis</td><td>å‘åæ»šåŠ¨æŒ‡å®šçš„è½´</td></tr><tr><td>swapaxes</td><td>å¯¹æ¢æ•°ç»„çš„ä¸¤ä¸ªè½´</td></tr></tbody></table><ul><li>ä¿®æ”¹æ•°ç»„ç»´åº¦</li></ul><table><thead><tr><th>ç»´åº¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>broadcast</td><td>äº§ç”Ÿæ¨¡ä»¿å¹¿æ’­çš„å¯¹è±¡</td></tr><tr><td>broadcast_to</td><td>å°†æ•°ç»„å¹¿æ’­åˆ°æ–°å½¢çŠ¶</td></tr><tr><td>expand_dims</td><td>é€šè¿‡åœ¨æŒ‡å®šä½ç½®æ’å…¥æ–°çš„è½´æ‰©å±•æ•°ç»„å½¢çŠ¶</td></tr><tr><td>squeeze</td><td>ä»æ•°ç»„çš„å½¢çŠ¶ä¸­åˆ é™¤ä¸€ç»´æ¡ç›®</td></tr></tbody></table><ul><li>numpy.broadcast ï¼š</li></ul><p>ç”¨äºæ¨¡ä»¿å¹¿æ’­çš„å¯¹è±¡ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°è£…äº†å°†ä¸€ä¸ªæ•°ç»„å¹¿æ’­åˆ°å¦ä¸€ä¸ªæ•°ç»„çš„ç»“æœã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> y <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å¯¹ y å¹¿æ’­ x </span>b <span class="token operator">=</span> np<span class="token punctuation">.</span>broadcast<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token comment"># å®ƒæ‹¥æœ‰ iterator å±æ€§ï¼ŒåŸºäºè‡ªèº«ç»„ä»¶çš„è¿­ä»£å™¨å…ƒç»„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>numpy.broadcast_to(array, shape, subok)ï¼š</p><p>å°†æ•°ç»„å¹¿æ’­åˆ°æ–°å½¢çŠ¶ã€‚å®ƒåœ¨åŸå§‹æ•°ç»„ä¸Šè¿”å›åªè¯»è§†å›¾ã€‚ å®ƒé€šå¸¸ä¸è¿ç»­ã€‚ å¦‚æœæ–°å½¢çŠ¶ä¸ç¬¦åˆ NumPy çš„å¹¿æ’­è§„åˆ™ï¼Œè¯¥å‡½æ•°å¯èƒ½ä¼šæŠ›å‡ºValueErrorã€‚</p></li><li><p>numpy.expand_dims(arr, axis)</p><p>arrï¼šè¾“å…¥æ•°ç»„</p><p>axisï¼šæ–°è½´æ’å…¥çš„ä½ç½®</p></li><li><p>numpy.squeeze(arr, axis)</p></li><li><p>è¿æ¥æ•°ç»„</p></li></ul><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>concatenate</td><td>è¿æ¥æ²¿ç°æœ‰è½´çš„æ•°ç»„åºåˆ—</td></tr><tr><td>stack</td><td>æ²¿ç€æ–°çš„è½´åŠ å…¥ä¸€ç³»åˆ—æ•°ç»„ã€‚</td></tr><tr><td>hstack</td><td>æ°´å¹³å †å åºåˆ—ä¸­çš„æ•°ç»„ï¼ˆåˆ—æ–¹å‘ï¼‰</td></tr><tr><td>vstack</td><td>ç«–ç›´å †å åºåˆ—ä¸­çš„æ•°ç»„ï¼ˆè¡Œæ–¹å‘ï¼‰</td></tr></tbody></table><p><code>numpy.concatenate((a1, a2, ...), axis)</code></p><ul><li><p>a1, a2, â€¦ï¼šç›¸åŒç±»å‹çš„æ•°ç»„</p></li><li><p>axisï¼šæ²¿ç€å®ƒè¿æ¥æ•°ç»„çš„è½´ï¼Œé»˜è®¤ä¸º0ï¼Œå³ä¸ºç«–ç›´æ–¹å‘é“¾æ¥ã€‚1ä¸ºæ°´å¹³æ–¹å‘é“¾æ¥ã€‚</p></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#æ²¿è½´ 0 è¿æ¥ä¸¤ä¸ªæ•°ç»„ï¼šæ²¿è½´ 1 è¿æ¥ä¸¤ä¸ªæ•°ç»„ï¼š</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">5</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">3</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span> <span class="token number">4</span> <span class="token number">7</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">7</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>numpy.stack(arrays, axis)</code></p><p>ç”¨äºæ²¿æ–°è½´è¿æ¥æ•°ç»„åºåˆ—</p><ul><li><p>arraysç›¸åŒå½¢çŠ¶çš„æ•°ç»„åºåˆ—</p></li><li><p>axisï¼šè¿”å›æ•°ç»„ä¸­çš„è½´ï¼Œè¾“å…¥æ•°ç»„æ²¿ç€å®ƒæ¥å †å </p></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># æ²¿è½´ 0 å †å ä¸¤ä¸ªæ•°ç»„ï¼šæ²¿è½´ 1 å †å ä¸¤ä¸ªæ•°ç»„ï¼š</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">3</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span> <span class="token number">4</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">7</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">7</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>numpy.hstack(array1, array2)æ°´å¹³å †å </p></li><li><p>numpy.vstack(array1, array2)ç«–ç›´å †å </p></li><li><p>åˆ†å‰²æ•°ç»„</p></li></ul><table><thead><tr><th>å‡½æ•°</th><th>æ•°ç»„åŠæ“ä½œ</th></tr></thead><tbody><tr><td>split</td><td>å°†ä¸€ä¸ªæ•°ç»„åˆ†å‰²ä¸ºå¤šä¸ªå­æ•°ç»„</td></tr><tr><td>hsplit</td><td>å°†ä¸€ä¸ªæ•°ç»„æ°´å¹³åˆ†å‰²ä¸ºå¤šä¸ªå­æ•°ç»„ï¼ˆæŒ‰åˆ—ï¼‰</td></tr><tr><td>vsplit</td><td>å°†ä¸€ä¸ªæ•°ç»„å‚ç›´åˆ†å‰²ä¸ºå¤šä¸ªå­æ•°ç»„ï¼ˆæŒ‰è¡Œï¼‰</td></tr></tbody></table><p><code>numpy.split(ary, indices_or_sections, axis)</code></p><ul><li><p>aryï¼šè¢«åˆ†å‰²çš„æ•°ç»„</p></li><li><p>indices_or_sectionsï¼šè‹¥æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå°±ç”¨è¯¥æ•°å¹³å‡åˆ‡åˆ†ï¼Œè‹¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸ºæ²¿è½´åˆ‡åˆ†çš„ä½ç½®ï¼ˆå·¦å¼€å³é—­ï¼‰</p></li><li><p>axisï¼šè®¾ç½®æ²¿ç€å“ªä¸ªæ–¹å‘è¿›è¡Œåˆ‡åˆ†ï¼Œé»˜è®¤ä¸º 0ï¼Œæ°´å¹³åˆ‡åˆ†ã€‚ä¸º 1 æ—¶ï¼Œç«–ç›´åˆ‡åˆ†ã€‚</p></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span>split<span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>æ•°ç»„å…ƒç´ æ·»åŠ &amp;åˆ é™¤</li></ul><table><thead><tr><th>å‡½æ•°</th><th>å…ƒç´ åŠæè¿°</th></tr></thead><tbody><tr><td>resize</td><td>è¿”å›æŒ‡å®šå½¢çŠ¶çš„æ–°æ•°ç»„</td></tr><tr><td>append</td><td>å°†å€¼æ·»åŠ åˆ°æ•°ç»„æœ«å°¾</td></tr><tr><td>insert</td><td>æ²¿æŒ‡å®šè½´å°†å€¼æ’å…¥åˆ°æŒ‡å®šä¸‹æ ‡ä¹‹å‰</td></tr><tr><td>delete</td><td>åˆ æ‰æŸä¸ªè½´çš„å­æ•°ç»„ï¼Œå¹¶è¿”å›åˆ é™¤åçš„æ–°æ•°ç»„</td></tr><tr><td>unique</td><td>æŸ¥æ‰¾æ•°ç»„å†…çš„å”¯ä¸€å…ƒç´ </td></tr></tbody></table><p><code>numpy.resize(arr, shape)</code></p><p>å‡½æ•°è¿”å›æŒ‡å®šå¤§å°çš„æ–°æ•°ç»„ã€‚</p><p>å¦‚æœæ–°æ•°ç»„å¤§å°å¤§äºåŸå§‹å¤§å°ï¼Œåˆ™åŒ…å«åŸå§‹æ•°ç»„ä¸­çš„å…ƒç´ çš„å‰¯æœ¬ã€‚</p><ul><li><p>arrï¼šè¦ä¿®æ”¹å¤§å°çš„æ•°ç»„</p></li><li><p>shapeï¼šè¿”å›æ•°ç»„çš„æ–°å½¢çŠ¶</p></li></ul><p><code>numpy.append(arr, values, axis=None)</code></p><p>å‡½æ•°åœ¨æ•°ç»„çš„æœ«å°¾æ·»åŠ å€¼ã€‚ è¿½åŠ æ“ä½œä¼šåˆ†é…æ•´ä¸ªæ•°ç»„ï¼Œå¹¶æŠŠåŸæ¥çš„æ•°ç»„å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ã€‚</p><p>è¾“å…¥æ•°ç»„çš„ç»´åº¦å¿…é¡»åŒ¹é…å¦åˆ™å°†ç”ŸæˆValueErrorã€‚</p><ul><li><p>append å‡½æ•°è¿”å›çš„å§‹ç»ˆæ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚</p></li><li><p>arrï¼šè¾“å…¥æ•°ç»„</p></li><li><p>valuesï¼šè¦å‘arræ·»åŠ çš„å€¼ï¼Œéœ€è¦å’Œarrå½¢çŠ¶ç›¸åŒï¼ˆé™¤äº†è¦æ·»åŠ çš„è½´ï¼‰</p></li><li><p>axisï¼šé»˜è®¤ä¸º Noneã€‚å½“axisæ— å®šä¹‰æ—¶ï¼Œæ˜¯æ¨ªå‘åŠ æˆï¼Œ<em><strong>*è¿”å›æ€»æ˜¯ä¸ºä¸€ç»´æ•°ç»„*</strong></em>ã€‚</p><ul><li>å½“axisä¸º0æ—¶ï¼Œæ•°ç»„æ˜¯åŠ åœ¨ä¸‹è¾¹ï¼ˆåˆ—æ•°è¦ç›¸åŒï¼‰</li><li>å½“axisä¸º1æ—¶ï¼Œæ•°ç»„æ˜¯åŠ åœ¨å³è¾¹ï¼ˆè¡Œæ•°è¦ç›¸åŒï¼‰</li></ul></li></ul><p><code>numpy.insert(arr, obj, values, axis)</code></p><p>å‡½æ•°åœ¨ç»™å®šç´¢å¼•ä¹‹å‰ï¼Œæ²¿ç»™å®šè½´åœ¨è¾“å…¥æ•°ç»„ä¸­æ’å…¥å€¼ã€‚</p><p>å¦‚æœå€¼çš„ç±»å‹è½¬æ¢ä¸ºè¦æ’å…¥ï¼Œåˆ™å®ƒä¸è¾“å…¥æ•°ç»„ä¸åŒã€‚</p><p>æ’å…¥æ²¡æœ‰åŸåœ°çš„ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p><p>å¦‚æœæœªæä¾›è½´ï¼Œåˆ™è¾“å…¥æ•°ç»„ä¼šè¢«å±•å¼€ã€‚</p><ul><li><p>arrï¼šè¾“å…¥æ•°ç»„</p></li><li><p>objï¼šåœ¨å…¶ä¹‹å‰æ’å…¥å€¼çš„ç´¢å¼•</p></li><li><p>valuesï¼šè¦æ’å…¥çš„å€¼</p></li><li><p>axisï¼šæ²¿ç€å®ƒæ’å…¥çš„è½´ï¼Œå¦‚æœæœªæä¾›ï¼Œåˆ™è¾“å…¥æ•°ç»„ä¼šè¢«å±•å¼€</p></li></ul><p><code>Numpy.delete(arr, obj, axis)</code></p><p>å‡½æ•°è¿”å›ä»è¾“å…¥æ•°ç»„ä¸­åˆ é™¤æŒ‡å®šå­æ•°ç»„çš„æ–°æ•°ç»„ã€‚ ä¸ insert() å‡½æ•°æƒ…å†µä¸€æ ·ï¼Œå¦‚æœæœªæä¾›è½´å‚æ•°ï¼Œåˆ™è¾“å…¥æ•°ç»„å°†å±•å¼€ã€‚</p><ul><li><p>arrï¼šè¾“å…¥æ•°ç»„</p></li><li><p>objï¼šå¯ä»¥è¢«åˆ‡ç‰‡ï¼Œæ•´æ•°æˆ–è€…æ•´æ•°æ•°ç»„ï¼Œè¡¨æ˜è¦ä»è¾“å…¥æ•°ç»„åˆ é™¤çš„å­æ•°ç»„</p></li><li><p>axisï¼šæ²¿ç€å®ƒåˆ é™¤ç»™å®šå­æ•°ç»„çš„è½´ï¼Œå¦‚æœæœªæä¾›ï¼Œåˆ™è¾“å…¥æ•°ç»„ä¼šè¢«å±•å¼€</p></li></ul><p><code>numpy.unique(arr, return_index, return_inverse, return_counts)</code></p><p>ç”¨äºå»é™¤æ•°ç»„ä¸­çš„é‡å¤å…ƒç´ ã€‚</p><ul><li><p>arrï¼šè¾“å…¥æ•°ç»„ï¼Œè‹¥ä¸æ˜¯ä¸€ç»´æ•°ç»„åˆ™ä¼šå±•å¼€</p></li><li><p>return_indexï¼šä¸ºtrueï¼Œè¿”å›æ–°åˆ—è¡¨å…ƒç´ åœ¨æ—§åˆ—è¡¨ä¸­çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼å‚¨</p></li><li><p>return_inverseï¼šä¸ºtrueï¼Œè¿”å›æ—§åˆ—è¡¨å…ƒç´ åœ¨æ–°åˆ—è¡¨ä¸­çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼å‚¨</p></li><li><p>return_countsï¼šä¸ºtrueï¼Œè¿”å›å»é‡æ•°ç»„ä¸­çš„å…ƒç´ åœ¨åŸæ•°ç»„ä¸­çš„å‡ºç°æ¬¡æ•°</p></li></ul><h4 id="8ã€numpyä½è¿ç®—">8ã€numpyä½è¿ç®—</h4><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>bitwise_and</td><td>å¯¹æ•°ç»„å…ƒç´ æ‰§è¡Œä½ä¸æ“ä½œ</td></tr><tr><td>bitwise_or</td><td>å¯¹æ•°ç»„å…ƒç´ æ‰§è¡Œä½æˆ–æ“ä½œ</td></tr><tr><td>invert</td><td>æŒ‰ä½å–å</td></tr><tr><td>left_shift</td><td>å‘å·¦ç§»åŠ¨äºŒè¿›åˆ¶è¡¨ç¤ºçš„ä½</td></tr><tr><td>right_shift</td><td>å‘å³ç§»åŠ¨äºŒè¿›åˆ¶è¡¨ç¤ºçš„ä½</td></tr></tbody></table><h2 id="å››ã€å­—ç¬¦ä¸²">å››ã€å­—ç¬¦ä¸²</h2><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>add()</td><td>å¯¹ä¸¤ä¸ªæ•°ç»„çš„é€ä¸ªå­—ç¬¦ä¸²å…ƒç´ è¿›è¡Œè¿æ¥</td></tr><tr><td>multiply()</td><td>è¿”å›æŒ‰å…ƒç´ å¤šé‡è¿æ¥åçš„å­—ç¬¦ä¸²</td></tr><tr><td>center()</td><td>å±…ä¸­å­—ç¬¦ä¸²</td></tr><tr><td>capitalize()</td><td>å°†å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—æ¯è½¬æ¢ä¸ºå¤§å†™</td></tr><tr><td>title()</td><td>å°†å­—ç¬¦ä¸²çš„æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯è½¬æ¢ä¸ºå¤§å†™</td></tr><tr><td>lower()</td><td>æ•°ç»„å…ƒç´ è½¬æ¢ä¸ºå°å†™</td></tr><tr><td>upper()</td><td>æ•°ç»„å…ƒç´ è½¬æ¢ä¸ºå¤§å†™</td></tr><tr><td>split()</td><td>æŒ‡å®šåˆ†éš”ç¬¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²ï¼Œå¹¶è¿”å›æ•°ç»„åˆ—è¡¨</td></tr><tr><td>splitlines()</td><td>è¿”å›å…ƒç´ ä¸­çš„è¡Œåˆ—è¡¨ï¼Œä»¥æ¢è¡Œç¬¦åˆ†å‰²</td></tr><tr><td>strip()</td><td>ç§»é™¤å…ƒç´ å¼€å¤´æˆ–è€…ç»“å°¾å¤„çš„ç‰¹å®šå­—ç¬¦</td></tr><tr><td>join()</td><td>é€šè¿‡æŒ‡å®šåˆ†éš”ç¬¦æ¥è¿æ¥æ•°ç»„ä¸­çš„å…ƒç´ </td></tr><tr><td>replace()</td><td>ä½¿ç”¨æ–°å­—ç¬¦ä¸²æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­å­—ç¬¦ä¸²</td></tr><tr><td>decode()</td><td>æ•°ç»„å…ƒç´ ä¾æ¬¡è°ƒç”¨str.decode</td></tr><tr><td>encode()</td><td>æ•°ç»„å…ƒç´ ä¾æ¬¡è°ƒç”¨str.encode</td></tr></tbody></table><h2 id="äº”ã€ç»Ÿè®¡">äº”ã€ç»Ÿè®¡</h2><ul><li><p>numpy.amin() ç”¨äºè®¡ç®—æ•°ç»„ä¸­çš„å…ƒç´ æ²¿æŒ‡å®šè½´çš„æœ€å°å€¼ã€‚</p></li><li><p>numpy.amax() ç”¨äºè®¡ç®—æ•°ç»„ä¸­çš„å…ƒç´ æ²¿æŒ‡å®šè½´çš„æœ€å¤§å€¼ã€‚</p></li><li><p>numpy.ptp()è®¡ç®—æ•°ç»„ä¸­å…ƒç´ æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®ï¼ˆæœ€å¤§å€¼ - æœ€å°å€¼ï¼‰ã€‚</p></li><li><p>numpy.percentile(a, q, axis)</p><p>ç™¾åˆ†ä½æ•°æ˜¯ç»Ÿè®¡ä¸­ä½¿ç”¨çš„åº¦é‡ï¼Œè¡¨ç¤ºå°äºè¿™ä¸ªå€¼çš„è§‚å¯Ÿå€¼çš„ç™¾åˆ†æ¯”ã€‚</p><ul><li><p>a: è¾“å…¥æ•°ç»„</p></li><li><p>q: è¦è®¡ç®—çš„ç™¾åˆ†ä½æ•°ï¼Œåœ¨ 0 ~ 100 ä¹‹é—´</p></li><li><p>axis: æ²¿ç€å®ƒè®¡ç®—ç™¾åˆ†ä½æ•°çš„è½´</p></li></ul><p>ç¬¬ p ä¸ªç™¾åˆ†ä½æ•°æ˜¯è¿™æ ·ä¸€ä¸ªå€¼ï¼Œå®ƒä½¿å¾—è‡³å°‘æœ‰ p% çš„æ•°æ®é¡¹å°äºæˆ–ç­‰äºè¿™ä¸ªå€¼ï¼Œä¸”è‡³å°‘æœ‰ (100-p)% çš„æ•°æ®é¡¹å¤§äºæˆ–ç­‰äºè¿™ä¸ªå€¼ã€‚</p><p>ä¾‹å­ï¼šå…¥å­¦è€ƒè¯•æˆç»©ä»¥ç™¾åˆ†ä½æ•°çš„å½¢å¼æŠ¥å‘Šã€‚å‡è®¾æŸä¸ªè€ƒç”Ÿåœ¨è€ƒè¯•ä¸­çš„è¯­æ–‡éƒ¨åˆ†çš„åŸå§‹åˆ†æ•°ä¸º 54 åˆ†ã€‚ç›¸å¯¹äºå‚åŠ åŒä¸€è€ƒè¯•çš„å…¶ä»–å­¦ç”Ÿæ¥è¯´ï¼Œä»–çš„æˆç»©å¦‚ä½•å¹¶ä¸å®¹æ˜“çŸ¥é“ã€‚ä½†æ˜¯å¦‚æœåŸå§‹åˆ†æ•°54åˆ†æ°å¥½å¯¹åº”çš„æ˜¯ç¬¬70ç™¾åˆ†ä½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“å¤§çº¦70%çš„å­¦ç”Ÿçš„è€ƒåˆ†æ¯”ä»–ä½ï¼Œè€Œçº¦30%çš„å­¦ç”Ÿè€ƒåˆ†æ¯”ä»–é«˜ã€‚è¿™é‡Œçš„ p = 70ã€‚</p></li><li><p>numpy.median() å‡½æ•°ç”¨äºè®¡ç®—æ•°ç»„ a ä¸­å…ƒç´ çš„ä¸­ä½æ•°ï¼ˆä¸­å€¼ï¼‰</p></li><li><p>numpy.mean()è¿”å›æ•°ç»„ä¸­å…ƒç´ çš„ç®—æœ¯å¹³å‡å€¼ã€‚ å¦‚æœæä¾›äº†è½´ï¼Œåˆ™æ²¿å…¶è®¡ç®—ã€‚</p><p>ç®—æœ¯å¹³å‡å€¼æ˜¯æ²¿è½´çš„å…ƒç´ çš„æ€»å’Œé™¤ä»¥å…ƒç´ çš„æ•°é‡ã€‚</p></li><li><p>numpy.average()æ ¹æ®åœ¨å¦ä¸€ä¸ªæ•°ç»„ä¸­ç»™å‡ºçš„å„è‡ªçš„æƒé‡è®¡ç®—æ•°ç»„ä¸­å…ƒç´ çš„åŠ æƒå¹³å‡å€¼ã€‚è¯¥å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªè½´å‚æ•°ã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®šè½´ï¼Œåˆ™æ•°ç»„ä¼šè¢«å±•å¼€ã€‚</p><p>åŠ æƒå¹³å‡å€¼å³å°†å„æ•°å€¼ä¹˜ä»¥ç›¸åº”çš„æƒæ•°ï¼Œç„¶ååŠ æ€»æ±‚å’Œå¾—åˆ°æ€»ä½“å€¼ï¼Œå†é™¤ä»¥æ€»çš„å•ä½æ•°ã€‚</p><p>$$<br>åŠ æƒå¹³å‡å€¼ = \frac{1*4+2*3+3*2+4*1}{4+3+2+1}<br>$$</p></li><li><p>æ ‡å‡†å·®<code>numpy.std = sqrt(mean((x - x.mean())**2))</code></p></li><li><p>æ–¹å·®<code>numpy.var = mean((x - x.mean())** 2)</code></p></li></ul><h2 id="å…­ã€æ’åºã€æ¡ä»¶åˆ·é€‰å‡½æ•°">å…­ã€æ’åºã€æ¡ä»¶åˆ·é€‰å‡½æ•°</h2><table><thead><tr><th>ç§ç±»</th><th>é€Ÿåº¦</th><th>æœ€åæƒ…å†µ</th><th>å·¥ä½œç©ºé—´</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td>â€˜quicksortâ€™ï¼ˆå¿«é€Ÿæ’åºï¼‰</td><td>1</td><td>O(n^2)</td><td>0</td><td>å¦</td></tr><tr><td>â€˜mergesortâ€™ï¼ˆå½’å¹¶æ’åºï¼‰</td><td>2</td><td>O(n*log(n))</td><td>~n/2</td><td>æ˜¯</td></tr><tr><td>â€˜heapsortâ€™ï¼ˆå †æ’åºï¼‰</td><td>3</td><td>O(n*log(n))</td><td>0</td><td>å¦</td></tr></tbody></table><ul><li><p><code>numpy.sort(a, axis, kind, order)</code></p><ul><li><p>a: è¦æ’åºçš„æ•°ç»„</p></li><li><p>axis: æ²¿ç€æ’åºæ•°ç»„çš„è½´ï¼Œè‹¥æ²¡æœ‰æ•°ç»„åˆ™ä¼šè¢«å±•å¼€ï¼Œæ²¿ç€æœ€åçš„è½´æ’åºï¼Œ0æŒ‰åˆ—ï¼Œ1æŒ‰è¡Œ</p></li><li><p>kind: é»˜è®¤â€™quicksortâ€™</p></li></ul><p>-order: å¦‚æœæ•°ç»„åŒ…å«å­—æ®µï¼Œåˆ™æ˜¯è¦æ’åºçš„å­—æ®µ</p></li><li><p>numpy.argsort()è¿”å›çš„æ˜¯æ•°ç»„å€¼ä»å°åˆ°å¤§çš„ç´¢å¼•å€¼ã€‚</p></li><li><p>numpy.lexsort() ç”¨äºå¯¹å¤šä¸ªåºåˆ—è¿›è¡Œæ’åºã€‚</p></li></ul><p>æƒ³è±¡æˆå¯¹ç”µå­è¡¨æ ¼è¿›è¡Œæ’åºï¼Œæ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªåºåˆ—ï¼Œæ’åºæ—¶ä¼˜å…ˆç…§é¡¾é åçš„åˆ—ã€‚</p><p>ä¾‹å­ï¼šåœ¨æ€»æˆç»©ç›¸åŒæ—¶ï¼Œæ•°å­¦æˆç»©é«˜çš„ä¼˜å…ˆå½•å–ï¼Œåœ¨æ€»æˆç»©å’Œæ•°å­¦æˆç»©éƒ½ç›¸åŒæ—¶ï¼ŒæŒ‰ç…§è‹±è¯­æˆç»©å½•å–â€¦â€¦ è¿™é‡Œï¼Œæ€»æˆç»©æ’åœ¨ç”µå­è¡¨æ ¼çš„æœ€åä¸€åˆ—ï¼Œæ•°å­¦æˆç»©åœ¨å€’æ•°ç¬¬äºŒåˆ—ï¼Œè‹±è¯­æˆç»©åœ¨å€’æ•°ç¬¬ä¸‰åˆ—ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'aaaa'</span><span class="token punctuation">,</span><span class="token string">'arrr'</span><span class="token punctuation">,</span><span class="token string">'raaa'</span><span class="token punctuation">,</span><span class="token string">'rrmm'</span><span class="token punctuation">)</span>b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'fy'</span><span class="token punctuation">,</span><span class="token string">'sy'</span><span class="token punctuation">,</span><span class="token string">'sy'</span><span class="token punctuation">,</span><span class="token string">'fy'</span><span class="token punctuation">)</span>ind <span class="token operator">=</span> np<span class="token punctuation">.</span>lexsort<span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>ind<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">3</span> <span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> ind<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">'aaaa, fy'</span><span class="token punctuation">,</span> <span class="token string">'rrmm, fy'</span><span class="token punctuation">,</span> <span class="token string">'arrr, sy'</span><span class="token punctuation">,</span> <span class="token string">'raaa, sy'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>msort(a)</td><td>æ•°ç»„æŒ‰ç¬¬ä¸€ä¸ªè½´æ’åºï¼Œè¿”å›æ’åºåçš„æ•°ç»„å‰¯æœ¬ã€‚np.msort(a) ç›¸å½“äº np.sort(a, axis=0)ã€‚</td></tr><tr><td>sort_complex(a)</td><td>å¯¹å¤æ•°æŒ‰ç…§å…ˆå®éƒ¨åè™šéƒ¨çš„é¡ºåºè¿›è¡Œæ’åºã€‚</td></tr><tr><td>partition(a, kth[, axis, kind, order])</td><td>æŒ‡å®šä¸€ä¸ªæ•°ï¼Œå¯¹æ•°ç»„è¿›è¡Œåˆ†åŒº</td></tr><tr><td>argpartition(a, kth[, axis, kind, order])</td><td>å¯ä»¥é€šè¿‡å…³é”®å­— kind æŒ‡å®šç®—æ³•æ²¿ç€æŒ‡å®šè½´å¯¹æ•°ç»„è¿›è¡Œåˆ†åŒº</td></tr></tbody></table><ul><li><p>numpy.argmax() &amp; numpy.argmin()åˆ†åˆ«æ²¿ç»™å®šè½´è¿”å›æœ€å¤§å’Œæœ€å°å…ƒç´ çš„ç´¢å¼•ã€‚</p></li><li><p>numpy.nonzero() å‡½æ•°è¿”å›è¾“å…¥æ•°ç»„ä¸­éé›¶å…ƒç´ çš„ç´¢å¼•ã€‚</p></li><li><p>numpy.where() å‡½æ•°è¿”å›è¾“å…¥æ•°ç»„ä¸­æ»¡è¶³ç»™å®šæ¡ä»¶çš„å…ƒç´ çš„ç´¢å¼•ã€‚</p></li><li><p>numpy.extract() å‡½æ•°æ ¹æ®æŸä¸ªæ¡ä»¶ä»æ•°ç»„ä¸­æŠ½å–å…ƒç´ ï¼Œè¿”å›æ»¡æ¡ä»¶çš„å…ƒç´ ã€‚</p></li></ul><h2 id="ä¸ƒã€å­—èŠ‚äº¤æ¢">ä¸ƒã€å­—èŠ‚äº¤æ¢</h2><p>åœ¨å‡ ä¹æ‰€æœ‰çš„æœºå™¨ä¸Šï¼Œå¤šå­—èŠ‚å¯¹è±¡éƒ½è¢«å­˜å‚¨ä¸ºè¿ç»­çš„å­—èŠ‚åºåˆ—ã€‚å­—èŠ‚é¡ºåºï¼Œæ˜¯è·¨è¶Šå¤šå­—èŠ‚çš„ç¨‹åºå¯¹è±¡çš„å­˜å‚¨è§„åˆ™ã€‚</p><ul><li><p>å¤§ç«¯æ¨¡å¼ï¼š</p><p>æŒ‡æ•°æ®çš„é«˜å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„ä½å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ï¼Œè¿™æ ·çš„å­˜å‚¨æ¨¡å¼æœ‰ç‚¹å„¿ç±»ä¼¼äºæŠŠæ•°æ®å½“ä½œå­—ç¬¦ä¸²é¡ºåºå¤„ç†ï¼šåœ°å€ç”±å°å‘å¤§å¢åŠ ï¼Œè€Œæ•°æ®ä»é«˜ä½å¾€ä½ä½æ”¾ï¼›è¿™å’Œæˆ‘ä»¬çš„é˜…è¯»ä¹ æƒ¯ä¸€è‡´ã€‚</p></li><li><p>å°ç«¯æ¨¡å¼ï¼š</p><p>æŒ‡æ•°æ®çš„é«˜å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„ä½å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼Œè¿™ç§å­˜å‚¨æ¨¡å¼å°†åœ°å€çš„é«˜ä½å’Œæ•°æ®ä½æƒæœ‰æ•ˆåœ°ç»“åˆèµ·æ¥ï¼Œé«˜åœ°å€éƒ¨åˆ†æƒå€¼é«˜ï¼Œä½åœ°å€éƒ¨åˆ†æƒå€¼ä½ã€‚</p></li></ul><p>ä¾‹å¦‚ï¼šåœ¨ C è¯­è¨€ä¸­ï¼Œä¸€ä¸ªç±»å‹ä¸º int çš„å˜é‡ x åœ°å€ä¸º 0x100ï¼Œé‚£ä¹ˆå…¶å¯¹åº”åœ°å€è¡¨è¾¾å¼&amp;xçš„å€¼ä¸º 0x100ã€‚ä¸”xçš„å››ä¸ªå­—èŠ‚å°†è¢«å­˜å‚¨åœ¨å­˜å‚¨å™¨çš„ 0x100, 0x101, 0x102, 0x103ä½ç½®ã€‚</p><p><img src="https://s2.loli.net/2022/04/17/nqu9VrwvxIR5SYG.png" alt="np-address"></p><ul><li>numpy.ndarray.byteswap()å°† ndarray ä¸­æ¯ä¸ªå…ƒç´ ä¸­çš„å­—èŠ‚è¿›è¡Œå¤§å°ç«¯è½¬æ¢ã€‚</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> A <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">256</span><span class="token punctuation">,</span><span class="token number">8755</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>int16<span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">hex</span><span class="token punctuation">,</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'0x1'</span><span class="token punctuation">,</span> <span class="token string">'0x100'</span><span class="token punctuation">,</span> <span class="token string">'0x2233'</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>byteswap<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>  <span class="token number">256</span>     <span class="token number">1</span> <span class="token number">13090</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">hex</span><span class="token punctuation">,</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'0x100'</span><span class="token punctuation">,</span> <span class="token string">'0x1'</span><span class="token punctuation">,</span> <span class="token string">'0x3322'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…«ã€çº¿æ€§ä»£æ•°">å…«ã€çº¿æ€§ä»£æ•°</h2><table><thead><tr><th>å‡½æ•°</th><th>é€Ÿåº¦</th></tr></thead><tbody><tr><td>dot</td><td>ä¸¤ä¸ªæ•°ç»„çš„ç‚¹ç§¯ï¼Œå³å…ƒç´ å¯¹åº”ç›¸ä¹˜</td></tr><tr><td>vdot</td><td>ä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯</td></tr><tr><td>inner</td><td>ä¸¤ä¸ªæ•°ç»„çš„å†…ç§¯</td></tr><tr><td>matmul</td><td>ä¸¤ä¸ªæ•°ç»„çš„çŸ©é˜µç§¯</td></tr><tr><td>determinant</td><td>æ•°ç»„çš„è¡Œåˆ—å¼</td></tr><tr><td>solve</td><td>æ±‚è§£çº¿æ€§çŸ©é˜µæ–¹ç¨‹</td></tr><tr><td>inv</td><td>è®¡ç®—çŸ©é˜µçš„ä¹˜æ³•é€†çŸ©é˜µ</td></tr><tr><td>linalg.det</td><td>è®¡ç®—çŸ©é˜µçš„è¡Œåˆ—å¼</td></tr><tr><td>linalg.solve</td><td>æ±‚è§£çº¿æ€§çŸ©é˜µæ–¹ç¨‹</td></tr></tbody></table><h2 id="ä¹ã€I-O">ä¹ã€I/O</h2><p>NumPy ä¸º ndarray å¯¹è±¡å¼•å…¥äº†ä¸€ä¸ªç®€å•çš„æ–‡ä»¶æ ¼å¼ï¼šnpyã€‚</p><p>npy æ–‡ä»¶ç”¨äºå­˜å‚¨é‡å»º ndarray æ‰€éœ€çš„æ•°æ®ã€å›¾å½¢ã€dtype å’Œå…¶ä»–ä¿¡æ¯ã€‚</p><p>å¸¸ç”¨çš„ IO å‡½æ•°ï¼š</p><ul><li><p>load() å’Œ save() å‡½æ•°æ˜¯è¯»å†™æ–‡ä»¶æ•°ç»„æ•°æ®çš„ä¸¤ä¸ªä¸»è¦å‡½æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„æ˜¯ä»¥æœªå‹ç¼©çš„åŸå§‹äºŒè¿›åˆ¶æ ¼å¼ä¿å­˜åœ¨æ‰©å±•åä¸º .npy çš„æ–‡ä»¶ä¸­ã€‚</p></li><li><p>savez() å‡½æ•°ç”¨äºå°†å¤šä¸ªæ•°ç»„å†™å…¥æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„æ˜¯ä»¥æœªå‹ç¼©çš„åŸå§‹äºŒè¿›åˆ¶æ ¼å¼ä¿å­˜åœ¨æ‰©å±•åä¸º .npz çš„æ–‡ä»¶ä¸­ã€‚</p></li><li><p>loadtxt() å’Œ savetxt() å‡½æ•°å¤„ç†æ­£å¸¸çš„æ–‡æœ¬æ–‡ä»¶(.txt ç­‰)</p></li><li><p>numpy.save(file, arr, allow_pickle=True, fix_imports=True)</p><p>å°†æ•°ç»„ä¿å­˜åˆ°ä»¥ .npy ä¸ºæ‰©å±•åçš„æ–‡ä»¶ä¸­ã€‚</p><p>å®ƒä»¬æ˜¯ Numpy ä¸“ç”¨çš„äºŒè¿›åˆ¶æ ¼å¼åçš„æ•°æ®</p><p>ä½¿ç”¨ load() å‡½æ•°æ¥è¯»å–æ•°æ®æ‰å¯ä»¥æ­£å¸¸æ˜¾ç¤º</p><ul><li>fileï¼šè¦ä¿å­˜çš„æ–‡ä»¶ï¼Œæ‰©å±•åä¸º .npyï¼Œå¦‚æœæ–‡ä»¶è·¯å¾„æœ«å°¾æ²¡æœ‰æ‰©å±•å .npyï¼Œè¯¥æ‰©å±•åä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚</li><li>arr: è¦ä¿å­˜çš„æ•°ç»„</li><li>allow_pickle: å¯é€‰ï¼Œå¸ƒå°”å€¼ï¼Œå…è®¸ä½¿ç”¨ Python pickles ä¿å­˜å¯¹è±¡æ•°ç»„ï¼ŒPython ä¸­çš„ pickle ç”¨äºåœ¨ä¿å­˜åˆ°ç£ç›˜æ–‡ä»¶æˆ–ä»ç£ç›˜æ–‡ä»¶è¯»å–ä¹‹å‰ï¼Œå¯¹å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</li><li>fix_imports: å¯é€‰ï¼Œä¸ºäº†æ–¹ä¾¿ Pyhton2 ä¸­è¯»å– Python3 ä¿å­˜çš„æ•°æ®ã€‚</li></ul></li><li><p>numpy.savez(file, *args, **kwds)å‡½æ•°å°†å¤šä¸ªæ•°ç»„ä¿å­˜åˆ°ä»¥ npz ä¸ºæ‰©å±•åçš„æ–‡ä»¶ä¸­ã€‚</p><ul><li>fileï¼šè¦ä¿å­˜çš„æ–‡ä»¶ï¼Œæ‰©å±•åä¸º .npzï¼Œå¦‚æœæ–‡ä»¶è·¯å¾„æœ«å°¾æ²¡æœ‰æ‰©å±•å .npzï¼Œè¯¥æ‰©å±•åä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚</li><li>args: è¦ä¿å­˜çš„æ•°ç»„ï¼Œå¯ä»¥ç”¨å…³é”®å­—å‚æ•°ä¸ºæ•°ç»„èµ·åï¼Œéå…³é”®å­—å‚æ•°ä¼ é€’çš„æ•°ç»„ä¼šè‡ªåŠ¨èµ·åä¸º arr_0, arr_1, â€¦ã€€ã€‚</li><li>kwds: è¦ä¿å­˜çš„æ•°ç»„ä½¿ç”¨å…³é”®å­—åç§°ã€‚</li></ul></li><li><p>savetxt() ä»¥ç®€å•çš„æ–‡æœ¬æ–‡ä»¶æ ¼å¼å­˜å‚¨æ•°æ®ï¼Œå¯¹åº”ä½¿ç”¨ loadtxt() å‡½æ•°æ¥è·å–æ•°æ®ã€‚</p></li></ul><p><code>np.loadtxt(FILENAME, dtype=int, delimiter=' ')</code></p><p><code>np.savetxt(FILENAME, a, fmt="%d", delimiter=",")</code></p><p><strong>å‚æ•° delimiter å¯ä»¥æŒ‡å®šå„ç§åˆ†éš”ç¬¦ã€é’ˆå¯¹ç‰¹å®šåˆ—çš„è½¬æ¢å™¨å‡½æ•°ã€éœ€è¦è·³è¿‡çš„è¡Œæ•°ç­‰ã€‚</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> np<span class="token punctuation">.</span>savetxt<span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>fmt<span class="token operator">=</span><span class="token string">"%d"</span><span class="token punctuation">,</span>delimiter<span class="token operator">=</span><span class="token string">","</span><span class="token punctuation">)</span> <span class="token comment"># æ”¹ä¸ºä¿å­˜ä¸ºæ•´æ•°ï¼Œä»¥é€—å·åˆ†éš” </span>b <span class="token operator">=</span> np<span class="token punctuation">.</span>loadtxt<span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">,</span>delimiter<span class="token operator">=</span><span class="token string">","</span><span class="token punctuation">)</span> <span class="token comment"># load æ—¶ä¹ŸæŒ‡å®šä¸ºé€—å·åˆ†éš” </span><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token comment"># è¾“å‡º</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.</span> <span class="token number">0.</span> <span class="token number">1.</span> <span class="token number">1.</span> <span class="token number">2.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">2.</span> <span class="token number">3.</span> <span class="token number">3.</span> <span class="token number">4.</span> <span class="token number">4.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5.</span> <span class="token number">5.</span> <span class="token number">6.</span> <span class="token number">6.</span> <span class="token number">7.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">7.</span> <span class="token number">8.</span> <span class="token number">8.</span> <span class="token number">9.</span> <span class="token number">9.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Numpy </tag>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€Ÿå…¥é—¨ Markdown(æ–°æ‰‹å‘)</title>
      <link href="/2022/04/16/markdown-quick-get-start/"/>
      <url>/2022/04/16/markdown-quick-get-start/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="å¿«é€Ÿå­¦ä¹ Markdown"><a href="#å¿«é€Ÿå­¦ä¹ Markdown" class="headerlink" title="å¿«é€Ÿå­¦ä¹ Markdown"></a>å¿«é€Ÿå­¦ä¹ Markdown</h1><p>Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ã€‚</p><p>Markdown ç¼–å†™çš„æ–‡æ¡£å¯ä»¥å¯¼å‡º HTML ã€Wordã€å›¾åƒã€PDFã€Epub ç­‰å¤šç§æ ¼å¼çš„æ–‡æ¡£ã€‚</p><p>Markdown ç¼–å†™çš„æ–‡æ¡£åç¼€ä¸º <strong>.md</strong>, <strong>.markdown</strong>ã€‚</p><p><strong>æœ¬ç¯‡å¯èƒ½æ˜¯ç›®å½•ç»“æ„æœ€æ··ä¹±çš„æ–‡ç« ï¼Œ<em>è·Ÿç´§å¸¦åºå·çš„æ ‡é¢˜</em>ï¼Œå¼€å§‹å­¦ä¹ å§ <span class="github-emoji"><span>â˜€</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2600.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ï¼‰</strong></p><h2 id="1ã€Markdown-åº”ç”¨"><a href="#1ã€Markdown-åº”ç”¨" class="headerlink" title="1ã€Markdown åº”ç”¨"></a>1ã€Markdown åº”ç”¨</h2><p>Markdown èƒ½è¢«ä½¿ç”¨æ¥æ’°å†™ç”µå­ä¹¦ï¼Œå¦‚ï¼šGitbookã€‚</p><p>å½“å‰è®¸å¤šç½‘ç«™éƒ½å¹¿æ³›ä½¿ç”¨ Markdown æ¥æ’°å†™å¸®åŠ©æ–‡æ¡£æˆ–æ˜¯ç”¨äºè®ºå›ä¸Šå‘è¡¨æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼šGitHubã€ç®€ä¹¦ã€redditã€Diasporaã€Stack Exchangeã€OpenStreetMap ã€SourceForgeç­‰ã€‚</p><p>æœ¬æ•™ç¨‹ä½¿ç”¨çš„æ˜¯<code>Typora</code>ã€‚ç”¨vscodeä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåœ¨vscodeå³ä¾§æ æ‰©å±•æŒ‰é’®ä¸‹è½½<strong>Markdown Preview Enhanced</strong> å³å¯ã€‚</p><p>åœ¨<code>Typora</code>ï¼Œç”¨<code>ctrl + / </code>æŒ‰é”®å³å¯åˆ‡æ¢æºç æ¨¡å¼å’Œé¢„è§ˆæ¨¡å¼ã€‚</p><h2 id="2ã€Markdown-æ ‡é¢˜"><a href="#2ã€Markdown-æ ‡é¢˜" class="headerlink" title="2ã€Markdown æ ‡é¢˜"></a>2ã€Markdown æ ‡é¢˜</h2><pre class="line-numbers language-none"><code class="language-none">2.1 æˆ‘æ˜¯ä¸€çº§æ ‡é¢˜=================2.2 æˆ‘æ˜¯äºŒçº§æ ‡é¢˜-----------------<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><h1 id="2-1-æˆ‘æ˜¯ä¸€çº§æ ‡é¢˜"><a href="#2-1-æˆ‘æ˜¯ä¸€çº§æ ‡é¢˜" class="headerlink" title="2.1 æˆ‘æ˜¯ä¸€çº§æ ‡é¢˜"></a>2.1 æˆ‘æ˜¯ä¸€çº§æ ‡é¢˜</h1><h2 id="2-2-æˆ‘æ˜¯äºŒçº§æ ‡é¢˜"><a href="#2-2-æˆ‘æ˜¯äºŒçº§æ ‡é¢˜" class="headerlink" title="2.2 æˆ‘æ˜¯äºŒçº§æ ‡é¢˜"></a>2.2 æˆ‘æ˜¯äºŒçº§æ ‡é¢˜</h2><p>ç”¨#å·æ ‡è®°å…­çº§æ ‡é¢˜ï¼Œå‚è€ƒå¦‚ä¸‹æ•ˆæœ</p><pre class="line-numbers language-none"><code class="language-none"># 2.3 ä¸€çº§æ ‡é¢˜## 2.4 äºŒçº§æ ‡é¢˜### 2.5 ä¸‰çº§æ ‡é¢˜#### 2.6 å››çº§æ ‡é¢˜##### 2.7 äº”çº§æ ‡é¢˜###### 2.8 å…­çº§æ ‡é¢˜<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="2-3-ä¸€çº§æ ‡é¢˜"><a href="#2-3-ä¸€çº§æ ‡é¢˜" class="headerlink" title="2.3 ä¸€çº§æ ‡é¢˜"></a>2.3 ä¸€çº§æ ‡é¢˜</h1><h2 id="2-4-äºŒçº§æ ‡é¢˜"><a href="#2-4-äºŒçº§æ ‡é¢˜" class="headerlink" title="2.4 äºŒçº§æ ‡é¢˜"></a>2.4 äºŒçº§æ ‡é¢˜</h2><h3 id="2-5-ä¸‰çº§æ ‡é¢˜"><a href="#2-5-ä¸‰çº§æ ‡é¢˜" class="headerlink" title="2.5 ä¸‰çº§æ ‡é¢˜"></a>2.5 ä¸‰çº§æ ‡é¢˜</h3><h4 id="2-6-å››çº§æ ‡é¢˜"><a href="#2-6-å››çº§æ ‡é¢˜" class="headerlink" title="2.6 å››çº§æ ‡é¢˜"></a>2.6 å››çº§æ ‡é¢˜</h4><h5 id="2-7-äº”çº§æ ‡é¢˜"><a href="#2-7-äº”çº§æ ‡é¢˜" class="headerlink" title="2.7 äº”çº§æ ‡é¢˜"></a>2.7 äº”çº§æ ‡é¢˜</h5><h6 id="2-8-å…­çº§æ ‡é¢˜"><a href="#2-8-å…­çº§æ ‡é¢˜" class="headerlink" title="2.8 å…­çº§æ ‡é¢˜"></a>2.8 å…­çº§æ ‡é¢˜</h6><h2 id="3ã€Markdownå­—ä½“"><a href="#3ã€Markdownå­—ä½“" class="headerlink" title="3ã€Markdownå­—ä½“"></a>3ã€Markdownå­—ä½“</h2><p>markdownå¯ä»¥ä½¿ç”¨ä¸€ä¸‹å‡ ç§å­—ä½“ï¼Œå‚è€ƒå¦‚ä¸‹æ•ˆæœï¼š</p><pre class="line-numbers language-none"><code class="language-none">*æ–œä½“æ–‡æœ¬*_æ–œä½“æ–‡æœ¬_**ç²—ä½“æ–‡æœ¬**__ç²—ä½“æ–‡æœ¬__***ç²—æ–œä½“æ–‡æœ¬***___ç²—æ–œä½“æ–‡æœ¬___~~åˆ é™¤çº¿æ–‡æœ¬~~&lt;u&gt;å¸¦ä¸‹åˆ’çº¿æ–‡æœ¬&lt;/u&gt; #é€šè¿‡HTMLçš„&lt;u&gt;&lt;/u&gt;æ ‡ç­¾å¸¦è„šæ³¨æ–‡æœ¬ï¼Œé¼ æ ‡æŒ‡ä¸€ä¸‹ä¼šæ˜¾ç¤ºå¯¹åº”è§£é‡Š [^tuoyou-hao]ã€‚[^tuoyou-hao]: æ‹“ä½‘è±ªåšå®¢<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><em>æ–œä½“æ–‡æœ¬</em><br><em>æ–œä½“æ–‡æœ¬</em><br><strong>ç²—ä½“æ–‡æœ¬</strong><br><strong>ç²—ä½“æ–‡æœ¬</strong><br><em><strong>ç²—æ–œä½“æ–‡æœ¬</strong></em><br><em><strong>ç²—æ–œä½“æ–‡æœ¬</strong></em><br><del>åˆ é™¤çº¿æ–‡æœ¬</del><br><u>å¸¦ä¸‹åˆ’çº¿æ–‡æœ¬</u> #é€šè¿‡HTMLçš„<u></u>æ ‡ç­¾<br>å¸¦è„šæ³¨æ–‡æœ¬ï¼Œé¼ æ ‡æŒ‡ä¸€ä¸‹ä¼šæ˜¾ç¤ºå¯¹åº”è§£é‡Š<sup class="refplus-num"><a href="#ref-t">[1]</a></sup>ã€‚</p><ul id="refplus" style="display:none;"><li id="ref-t" data-num="1">[1]   æ‹“ä½‘è±ªåšå®¢</li></ul><p></p><h2 id="4ã€Markdownåˆ†å‰²çº¿"><a href="#4ã€Markdownåˆ†å‰²çº¿" class="headerlink" title="4ã€Markdownåˆ†å‰²çº¿"></a>4ã€Markdownåˆ†å‰²çº¿</h2><pre class="line-numbers language-none"><code class="language-none">**** * ******- - -----------<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><hr><hr><hr><hr><hr><h2 id="5ã€Markdown-åˆ—è¡¨é¡¹"><a href="#5ã€Markdown-åˆ—è¡¨é¡¹" class="headerlink" title="5ã€Markdown åˆ—è¡¨é¡¹"></a>5ã€Markdown åˆ—è¡¨é¡¹</h2><h3 id="5-1-Markdown-æ— åºåˆ—è¡¨"><a href="#5-1-Markdown-æ— åºåˆ—è¡¨" class="headerlink" title="5.1 Markdown æ— åºåˆ—è¡¨"></a>5.1 Markdown æ— åºåˆ—è¡¨</h3><pre class="line-numbers language-none"><code class="language-none">* æ–‡æœ¬* æ–‡æœ¬+ æ–‡æœ¬+ æ–‡æœ¬- æ–‡æœ¬- æ–‡æœ¬<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><ul><li>æ–‡æœ¬</li><li>æ–‡æœ¬</li></ul><ul><li>æ–‡æœ¬</li><li>æ–‡æœ¬</li></ul><ul><li>æ–‡æœ¬</li><li>æ–‡æœ¬</li></ul><h3 id="5-2-Markdown-æœ‰åºåˆ—è¡¨"><a href="#5-2-Markdown-æœ‰åºåˆ—è¡¨" class="headerlink" title="5.2 Markdown æœ‰åºåˆ—è¡¨"></a>5.2 Markdown æœ‰åºåˆ—è¡¨</h3><pre class="line-numbers language-none"><code class="language-none">1. ç¬¬ä¸€é¡¹2. ç¬¬äºŒé¡¹3. ç¬¬ä¸‰é¡¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><ol><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ol><h3 id="5-3-åˆ—è¡¨åµŒå¥—"><a href="#5-3-åˆ—è¡¨åµŒå¥—" class="headerlink" title="5.3 åˆ—è¡¨åµŒå¥—"></a>5.3 åˆ—è¡¨åµŒå¥—</h3><pre class="line-numbers language-none"><code class="language-none">1. ç¬¬ä¸€é¡¹ï¼š    - ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´     - ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ 2. ç¬¬äºŒé¡¹ï¼š    - ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´     - ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>ç¬¬ä¸€é¡¹ï¼š<ul><li>ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </li></ul></li><li>ç¬¬äºŒé¡¹ï¼š<ul><li>ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </li></ul></li></ol><h2 id="6ã€MarkdownåŒºå—"><a href="#6ã€MarkdownåŒºå—" class="headerlink" title="6ã€MarkdownåŒºå—"></a>6ã€MarkdownåŒºå—</h2><pre class="line-numbers language-none"><code class="language-none">&gt; æœ€å¤–å±‚&gt;&gt; ç¬¬ä¸€å±‚åµŒå¥—&gt;&gt;&gt; ç¬¬äºŒå±‚åµŒå¥—<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><blockquote><p>æœ€å¤–å±‚</p><blockquote><p>ç¬¬ä¸€å±‚åµŒå¥—</p><blockquote><p>ç¬¬äºŒå±‚åµŒå¥—</p></blockquote></blockquote></blockquote><p>å½“ç„¶ï¼Œè¿™äº›æ˜¯å¯ä»¥äº’ç›¸åµŒå¥—çš„</p><pre class="line-numbers language-none"><code class="language-none">&gt; åˆ—è¡¨&gt; 1. ç¬¬ä¸€é¡¹&gt; 2. ç¬¬äºŒé¡¹&gt; + ç¬¬ä¸€é¡¹&gt;&gt; + ç¬¬äºŒé¡¹&gt; + ç¬¬ä¸‰é¡¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><blockquote><p>åˆ—è¡¨</p><ol><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li></ol><ul><li><p>ç¬¬ä¸€é¡¹</p><blockquote><ul><li>ç¬¬äºŒé¡¹</li></ul></blockquote></li><li><p>ç¬¬ä¸‰é¡¹</p></li></ul></blockquote><h2 id="7ã€Markdown-ä»£ç "><a href="#7ã€Markdown-ä»£ç " class="headerlink" title="7ã€Markdown ä»£ç "></a>7ã€Markdown ä»£ç </h2><p><strong>å•è¡Œä»£ç ï¼š</strong></p><pre class="line-numbers language-none"><code class="language-none">`echo HelloWorld`<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><code>echo HelloWorld</code></p><p><strong>ä»£ç åŒºå—ï¼š</strong></p><pre class="line-numbers language-none"><code class="language-none">â€‹```c#include &lt;stdio.h&gt;void main(){printf("Hello World\n");}//a.câ€‹```<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½ å¯ä»¥åœ¨ç¬¬ä¸€è¡Œçš„<code>```</code>æ—è¾¹æŒ‡å®šè¯­è¨€ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šã€‚æ•ˆæœå¦‚ä¸‹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//a.c</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8ã€Markdown-é“¾æ¥"><a href="#8ã€Markdown-é“¾æ¥" class="headerlink" title="8ã€Markdown é“¾æ¥"></a>8ã€Markdown é“¾æ¥</h2><pre class="line-numbers language-none"><code class="language-none">è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ [æ‹“ä½‘è±ªçš„åšå®¢](tuoyou-hao.github.io)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p>è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ <a href="tuoyou-hao.github.io">æ‹“ä½‘è±ªçš„åšå®¢</a></p><p>åœ¨Typoraï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‰“é“¾æ¥åœ°å€ï¼š<a href="https://tuoyou-hao.github.io/">https://tuoyou-hao.github.io</a></p><p><em><strong>é«˜çº§é“¾æ¥</strong></em></p><pre class="line-numbers language-none"><code class="language-none">è¿™ä¸ªé“¾æ¥ç”¨ 1 ä½œä¸ºç½‘å€å˜é‡ [baidu][1]ç„¶ååœ¨æ–‡æ¡£çš„ç»“å°¾ä¸ºå˜é‡èµ‹å€¼ï¼ˆç½‘å€ï¼‰[1]: https://www.baidu.com/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p>è¿™ä¸ªé“¾æ¥ç”¨ 1 ä½œä¸ºç½‘å€å˜é‡ <a href="https://www.baidu.com/">baidu</a><br>ç„¶ååœ¨æ–‡æ¡£çš„ç»“å°¾ä¸ºå˜é‡èµ‹å€¼ï¼ˆç½‘å€ï¼‰</p><h2 id="9ã€Markdownå›¾ç‰‡"><a href="#9ã€Markdownå›¾ç‰‡" class="headerlink" title="9ã€Markdownå›¾ç‰‡"></a>9ã€Markdownå›¾ç‰‡</h2><p>æ ¼å¼æ˜¯ ![å›¾ç‰‡åç§°](å›¾åƒåœ°å€)</p><p>å¦‚æœä½ æ˜¯åœ¨æœ¬åœ°çš„å›¾ç‰‡ï¼Œå›¾åƒåœ°å€å°±å¯ä»¥ç”¨æ–‡ä»¶è·¯å¾„</p><p>å¦‚æœä½ éœ€è¦è¿™ä¸ªå›¾åƒåˆ°å“ªå„¿éƒ½å¯ä»¥çœ‹ï¼Œé™¤äº†æŠŠå›¾ç‰‡çš„è·¯å¾„æ”¹ä¸º<code>ç›¸å¯¹è·¯å¾„</code>ç„¶åä¸€å¹¶æ‰“åŒ…ï¼Œè¿˜å¯ä»¥æŠŠå›¾åƒæ”¾åœ¨<code>å›¾åºŠ</code></p><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/05/14/R4umtJ9oEPwWhvS.png" alt="computer_organization3-3.png"></p><p>æ˜¯ä¸æ˜¯æ„Ÿè§‰å›¾åƒå¤ªå¤§äº†ï¼Ÿå¦‚æœä½ çš„å›¾åƒéœ€è¦ç¼©æ”¾ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­å¥</p><pre class="line-numbers language-none"><code class="language-none">&lt;img src=å›¾ç‰‡åœ°å€ style="zoom: ç¼©æ”¾æ¯”ä¾‹;" /&gt;&lt;img src="https://s2.loli.net/2022/05/14/R4umtJ9oEPwWhvS.png" style="zoom: 33%;" /&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><img src="https://s2.loli.net/2022/05/14/R4umtJ9oEPwWhvS.png" style="zoom: 33%;"><h2 id="10ã€Markdownè¡¨æ ¼"><a href="#10ã€Markdownè¡¨æ ¼" class="headerlink" title="10ã€Markdownè¡¨æ ¼"></a>10ã€Markdownè¡¨æ ¼</h2><p> Markdown åˆ¶ä½œè¡¨æ ¼ä½¿ç”¨ <strong>|</strong> æ¥åˆ†éš”ä¸åŒçš„å•å…ƒæ ¼ï¼Œä½¿ç”¨ <strong>-</strong> æ¥åˆ†éš”è¡¨å¤´å’Œå…¶ä»–è¡Œã€‚ </p><pre class="line-numbers language-none"><code class="language-none">|  è¡¨å¤´   | è¡¨å¤´  ||  ----  | ----  || å•å…ƒæ ¼  | å•å…ƒæ ¼ || å•å…ƒæ ¼  | å•å…ƒæ ¼ |<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><table><thead><tr><th>è¡¨å¤´</th><th>è¡¨å¤´</th></tr></thead><tbody><tr><td>å•å…ƒæ ¼</td><td>å•å…ƒæ ¼</td></tr><tr><td>å•å…ƒæ ¼</td><td>å•å…ƒæ ¼</td></tr></tbody></table><p>æ–‡å­—å¯¹é½æ–¹å¼ï¼š</p><pre class="line-numbers language-none"><code class="language-none">| å·¦å¯¹é½ | å³å¯¹é½ | å±…ä¸­å¯¹é½ || :-----| ----: | :----: || å•å…ƒæ ¼ | å•å…ƒæ ¼ | å•å…ƒæ ¼ || å•å…ƒæ ¼ | å•å…ƒæ ¼ | å•å…ƒæ ¼ |<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th align="left">å·¦å¯¹é½</th><th align="right">å³å¯¹é½</th><th align="center">å±…ä¸­å¯¹é½</th></tr></thead><tbody><tr><td align="left">å•å…ƒæ ¼</td><td align="right">å•å…ƒæ ¼</td><td align="center">å•å…ƒæ ¼</td></tr><tr><td align="left">å•å…ƒæ ¼</td><td align="right">å•å…ƒæ ¼</td><td align="center">å•å…ƒæ ¼</td></tr></tbody></table><h2 id="11ã€Markdownå…¶ä»–æŠ€å·§"><a href="#11ã€Markdownå…¶ä»–æŠ€å·§" class="headerlink" title="11ã€Markdownå…¶ä»–æŠ€å·§"></a>11ã€Markdownå…¶ä»–æŠ€å·§</h2><h3 id="1ã€æ”¯æŒçš„-HTML-å…ƒç´ "><a href="#1ã€æ”¯æŒçš„-HTML-å…ƒç´ " class="headerlink" title="1ã€æ”¯æŒçš„ HTML å…ƒç´ "></a>1ã€æ”¯æŒçš„ HTML å…ƒç´ </h3><p>ä¸åœ¨ Markdown æ¶µç›–èŒƒå›´ä¹‹å†…çš„æ ‡ç­¾ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£é‡Œé¢ç”¨ HTML æ’°å†™ã€‚</p><p>ç›®å‰æ”¯æŒçš„ HTML å…ƒç´ æœ‰ï¼š<code>kbdã€bã€iã€emã€sup ã€ubã€br</code>ç­‰ ï¼Œå¦‚ï¼š</p><pre class="line-numbers language-none"><code class="language-none">ä½¿ç”¨ &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;c&lt;/kbd&gt; é”®å¤åˆ¶æ–‡æœ¬<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½¿ç”¨ <kbd>Ctrl</kbd>+<kbd>c</kbd> å¤åˆ¶æ–‡æœ¬</p><h3 id="2ã€è½¬ä¹‰"><a href="#2ã€è½¬ä¹‰" class="headerlink" title="2ã€è½¬ä¹‰"></a>2ã€è½¬ä¹‰</h3><p>Markdown ä½¿ç”¨äº†å¾ˆå¤šç‰¹æ®Šç¬¦å·æ¥è¡¨ç¤ºä¸åŒçš„ç¬¦å·ï¼Œå¦‚æœéœ€è¦æ˜¾ç¤ºç‰¹å®šçš„ç¬¦å·åˆ™éœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼ŒMarkdown ä½¿ç”¨åæ–œæ è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼š </p><pre class="line-numbers language-none"><code class="language-none">**æ–‡æœ¬åŠ ç²—** \*\* æ­£å¸¸æ˜¾ç¤ºæ˜Ÿå· \*\*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>æ–‡æœ¬åŠ ç²—</strong><br>** æ­£å¸¸æ˜¾ç¤ºæ˜Ÿå· **</p><p>Markdown æ”¯æŒåœ¨è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ ï¼Œè¾¾åˆ°è½¬ä¹‰çš„ç›®çš„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">\   åæ–œçº¿`   åå¼•å·*   æ˜Ÿå·_   ä¸‹åˆ’çº¿{}  èŠ±æ‹¬å·[]  æ–¹æ‹¬å·()  å°æ‹¬å·#   äº•å­—å·+   åŠ å·-   å‡å·.   è‹±æ–‡å¥ç‚¹!   æ„Ÿå¹å·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3ã€Markdownè¡¨æƒ…"><a href="#3ã€Markdownè¡¨æƒ…" class="headerlink" title="3ã€Markdownè¡¨æƒ…"></a>3ã€Markdownè¡¨æƒ…</h3><p>å¯ä»¥ä½¿ç”¨å„ç§emojiï¼Œ<span class="github-emoji"><span>ğŸ”†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f506.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æˆ–è€…<span class="github-emoji"><span>ğŸ’¡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç­‰ç­‰éƒ½å¯ä»¥</p><p>æƒ³è¦ä½¿ç”¨è¿™äº›emojiï¼Œå¯ä»¥å‰å¾€è¿™ä¸ªé“¾æ¥<a href="https://www.webfx.com/tools/emoji-cheat-sheet/">emoji</a>ï¼Œæ‰¾åˆ°åˆé€‚çš„emojiï¼Œç‚¹å‡»ä¸€ä¸‹å°±å¤åˆ¶æˆåŠŸäº†ï¼Œå¯ä»¥è‡ªç”±ä½¿ç”¨åœ¨Markdowné‡Œã€‚</p><h3 id="4ã€æ•°å­¦å…¬å¼ã€æµç¨‹å›¾ç­‰ç­‰"><a href="#4ã€æ•°å­¦å…¬å¼ã€æµç¨‹å›¾ç­‰ç­‰" class="headerlink" title="4ã€æ•°å­¦å…¬å¼ã€æµç¨‹å›¾ç­‰ç­‰"></a>4ã€æ•°å­¦å…¬å¼ã€æµç¨‹å›¾ç­‰ç­‰</h3><p>markdownæ”¯æŒä¹¦å†™æ•°å­¦å…¬å¼ï¼Œä»£ç å»ºç«‹æµç¨‹å›¾ç­‰ç­‰ï¼Œåç»­ä¼šå‡ºä¸“æ ä¸“é—¨ä»‹ç»ã€‚</p><ul><li>Latexæ•°å­¦çŸ©é˜µè¡¨ç¤ºï¼š</li></ul><pre class="line-numbers language-none"><code class="language-none">$$\begin{Bmatrix}   a &amp; b \\\\   c &amp; d\end{Bmatrix}$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>$$<br>\begin{Bmatrix}<br>   a &amp; b \\<br>   c &amp; d<br>\end{Bmatrix}<br>$$</p><ul><li>æµç¨‹å›¾ï¼š</li></ul><pre class="line-numbers language-none"><code class="language-none">â€‹&lt;pre class="mermaid"&gt;graph LRA[æ–¹å½¢] --&gt;B(åœ†è§’)    B --&gt; C{æ¡ä»¶a}    C --&gt;|a=1| D[ç»“æœ1]    C --&gt;|a=2| E[ç»“æœ2]    F[æ¨ªå‘æµç¨‹å›¾]â€‹&lt;/pre&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="mermaid">graph LRA[æ–¹å½¢] --&gt;B(åœ†è§’)    B --&gt; C{æ¡ä»¶a}    C --&gt;|a=1| D[ç»“æœ1]    C --&gt;|a=2| E[ç»“æœ2]    F[æ¨ªå‘æµç¨‹å›¾]</pre><h3 id="5ã€èŠ±è‰²å­—ä½“"><a href="#5ã€èŠ±è‰²å­—ä½“" class="headerlink" title="5ã€èŠ±è‰²å­—ä½“"></a>5ã€èŠ±è‰²å­—ä½“</h3><p>åœ¨ Markdown æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <font> æ ‡ç­¾çš„ color å±æ€§ä¿®æ”¹æ–‡å­—é¢œè‰²ã€‚</font></p><h4 id="5-1-å­—ä½“å‰æ™¯è‰²"><a href="#5-1-å­—ä½“å‰æ™¯è‰²" class="headerlink" title="5.1 å­—ä½“å‰æ™¯è‰²"></a>5.1 å­—ä½“å‰æ™¯è‰²</h4><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">ä½¿ç”¨ <span class="token code-snippet code keyword">`&lt;font&gt;`</span> çš„æ ‡ç­¾çš„ä¿®æ”¹æ–‡å­—å‰æ™¯è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>çº¢è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>green<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ç»¿è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>è“è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rgb(200, 100, 100)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ä½¿ç”¨ rgb é¢œè‰²å€¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#FF00BB<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²å€¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ <code>&lt;font&gt;</code> çš„æ ‡ç­¾çš„ä¿®æ”¹æ–‡å­—å‰æ™¯è‰²</p><p><font color="red">çº¢è‰²</font><br><font color="green">ç»¿è‰²</font><br><font color="blue">è“è‰²</font></p><p><font color="rgb(200, 100, 100)">ä½¿ç”¨ rgb é¢œè‰²å€¼</font></p><p><font color="#FF00BB">ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²å€¼</font></p><p>é™¤äº†ä¿®æ”¹ color å±æ€§å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ style æ ·å¼å±æ€§ä¿®æ”¹æ–‡å­—é¢œè‰²ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">ä½¿ç”¨ <span class="token code-snippet code keyword">`style`</span> çš„æ ‡ç­¾çš„ä¿®æ”¹æ–‡å­—å‰æ™¯è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>çº¢è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> green</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>ç»¿è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> blue</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>è“è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>200<span class="token punctuation">,</span>100<span class="token punctuation">,</span>100<span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>ä½¿ç”¨ rgb é¢œè‰²å€¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> #FF00BB</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²å€¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ <code>style</code> çš„æ ‡ç­¾çš„ä¿®æ”¹æ–‡å­—å‰æ™¯è‰²</p><p><font style="color: red">çº¢è‰²</font><br><font style="color: green">ç»¿è‰²</font><br><font style="color: blue">è“è‰²</font></p><p><font style="color: rgb(200,100,100)">ä½¿ç”¨ rgb é¢œè‰²å€¼</font></p><p><font style="color: #FF00BB">ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²å€¼</font></p><p>å¹¶ä¸”æ”¯æŒä¿®æ”¹å­—ä½“ï¼Œä»¥ä¸‹æ˜¯æ€»ç»“ï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">face</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é»‘ä½“<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>é»‘ä½“å­—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">face</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¾®è½¯é›…é»‘<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å¾®è½¯é›…é»‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">face</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STCAIYUN<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>åæ–‡å½©äº‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>blue</span><span class="token punctuation">&gt;</span></span>è“è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>#008000</span><span class="token punctuation">&gt;</span></span>ç»¿è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>Red</span><span class="token punctuation">&gt;</span></span>çº¢è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>5</span><span class="token punctuation">&gt;</span></span>å°ºå¯¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">face</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é»‘ä½“<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>green</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>5</span><span class="token punctuation">&gt;</span></span>é»‘ä½“ï¼Œç»¿è‰²ï¼Œå°ºå¯¸ä¸º5ï¼ˆä»»æ„å†…å®¹ï¼‰<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><font face="é»‘ä½“">é»‘ä½“å­—</font></p><p><font face="å¾®è½¯é›…é»‘">å¾®è½¯é›…é»‘</font></p><p><font face="STCAIYUN">åæ–‡å½©äº‘</font></p><p><font color="blue">è“è‰²</font></p><p><font color="#008000">ç»¿è‰²</font></p><p><font color="Red">çº¢è‰²</font></p><p><font size="5">å°ºå¯¸</font></p><p><font face="é»‘ä½“" color="green" size="5">é»‘ä½“ï¼Œç»¿è‰²ï¼Œå°ºå¯¸ä¸º5ï¼ˆä»»æ„å†…å®¹ï¼‰</font></p><hr><p>å­—ä½“é¢œè‰²æœ‰é¢„è®¾å€¼å¯ä»¥ç”¨ï¼Œä½¿ç”¨<code>&lt;font color=LightSeaGreen&gt;æŸä¸€ç§ç»¿è‰²&lt;/font&gt;</code>è¯­å¥å³å¯ï¼š</p><p><font color="LightSeaGreen">æŸä¸€ç§ç»¿è‰²</font></p><p>å¸¸è§çš„é¢œè‰²è¿˜æœ‰ï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>NavajoWhite</span><span class="token punctuation">&gt;</span></span>color=NavajoWhite<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>Feldspar</span><span class="token punctuation">&gt;</span></span>color=Feldspar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>SandyBrown</span><span class="token punctuation">&gt;</span></span>color=SandyBrown<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>LightSalmon</span><span class="token punctuation">&gt;</span></span>color=LightSalmon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>Salmon</span><span class="token punctuation">&gt;</span></span>color=Salmon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>LightCoral</span><span class="token punctuation">&gt;</span></span>color=LightCoral<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>Pink</span><span class="token punctuation">&gt;</span></span>color=Pink<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>PaleVioletRed</span><span class="token punctuation">&gt;</span></span>color=PaleVioletRed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>HotPink</span><span class="token punctuation">&gt;</span></span>color=HotPink<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>silver</span><span class="token punctuation">&gt;</span></span>color=silver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>LightSlateGray</span><span class="token punctuation">&gt;</span></span>color=LightSlateGray<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>SlateGray</span><span class="token punctuation">&gt;</span></span>color=SlateGray<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>grey</span><span class="token punctuation">&gt;</span></span>color=grey<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>RosyBrown</span><span class="token punctuation">&gt;</span></span>color=RosyBrown<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>maroon</span><span class="token punctuation">&gt;</span></span>color=maroon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>DarkSeaGreen</span><span class="token punctuation">&gt;</span></span>color=DarkSeaGreen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>LightSeaGreen</span><span class="token punctuation">&gt;</span></span>color=LightSeaGreen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>SeaGreen</span><span class="token punctuation">&gt;</span></span>color=SeaGreen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>PowderBlue</span><span class="token punctuation">&gt;</span></span>color=PowderBlue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>LightSteelBlue</span><span class="token punctuation">&gt;</span></span>color=LightSteelBlue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>CadetBlue</span><span class="token punctuation">&gt;</span></span>color=CadetBlue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>navy</span><span class="token punctuation">&gt;</span></span>color=navy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>Thistle</span><span class="token punctuation">&gt;</span></span>color=Thistle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>Plum</span><span class="token punctuation">&gt;</span></span>color=Plum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>MediumPurpl</span><span class="token punctuation">&gt;</span></span>color=MediumPurpl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span>e<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>Purple</span><span class="token punctuation">&gt;</span></span>color=Purple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><font color="NavajoWhite">color=NavajoWhite</font></p><p><font color="Feldspar">color=Feldspar</font></p><p><font color="SandyBrown">color=SandyBrown</font></p><p><font color="LightSalmon">color=LightSalmon</font></p><p><font color="Salmon">color=Salmon</font></p><p><font color="LightCoral">color=LightCoral</font></p><p><font color="Pink">color=Pink</font></p><p><font color="PaleVioletRed">color=PaleVioletRed</font></p><p><font color="HotPink">color=HotPink</font></p><p><font color="silver">color=silver</font></p><p><font color="LightSlateGray">color=LightSlateGray</font></p><p><font color="SlateGray">color=SlateGray</font></p><p><font color="grey">color=grey</font></p><p><font color="RosyBrown">color=RosyBrown</font></p><p><font color="maroon">color=maroon</font></p><p><font color="DarkSeaGreen">color=DarkSeaGreen</font></p><p><font color="LightSeaGreen">color=LightSeaGreen</font></p><p><font color="SeaGreen">color=SeaGreen</font></p><p><font color="PowderBlue">color=PowderBlue</font></p><p><font color="LightSteelBlue">color=LightSteelBlue</font></p><p><font color="CadetBlue">color=CadetBlue</font></p><p><font color="navy">color=navy</font></p><p><font color="Thistle">color=Thistle</font></p><p><font color="Plum">color=Plum</font></p><p><font color="MediumPurpl">color=MediumPurpl</font></p><p><font color="Purple">color=Purple</font></p><h4 id="5-2-å­—ä½“èƒŒæ™¯è‰²"><a href="#5-2-å­—ä½“èƒŒæ™¯è‰²" class="headerlink" title="5.2 å­—ä½“èƒŒæ™¯è‰²"></a>5.2 å­—ä½“èƒŒæ™¯è‰²</h4><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">ä½¿ç”¨ <span class="token code-snippet code keyword">`style`</span> å±æ€§ä¿®æ”¹æ–‡å­—çš„èƒŒæ™¯è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>çº¢è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> green</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>ç»¿è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> blue</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>è“è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>200<span class="token punctuation">,</span>100<span class="token punctuation">,</span>100<span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>ä½¿ç”¨ rgb é¢œè‰²å€¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> #FF00BB</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²å€¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ <code>style</code> å±æ€§ä¿®æ”¹æ–‡å­—çš„èƒŒæ™¯è‰²</p><p><font style="background: red">çº¢è‰²</font><br><font style="background: green">ç»¿è‰²</font><br><font style="background: blue">è“è‰²</font></p><p><font style="background: rgb(200,100,100)">ä½¿ç”¨ rgb é¢œè‰²å€¼</font></p><p><font style="background: #FF00BB">ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²å€¼</font></p><p>åˆ©ç”¨styleå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶ä½œæ›´ä¸°å¯Œçš„æ ·å¼ï¼Œå¦‚ï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">æ›´ä¸°å¯ŒèƒŒæ™¯æ ·å¼<span class="token title important"><span class="token punctuation">##</span> &lt;font style="background: url('http://www.wenliku.com/d/file/patterns/2019-06-26/d8fac26c38c9b2a7e2393fc9af766e8f.jpg') "&gt;I wish you a Merry Christmas&lt;/font&gt;</span>ä½¿ç”¨å›¾ç‰‡ä½œèƒŒæ™¯<span class="token title important"><span class="token punctuation">##</span> &lt;font style="background: linear-gradient( to right, #ff1616, #ff7716, #ffdc16, #36c945, #10a5ce, #0f0096, #a51eff, #ff1616);"&gt;å¤ªé˜³å¤ªé˜³ï¼Œç»™æˆ‘ä»¬å¸¦æ¥ï¼Œä¸ƒè‰²å…‰å½©&lt;/font&gt;</span>æ¸å˜èƒŒæ™¯è‰²<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ›´ä¸°å¯ŒèƒŒæ™¯æ ·å¼</p><h2 id="I-wish-you-a-Merry-Christmas"><a href="#I-wish-you-a-Merry-Christmas" class="headerlink" title="I wish you a Merry Christmas"></a><font style="background: url('http://www.wenliku.com/d/file/patterns/2019-06-26/d8fac26c38c9b2a7e2393fc9af766e8f.jpg') ">I wish you a Merry Christmas</font></h2><p>ä½¿ç”¨å›¾ç‰‡ä½œèƒŒæ™¯</p><h2 id="å¤ªé˜³å¤ªé˜³ï¼Œç»™åœ°çƒå¸¦æ¥ï¼Œä¸ƒè‰²å…‰å½©"><a href="#å¤ªé˜³å¤ªé˜³ï¼Œç»™åœ°çƒå¸¦æ¥ï¼Œä¸ƒè‰²å…‰å½©" class="headerlink" title="å¤ªé˜³å¤ªé˜³ï¼Œç»™åœ°çƒå¸¦æ¥ï¼Œä¸ƒè‰²å…‰å½©"></a><font style="background: linear-gradient( to right, #ff1616, #ff7716, #ffdc16, #36c945, #10a5ce, #0f0096, #a51eff, #ff1616);">å¤ªé˜³å¤ªé˜³ï¼Œç»™åœ°çƒå¸¦æ¥ï¼Œä¸ƒè‰²å…‰å½©</font></h2><p>æ¸å˜èƒŒæ™¯è‰²</p><p>å¹¶ä¸”ï¼Œå€ŸåŠ©tableï¼Œtrï¼Œtdç­‰è¡¨æ ¼æ ‡ç­¾çš„bgclorå±æ€§ï¼Œè¿˜å¯ä»¥å®ç°æ›´ä¸°å¯Œçš„æ ·å¼ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">bgcolor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>DarkSeaGreen</span><span class="token punctuation">&gt;</span></span>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šDarkSeaGreen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><table><tbody><tr><td bgcolor="DarkSeaGreen">è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šDarkSeaGreen</td></tr></tbody></table><table><tbody><tr><td bgcolor="Beige">è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šBeige</td></tr></tbody></table><table><tbody><tr><td bgcolor="MistyRose">è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRose</td></tr></tbody></table><table><tbody><tr><td bgcolor="MistyRose">è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRose</td></tr></tbody></table>    <style>    #refplus, #refplus li{         padding:0;        margin:0;        list-style:none;    }ï¼›    </style>    <script src="https://unpkg.com/@popperjs/core@2"></script>    <script src="https://unpkg.com/tippy.js@6"></script>    <script>    document.querySelectorAll(".refplus-num").forEach((ref) => {        let refid = ref.firstChild.href.replace(location.origin+location.pathname,'');        let refel = document.querySelector(refid);        let refnum = refel.dataset.num;        let ref_content = refel.innerText.replace(`[${refnum}]`,'');        tippy(ref, {            content: ref_content,        });    });    </script>    ]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–°æ‰‹ </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»Ÿæ¦‚è¿°(2.1è¿›ç¨‹ä¸çº¿ç¨‹)</title>
      <link href="/2022/04/12/operating_system2-1/"/>
      <url>/2022/04/12/operating_system2-1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>æ“ä½œç³»ç»Ÿâ€”â€”2.1 è¿›ç¨‹ä¸çº¿ç¨‹</h1><h2 id="2-1-1-è¿›ç¨‹">2.1.1 è¿›ç¨‹</h2><ul><li><p>ç¨‹åºï¼Œæ˜¯é™æ€çš„ï¼Œå°±æ˜¯ä¸€ç³»åˆ—çš„æŒ‡ä»¤é›†åˆã€‚</p></li><li><p>è¿›ç¨‹ï¼Œæ˜¯åŠ¨æ€çš„ï¼Œæ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ã€‚</p></li><li><p>å½“è¿›ç¨‹è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™è¯¥è¿›ç¨‹åˆ†é…ä¸€ä¸ª<strong>å”¯ä¸€çš„ã€ä¸é‡å¤çš„ID</strong>â€”â€”PID(Process ID)ï¼Œè¿›ç¨‹ID</p></li><li><p>æ¯ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¼šè®°å½•ï¼š</p><ul><li>å…¶PIDï¼Œè¿›ç¨‹æ‰€å±ç”¨æˆ·IDï¼ˆUIDï¼‰</li><li>è¿˜è¦è®°å½•ç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…äº†å¤šå°‘èµ„æºï¼ˆå¦‚å†…å­˜ï¼Œæ­£åœ¨ä½¿ç”¨å“ªäº›IOè®¾å¤‡ï¼Œæ­£åœ¨ä½¿ç”¨é‚£äº›æ–‡ä»¶ï¼Œå¯ç”¨äºå®ç°æ“ä½œç³»ç»Ÿå¯¹èµ„æºçš„ç®¡ç†ã€‚ï¼‰</li><li>è®°å½•è¿›ç¨‹çš„è¿è¡Œæƒ…å†µï¼ˆCPUä½¿ç”¨æ—¶é—´ã€ç£ç›˜ä½¿ç”¨æƒ…å†µã€ç½‘ç»œæµé‡ä½¿ç”¨æƒ…å†µç­‰ç­‰ï¼Œå¯ç”¨äºå®ç°æ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹çš„æ§åˆ¶ã€è°ƒåº¦ï¼‰</li><li>è¿™äº›ä¿¡æ¯éƒ½ä¼šåŒæ„ä¿å­˜åœ¨ä¸€ä¸ªæ•°æ®ç»“æ„<strong>PCB</strong>ï¼ˆprocess control blockï¼‰ä¸­ï¼Œå³è¿›ç¨‹æ§åˆ¶å—ï¼Œå­˜æ”¾ç®¡ç†æ—¶éœ€è¦çš„ä¿¡æ¯ã€‚</li></ul></li></ul><pre class="mermaid">graph LRPCB(PCB) --&gt;A(è¿›ç¨‹æè¿°ä¿¡æ¯)    A --&gt;A1(è¿›ç¨‹æ ‡è¯†ç¬¦PID)    A --&gt;A2(ç”¨æˆ·æ ‡è¯†ç¬¦UID)PCB --&gt;B(è¿›ç¨‹æ§åˆ¶å’Œç®¡ç†ä¿¡æ¯)    B --&gt;B1(CPU/ç£ç›˜/ç½‘ç»œæµé‡ ä½¿ç”¨ç»Ÿè®¡)    B --&gt;B2(è¿›ç¨‹å½“å‰çŠ¶æ€ å°±ç»ª/é˜»å¡/è¿è¡Œ)PCB --&gt;C(èµ„æºåˆ†é…æ¸…å•)    C --&gt;C1(æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶)    C --&gt;C2(æ­£åœ¨ä½¿ç”¨çš„å†…å­˜åŒºåŸŸ)    C --&gt;C3(æ­£åœ¨ä½¿ç”¨çš„IOè®¾å¤‡)PCB --&gt;D(å¤„ç†æœºç›¸å…³ä¿¡æ¯)D --&gt;D1(PSW/PCç­‰ å¯„å­˜å™¨çš„å€¼)</pre><ul><li>å½“è¿›ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¸ºæœŸåˆ›å»ºä¸€ä¸ªPCBã€‚å½“è¿›ç¨‹è¿è¡Œç»“æŸï¼Œæ“ä½œç³»ç»Ÿä¼šå°†å…¶æ”¶å›ã€‚æ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹è¿›è¡Œç®¡ç†å·¥ä½œæ‰€éœ€ä¿¡æ¯éƒ½å­˜åœ¨PCBä¸­ã€‚</li></ul><pre class="mermaid">graph LRS(è¿›ç¨‹çš„ç»„æˆ) --&gt;PCBPCB --&gt;P1(è¿›ç¨‹æè¿°ä¿¡æ¯)PCB --&gt;P2(è¿›ç¨‹æ§åˆ¶å’Œç®¡ç†ä¿¡æ¯)PCB --&gt;P3(èµ„æºåˆ†é…æ¸…å•)PCB --&gt;P4(å¤„ç†æœºç›¸å…³ä¿¡æ¯)S --&gt;A(ç¨‹åºæ®µ)A --&gt;A1(ç¨‹åºçš„ä»£ç   æŒ‡ä»¤åºåˆ—)S --&gt;B(æ•°æ®æ®µ)B --&gt;B1(è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„å„ç§æ•°æ®)B --&gt;B2(å¦‚ ç¨‹åºä¸­å®šä¹‰çš„å˜é‡)S1[å‡†ç¡®æ¥è¯´, åº”è¯¥æ˜¯ è¿›ç¨‹å®ä½“çš„ç»„æˆ]</pre><p>PCBé€šå¸¸åŒ…å«çš„å†…å®¹ï¼š</p><table><thead><tr><th style="text-align:center">è¿›ç¨‹æè¿°ä¿¡æ¯</th><th style="text-align:center">è¿›ç¨‹æ§åˆ¶å’Œç®¡ç†ä¿¡æ¯</th><th style="text-align:center">èµ„æºåˆ†é…æ¸…å•</th><th style="text-align:center">å¤„ç†æœºç›¸å…³ä¿¡æ¯</th></tr></thead><tbody><tr><td style="text-align:center">è¿›ç¨‹æ ‡è¯†ç¬¦PID</td><td style="text-align:center">è¿›ç¨‹å½“å‰çŠ¶æ€</td><td style="text-align:center">ä»£ç æ®µæŒ‡é’ˆ</td><td style="text-align:center">é€šç”¨å¯„å­˜å™¨å€¼</td></tr><tr><td style="text-align:center">ç”¨æˆ·æ ‡è¯†ç¬¦UID</td><td style="text-align:center">è¿›ç¨‹ä¼˜å…ˆçº§</td><td style="text-align:center">æ•°æ®æ®µæŒ‡é’ˆ</td><td style="text-align:center">åœ°å€å¯„å­˜å™¨å€¼</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">ä»£ç è¿è¡Œå…¥å£åœ°å€</td><td style="text-align:center">å †æ ˆæ®µæŒ‡é’ˆ</td><td style="text-align:center">æ§åˆ¶å¯„å­˜å™¨å€¼</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">ç¨‹åºçš„å¤–å­˜åœ°å€</td><td style="text-align:center">æ–‡ä»¶æè¿°ç¬¦</td><td style="text-align:center">æ ‡å¿—å¯„å­˜å™¨å€¼</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">è¿›å…¥å†…å­˜æ—¶é—´</td><td style="text-align:center">é”®ç›˜</td><td style="text-align:center">çŠ¶æ€å­—</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">å¤„ç†æœºå ç”¨æ—¶é—´</td><td style="text-align:center">é¼ æ ‡</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">ä¿¡å·é‡ä½¿ç”¨</td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><ul><li>PCBæ˜¯ç»™æ“ä½œç³»ç»Ÿç”¨çš„ã€‚<strong>PCBæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ï¼</strong></li><li>ç¨‹åºæ®µã€æ•°æ®æ®µæ˜¯ç»™è¿›ç¨‹è‡ªå·±ä½¿ç”¨çš„ã€‚å’Œè‡ªèº«çš„è¿è¡Œé€»è¾‘æœ‰å…³</li></ul><p>è¿›ç¨‹ï¼Œæ˜¯åŠ¨æ€çš„ï¼Œæ˜¯ç¨‹åºè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹ä¸ªä½“ã€‚</p><p>è¿›ç¨‹å®ä½“ï¼ˆè¿›ç¨‹æ˜ åƒï¼‰ï¼šæ˜¯é™æ€çš„ï¼Œæ˜¯è¿›ç¨‹æŸä¸€æ—¶åˆ»è¿è¡Œæ—¶çš„å¿«ç…§ï¼ˆç…§ç‰‡ï¼‰ã€‚è¿›ç¨‹å®ä½“å¯ä»¥åæ˜ è¿›ç¨‹åœ¨æŸä¸€æ—¶åˆ»çš„çŠ¶æ€ã€‚</p><ul><li>ä¸€ä¸ªè¿›ç¨‹çš„è°ƒåº¦ï¼Œå°±æ˜¯æ“ä½œç³»ç»Ÿå†³å®šè®©è¿™ä¸ªè¿›ç¨‹ä¸ŠCPUè¿è¡Œã€‚</li></ul><p><strong>è¿›ç¨‹çš„ç‰¹å¾</strong>ï¼š</p><ul><li><p>åŠ¨æ€æ€§ï¼š</p><p>æ˜¯è¿›ç¨‹çš„æœ€åŸºæœ¬ç‰¹å¾ã€‚è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼ŒåŠ¨æ€äº§ç”Ÿã€å˜åŒ–å’Œæ¶ˆäº¡</p></li><li><p>å¹¶å‘æ€§ï¼š</p><p>å†…å­˜ä¸­æœ‰å¤šä¸ªè¿›ç¨‹å®ä½“ã€‚å„ä¸ªè¿›ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚</p></li><li><p>ç‹¬ç«‹æ€§ï¼š</p><p>è¯¾æ¥å—ç‹¬ç«‹è¿è¡Œã€è°ƒåº¦ã€è·å¾—èµ„æºçš„åŸºæœ¬å•ä½</p><p>å„ä¸ªè¿›ç¨‹æ‹¥æœ‰çš„å†…å­˜åœ°å€ç©ºé—´ç›¸äº’ç‹¬ç«‹</p></li><li><p>å¼‚æ­¥æ€§ï¼š</p><p>å„è‡ªç‹¬ç«‹ï¼Œä¸å¯é¢„çŸ¥çš„é€Ÿåº¦è¿è¡Œã€‚æ“ä½œç³»ç»Ÿè¦æä¾› <strong>è¿›ç¨‹åŒæ­¥æœºåˆ¶</strong> æ¥è§£å†³å¼‚æ­¥é—®é¢˜</p></li><li><p>ç»“æ„æ€§ï¼š</p><p>æ¯ä¸ªè¿›ç¨‹éƒ½é…æœ‰ä¸€ä¸ªPCBã€‚</p></li></ul><h2 id="2-1-2-è¿›ç¨‹çš„çŠ¶æ€">2.1.2 è¿›ç¨‹çš„çŠ¶æ€</h2><p><strong>è¿›ç¨‹çš„çŠ¶æ€</strong>ï¼š</p><ul><li><p>åˆ›å»ºæ€ï¼šè¿›ç¨‹è¢«åˆ›å»ºæ—¶çš„çŠ¶æ€ã€‚ç³»ç»Ÿä¼šä¸ºå…¶åˆ†é…èµ„æºï¼Œåˆå§‹åŒ–PCBã€‚</p></li><li><p>å°±ç»ªæ€ï¼šè¿›ç¨‹åˆ›å»ºå®Œæˆçš„çŠ¶æ€ã€‚<strong>ä½†ç”±äºæ²¡æœ‰CPUï¼Œæš‚æ—¶ä¸èƒ½è¿è¡Œ</strong></p></li><li><p>è¿è¡Œæ€ï¼šè¿›ç¨‹æ­£åœ¨CPUä¸Šè¿è¡Œã€‚</p></li></ul><p>è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šè¯·æ±‚ç­‰å¾…æŸä¸ªæ—¶é—´çš„å‘ç”Ÿï¼ˆå¦‚ç­‰å¾…æŸç§ç³»ç»Ÿèµ„æºçš„åˆ†é…ï¼Œæˆ–è€…ç­‰å¾…å…¶ä»–è¿›ç¨‹çš„å“åº”ï¼‰ã€‚æ‰€ä»¥è¿˜æœ‰ï¼š</p><ul><li>é˜»å¡æ€ï¼šåœ¨è¿™ä¸ªäº‹ä»¶å‘ç”Ÿä¹‹å‰ï¼Œè¯¥è¿›ç¨‹æ— æ³•ç»§ç»­è¿è¡Œã€‚æ“ä½œç³»ç»Ÿä¼šå°†å…¶è®¾ç½®ä¸ºé˜»å¡æ€ã€‚</li></ul><pre class="mermaid">graph LRA((æ–°å»º)) --&gt; |åˆ›å»º|B(å°±ç»ª)B --&gt;|è°ƒåº¦|C(è¿è¡Œ)C --&gt;|æ—¶é—´åˆ°|BC --&gt;|é€€å‡º|E(ç»ˆæ­¢)C --&gt;|äº‹ä»¶ç­‰å¾…|D(é˜»å¡)D --&gt;|äº‹ä»¶å‘ç”Ÿ|B</pre><ul><li><p>å°±ç»ªæ€ -&gt; è¿è¡Œæ€ï¼šè¿›ç¨‹è¢«è°ƒåº¦</p></li><li><p>è¿è¡Œæ€ -&gt; é˜»å¡æ€ï¼šæ˜¯ä¸€ç§ä¸»åŠ¨è¡Œä¸ºï¼Œç­‰å¾…èµ„æºåˆ†é…</p></li><li><p>é˜»å¡æ€ -&gt; å°±ç»ªæ€ï¼šæ˜¯ä¸€ç§è¢«åŠ¨è¡Œä¸ºï¼Œèµ„æºåˆ†é…åˆ°ä½</p></li><li><p>è¿è¡Œæ€ -&gt; å°±ç»ªæ€ï¼šæ—¶é—´ç‰‡ç»“æŸæ—¶å€™ä¼šæœ‰é€‚ä¸­ä¸­æ–­ï¼Œæˆ–è€…CPUè¢«å…¶ä»–ä¼˜å…ˆçº§æ›´é«˜çš„è¿›ç¨‹æŠ¢å </p></li><li><p>ä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼šè¿è¡Œæ€ã€å°±ç»ªæ€ã€é˜»å¡æ€ã€‚</p></li><li><p>PCBä¸­ä¼šæœ‰ä¸ªstateè¡¨ç¤ºè¿›ç¨‹çš„å½“å‰çŠ¶æ€</p></li></ul><p><strong>è¿›ç¨‹çš„ç»„ç»‡â€”â€”é“¾æ¥æ–¹å¼</strong>ï¼š</p><ul><li>ä¸»è¦ä½¿ç”¨åˆ°äº†ï¼šæ‰§è¡ŒæŒ‡é’ˆã€å°±ç»ªé˜Ÿåˆ—æŒ‡é’ˆã€é˜»å¡é˜Ÿåˆ—æŒ‡é’ˆ</li></ul><p>é“¾å¼æ–¹å¼ï¼ˆç³»ç»Ÿç®¡ç†ä¸€ç³»åˆ—çš„é˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—éƒ½ä¼šæŒ‡å‘ç›¸åº”çŠ¶æ€çš„PCBï¼‰å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä½¿ç”¨è¯¥æ–¹å¼</p><p>â€‹æ‰§è¡ŒæŒ‡é’ˆæŒ‡å‘å½“å‰è¿è¡Œæ€ï¼ˆæ‰§è¡Œæ€ï¼‰çš„è¿›ç¨‹</p><p>ç´¢å¼•æ–¹å¼</p><p>â€‹ç»™å„ä¸ªç›¸åº”è¿›ç¨‹å»ºç«‹ç´¢å¼•è¡¨ï¼Œæ¯ä¸ªç´¢å¼•è¡¨çš„è¡¨é¡¹æŒ‡å‘PCB</p><h2 id="2-1-3-è¿›ç¨‹æ§åˆ¶">2.1.3 è¿›ç¨‹æ§åˆ¶</h2><p>å®ç°è¿›ç¨‹çš„çŠ¶æ€è½¬æ¢ã€‚è¿›ç¨‹æ§åˆ¶éœ€è¦ç”¨<strong>åŸè¯­</strong>æ¥å®ç°ã€‚</p><p>åŸè¯­çš„æ‰§è¡Œå…·æœ‰åŸå­æ€§ï¼Œå³å…è®¸è¿‡ç¨‹åªèƒ½ä¸€æ°”å‘µæˆï¼ŒæœŸé—´ä¸å…è®¸è¢«ä¸­æ–­ã€‚</p><p>å¯ä»¥ç”¨â€œå…³ä¸­æ–­æŒ‡ä»¤â€œå’Œâ€å¼€ä¸­æ–­æŒ‡ä»¤â€œè¿™ä¸¤ä¸ªç‰¹æƒæŒ‡ä»¤æ¥å®ç°åŸå­æ€§ã€‚</p><ul><li>æ²¡æœ‰å…³é—­ä¸­æ–­æŒ‡ä»¤çš„æ—¶å€™ï¼ŒCPUæ¯æ‰§è¡Œä¸€å¥è¯å°±ä¼šæ£€æŸ¥æ˜¯å¦æœ‰ä¸­æ–­ä¿¡å·ï¼Œæœ‰çš„æ¢å°±ä¸­æ–­ç¨‹åºï¼Œå»æ‰§è¡Œä¸­æ–­ä¿¡å·æ‰€å¯¹åº”çš„ç¨‹åºã€‚</li><li>å…³é—­äº†ä¸­æ–­æŒ‡ä»¤ä¹‹åï¼Œå³ä½¿æœ‰ä¸­æ–­æŒ‡ä»¤è¿›æ¥ï¼ŒCPUå°±ä¸ä¼šç†ä¼šï¼Œç»§ç»­æ‰§è¡Œè‡ªå·±å½“å‰çš„æŒ‡ä»¤ã€‚</li><li>æ‰§è¡Œäº†â€œå¼€ä¸­æ–­æŒ‡ä»¤â€ ï¼Œæ‰ä¼šæ£€æŸ¥åˆšæ‰æ˜¯å¦æœ‰ä¸­æ–­ä¿¡å·ã€‚æœ‰çš„è¯ï¼Œå°±é©¬ä¸Šè½¬å»ä¸­æ–­å¤„ç†ç¨‹åºã€‚</li><li>åœ¨â€å…³ä¸­æ–­â€œä¸â€œå¼€ä¸­æ–­â€ä¹‹é—´çš„æŒ‡ä»¤å°±æ˜¯åŸå­æ€§çš„ï¼Œä¸å¯è¢«ä¸­æ–­ã€‚</li></ul><h3 id="2-1-3-1-è¿›ç¨‹çš„åˆ›å»ºï¼š">2.1.3.1 è¿›ç¨‹çš„åˆ›å»ºï¼š</h3><ul><li>åˆ›å»ºåŸè¯­ï¼š<ul><li>ç”³è¯·ç©ºç™½çš„PCB</li><li>ä¸ºæ–°è¿›ç¨‹åˆ†é…æ‰€éœ€èµ„æº</li><li>åˆå§‹åŒ–PCB</li><li>å°†PCBæ’å…¥ å°±ç»ªé˜Ÿåˆ—</li></ul></li><li>å¼•èµ·è¿›ç¨‹åˆ›å»ºçš„äº‹ä»¶<ul><li>ç”¨æˆ·ç™»å½•ï¼šåˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ç™»å½•æˆåŠŸï¼Œç³»ç»Ÿä¼šä¸ºå…¶å»ºç«‹ä¸€ä¸ªæ–°çš„è¿›ç¨‹</li><li>ä½œä¸šè°ƒåº¦ï¼šå¤šé“æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œæœ‰æ–°çš„ä½œä¸šæ”¾å…¥å†…å­˜æ—¶ï¼Œä¼šä¸ºå…¶å»ºç«‹ä¸€ä¸ªæ–°çš„è¿›ç¨‹</li><li>æä¾›æœåŠ¡ï¼šç”¨æˆ·å‘æ“ä½œç³»ç»Ÿæå‡ºæŸäº›è¯·æ±‚æ—¶ï¼Œä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹å¤„ç†è¿™ä¸ªè¯·æ±‚</li><li>åº”ç”¨è¯·æ±‚ï¼šç”±ç”¨æˆ·è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚åˆ›å»ºçš„ä¸€ä¸ªå­è¿›ç¨‹</li></ul></li></ul><h3 id="2-1-3-2-è¿›ç¨‹çš„æ‘§æ¯ï¼š">2.1.3.2 è¿›ç¨‹çš„æ‘§æ¯ï¼š</h3><ul><li>æ’¤é”€åŸè¯­ï¼š<ul><li>ä»PCBé›†åˆä¸­æ‰¾åˆ°ç»ˆæ­¢è¿›ç¨‹çš„PCB</li><li>è‹¥è¯¥è¿›ç¨‹æ­£åœ¨è¿è¡Œï¼Œç«‹å³å‰¥å¤ºCPUï¼Œå°†CPUåˆ†é…ç»™å…¶ä»–è¿›ç¨‹</li><li>ç»ˆæ­¢å…¶æ‰€æœ‰å­è¿›ç¨‹ï¼ˆè¿›ç¨‹ä¹‹é—´çš„å…³ç³»æ˜¯æ ‘å½¢çš„ç»“æ„ï¼‰</li><li>å°†è¯¥è¿›ç¨‹æ‹¥æœ‰çš„æ‰€æœ‰èµ„æºå½’è¿˜ç»™çˆ¶è¿›ç¨‹æˆ–è€…æ“ä½œç³»ç»Ÿ</li><li>åˆ é™¤PCB</li></ul></li><li>å¼•èµ·è¿›ç¨‹ç»ˆæ­¢çš„æ—¶é—´<ul><li>æ­£å¸¸ç»“æŸï¼šè¿›ç¨‹è‡ªå·±è¯·æ±‚ç»ˆæ­¢ï¼ˆexitç³»ç»Ÿè°ƒç”¨ï¼‰</li><li>å¼‚å¸¸ç»“æŸï¼šæ•´æ•°é™¤0ã€éæ³•ä½¿ç”¨ç‰¹æƒæŒ‡ä»¤ç„¶åè¢«æ“ä½œç³»ç»Ÿå¼ºè¡Œæ€æ‰</li><li>å¤–æ¥å¹²é¢„ï¼šå‘½ä»¤è¡Œ<kbd>ctrl</kbd>+<kbd>c</kbd>é”®ç›´æ¥ä¸­æ–­ä»£ç è¿è¡Œ</li></ul></li></ul><h3 id="2-1-3-3-è¿›ç¨‹çš„é˜»å¡å’Œå”¤é†’ï¼š">2.1.3.3 è¿›ç¨‹çš„é˜»å¡å’Œå”¤é†’ï¼š</h3><ul><li>è¿›ç¨‹çš„é˜»å¡<ul><li>é˜»å¡åŸè¯­<ul><li>æ‰¾åˆ°è¦é˜»å¡çš„è¿›ç¨‹ å¯¹åº”çš„PCB</li><li>ä¿æŠ¤è¿›ç¨‹è¿è¡Œç°åœºï¼Œå°†PCBçŠ¶æ€ä¿¡æ¯è®¾ç½®ä¸º â€œé˜»å¡æ€â€ ï¼Œæš‚åœè¿›ç¨‹çš„è¿è¡Œ</li><li>å°†PCBæ’å…¥ç›¸åº”äº‹ä»¶çš„ç­‰å¾…é˜Ÿåˆ—</li></ul></li><li>å¼•èµ·è¿›ç¨‹é˜»å¡çš„äº‹ä»¶<ul><li>éœ€è¦ç­‰å¾…ç³»ç»Ÿåˆ†é…æŸç§èµ„æº</li><li>éœ€è¦ç­‰å¾…ç›¸äº’åˆä½œçš„å…¶ä»–è¿›ç¨‹å®Œæˆå·¥ä½œ</li></ul></li></ul></li><li>è¿›ç¨‹çš„å”¤é†’<ul><li>å”¤é†’åŸè¯­<ul><li>åœ¨äº‹ä»¶ç­‰å¾…é˜Ÿåˆ—ä¸­æ‰¾åˆ°PCB</li><li>å°†PCBä»ç­‰å¾…é˜Ÿåˆ—æº¢å‡ºï¼Œè®¾ç½®è¿›ç¨‹ä¸ºå°±ç»ªæ€</li><li>å°†PCBæ’å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œç­‰å¾…è¢«è°ƒåº¦</li></ul></li><li>å¼•èµ·è¿›ç¨‹å”¤é†’çš„äº‹ä»¶ï¼šç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿäº†ã€‚ <strong>ä¸€ä¸ªè¿›ç¨‹å› ä¸ºä»€ä¹ˆäº‹æƒ…è¢«é˜»å¡ï¼Œå°±åº”è¯¥ç”±è¿™ä¸ªäº‹ä»¶æ¥å”¤é†’</strong> ã€‚</li></ul></li></ul><h3 id="2-1-3-4è¿›ç¨‹çš„åˆ‡æ¢ï¼š">2.1.3.4è¿›ç¨‹çš„åˆ‡æ¢ï¼š</h3><ul><li>åˆ‡æ¢åŸè¯­<ul><li>å°†è¿è¡Œç¯å¢ƒä¿¡æ¯å­˜å…¥PCB</li><li>PCBç§»å…¥ç›¸åº”é˜Ÿåˆ—</li><li>é€‰æ‹©å¦ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œæ›´æ–°å…¶PCB</li><li>æ ¹æ®PCBæ¢å¤æ–°è¿›ç¨‹æ‰€éœ€çš„è¿è¡Œç¯å¢ƒ</li></ul></li><li>å¼•èµ·è¿›ç¨‹åˆ‡æ¢çš„æ—¶é—´<ul><li>å½“å‰è¿›ç¨‹çš„æ—¶é—´ç‰‡è®¡æ—¶ç»“æŸ</li><li>æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹åˆ°è¾¾</li><li>å½“å‰è¿›ç¨‹ä¸»åŠ¨é˜»å¡</li><li>å½“å‰è¿›ç¨‹ç»ˆæ­¢</li></ul></li></ul><p>æ— è®ºå“ªä¸ªè¿›ç¨‹è¦æ§åˆ¶åŸè¯­ï¼Œè¦åšçš„æ— éä¸‰ç±»äº‹æƒ…ï¼š</p><ol><li><p>æ›´æ–°PCBä¸­çš„ä¿¡æ¯</p></li><li><p>å°†PCBæ’å…¥åˆé€‚çš„é˜Ÿåˆ—</p></li><li><p>åˆ†é…/å›æ”¶èµ„æº</p></li></ol><h2 id="2-1-4-è¿›ç¨‹é€šä¿¡">2.1.4 è¿›ç¨‹é€šä¿¡</h2><pre class="mermaid">graph LRA(è¿›ç¨‹é€šä¿¡) --&gt;B(å…±äº«å­˜å‚¨)B --&gt;B1(åŸºäºæ•°æ®ç»“æ„çš„å…±äº«)B --&gt;B2(åŸºäºå­˜å‚¨åŒºçš„å…±äº«)A --&gt;C(æ¶ˆæ¯ä¼ é€’)C --&gt;C1(ç›´æ¥é€šä¿¡)C --&gt;C2(é—´æ¥é€šä¿¡)A --&gt;D(ç®¡é“é€šä¿¡)</pre><h3 id="2-1-4-1è¿›ç¨‹é€šä¿¡">2.1.4.1è¿›ç¨‹é€šä¿¡</h3><p>è¿›ç¨‹ä¹‹é—´çš„ä¿¡æ¯äº¤æ¢ã€‚ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®å¦ä¸€ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´</p><ul><li><p>å…±äº«ç©ºé—´ï¼š<strong>ä¸¤ä¸ªè¿›ç¨‹å¯¹å…±äº«ç©ºé—´çš„è®¿é—®å¿…é¡»æ˜¯äº’æ–¥çš„</strong>ï¼ˆäº’æ–¥è®¿é—®é€šè¿‡æ“ä½œç³»ç»Ÿç»™çš„å·¥å…·å®ç°ï¼‰ã€‚æ“ä½œç³»ç»Ÿåªæä¾›å…±äº«ç©ºé—´å’ŒåŒæ­¥äº’æ–¥å·¥å…·ï¼ˆå¦‚Pã€Væ“ä½œï¼‰</p><ul><li>åŸºäºæ•°æ®ç»“æ„å…±äº«ï¼šæ¯”å¦‚å…±äº«ç©ºé—´åªèƒ½å­˜æ”¾é•¿åº¦ä¸º10çš„æ•°ç»„ï¼Œè¿™ç§æ–¹å¼é€Ÿåº¦æ…¢ï¼Œé™åˆ¶å¤šï¼Œæ˜¯ä¸€ç§ä½çº§çš„é€šä¿¡æ–¹å¼</li><li>åŸºäºå­˜å‚¨åŒºçš„å…±äº«ï¼šåœ¨å†…å­˜ä¸­åˆ’å‡ºä¸€å—å…±äº«å­˜å‚¨åŒºï¼Œæ•°æ®çš„å½¢å¼ã€å­˜æ”¾çš„ä½ç½®éƒ½æ˜¯ç”±è¿›ç¨‹æ¥æ§åˆ¶ï¼Œè€Œä¸æ˜¯æ“ä½œç³»ç»Ÿã€‚è¯¥å…±äº«æ–¹å¼æ›´å¿«ï¼Œæ˜¯ä¸€ç§é«˜çº§çš„é€šä¿¡æ–¹å¼ã€‚</li></ul></li><li><p>ç®¡é“é€šä¿¡ï¼š</p><p>ç®¡é“æ˜¯æŒ‡ç”¨äºè¿æ¥è¯»å†™è¿›ç¨‹çš„ä¸€ä¸ªå…±äº«æ–‡ä»¶ï¼Œåˆå«åš<strong>pipe</strong>æ–‡ä»¶ã€‚å…¶å®å°±æ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªå¤§å°å›ºå®šçš„ç¼“å†²åŒºã€‚</p><ul><li>ä¸€ä¸ªç®¡é“åªèƒ½é‡‡ç”¨<code>åŠåŒå·¥é€šä¿¡</code>ï¼ŒæŸä¸€æ—¶é—´æ®µå†…åªèƒ½å®ç°<strong>å•å‘</strong>çš„ä¼ è¾“ã€‚å¦‚æœè¦å®ç°<code>åŒå‘åŒæ—¶é€šä¿¡</code>ï¼Œåˆ™éœ€è¦è®¾ç½®ä¸¤ä¸ªç®¡é“ã€‚</li><li>å„ä¸ªè¿›ç¨‹è¦<strong>äº’æ–¥</strong>åœ°è®¿é—®ç®¡é“ã€‚</li><li>æ•°æ®ä»¥å­—ç¬¦æµçš„å½¢å¼è¿›å…¥ç®¡é“ã€‚<ul><li>å½“ç®¡é“å†™æ»¡æ—¶ï¼Œå†™è¿›ç¨‹çš„write()ç³»ç»Ÿè°ƒç”¨å°†è¢«é˜»å¡ï¼Œç­‰å¾…è¯»è¿›ç¨‹å°†æ•°æ®å–èµ°</li><li>å½“è¯»è¿›ç¨‹å°†æ•°æ®å…¨éƒ¨å–èµ°åï¼Œç®¡é“å˜ç©ºï¼Œæ­¤æ—¶è¯»è¿›ç¨‹çš„read()ç³»ç»Ÿè°ƒç”¨å°†è¢«é˜»å¡ã€‚</li></ul></li><li>å¦‚æœæ²¡å†™æ»¡ï¼Œå°±ä¸å…è®¸è¯»ï¼›å¦‚æœæ²¡è¯»ç©ºï¼Œå°±ä¸å…è®¸å†™</li><li>æ•°æ®ä¸€æ—¦è¢«è¯»å‡ºï¼Œå°±ä¼šä»ç®¡é“ä¸­è¢«æŠ›å¼ƒã€‚è¿™å°±æ„å‘³ç€è¯»è¿›ç¨‹æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªã€‚å¦åˆ™å¯èƒ½ä¼šå‡ºç°è¯»é”™æ•°æ®çš„æƒ…å†µ</li></ul></li></ul><h3 id="2-1-4-2-æ¶ˆæ¯ä¼ é€’">2.1.4.2 æ¶ˆæ¯ä¼ é€’</h3><p>è¿›ç¨‹ä¹‹é—´çš„æ•°æ®äº¤æ¢ä»¥**æ ¼å¼åŒ–çš„æ¶ˆæ¯ï¼ˆmessageï¼‰**ä¸ºå•ä½ã€‚è¿›ç¨‹é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„â€œå‘é€æ¶ˆæ¯/æ¥æ”¶æ¶ˆæ¯â€ä¸¤ä¸ªåŸè¯­è¿›è¡Œæ•°æ®äº¤æ¢ã€‚</p><p>æ¶ˆæ¯åˆ†ä¸ºæ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ä¸¤ä¸ªæ¿å—</p><ul><li>æ¶ˆæ¯å¤´ï¼šåŒ…æ‹¬å‘é€è¿›ç¨‹IDã€æ¥å—è¿›ç¨‹IDã€æ¶ˆæ¯ç±»å‹ã€æ¶ˆæ¯é•¿åº¦ç­‰ç­‰ä¿¡æ¯ï¼ˆè®¡ç®—æœºç½‘ç»œä¸­å‘é€çš„â€œæŠ¥æ–‡â€ï¼Œå°±æ˜¯ä¸€ç§æ ¼å¼åŒ–æ¶ˆæ¯ï¼‰</li><li>æ¶ˆæ¯ä½“ï¼šæ¶ˆæ¯æœ¬ä½“</li></ul><p>æ¶ˆæ¯ä¼ é€’æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>ç›´æ¥é€šä¿¡æ–¹å¼ï¼šæ¶ˆæ¯ç›´æ¥æŒ‚åˆ°æ¥å—è¿›ç¨‹çš„æ¶ˆæ¯ç¼“å†²é˜Ÿåˆ—ä¸Š</li><li>é—´æ¥é€šä¿¡æ–¹å¼ï¼šæ¶ˆæ¯å…ˆå‘é€åˆ°ä¸­é—´å®ä½“ï¼ˆä¿¡ç®±ï¼‰ä¸­ï¼Œä¹Ÿæˆä¸ºâ€œä¿¡ç®±é€šä¿¡æ–¹å¼â€ï¼Œå¦‚ï¼šè®¡ç®—æœºç½‘ç»œä¸­çš„ç”µå­é‚®ä»¶ç³»ç»Ÿ</li></ul><h2 id="2-1-5-çº¿ç¨‹çš„æ¦‚å¿µ">2.1.5 çº¿ç¨‹çš„æ¦‚å¿µ</h2><p>æœ‰çš„è¿›ç¨‹å¯èƒ½éœ€è¦ â€œåŒæ—¶â€ åšå¾ˆå¤šäº‹æƒ…ï¼Œä¼ ç»Ÿçš„è¿›ç¨‹åªèƒ½ä¸²è¡Œæ‰§è¡Œä¸€ç³»åˆ—ç¨‹åºã€‚æ‰€ä»¥å¼•å…¥äº† â€œçº¿ç¨‹â€ ï¼Œæ¥å¢åŠ å¹¶å‘åº¦ã€‚</p><p>å¯ä»¥æŠŠçº¿ç¨‹ç†è§£ä¸ºâ€œè½»é‡çº§è¿›ç¨‹â€</p><p>çº¿ç¨‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„CPUæ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•ä½ã€‚</p><p>å¼•å…¥çº¿ç¨‹åï¼Œè¿›ç¨‹åªä½œä¸ºé™¤CPUä¹‹å¤–çš„ç³»ç»Ÿèµ„æºçš„åˆ†é…å•å…ƒï¼ˆå¦‚æ‰“å°æœºã€å†…å­˜åœ°å€ç©ºé—´ç­‰ç­‰éƒ½æ˜¯åˆ†é…ç»™è¿›ç¨‹çš„ï¼‰</p><p>å¸¦æ¥çš„å˜åŒ–ï¼š</p><ul><li>èµ„æºåˆ†é…ã€è°ƒåº¦<ul><li>ä¼ ç»Ÿè¿›ç¨‹æœºåˆ¶ä¸­ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…ã€è°ƒåº¦çš„åŸºæœ¬å•ä½</li><li>å¼•å…¥çº¿ç¨‹åï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ˜¯è°ƒåº¦çš„åŸºæœ¬å•ä½</li></ul></li><li>å¹¶å‘æ€§<ul><li>ä¼ ç»Ÿè¿›ç¨‹æœºåˆ¶ä¸­ï¼Œåªèƒ½è¿›ç¨‹é—´å¹¶å‘</li><li>å¼•å…¥çº¿ç¨‹åï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´ä¹Ÿèƒ½å¹¶å‘ï¼Œæå‡äº†å¹¶å‘åº¦</li></ul></li><li>ç³»ç»Ÿå¼€é”€<ul><li>ä¼ ç»Ÿçš„è¿›ç¨‹é—´å¹¶å‘ï¼Œéœ€è¦åˆ‡æ¢è¿›ç¨‹çš„è¿è¡Œç¯å¢ƒï¼Œç³»ç»Ÿå¼€é”€å¾ˆå¤§</li><li>å¼•å…¥çº¿ç¨‹åï¼Œå¹¶å‘æ‰€å¸¦æ¥çš„ç³»ç»Ÿå¼€é”€å‡å°ã€‚</li><li>çº¿ç¨‹é—´å¹¶å‘ï¼Œå¦‚æœæ˜¯ç»Ÿä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹åˆ‡æ¢ï¼Œåˆ™ä¸éœ€è¦åˆ‡æ¢è¿›ç¨‹ç¯å¢ƒï¼Œç³»ç»Ÿå¼€é”€å°</li></ul></li></ul><p>çº¿ç¨‹çš„å±æ€§ï¼š</p><ul><li><p>çº¿ç¨‹æ˜¯å¤„ç†æœºè°ƒåº¦çš„å•ä½ã€‚</p><ul><li>åŒä¸€ä¸ªè¿›ç¨‹ä¸­çº¿ç¨‹åˆ‡æ¢ï¼Œä¸å¼•èµ·è¿›ç¨‹åˆ‡æ¢ã€‚</li><li>ä¸åŒçš„è¿›ç¨‹ä¸­çº¿ç¨‹åˆ‡æ¢ï¼Œä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢ã€‚</li><li>åˆ‡æ¢åŒè¿›ç¨‹å†…çš„çº¿ç¨‹ï¼Œç³»ç»Ÿå¼€é”€å¾ˆå°</li><li>åˆ‡æ¢è¿›ç¨‹ï¼Œç³»ç»Ÿå¼€é”€è¾ƒå¤§</li></ul></li><li><p>å¤šCPUè®¡ç®—æœºä¸­ï¼Œå„ä¸ªçº¿ç¨‹å¯ä»¥å ç”¨ä¸åŒCPU</p></li><li><p>æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰ä¸€ä¸ªçº¿ç¨‹IDï¼Œçº¿ç¨‹æ§åˆ¶å—TCBï¼ŒTCBè®°å½•äº†çº¿ç¨‹æ‰§è¡Œçš„å¯„å­˜å™¨å’Œæ ˆç­‰ç°åœºçŠ¶æ€ã€‚</p><ul><li>çº¿ç¨‹ä¹Ÿæœ‰å°±ç»ªã€é˜»å¡ã€è¿è¡Œä¸‰ç§åŸºæœ¬çŠ¶æ€ã€‚</li><li>ä¸åŒçº¿ç¨‹å¯ä»¥æ‰§è¡Œç›¸åŒçš„ç¨‹åº</li></ul></li><li><p>çº¿ç¨‹å‡ ä¹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºã€‚ä½†çº¿ç¨‹å¯ä»¥è®¿é—®å…¶éš¶å±è¿›ç¨‹çš„ç³»ç»Ÿèµ„æºã€‚å±äºåŒä¸€è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹éƒ½å…·æœ‰ç›¸åŒçš„åœ°å€ç©ºé—´</p></li><li><p>åŒä¸€è¿›ç¨‹çš„ä¸åŒçº¿ç¨‹é—´è´¡çŒ®è¿›ç¨‹çš„èµ„æº</p></li><li><p>ç”±äºå…±äº«å†…å­˜åœ°å€ç©ºé—´ï¼ŒåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹é—´é€šä¿¡ç”šè‡³æ— éœ€ç³»ç»Ÿå¹²é¢„</p></li></ul><h2 id="2-1-6-å¤šçº¿ç¨‹">2.1.6 å¤šçº¿ç¨‹</h2><pre class="mermaid">graph LRA(çº¿ç¨‹) --&gt;B(å®ç°æ–¹å¼)B --&gt;B1(ç”¨æˆ·çº§çº¿ç¨‹)B --&gt;B2(å†…æ ¸çº§çº¿ç¨‹)A --&gt;C(å¤šçº¿ç¨‹æ¨¡å‹)C --&gt;C1(ä¸€å¯¹ä¸€æ¨¡å‹)C --&gt;C2(å¤šå¯¹ä¸€æ¨¡å‹)C --&gt;C3(å¤šå¯¹å¤šæ¨¡å‹)</pre><h3 id="2-1-6-1ç”¨æˆ·çº§çº¿ç¨‹ï¼ˆUser-Level-Threadï¼ŒULTï¼‰">2.1.6.1ç”¨æˆ·çº§çº¿ç¨‹ï¼ˆUser-Level-Threadï¼ŒULTï¼‰</h3><ul><li><p>ç”±åº”ç”¨ç¨‹åºåœ¨ç”¨æˆ·æ§ä»¶å®Œæˆï¼Œç”¨æˆ·æ‰èƒ½æ„ŸçŸ¥åˆ°çº¿ç¨‹çš„å­˜åœ¨ï¼Œè€Œå†…æ ¸æ„è¯†ä¸åˆ°çº¿ç¨‹çš„å­˜åœ¨ã€‚</p><p>åº”ç”¨äºæ—©æœŸæ“ä½œç³»ç»Ÿï¼Œçº¿ç¨‹çš„å®ç°æ˜¯ä½¿ç”¨çº¿ç¨‹åº“å®ç°çš„ã€‚</p><p>å¾ˆå¤šç¼–ç¨‹è¯­è¨€æä¾›äº†å¼ºå¤§çš„çº¿ç¨‹åº“ï¼Œå¯ä»¥å®ç°çº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦ç­‰åŠŸèƒ½ã€‚</p></li><li><p>ç”¨æˆ·çº§çº¿ç¨‹æœ‰åº”ç”¨ç¨‹åºé€šè¿‡çº¿ç¨‹åº“å®ç°ï¼Œæ‰€æœ‰çš„<strong>çº¿ç¨‹ç®¡ç†å·¥ä½œ</strong>éƒ½æœ‰<strong>åº”ç”¨ç¨‹åºè´Ÿè´£</strong>ï¼ˆåŒ…æ‹¬çº¿ç¨‹åˆ‡æ¢ï¼‰</p></li><li><p>ç”¨æˆ·çº§çº¿ç¨‹ä¸­ï¼Œ<strong>çº¿ç¨‹åˆ‡æ¢</strong>å¯ä»¥åœ¨<strong>ç”¨æˆ·æ€ä¸‹å³å¯å®Œæˆ</strong>ï¼Œæ— éœ€æ“ä½œç³»ç»Ÿå¹²é¢„</p></li><li><p>åœ¨ç”¨æˆ·çœ‹æ¥ï¼Œæ˜¯æœ‰å¤šä¸ªçº¿ç¨‹ã€‚ä½†æ˜¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸çœ‹æ¥ï¼Œå¹¶æ„è¯†ä¸åˆ°çº¿ç¨‹çš„å­˜åœ¨ã€‚â€œç”¨æˆ·çº§çº¿ç¨‹â€ å°±æ˜¯ <strong>ä»ç”¨æˆ·è§†è§’çœ‹ï¼Œèƒ½çœ‹åˆ°çš„çº¿ç¨‹</strong>ã€‚</p></li><li><p>ä¼˜ç‚¹ï¼š</p><ol><li>ç”¨æˆ·çº§çº¿ç¨‹çš„åˆ‡æ¢åœ¨ç”¨æˆ·æ§ä»¶å³å¯å®Œæˆï¼Œä¸éœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ã€‚</li><li>çº¿ç¨‹ç®¡ç†çš„ç³»ç»Ÿå¼€é”€å°ï¼Œæ•ˆç‡é«˜ã€‚</li><li>è°ƒåº¦ç®—æ³•å¯ä»¥æ˜¯è¿›ç¨‹ä¸“ç”¨çš„ï¼Œä¸åŒçš„è¿›ç¨‹å¯ä»¥æ ¹æ®è‡ªäººéœ€è¦ï¼Œå¯¹è‡ªå·±çš„çº¿ç¨‹é€‰æ‹©ä¸åŒçš„è°ƒåº¦ç®—æ³•ã€‚</li><li>ç”¨æˆ·çº§çº¿ç¨‹çš„å®ç°ä¸æ“ä½œç³»ç»Ÿæ— å…³ï¼Œå¯¹è±¡æ± ç®¡ç†çš„ä»£ç æ˜¯å±äºç”¨æˆ·ç¨‹åºçš„ä¸€éƒ¨åˆ†ã€‚</li></ol></li><li><p>ç¼ºç‚¹ï¼š</p><ol><li>å½“ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹è¢«é˜»å¡åï¼Œ<strong>æ•´ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«é˜»å¡</strong>ï¼Œ<strong>å¹¶å‘åº¦ä¸é«˜</strong>ã€‚</li><li>å¤šä¸ªçº¿ç¨‹ä¸å¯åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œè¿è¡Œã€‚ä¸èƒ½å‘æŒ¥å¤šå¤„ç†æœºçš„ä¼˜åŠ¿ï¼Œå†…æ ¸æ¯æ¬¡åˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹çš„åªæœ‰ä¸€ä¸ªCPUï¼Œå› æ­¤è¿›ç¨‹ä¸­ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œã€‚</li></ol></li></ul><pre class="mermaid">graph TBA1(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|S(çº¿ç¨‹åº“)A2(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|SA3(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|Ssubgraph kernel_area    P(å†…æ ¸çº§çº¿ç¨‹)endS ---|å†…æ ¸ç©ºé—´|PT((ç”¨æˆ·çº§æ–¹å¼))</pre><h3 id="2-1-6-2-å†…æ ¸çº§çº¿ç¨‹ï¼ˆKLT">2.1.6.2 å†…æ ¸çº§çº¿ç¨‹ï¼ˆKLT)</h3><ul><li><p>å†…æ ¸çº§çº¿ç¨‹çš„ç®¡ç†å·¥ä½œç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆ</p></li><li><p>çº¿ç¨‹è°ƒåº¦ã€åˆ‡æ¢ç­‰å·¥ä½œéƒ½ç”±å†…æ ¸è´Ÿè´£ã€‚å› æ­¤<strong>å†…æ ¸çº§çº¿ç¨‹çš„åˆ‡æ¢å¿…é¡»åœ¨æ ¸å¿ƒæ€ä¸‹æ‰èƒ½å®Œæˆ</strong>ã€‚</p></li><li><p>æ“ä½œç³»ç»Ÿä¼šä¸ºæ¯ä¸ªå†…æ ¸çº§çº¿ç¨‹åˆ›å»ºTCBï¼ˆThread Control Bolckï¼Œçº¿ç¨‹æ§åˆ¶å—ï¼‰</p></li><li><p>ä¼˜ç‚¹ï¼š</p><ol><li>èƒ½å‘æŒ¥å¤šå¤„ç†æœºçš„ä¼˜åŠ¿ï¼Œå¹¶å‘èƒ½åŠ›å¼ºã€‚å¤šçº¿ç¨‹å¯ä»¥åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œæ‰§è¡Œã€‚</li><li>å¦‚æœè¿›ç¨‹ä¸­çš„ä¸€ä¸ªçº¿ç¨‹è¢«é˜»å¡ï¼Œå†…æ ¸å¯ä»¥è°ƒåº¦è¯¥è¿›ç¨‹ä¸­çš„å…¶ä»–çº¿ç¨‹å ç”¨å¤„ç†æœºã€‚</li><li>å†…æ ¸æ”¯æŒçº¿ç¨‹å…·æœ‰å¾ˆå°çš„æ•°æ®ç»“æ„å’Œå †æ ˆï¼Œçº¿ç¨‹åˆ‡æ¢æ¯”è¾ƒå¿«ã€å¼€é”€å°ã€‚</li><li>å†…æ ¸æœ¬èº«ä¹Ÿå¯ä»¥é‡‡ç”¨å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œæé«˜ç³»ç»Ÿçš„æ‰§è¡Œé€Ÿåº¦å’Œæ•ˆç‡ã€‚</li></ol></li><li><p>ç¼ºç‚¹ï¼š</p><p>åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹åˆ‡æ¢ï¼Œéœ€è¦ä»ç”¨æˆ·æ€è½¬ä¸ºæ ¸å¿ƒæ€ï¼Œç³»ç»Ÿå¼€é”€è¾ƒå¤§ã€‚</p><p>å› ä¸ºç”¨æˆ·è¿›ç¨‹çš„çº¿ç¨‹åœ¨ç”¨æˆ·æ€æ‰§è¡Œï¼Œè€Œçº¿ç¨‹è°ƒåº¦å’Œç®¡ç†éœ€è¦åœ¨å†…æ ¸å®ç°</p></li></ul><pre class="mermaid">graph TBA1(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|P1A2(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|P2A3(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|P3subgraph kernel_area    P1 ---|å†…æ ¸ç©ºé—´|P(å†…æ ¸çº§çº¿ç¨‹)    P2 ---|å†…æ ¸ç©ºé—´|P    P3 ---|å†…æ ¸ç©ºé—´|PendT((å†…æ ¸çº§æ–¹å¼))</pre><h3 id="2-1-6-3-ç»„åˆæ–¹å¼">2.1.6.3 ç»„åˆæ–¹å¼</h3><p>åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶åœ¨å¤šå¤„ç†æœºä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œä¸”åœ¨é˜»å¡ä¸€ä¸ªçº¿ç¨‹æ—¶ä¸éœ€è¦å°†æ•´ä¸ªè¿›ç¨‹é˜»å¡ï¼Œç»“åˆäº†ULTä¸KLTçš„ä¼˜åŠ¿ï¼Œå¹¶å…‹æœäº†å„è‡ªçš„ä¸è¶³</p><p>å®ç°çº¿ç¨‹åº“ä¸»è¦æ–¹å¼æœ‰</p><ul><li>åœ¨ç”¨æˆ·ç©ºé—´ä¸­æä¾›ä¸€ä¸ªæ²¡æœ‰å†…æ ¸æ”¯æŒçš„åº“</li><li>å®ç°ç”±æ“ä½œç³»ç»Ÿç›´æ¥æ”¯æŒçš„å†…æ ¸çº§çš„åº“</li></ul><pre class="mermaid">graph TBA1(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|S1(çº¿ç¨‹åº“1)A2(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|S1A3(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|S1A4(ç”¨æˆ·çº§çº¿ç¨‹) ---|ç”¨æˆ·ç©ºé—´|S2(çº¿ç¨‹åº“2)subgraph kernel_area    P1(å†…æ ¸çº§çº¿ç¨‹)    P2(å†…æ ¸çº§çº¿ç¨‹)    P3(å†…æ ¸çº§çº¿ç¨‹)endS1 ---|å†…æ ¸ç©ºé—´|P1S1 ---|å†…æ ¸ç©ºé—´|P2S2 ---|å†…æ ¸ç©ºé—´|P3T((ç»„åˆ æ–¹å¼))</pre><h3 id="2-1-6-4-å¤šçº¿ç¨‹æ¨¡å‹">2.1.6.4 å¤šçº¿ç¨‹æ¨¡å‹</h3><h4 id="1ã€ä¸€å¯¹ä¸€æ¨¡å‹">1ã€ä¸€å¯¹ä¸€æ¨¡å‹</h4><p>ç±»æ¯”å†…æ ¸çº§çº¿ç¨‹å›¾</p><p>ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹æ˜ å°„åˆ°ä¸€ç›’å†…æ ¸çº§çº¿ç¨‹ã€‚æ¯ä¸ªç”¨æˆ·è¿›ç¨‹æœ‰å’Œç”¨æˆ·çº¿ç¨‹ä¸€æ ·å¤šçš„å†…æ ¸çº§çº¿ç¨‹ã€‚</p><ul><li><p>ä¼˜ç‚¹ï¼šå½“ä¸€ä¸ªçº¿ç¨‹è¢«é˜»å¡åï¼Œåˆ«çš„çº¿ç¨‹è¿˜å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œ<strong>å¹¶å‘èƒ½åŠ›å¼º</strong>ã€‚å¤šçº¿ç¨‹å¯ä»¥åœ¨å¤šæ ¸å¤„ç†æœºä¸Šè¿è¡Œ</p></li><li><p>ç¼ºç‚¹ï¼šä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ä¼šå ç”¨å¤šä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œçº¿ç¨‹åˆ‡æ¢åˆéœ€è¦æ“ä½œç³»ç»Ÿæ¥å®Œæˆï¼Œéœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ã€‚<strong>çº¿ç¨‹ç®¡ç†çš„æˆæœ¬é«˜ï¼Œå¼€é”€å¤§</strong>ã€‚</p></li></ul><h4 id="2ã€å¤šå¯¹ä¸€æ¨¡å‹">2ã€å¤šå¯¹ä¸€æ¨¡å‹</h4><p>ç±»æ¯”ç”¨æˆ·çº§çº¿ç¨‹å›¾</p><p>å¤šä¸ªç”¨æˆ·çº§çº¿ç¨‹æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œä¸”ä¸€ä¸ªè¿›ç¨‹åªèƒ½è¢«åˆ†é…åˆ°ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šç”¨æˆ·çº§çº¿ç¨‹çš„åˆ‡æ¢åœ¨ç”¨æˆ·ç©ºé—´å³å¯å®Œæˆï¼Œä¸éœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ï¼Œç³»ç»Ÿç®¡ç†çš„å¼€é”€å°ï¼Œæ•ˆç‡é«˜</li><li>ç¼ºç‚¹ï¼šå½“ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹è¢«é˜»å¡åï¼Œæ•´ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«é˜»å¡ï¼Œå¹¶å‘åº¦ä¸é«˜ã€‚å¤šä¸ªçº¿ç¨‹ä¸å¯åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œè¿è¡Œ</li><li><strong>ï¼é‡ç‚¹</strong>ï¼šæ“ä½œç³»ç»Ÿåª â€œçœ‹å¾—è§â€ å†…æ ¸çº§çº¿ç¨‹ï¼Œå› æ­¤åªæœ‰å†…æ ¸çº§çº¿ç¨‹æ‰æ˜¯å¤„ç†æœºåˆ†é…çš„å•ä½</li></ul><h4 id="3ã€å¤šå¯¹å¤šæ¨¡å‹">3ã€å¤šå¯¹å¤šæ¨¡å‹</h4><p>ç±»æ¯”ç»„åˆæ¨¡å‹å›¾</p><ul><li><p>nä¸ªç”¨æˆ·çº§çº¿ç¨‹æ˜ å°„åˆ°mä¸ªå†…æ ¸çº§çº¿ç¨‹**ï¼ˆn&gt;=mï¼‰**ã€‚æ¯ä¸ªç”¨æˆ·çº§è¿›ç¨‹å¯¹åº”mä¸ªå†…æ ¸çº§çº¿ç¨‹ã€‚</p></li><li><p>å…‹æœäº†å¤šå¯¹ä¸€æ¨¡å‹å¹¶å‘åº¦ä¸é«˜çš„ç¼ºç‚¹ï¼ˆä¸€ä¸ªé˜»å¡å…¨ä½“é˜»å¡ï¼‰</p></li><li><p>å…‹æœäº†ä¸€å¯¹ä¸€æ¨¡å‹ä¸­ä¸€ä¸ªç”¨æˆ·å ç”¨å¤ªå¤šçº¿ç¨‹ï¼Œå¼€é”€å¤ªå¤§çš„ç¼ºç‚¹</p></li><li><p>å¯ä»¥ç†è§£ä¸ºï¼š</p><ul><li>ç”¨æˆ·çº§çº¿ç¨‹æ˜¯ â€œä»£ç é€»è¾‘â€çš„è½½ä½“</li><li>å†…æ ¸çº§çº¿ç¨‹æ˜¯ â€œè¿è¡Œæœºä¼šâ€çš„è½½ä½“</li><li>å†…æ ¸çº§çº¿ç¨‹æ‰æ˜¯å¤„ç†æœºåˆ†é…çš„å•ä½</li></ul></li><li><p>ä¸€æ®µ â€œä»£ç é€»è¾‘â€åªæœ‰è·å¾— â€œè¿è¡Œæœºä¼šâ€ï¼Œæ‰èƒ½è¢«CPUæ‰§è¡Œ</p><ul><li>å†…æ ¸çº§çº¿ç¨‹ä¸­å¯ä»¥è¿è¡Œä»»æ„ä¸€ä¸ªæœ‰æ˜ å°„å…³ç³»çš„ç”¨æˆ·çº§çº¿ç¨‹ä»£ç </li><li>åªæœ‰ä¸¤ä¸ªå†…æ ¸çº§çº¿ç¨‹ä¸­æ­£åœ¨è¿è¡Œçš„ä»£ç é€»è¾‘å…¨éƒ½é˜»å¡ï¼Œè¿™ä¸ªè¿›ç¨‹æ‰ä¼šé˜»å¡ã€‚</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºçŸ¥è¯† </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Atlas 200DK åˆæ­¥ç¯å¢ƒé…ç½®æŒ‡å—</title>
      <link href="/2022/04/09/Atlas_200DK_first_Environment_configuration/"/>
      <url>/2022/04/09/Atlas_200DK_first_Environment_configuration/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>Atlas 200DK åˆæ­¥ç¯å¢ƒé…ç½®æŒ‡å—</h1><p>æœ¬æ•™ç¨‹æ•™ä½ å¦‚ä½•æ­å»ºAtlas 200DKå¼€å‘è¿è¡Œç¯å¢ƒï¼Œå¿«é€Ÿé¢„å¤‡Atlas 200DKçš„å¼€å‘</p><h2 id="ä¸€ã€é…ç½®VMwareè™šæ‹Ÿæœºå¼€å‘ç¯å¢ƒ">ä¸€ã€é…ç½®VMwareè™šæ‹Ÿæœºå¼€å‘ç¯å¢ƒ</h2><h3 id="ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®rootå¯†ç ">ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®rootå¯†ç </h3><p><code>sudo passwd root</code></p><p>ç„¶åæ˜¾ç¤ºå±ä¼šè·³å‡ºä¸€å¥</p><p><code>[sudo] password for pi: </code></p><ol><li><p>piæ˜¯æˆ‘è®¾ç½®çš„è´¦å·å</p></li><li><p>åœ¨è¿™é‡Œéœ€è¦è¾“å…¥ä½ ä¸€å¼€å§‹è®¾ç½®çš„è´¦æˆ·å¯†ç ï¼Œå¹¶ä¸”æ˜¯<strong>ä¸ä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸Š</strong></p></li><li><p>è¾“å…¥å®Œæ¯•ä½ çš„è´¦æˆ·å¯†ç ï¼Œå°±è®¾ç½®rootè´¦æˆ·å¯†ç :<code>sudo passwd root</code></p><p>Enter new UNIX password:</p><p>Retype new UNIX password:</p><p>passwd: password updated successfully</p></li></ol><p>å¦‚ä»¥ä¸Šæ˜¾ç¤ºåˆ™è¯´æ˜å¯†ç è®¾ç½®æˆåŠŸï¼Œè¯·è®°ä½ä½ çš„rootå¯†ç </p><h3 id="ç¬¬äºŒæ­¥ï¼Œæ¢æºï¼ˆå¯é€‰ï¼‰">ç¬¬äºŒæ­¥ï¼Œæ¢æºï¼ˆå¯é€‰ï¼‰</h3><p>ï¼ˆå†…å®¹å‚ç…§https://www.cnblogs.com/huang-y-x/p/11082168.htmlï¼Œå¯åœ¨é‡Œé¢é€‰ç”¨ä¸åŒçš„æºï¼‰</p><p>1ï¼šå¤‡ä»½åŸæ¥çš„æº</p><p><code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></p><p>2ï¼šè¿›å…¥rootè´¦æˆ·</p><p><code>su</code></p><p>3ï¼šè¿›å…¥è®¾ç½®æºçš„æ–‡ä»¶</p><p><code>vi /etc/apt/sources.list</code></p><p>4ï¼š</p><p>æœ¬æ–‡ä½¿ç”¨ä¸­ç§‘å¤§çš„æºï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹</p><pre class="line-numbers language-none"><code class="language-none">##ä¸­ç§‘å¤§æºdeb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiversedeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiversedeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæŒ‰<kbd>esc</kbd>é”®ï¼Œè¾“å…¥ :wq å›è½¦ï¼Œä¿å­˜å¹¶é€€å‡º</p><p>ä¹Ÿå¯ä»¥é€‰ç”¨æ¸…åæº</p><pre class="line-numbers language-none"><code class="language-none">##æ¸…åæºdeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¢å®Œæºä¹‹åï¼Œä¸€å®šè¦æ›´æ–°ä¸€ä¸‹è½¯ä»¶åˆ—è¡¨</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">apt-get updateapt-get upgrade<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸‹è½½vim</p><p><code>apt-get install vim</code></p><ul><li><p>å¦‚æœå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥è¯•è¯• <code>apt-get -f install</code>ï¼Œæˆ–è€…é‡å¤å¤šè·‘å‡ æ¬¡</p></li><li><p>å¦‚æœå‡ºç°ç¼–è¾‘ä¸€åŠå°±æŠ¥é”™é€€å‡ºï¼Œè¯·åœ¨rootè´¦æˆ·åº•ä¸‹<code>rm /etc/apt/.sources.list.swp</code>ï¼Œç„¶åé‡æ–°ä½¿ç”¨viæŒ‡ä»¤è¿›å…¥å³å¯ã€‚</p></li></ul><h2 id="äºŒã€Atlas-200DK-åˆæ­¥åˆ¶å¡">äºŒã€Atlas 200DK åˆæ­¥åˆ¶å¡</h2><p>å‡†å¤‡ä¾èµ–ç¯å¢ƒ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo apt-get install python3 python3-pip gitpip3 install pyyamlsudo apt-get install qemu-user-static binfmt-support python3-yaml squashfs-tools gcc-aarch64-linux-gnu g++-aarch64-linux-gnu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æŠŠä»¥ä¸‹æ–‡ä»¶æ•´åˆè¿›homeç›®å½•ä¸‹çš„<code>mksd</code>æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚è¯´æˆ‘çš„è·¯å¾„æ˜¯<code>/home/pi/mksd</code>ã€‚</p><p>åœ¨home/piç›®å½•ä¸‹æ‰§è¡Œ<code>mkdir mksd</code>ï¼Œç„¶å<code>cd mksd</code>è¿›å…¥mksdæ–‡ä»¶å¤¹</p><ul><li>ubuntu-18.04-server-arm64.iso(åœ¨å†å²ç‰ˆæœ¬é‡Œé¢æ‰¾ï¼Œæœ¬æ•™ç¨‹é€‰ç”¨çš„æ˜¯18.04.4)</li></ul><p><a href="https://releases.ubuntu.com/?_ga=2.35892448.1525631547.1620916708-1630382698.1620537185">ä¸‹è½½Ubuntu server arm é•œåƒ</a></p><ul><li>200dkå›ºä»¶ä¸é©±åŠ¨ï¼ˆæœ¬æ•™ç¨‹çš„ç‰ˆæœ¬å·é€‰ç”¨5.1.RC1.alpha002ï¼‰</li></ul><p><a href="https://www.hiascend.com/hardware/firmware-drivers?tag=community">atlas 200dk é©±åŠ¨</a></p><ul><li>è·å–è½¯ä»¶åŒ…ï¼ˆä¸»è¦ä¸‹è½½runæ–‡ä»¶ï¼‰</li></ul><p><a href="https://support.huaweicloud.com/environment-deployment-Atlas200DK202/atlased_04_0020.html">atlas 200 dkè½¯ä»¶åŒ…</a></p><ul><li>åˆ¶å¡è„šæœ¬ï¼ˆåŠ¡å¿…å‚è€ƒä¸‹åˆ—ç‰ˆæœ¬å·è¯´æ˜ï¼‰</li></ul><p><a href="https://gitee.com/ascend/tools/tree/master/makesd">atlas-tools</a></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># usbæ•°æ®çº¿è¿Ubuntuçš„è„šæœ¬wget https://raw.githubusercontent.com/Huawei-Ascend/tools/master/configure_usb_ethernet/for_20.1/configure_usb_ethernet.sh# ä¸‹è½½pythonåŒ…ï¼ˆå¯é€‰ï¼‰wget https://www.python.org/ftp/python/3.7.5/Python-3.7.5.tgz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>! æ³¨æ„</strong>ï¼š<strong>åˆ¶å¡è„šæœ¬</strong>ç‰ˆæœ¬å·éœ€è¦ä¸€ä¸€å¯¹åº”ã€‚ä¸åŒç‰ˆæœ¬çš„å·¥å…·è¿æ¥æœ‰å¯èƒ½å·²ç»æ›´æ–°ï¼Œè¯·å‰å¾€https://gitee.com/ascend/tools/tree/master/makesd<br>å‚è€ƒä¸‹è¡¨ç»™çš„ç‰ˆæœ¬å·è¿›è¡ŒæŸ¥è¯¢</p><p><strong>! ç‚¹å‡»ä¸Šè¿°é“¾æ¥ï¼Œå‚è€ƒä¸‹è¡¨é€‰æ‹©å¯¹åº”ç‰ˆæœ¬å·çš„æ–‡ä»¶å¤¹ï¼Œç„¶åä¸‹è½½é‡Œé¢çš„<code>make_sd_card.py</code>å’Œ<code>make_ubuntu_sd.sh</code>ä¸¤ä¸ªå·¥å…·ã€‚ç„¶åæŠŠå·¥å…·æ”¾è¿›mksdé‡Œã€‚</strong></p><p><strong>å¦‚æœä½ çš„å„é¡¹æ–‡ä»¶ç‰ˆæœ¬å’Œæœ¬æ•™ç¨‹ä½¿ç”¨çš„ä¸€è‡´ï¼Œæœ¬æ•™ç¨‹éœ€è¦æ‰“å¼€çš„æ–‡ä»¶å¤¹æ˜¯<code>generic_script</code></strong></p><table><thead><tr><th style="text-align:center"><strong>é©±åŠ¨ä¸å›ºä»¶ç‰ˆæœ¬</strong></th><th style="text-align:center"><strong>CANNç‰ˆæœ¬</strong></th></tr></thead><tbody><tr><td style="text-align:center">1.0.13.alpha</td><td style="text-align:center">5.1.RC1.alpha005</td></tr><tr><td style="text-align:center"><strong>1.0.12.alpha</strong></td><td style="text-align:center">5.1.RC1.alpha003</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><strong>5.1.RC1.alpha002</strong></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5.1.RC1.alpha001</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5.0.5.alpha001</td></tr><tr><td style="text-align:center">1.0.11.alpha</td><td style="text-align:center">5.0.3.alpha005</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5.0.2.alpha005</td></tr><tr><td style="text-align:center">1.0.10.alpha</td><td style="text-align:center">5.0.2.alpha003</td></tr><tr><td style="text-align:center">1.0.9.alpha</td><td style="text-align:center">5.0.2.alpha002</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5.0.2.alpha001</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">3.3.0.alpha006</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">3.3.0.alpha005</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">3.3.0.alpha001</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">3.2.0.alpha001 å¤‡æ³¨ï¼šæ›¾ç”¨ç‰ˆæœ¬å·â€œ20.2.alpha001â€</td></tr><tr><td style="text-align:center">1.0.8.alpha</td><td style="text-align:center">3.1.0.alpha001 å¤‡æ³¨ï¼šæ›¾ç”¨ç‰ˆæœ¬å·â€œ20.1.alpha001â€</td></tr><tr><td style="text-align:center">1.0.7.alpha</td><td style="text-align:center">20.0.0</td></tr></tbody></table><p><img src="https://s2.loli.net/2022/04/09/fhin7djFQ51YGyJ.png" alt="atlas-mksd-file.png"></p><p>ï¼ˆè¯·ç¡®ä¿åˆ¶å¡çš„æ—¶å€™ï¼Œå¯¹åº”ç‰ˆæœ¬å·çš„æ–‡ä»¶æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”è‡³å°‘éœ€è¦æœ‰ä¸Šå…å›¾ç‰‡ä¸­çš„æ–‡ä»¶ï¼‰</p><p>ç”¨è¯»å¡å™¨æ¥å…¥ä½ éœ€è¦åˆ¶å¡çš„sdå¡ï¼ŒæŠŠè¯»å¡æœºæ¥å…¥VMwareã€‚åœ¨ è™šæ‹Ÿæœº-&gt;å¯ç§»åŠ¨è®¾å¤‡ä¸­ å§è¯»å¡å™¨æ¥å…¥è™šæ‹Ÿæœº</p><p>ç”¨è¿™ä¸ªæŒ‡ä»¤æœç´¢ä½ çš„è¯»å¡å™¨<code>sudo fdisk -l</code></p><p>æˆ‘åœ¨è¾“å‡ºçš„æœ€åä¸€æ æ‰¾åˆ°è¿™ä¸ªè¾“å‡º</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Device     Boot Start       End   Sectors  Size Id Type/dev/sdb1       32768 124735487 124702720 59.5G  7 HPFS/NTFS/exFAT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„sdb1å°±æ˜¯æˆ‘çš„è¯»å¡å™¨çš„æ ‡å·</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">supython3 make_sd_card.py local /dev/sdb1   #è‡ªå·±é€‰å¥½è·¯å¾„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åç³»ç»Ÿå°±ä¼šè‡ªå·±å¼€å§‹åˆ¶å¡ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p><p>å¦‚æœæœ€ç»ˆåˆ¶å¡æˆåŠŸï¼Œä¼šæ˜¾ç¤º<code>Make SD Card successfully!</code>ã€‚å¦‚æœæœ‰æŠ¥é”™ï¼Œè¯·æ£€æŸ¥<strong>åˆ¶å¡å·¥å…·çš„ç‰ˆæœ¬å·</strong>æ˜¯å¦æœ‰é—®é¢˜ã€‚</p><p>åˆ¶å¥½å¡ä¹‹åæŠŠå¡æ”¾åœ¨atlas-200dkä¸Šï¼Œé€šç”µï¼Œè®©atlasè‡ªå·±è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>è¯·å‚è€ƒæŒ‡ç¤ºç¯ï¼Œä»ç½‘çº¿æ¥å£ä¸€ç«¯æ•°èµ·å„ä¸ªç¯åˆ†åˆ«ä¸ºï¼šMINI_LED2ã€MINI_LED1ã€3559_ACTã€3559_VEDIO</p><img src="https://support.huaweicloud.com/productdesc-Atlas200DK1012/figure/zh-cn_image_0205566091.png" style="zoom: 33%;"><p>é€šç”µåï¼Œç­‰å¾…ä¸€ä¼šå„¿ï¼Œç­‰å››ä¸ªç¯å¸¸äº®æ‰ç®—æ­£å¸¸å¼€æœºã€‚å¦‚æœå‡ºç°é—®é¢˜ï¼Œè¯·å‚è€ƒä¸‹è¡¨æ’æŸ¥é—®é¢˜ï¼š</p><table><thead><tr><th>MINI_LED2</th><th>MINI_LED1</th><th>å½“å‰Atlas 200 DK å¼€å‘è€…å¥—ä»¶ï¼ˆå‹å· 3000ï¼‰å¼€å‘è€…æ¿çŠ¶æ€</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>ç­</td><td>ç­</td><td>Atlas 200 DK å¼€å‘è€…å¥—ä»¶ï¼ˆå‹å· 3000ï¼‰å¼€å‘è€…æ¿å¯åŠ¨</td><td>å¯ä»¥å¯¹Atlas 200 DK å¼€å‘è€…å¥—ä»¶ï¼ˆå‹å· 3000ï¼‰å¼€å‘è€…æ¿æ–­ç”µæˆ–é‡å¯ã€‚</td></tr><tr><td>ç­</td><td>äº®</td><td>Ascend 310å¯åŠ¨</td><td>å¯ä»¥å¯¹Atlas 200 DK å¼€å‘è€…å¥—ä»¶ï¼ˆå‹å· 3000ï¼‰å¼€å‘è€…æ¿æ–­ç”µæˆ–é‡å¯ï¼Œæ–°ç‰ˆæœ¬å‡çº§æ—¶å»ºè®®ä¸è¦æ–­ç”µæˆ–é‡å¯ã€‚</td></tr><tr><td>é—ªçƒ</td><td>é—ªçƒ</td><td>å›ºä»¶å‡çº§</td><td>ä¸èƒ½æ‰§è¡ŒAtlas 200 DK å¼€å‘è€…å¥—ä»¶ï¼ˆå‹å· 3000ï¼‰å¼€å‘è€…æ¿æ–­ç”µæˆ–é‡å¯æ“ä½œï¼Œå¦åˆ™ä¼šå¯¼è‡´å›ºä»¶å‡çº§ä¸å®Œæ•´ï¼Œå•æ¿æŸåã€‚å½“æ–°ç‰ˆæœ¬å‡çº§æ—¶æ‰ä¼šæœ‰å›ºä»¶å‡çº§æµç¨‹ï¼Œå‡çº§æ—¶é—´æ¯”è¾ƒä¹…ï¼Œé¢„è®¡åœ¨15åˆ†é’Ÿå†…ï¼Œè¯·æ‚¨è€å¿ƒç­‰å¾…ã€‚</td></tr><tr><td>äº®</td><td>äº®</td><td>Atlas 200 DK å¼€å‘è€…å¥—ä»¶ï¼ˆå‹å· 3000ï¼‰å¼€å‘è€…æ¿å¯åŠ¨å®Œæˆ</td><td>å¯ä»¥å¯¹Atlas 200 DK å¼€å‘è€…å¥—ä»¶ï¼ˆå‹å· 3000ï¼‰å¼€å‘è€…æ¿æ–­ç”µæˆ–é‡å¯ã€‚</td></tr></tbody></table><table><thead><tr><th>3559_ACT</th><th>3559_VEDIO</th><th>å½“å‰Atlas 200 DK å¼€å‘è€…å¥—ä»¶ï¼ˆå‹å· 3000ï¼‰å¼€å‘è€…æ¿çŠ¶æ€</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>ç­</td><td>ç­</td><td>Hi3559Cç³»ç»Ÿæœªå¯åŠ¨</td><td>æ— </td></tr><tr><td>ç­</td><td>äº®</td><td>Hi3559Cç³»ç»Ÿå¯åŠ¨ä¸­</td><td>æ— </td></tr><tr><td>äº®</td><td>äº®</td><td>Hi3559Cç³»ç»Ÿå¯åŠ¨å®Œæˆ</td><td>æ— </td></tr></tbody></table><h2 id="ä¸‰ã€USBçº¿è¿æ¥atlas">ä¸‰ã€USBçº¿è¿æ¥atlas</h2><p>æˆ‘ä»¬è¿˜æ˜¯åœ¨è¿™ä¸ªUbuntuç³»ç»Ÿå†…ã€‚</p><pre class="line-numbers language-none"><code class="language-none">sudo apt install net-toolsifconfig<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼Œè¿™æ˜¯æ²¡é…ç½®å¥½çš„ç½‘å¡ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ens35u1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        ether 4e:57:14:39:8b:22  txqueuelen 1000  (Ethernet)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 88  bytes 20428 (20.4 KB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ºäº†èƒ½å¤Ÿè®©atlaså’Œå…¶ä»–linuxç³»ç»Ÿé€šè¿‡type-cçº¿è¿›è¡Œé€šä¿¡ï¼Œæˆ‘ä»¬åœ¨mksdç›®å½•ä¸‹å¯åŠ¨å‘½ä»¤è¡Œï¼Œæ‰§è¡Œ<code>sudo bash configure_usb_ethernet.sh</code></p><p>ç„¶åæ‰§è¡Œ<code>ssh HwHiAiUser@192.168.1.2</code>å³å¯æ­£å¸¸ä½¿ç”¨sshè¿æ¥é€šä¿¡ã€‚é»˜è®¤å¯†ç <code>Mind@123</code>ã€‚</p><p>å¦‚æœä½ åœ¨è™šæ‹ŸæœºUbuntuæ‰§è¡Œ<code>sudo vim /etc/netplan/01-network-manager-all.yaml</code>æŸ¥çœ‹æ–‡ä»¶é…ç½®</p><p>ä½ å°±ä¼šå‘ç°ï¼Œå®é™…ä¸Šæ‰§è¡Œå®Œè„šæœ¬ï¼Œé‡Œé¢ä¼šå¤šå‡ºæ¥è¿™ä¸€éƒ¨åˆ†è¯­å¥ï¼š</p><pre class="line-numbers language-none"><code class="language-none">network:  version: 2  renderer: NetworkManager  ethernets:     ens35u1:       dhcp4: no       addresses: [192.168.1.166/8]       gateway4: 255.255.255.0       nameservers:         addresses: [114.114.114.114]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è€Œä½ å†è¾“å…¥<code>ipconfig -a</code>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.112.142  netmask 255.255.255.0  broadcast 192.168.112.255        inet6 fe80::ffdf:db40:6e3a:7437  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:0c:29:7d:50:10  txqueuelen 1000  (Ethernet)        RX packets 217214  bytes 312285559 (312.2 MB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 43731  bytes 3099983 (3.0 MB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0ens35u1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.1.166  netmask 255.0.0.0  broadcast 192.255.255.255        inet6 fe80::4c57:14ff:fe39:8b22  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 4e:57:14:39:8b:22  txqueuelen 1000  (Ethernet)        RX packets 138  bytes 19845 (19.8 KB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 472  bytes 80561 (80.5 KB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯æ˜å·²ç»é…ç½®å¥½äº†ã€‚</p><p>åœ¨è™šæ‹ŸæœºUbuntuè¿›å…¥ç®¡ç†å‘˜rootç”¨æˆ·ï¼Œè¾“å…¥ä»¥ä¸‹é…ç½®ï¼š</p><p>ï¼å…¶ä¸­ï¼Œå‚æ•°ens35u1è¾“å…¥çš„æ˜¯ä¸Šé¢é‚£ä»½è¾“å‡ºå†…å®¹ä¸­<strong>ç¬¬äºŒä¸ªç½‘å¡</strong>çš„åå­—ï¼Œens33è¾“å…¥çš„æ˜¯<strong>ç¬¬ä¸€ä¸ªç½‘å¡</strong>çš„åå­—ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">echo "1" &gt; /proc/sys/net/ipv4/ip_forward #å…è®¸æŠ¥æ–‡è½¬æ¢iptables -t nat -A POSTROUTING -o &lt;ens33&gt; -s 192.168.1.0/24 -j MASQUERADEiptables -A FORWARD -i &lt;ens35u1&gt; -o &lt;ens33&gt; -m state --state RELATED,ESTABLISHED -j ACCEPTiptables -A FORWARD -i &lt;ens35u1&gt; -o &lt;ens33&gt; -j ACCEPT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨sshè¿æ¥atlasçš„ç»ˆç«¯è¿›å…¥ç®¡ç†å‘˜è´¦æˆ·ï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤</p><p>å…¶ä¸­[192.168.1.166]å¯¹åº”çš„æ˜¯ç¬¬äºŒä¸ªç½‘å¡ï¼ˆatlasçš„ï¼‰å¯¹åº”ip</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">route add default gw [192.168.1.166] dev usb0vim /etc/systemd/resolved.conf# æŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ŒåŠ å…¥DNS=114.114.114.114 :wqping baidu.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åä½ å°±ä¼šå‘ç°ï¼Œatlaså¯ä»¥é€šè¿‡usbçº¿è”ç½‘ã€‚</p><h2 id="å››ã€è·¯ç”±å™¨è¿Atlas">å››ã€è·¯ç”±å™¨è¿Atlas</h2><p>åœ¨å¼€å‘æ¿rootè´¦æˆ·ä¸‹ï¼Œè¾“å…¥<code>vim /etc/netplan/01-netcfg.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">network</span><span class="token punctuation">:</span>  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">2</span>  <span class="token key atrule">renderer</span><span class="token punctuation">:</span> networkd  <span class="token key atrule">ethernets</span><span class="token punctuation">:</span>    <span class="token key atrule">eth0</span><span class="token punctuation">:</span>      <span class="token key atrule">dhcp4</span><span class="token punctuation">:</span> no <span class="token comment">#æ”¹ä¸ºyesï¼Œä¿å­˜é€€å‡º</span>      <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>192.168.0.2/24<span class="token punctuation">]</span>      <span class="token key atrule">gateway4</span><span class="token punctuation">:</span> 192.168.0.1      <span class="token key atrule">nameservers</span><span class="token punctuation">:</span>            <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>114.114.114.114<span class="token punctuation">]</span>    <span class="token key atrule">usb0</span><span class="token punctuation">:</span>      <span class="token key atrule">dhcp4</span><span class="token punctuation">:</span> no      <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>192.168.1.2/24<span class="token punctuation">]</span>      <span class="token comment">#gateway4: 192.168.1.1</span>      <span class="token key atrule">nameservers</span><span class="token punctuation">:</span>            <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>114.114.114.114<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨ç½‘çº¿è¿æ¥å¼€å‘æ¿åˆ°ä¸€ä¸ªå¯ä»¥ä¸Šç½‘çš„è·¯ç”±å™¨å½“ä¸­ï¼Œè¿™ä¸ªè·¯ç”±å™¨éœ€è¦å¼€å¯DHCPã€‚</p><p>è¾“å…¥<code>netplan apply</code></p><p>åœ¨Ubuntuè™šæ‹Ÿæœºé‡Œé¢æ‰§è¡Œ<code>ssh HwHiAiUser@192.168.0.2</code>ï¼Œå³å¯è¿ä¸Šatlas</p><h2 id="äº”ã€ç½‘çº¿å…±äº«ç½‘ç»œ">äº”ã€ç½‘çº¿å…±äº«ç½‘ç»œ</h2><p><strong>æ­¤è¿‡ç¨‹å»ºè®®æå‰å°†type-cå…ˆå’Œç½‘çº¿ä¸€å¹¶è¿æ¥å¥½</strong></p><p>è¿›å…¥**\æ§åˆ¶é¢æ¿\ç½‘ç»œå’Œ Internet\ç½‘ç»œè¿æ¥\**</p><img src="https://bbs-img.huaweicloud.com/blogs/img/1609137121924096771.png"><p><img src="https://bbs-img.huaweicloud.com/blogs/img/1609137189933024388.png" alt=""></p><p>å…¶ä½™çš„é…ç½®å’Œ<strong>å››ã€è·¯ç”±å™¨è¿Atlas</strong>æ­¥éª¤æ˜¯ä¸€è‡´çš„ï¼Œéƒ½éœ€è¦ä¿®æ”¹/etc/netplan/01-netcfg.yamlï¼Œéƒ½éœ€è¦<code>netplan apply</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Atlas 200DK </tag>
            
            <tag> Linux </tag>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»Ÿæ¦‚è¿°(ç¬¬ä¸€éƒ¨åˆ†)</title>
      <link href="/2022/04/05/operating_system1/"/>
      <url>/2022/04/05/operating_system1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>æ“ä½œç³»ç»Ÿâ€”â€”ç¬¬ä¸€ç« : ç³»ç»Ÿæ¦‚è¿°</h1><h2 id="1-1-åŸºæœ¬æ¦‚å¿µï¼ˆå®šä¹‰ï¼‰">1.1 åŸºæœ¬æ¦‚å¿µï¼ˆå®šä¹‰ï¼‰</h2><ul><li>æ“ä½œç³»ç»Ÿï¼ˆoperating systemï¼Œosï¼‰æ˜¯ç³»ç»Ÿèµ„æºçš„<strong>ç®¡ç†è€…</strong>ï¼Œç®¡ç†<strong>è½¯ä»¶ã€ç¡¬ä»¶èµ„æº</strong>ï¼Œç»™ç”¨æˆ·å’Œå…¶ä»–è½¯ä»¶æ–¹ä¾¿çš„æ¥å£å’Œç¯å¢ƒï¼Œæ˜¯ä¸€ä¸ª<strong>ç³»ç»Ÿè½¯ä»¶</strong>ã€‚</li></ul><h2 id="1-2-æ“ä½œç³»ç»Ÿç‰¹å¾">1.2  æ“ä½œç³»ç»Ÿç‰¹å¾</h2><h3 id="1-å¹¶å‘ï¼ˆconcurrenceï¼‰">1. å¹¶å‘ï¼ˆconcurrenceï¼‰</h3><p>å¾®è§‚ä¸Šäº¤æ›¿è¿›è¡Œï¼Œå®è§‚ä¸ŠåŒæ—¶æ‰§è¡Œã€‚ï¼ˆæ“ä½œç³»ç»Ÿå’Œç¨‹åºå¹¶å‘æ˜¯ä¸€èµ·è¯ç”Ÿçš„ï¼‰</p><ul><li>é‡ç‚¹ï¼š<ul><li>å•æ ¸CPUï¼šåŒä¸€æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œå„ä¸ªç¨‹åºåªèƒ½<strong>å¹¶å‘</strong>æ‰§è¡Œã€‚</li><li>å¤šæ ¸CPUï¼šåŒä¸€æ—¶åˆ»å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªç¨‹åºï¼Œå¤šä¸ªç¨‹åºå¯ä»¥<strong>å¹¶è¡Œ</strong>æ‰§è¡Œã€‚</li></ul></li></ul><h3 id="2-å…±äº«ï¼ˆsharingï¼‰">2. å…±äº«ï¼ˆsharingï¼‰</h3><p>ç³»ç»Ÿä¸­çš„èµ„æºå¯ä¾›å†…å­˜ä¸­å¤šä¸ªå¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹å…±åŒä½¿ç”¨ã€‚</p><p>äº’æ–¥ï¼šç³»ç»Ÿä¸­æŸäº›èµ„æºï¼Œè™½ç„¶å¯ä»¥ç»™å¤šè¿›ç¨‹ä½¿ç”¨ï¼Œä½†ä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®è¯¥èµ„æºã€‚</p><p>åŒæ—¶ï¼šç³»ç»Ÿä¸­æŸäº›èµ„æºï¼Œå…è®¸ä¸€ä¸ªæ—¶é—´æ®µå†…ç”±å¤šä¸ªè¿›ç¨‹ â€œåŒæ—¶â€ å¯¹ä»–ä»¬è¿›è¡Œè®¿é—®ã€‚ï¼ˆå¾®è§‚ä¸Šå¯èƒ½æ˜¯äº¤æ›¿çš„ï¼‰</p><pre class="mermaid">graph LRA(ä¸¤ç§èµ„æºå…±äº«æ–¹å¼) --&gt;B(äº’æ–¥å…±äº«æ–¹å¼)B --&gt;C(ä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®è¯¥èµ„æº)A --&gt;D(åŒæ—¶å…±äº«æ¨¡å¼)D --&gt;E(ä¸€ä¸ªæ—¶é—´æ®µå†…ç”±å¤šä¸ªè¿›ç¨‹ åŒæ—¶ å¯¹ä»–ä»¬è¿›è¡Œè®¿é—®)    F[sharing]</pre><p><strong>æ³¨æ„</strong>ï¼šå¹¶å‘å’Œå…±äº«æ˜¯æ“ä½œç³»ç»Ÿä¸¤ä¸ªæœ€åŸºæœ¬ç‰¹å¾ï¼Œ<strong>ä¸¤è€…äº’ä¸ºå­˜åœ¨æ¡ä»¶</strong>ï¼š</p><ol><li>èµ„æºå…±äº«æ˜¯ä¸€ç¨‹åºå¹¶å‘ä¸ºæ¡ä»¶çš„ã€‚ï¼ˆè‹¥ç³»ç»Ÿä¸å…è®¸ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œè‡ªç„¶ä¸å­˜åœ¨èµ„æºå…±äº«é—®é¢˜ï¼‰</li><li>è‹¥ç³»ç»Ÿä¸èƒ½å¯¹èµ„æºå…±äº«è¿›è¡Œæœ‰æ•ˆç®¡ç†ï¼Œä¸€å®šå½±å“åˆ°ç¨‹åºçš„å¹¶å‘æ‰§è¡Œã€‚</li></ol><h3 id="3-è™šæ‹Ÿï¼ˆvirtualï¼‰">3. è™šæ‹Ÿï¼ˆvirtualï¼‰</h3><ul><li>å¯å½’çº³ä¸ºï¼š<ul><li>æ—¶åˆ†å¤ç”¨æŠ€æœ¯ï¼šå¦‚å¤„ç†å™¨çš„åˆ†æ—¶å…±äº«ï¼ˆå¾®è§‚ï¼šå¤„ç†æœºåœ¨å¾®å°æ—¶é—´æ®µä¸ºå„ä¸ªè¿›ç¨‹æœåŠ¡ï¼Œå¤§æ—¶é—´åˆ†æˆå°æ—¶é—´ï¼‰</li><li>ç©ºåˆ†å¤ç”¨æŠ€æœ¯ï¼šå¦‚è™šæ‹Ÿå­˜å‚¨å™¨</li></ul></li></ul><p>è¯¦è§ç¬¬ä¸‰ç« </p><h3 id="4-å¼‚æ­¥ï¼ˆasynchronismï¼‰">4. å¼‚æ­¥ï¼ˆasynchronismï¼‰</h3><p>å¹¶å‘çš„ç¨‹åºä¸æ˜¯ä»å¤´èµ°åˆ°åº•çš„ï¼Œæ˜¯â€œèµ°èµ°åœåœâ€ï¼Œå¦‚æœè¿›ç¨‹æ­£åœ¨å ç”¨èµ„æºï¼Œå…¶ä»–è¿›ç¨‹éœ€è¦å…ˆè¢«é˜»å¡ï¼Œç­‰å¾…èµ„æºé‡Šæ”¾ã€‚</p><h2 id="1-3-æ“ä½œç³»ç»Ÿè¿è¡Œæœºåˆ¶">1.3 æ“ä½œç³»ç»Ÿè¿è¡Œæœºåˆ¶</h2><ul><li><p>å®ç°æ“ä½œç³»ç»Ÿï¼Œéœ€è¦å†™<strong>å†…æ ¸ç¨‹åº</strong>ï¼Œå¾ˆå¤šä¸ªå†…æ ¸ç¨‹åºç»„æˆ<strong>æ“ä½œç³»ç»Ÿå†…æ ¸(kernel)</strong>ï¼Œç®€ç§°å†…æ ¸ï¼Œæ˜¯æ•´ä¸ªæ“ä½œç³»ç»Ÿæœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚</p><ul><li>æ“ä½œç³»ç»Ÿæœ‰ä¸ªå†…æ ¸å°±è¶³å¤Ÿäº† (eg. Dockerå®¹å™¨ -&gt; ä»…éœ€linuxå†…æ ¸)</li><li>æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½æœªå¿…éƒ½åœ¨å†…æ ¸ä¸­ï¼Œå¦‚GUIå›¾å½¢åŒ–ç•Œé¢</li></ul></li><li><p>CPUè®¾è®¡çš„æ—¶å€™å°±åˆ’åˆ†äº†ç‰¹æƒæŒ‡ä»¤å’Œéç‰¹æƒæŒ‡ä»¤</p><ul><li>åº”ç”¨ç¨‹åºåªèƒ½è¿è¡Œéç‰¹æƒæŒ‡ä»¤ï¼ˆå¦‚åŠ æ³•å‡æ³•ï¼‰</li><li>å†…æ ¸ç¨‹åºå¯ä»¥è¿è¡Œç‰¹æƒæŒ‡ä»¤ï¼ˆå¦‚å†…å­˜æ¸…0æŒ‡ä»¤ï¼Œè¿™æ¡æŒ‡ä»¤å½±å“é‡å¤§ï¼Œåªå…è®¸â€œç®¡ç†è€…â€â€”â€”å³æ“ä½œç³»ç»Ÿå†…æ ¸æ¥ä½¿ç”¨ï¼‰ã€‚</li></ul></li><li><p>ä½†æ˜¯CPUè¿è¡Œçš„æ—¶å€™ï¼Œåªä¼šæŠŠä¸€æ¡ä¸€æ¡æŒ‡ä»¤ï¼ˆäºŒè¿›åˆ¶æŒ‡ä»¤ï¼‰é€è¿›å»è¿è¡Œï¼Œæ€ä¹ˆåˆ¤æ–­è¿è¡Œçš„ç¨‹åºæ˜¯åº”ç”¨ç¨‹åºæŒ‡ä»¤è¿˜æ˜¯å†…æ ¸ç¨‹åºçš„æŒ‡ä»¤ï¼Ÿ</p><p>æ­¤æ—¶æˆ‘ä»¬æŠŠCPUåˆ’åˆ†æˆä¸ºä¸¤ç§çŠ¶æ€ï¼Œ<strong>â€å†…æ ¸æ€â€œ</strong>ï¼Œ<strong>â€œç”¨æˆ·æ€â€</strong></p><ul><li><p>å†…æ ¸æ€ï¼šè¯´æ˜æ­¤æ—¶è¿è¡Œçš„æ˜¯<code>å†…æ ¸ç¨‹åº</code>ï¼Œ<strong>å¯ä»¥æ‰§è¡Œç‰¹æƒæŒ‡ä»¤</strong></p></li><li><p>ç”¨æˆ·æ€ï¼šè¯´æ˜æ­¤æ—¶è¿è¡Œçš„æ˜¯<code>åº”ç”¨ç¨‹åº</code>ï¼Œ<strong>åªèƒ½æ‰§è¡Œéç‰¹æƒæŒ‡ä»¤</strong></p></li><li><p>CPUä¸­çš„å¯„å­˜å™¨<strong>ç¨‹åºçŠ¶æ€å­—å¯„å­˜å™¨ï¼ˆPSW)</strong>ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼Œ1è¡¨ç¤ºå†…æ ¸æ€ï¼Œ0è¡¨ç¤ºç”¨æˆ·æ€</p><p>å½“éœ€è¦äº¤æ¢çŠ¶æ€ï¼Œä¿®æ”¹PSWå€¼å³å¯</p></li></ul></li></ul><h2 id="1-4-ä¸­æ–­å’Œå¼‚å¸¸">1.4 ä¸­æ–­å’Œå¼‚å¸¸</h2><ul><li>ä¸­æ–­çš„ä½œç”¨ï¼šå¦‚æœåº”ç”¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œå‘ç”Ÿäº†ä¸­æ–­ï¼Œå°±ä¼šè®©cpuç«‹å³åœæ­¢æ­¤æ—¶è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œè½¬è€Œæ‰§è¡Œç›¸åº”çš„å†…æ ¸ç¨‹åºã€‚ä¸­æ–­æ˜¯è®©ç®¡ç†è€…ï¼ˆæ“ä½œç³»ç»Ÿå†…æ ¸ï¼‰å¤ºå›ä½¿ç”¨æƒçš„å”¯ä¸€é€”å¾„ï¼Œè€Œä¸­æ–­ï¼Œä¼šä½¿CPUç”±ç”¨æˆ·æ€è½¬å˜ä¸ºå†…æ ¸æ€</li></ul><pre class="mermaid">graph LRA(å†…æ ¸æ€ -&gt; ç”¨æˆ·æ€) --&gt;B(ç”¨ç‰¹æƒæŒ‡ä»¤ ä¿®æ”¹PSWçš„å€¼)C(ç”¨æˆ·æ€ -&gt; å†…æ ¸æ€) --&gt;D(å¼•å‘ ä¸­æ–­ ç¡¬ä»¶è‡ªåŠ¨å®Œæˆ CPUçŠ¶æ€è½¬æ¢è¿‡ç¨‹ å¼ºè¡Œå¤ºå›CPUä½¿ç”¨æƒ)</pre><ul><li><p>ä¸­æ–­çš„ç±»å‹ï¼š</p><ul><li><p>å†…ä¸­æ–­ï¼ˆä¹Ÿå«åš <strong>å¼‚å¸¸</strong>ï¼‰ï¼šä¸å½“å‰æ‰§è¡ŒæŒ‡ä»¤æœ‰å…³ï¼Œä¸­æ–­ä¿¡å·æ¥æºäºCPUå†…éƒ¨</p><p>æœ‰æ—¶å€™åº”ç”¨ç¨‹åºæƒ³è¯·æ±‚æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡ï¼Œæ­¤æ—¶ä¼šæ‰§è¡Œä¸€æ¡<strong>ç‰¹æ®Šçš„æŒ‡ä»¤â€”â€”é™·å…¥æŒ‡ä»¤</strong>ã€‚è¯¥æŒ‡ä»¤ä¼šå¼•å‘ä¸€ä¸ªå†…éƒ¨ä¸­æ–­ä¿¡å·ã€‚åº”ç”¨ç¨‹åºä¸»åŠ¨å§ä½¿ç”¨æƒå½’è¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œå¸Œæœ›æ“ä½œç³»ç»Ÿæä¾›æŸé¡¹æœåŠ¡ã€‚ï¼ˆå…ˆä¼ å…¥æ‰€éœ€çš„å‚æ•°ï¼Œå†è°ƒç”¨é™·å…¥æŒ‡ä»¤ï¼‰</p><ul><li>è€Œ<strong>ç³»ç»Ÿè°ƒç”¨</strong>å°±æ˜¯åˆ©ç”¨é™·å…¥æŒ‡ä»¤æ¥å®Œæˆ</li><li><strong>é™·å…¥æŒ‡ä»¤å¹¶ä¸æ˜¯ç‰¹æƒæŒ‡ä»¤</strong>,é™·å…¥æŒ‡ä»¤åœ¨ç”¨æˆ·æ€æ‰§è¡Œï¼Œæ‰§è¡Œåç«‹åˆ»å¼•å‘ä¸€ä¸ª<strong>å†…ä¸­æ–­</strong>ï¼Œä½¿CPUè¿›å…¥å†…æ ¸æ€ã€‚</li></ul><p>å¼‚å¸¸åˆ†ä¸‰ä¸ªç§ç±»ï¼š</p><ul><li><p>é™·é˜±ã€é™·å…¥ï¼ˆtrapï¼‰ï¼š</p><p>ç”±é™·å…¥æŒ‡ä»¤å¼•å‘ï¼Œæ˜¯åº”ç”¨ç¨‹åºæ•…æ„å¼•å‘çš„</p></li><li><p>æ•…éšœï¼ˆfaultï¼‰ï¼š</p><p>ç”±é”™è¯¯æ¡ä»¶å¼•èµ·ï¼Œå¯èƒ½è¢«å†…æ ¸ç¨‹åºä¿®å¤ã€‚å†…æ ¸ç¨‹åºä¿®å¤åä¼šæŠŠCPUä½¿ç”¨æƒè¿˜ç»™åº”ç”¨ç¨‹åºï¼Œè®©ä»–ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚å¦‚ï¼šç¼ºé¡µæ•…éšœ</p></li><li><p>ç»ˆæ­¢ï¼ˆabortï¼‰ï¼š</p><p>ç”±è‡´å‘½é”™è¯¯å¼•èµ·ï¼Œå†…æ ¸ç¨‹åºæ— æ³•ä¿®å¤ï¼Œå› æ­¤ä¸€èˆ¬ä¸å†å°†CPUä½¿ç”¨æƒè¿˜ç»™å¼•å‘ç»ˆæ­¢çš„åº”ç”¨ç¨‹åºï¼Œè€Œæ˜¯ç›´æ¥ç»ˆæ­¢è¯¥åº”ç”¨ç¨‹åºã€‚å¦‚ï¼šæ•´æ•°é™¤0ï¼Œéæ³•ä½¿ç”¨ç‰¹æƒæŒ‡ä»¤</p></li></ul></li><li><p>å¤–ä¸­æ–­ï¼ˆç‹­ä¹‰ä¸Šç»Ÿç§° <strong>ä¸­æ–­</strong>ï¼‰ï¼šä¸å½“å‰æ‰§è¡ŒæŒ‡ä»¤æ— å…³ï¼Œä¸­æ–­ä¿¡å·æ¥æºäºCPUå¤–éƒ¨</p><p>ä¾‹å­ï¼šæ—¶é’Ÿä¸­æ–­ã€‚ç”±æ—¶é’Ÿéƒ¨ä»¶ï¼ˆåœ¨cpuçš„å¤–éƒ¨ï¼‰å‘æ¥ä¸­æ–­ä¿¡å·ï¼Œå®ç°ç¨‹åºå¹¶å‘çš„é‡è¦å‰æã€‚</p><p>â€‹ioè®¾å¤‡æä¾›ä¸­æ–­ä¿¡å·ã€‚è¿™äº›ä¸­æ–­ä¿¡å·è®©æ“ä½œç³»ç»Ÿå¯ä»¥å¾ˆå¥½çš„è°ƒåº¦å„ä¸ªè¿›ç¨‹ã€‚</p><p>å¤–éƒ¨ä¸­æ–­åˆåˆ†å¯å±è”½ä¸­æ–­<strong>INTR</strong>å’Œä¸å¯å±è”½ä¸­æ–­<strong>NMI</strong></p></li></ul></li><li><p>ä¸­æ–­æœºåˆ¶çš„åŸºæœ¬åŸç†ï¼š</p><p>ä¸åŒç±»å‹çš„ä¸­æ–­ä¿¡å·ï¼Œéœ€è¦ç”¨ä¸åŒçš„ä¸­æ–­å¤„ç†ç¨‹åºæ¥å¤„ç†ã€‚æŸ¥è¯¢<strong>ä¸­æ–­å‘é‡è¡¨</strong>ï¼Œä»¥æ­¤æ¥æ‰¾åˆ°ç›¸åº”çš„ä¸­æ–­å¤„ç†ç¨‹åºåœ¨å†…å­˜ä¸­å­˜æ”¾çš„ä½ç½®ã€‚</p></li></ul><p>æ˜¾ç„¶ï¼Œä¸­æ–­å¤„ç†ç¨‹åºä¸€å®šæ˜¯åœ¨å†…æ ¸æ€çš„ï¼Œéœ€è¦è¿è¡Œåœ¨å†…æ ¸æ€ï¼ˆæ¶‰åŠè®¡ç®—æœºç»„æˆåŸç†ï¼‰</p><h2 id="1-5-ç³»ç»Ÿè°ƒç”¨">1.5 ç³»ç»Ÿè°ƒç”¨</h2><p>æ“ä½œç³»ç»Ÿä½œä¸ºç”¨æˆ·å’Œè®¡ç®—æœºç¡¬ä»¶ä¹‹é—´çš„æ¥å£ï¼Œéœ€è¦å‘ä¸Šæä¾›ä¸€äº›ç®€å•å¥½ç”¨çš„æœåŠ¡ã€‚ä¸»è¦åŒ…æ‹¬å‘½ä»¤æ¥å£å’Œç¨‹åºæ¥å£ã€‚å…¶ä¸­ï¼Œç¨‹åºæ¥å£ç”±ä¸€ç»„ç³»ç»Ÿè°ƒç”¨ç»„æˆã€‚<strong>åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚è·å¾—æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡</strong>ã€‚</p><pre class="mermaid">graph TDA[åº”ç”¨ç¨‹åº] --&gt; system(ç³»ç»Ÿè°ƒç”¨)    A --&gt; |é«˜çº§è¯­è¨€| C(cåº“å‡½æ•°)    C --&gt; system(ç³»ç»Ÿè°ƒç”¨)    system(ç³»ç»Ÿè°ƒç”¨) --&gt; operating[æ“ä½œç³»ç»Ÿ]    F[ç³»ç»Ÿè°ƒç”¨ä¸åº“å‡½æ•°çš„åŒºåˆ«]</pre><pre class="mermaid">graph LRA(ç³»ç»Ÿè°ƒç”¨ æŒ‰åŠŸèƒ½åˆ†ç±») --&gt;B(è®¾å¤‡ç®¡ç† å®Œæˆå¯¹è®¾å¤‡çš„ è¯·æ±‚/é‡Šæ”¾/å¯åŠ¨ ç­‰åŠŸèƒ½)A --&gt;C(æ–‡ä»¶ç®¡ç† å®Œæˆå¯¹æ–‡ä»¶çš„ è¯»/å†™/åˆ›å»º/åˆ é™¤ ç­‰åŠŸèƒ½)A --&gt;D(è¿›ç¨‹æ§åˆ¶ å®Œæˆè¿›ç¨‹çš„ åˆ›å»º/æ’¤é”€/é˜»å¡/å”¤é†’ ç­‰åŠŸèƒ½)A --&gt;E(è¿›ç¨‹é€šä¿¡ å®Œæˆè¿›ç¨‹ä¹‹é—´çš„ æ¶ˆæ¯ä¼ é€/ä¿¡å·ä¼ é€’ ç­‰åŠŸèƒ½)A --&gt;F(å†…å­˜ç®¡ç† å®Œæˆå†…å­˜çš„ åˆ†é…/å›æ”¶ ç­‰åŠŸèƒ½)</pre><p>*æ‹“å±•é“¾æ¥ï¼š<a href="https://www.cnblogs.com/wanghuaijun/p/6548633.html">linuxæä¾›äº†å“ªäº›ç³»ç»Ÿè°ƒç”¨</a></p><ul><li><p>å‡¡æ˜¯ä¸å…±äº«èµ„æºæœ‰å…³çš„æ“ä½œï¼ˆå¦‚å­˜å‚¨åˆ†é…ã€IOæ“ä½œã€æ–‡ä»¶ç®¡ç†ç­‰ï¼‰ï¼Œéƒ½å¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨çš„æ–¹å¼å‘<strong>æ“ä½œç³»ç»Ÿå†…æ ¸</strong>æå‡ºæœåŠ¡è¯·æ±‚ã€‚ç”±å†…æ ¸ä»£ä¸ºå®Œæˆï¼Œä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸å®‰å…¨æ€§ã€‚ï¼ˆä¹Ÿé˜²æ­¢ç”¨æˆ·éæ³•æ“ä½œï¼‰</p></li><li><p>æ€»ç»“ï¼š</p><ul><li><p>é™·å…¥æŒ‡ä»¤æ˜¯åœ¨ç”¨æˆ·æ€æ‰§è¡Œï¼Œæ‰§è¡Œé™·å…¥æŒ‡ä»¤åç«‹å³å¼•å‘ä¸€ä¸ªå†…ä¸­æ–­ï¼Œä½¿CPUè¿›å…¥å†…æ ¸æ€ã€‚</p></li><li><p>å‘å‡ºç³»ç»Ÿè°ƒç”¨çš„è¯·æ±‚æ˜¯åœ¨ç”¨æˆ·æ€ï¼Œè€Œå¯¹ç³»ç»Ÿè°ƒç”¨çš„ç›¸åº”å¤„ç†æ˜¯åœ¨å†…æ ¸æ€ä¸‹è¿›è¡Œã€‚</p></li></ul></li><li><p>åˆ«åï¼š</p><ul><li><p><strong>å†…æ ¸æ€=æ ¸å¿ƒæ€=ç®¡æ€</strong></p></li><li><p><strong>ç”¨æˆ·æ€=ç›®æ€</strong></p></li><li><p><strong>é™·å…¥æŒ‡ä»¤=trapæŒ‡ä»¤=è®¿ç®¡æŒ‡ä»¤</strong></p></li></ul></li><li><p>è®¿ç®¡æŒ‡ä»¤çš„åŸºæœ¬åŠŸèƒ½æ˜¯è®©ç¨‹åºæ‹¥æœ‰ â€œè‡ªæ„¿è¿›ç®¡â€ çš„æ‰‹æ®µã€‚ä»è€Œå¼•èµ·è®¿ç®¡ä¸­æ–­ã€‚è®¿ç®¡ä¸­æ–­å¤„ç†ç¨‹åºå°†æŒ‰ç…§ç³»ç»Ÿè°ƒç”¨çš„æ“ä½œæ•°å’Œå‚æ•°è½¬åˆ°ç›¸åº”çš„ä¾‹è¡Œå­ç¨‹åº<sup class="refplus-num"><a href="#ref-r">[1]</a></sup>ã€‚å®ŒæˆæœåŠ¡åŠŸèƒ½åï¼Œé€€å‡ºä¸­æ–­ï¼Œè¿”å›åˆ°ç”¨æˆ·ç¨‹åºæ–­ç‚¹ç»§ç»­æ‰§è¡Œã€‚</p><ul id="refplus" style="display:none;"><li id="ref-r" data-num="1">[1]   ä¾‹è¡Œç¨‹åº (routine)äº¦ç§°ä¾‹ç¨‹.ä¸€ç§è®¡ç®—æœºç¨‹åº.æ˜¯ä¸ä¸€é¡¹è®¡ç®—ä»»åŠ¡ç›¸å¯¹åº”çš„å¤„ç†å¯¹è±¡å’Œå¤„ç†è§„åˆ™çš„æè¿°.å¯ä»¥æ˜¯ä¸€ä¸ªä¸»ç¨‹åºçš„ä¸€éƒ¨åˆ†æˆ–ä¸€ä¸ªä¸“ç”¨ç¨‹åºï¼Œä¹Ÿå¯åŒ…å«è‹¥å¹²ä¸ªå­ç¨‹åº.å®ƒä¸€èˆ¬åœ¨ä¸€ä¸ªç¨‹åºæˆ–å¤šä¸ªç¨‹åºä¸­å¤šæ¬¡ä½¿ç”¨.ä¾‹è¡Œç¨‹åºå’Œå­ç¨‹åºå¸¸å¸¸å­˜æ”¾åœ¨ç¨‹åºåº“ä¸­ï¼Œé€šå¸¸å­˜å‚¨åœ¨å¤–å­˜å‚¨å™¨ä¸Š.</li></ul><p></p></li></ul><h2 id="1-6-æ“ä½œç³»ç»Ÿçš„ä½“ç³»ç»“æ„">1.6 æ“ä½œç³»ç»Ÿçš„ä½“ç³»ç»“æ„</h2><h3 id="1-åˆ†å±‚æ³•">1 åˆ†å±‚æ³•</h3><p>å°†æ“ä½œç³»ç»Ÿåˆ†ä¸ºè‹¥å¹²å±‚ï¼Œæœ€åº•å±‚ï¼ˆå±‚0ï¼‰ä¸ºç¡¬ä»¶ï¼Œæœ€é«˜å±‚ï¼ˆå±‚Nï¼‰ä¸ºç”¨æˆ·æ¥å£ã€‚æ¯å±‚åªèƒ½è°ƒç”¨ç´§é‚»å®ƒçš„ä½å±‚çš„åŠŸèƒ½ä¸æœåŠ¡ï¼ˆå•å‘ä¾èµ–ï¼‰</p><ul><li>ä¼˜ç‚¹ï¼š<ul><li>ä¾¿äºç³»ç»Ÿçš„è°ƒè¯•å’ŒéªŒè¯ï¼Œç®€åŒ–äº†ç³»ç»Ÿè®¾è®¡ä¸å®ç°ã€‚</li><li>æ˜“æ‰©å……ã€æ˜“ç»´æŠ¤ï¼šå¢åŠ ã€ä¿®æ”¹æˆ–æ›¿æ¢å…¶ä¸­ä¸€å±‚ï¼Œåªè¦ä¸æ”¹å˜æ¥å£ï¼Œå°±ä¸ä¼šå½±å“å…¶å®ƒå±‚ã€‚</li></ul></li><li>ç¼ºç‚¹ï¼š<ul><li>å„å±‚åˆç†å®šä¹‰è¾ƒéš¾ï¼Œä¾èµ–å…³ç³»ç¨³å®šä¹‹åï¼Œå¾€å¾€ä¸å¤Ÿçµæ´»ã€‚</li><li>æ•ˆç‡è¾ƒå·®ï¼Œé€šå¸¸è°ƒç”¨çš„æ—¶å€™éœ€è¦è‡ªä¸Šè€Œä¸‹åœ°ç©¿è¶Šå¤šå±‚ï¼Œå¢åŠ å¼€é”€ã€‚</li></ul></li></ul><h3 id="2-æ¨¡å—åŒ–">2 æ¨¡å—åŒ–</h3><p>æ˜¯å°†æ“ä½œç³»ç»ŸæŒ‰åŠŸèƒ½åˆ†ä¸ºè‹¥å¹²ä¸ªåŠŸèƒ½æ¨¡å—ã€‚æ¯ä¸ªæ¨¡å—å…·æœ‰æŸç§åŠŸèƒ½ï¼Œå¹¶è§„å®šå¥½æ¥å£ï¼Œä½¿å„ä¸ªæ¨¡å—ä¹‹é—´å¯ä»¥é€šä¿¡ã€‚ç„¶åç»†åˆ†ä¸‹å„ä¸ªå­æ¨¡å—ï¼Œè¿™ç§è®¾è®¡æ–¹æ³•å«åš<strong>æ¨¡å—-æ¥å£æ³•</strong>ã€‚</p><p>åˆ’åˆ†æ¨¡å—çš„æ—¶å€™ï¼Œå¦‚æœåˆ†çš„å¤ªå°ï¼Œè™½ç„¶å¯ä»¥é™ä½æ¨¡å—æœ¬èº«çš„å¤æ‚æ€§ï¼Œä½†ä¼šä½¿å¾—æ¨¡å—ä¹‹é—´çš„è”ç³»è¿‡å¤šï¼Œé€ æˆç³»ç»Ÿæ¯”è¾ƒæ··ä¹±ã€‚å¦‚æœæ¨¡å—åˆ†çš„è¿‡å¤§ï¼Œä¼šå¢åŠ æ¨¡å—å†…éƒ¨å¤æ‚æ€§ã€‚</p><p>è€Œä¸”ï¼Œåˆ’åˆ†æ¨¡å—çš„æ—¶å€™ï¼Œè¦å……åˆ†è€ƒè™‘æ¨¡å—çš„ç‹¬ç«‹æ€§ï¼Œç‹¬ç«‹æ€§è¶Šé«˜ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´äº¤äº’å°±å˜å°‘ï¼Œç³»ç»Ÿç»“æ„ä¹Ÿå°±è¶Šæ¸…æ™°ã€‚è¡¡é‡æ¨¡å—çš„ç‹¬ç«‹æ€§ä¸»è¦æœ‰ä¸¤ä¸ªæ ‡å‡†ï¼š</p><ul><li><p>å†…èšæ€§ï¼šæ¨¡å—å†…éƒ¨å„ä¸ªéƒ¨åˆ†è”ç³»çš„ç´§å¯†ç¨‹åº¦ã€‚å†…èšæ€§è¶Šé«˜ï¼Œæ¨¡å—ç‹¬ç«‹æ€§è¶Šå¥½ã€‚</p></li><li><p>è€¦åˆåº¦ï¼šæ¨¡å—é—´ç›¸äº’è”ç³»å’Œç›¸äº’å½±å“çš„ç¨‹åº¦ã€‚è€¦åˆæ€§è¶Šé«˜ï¼Œæ¨¡å—ç‹¬ç«‹æ€§è¶Šå¥½ã€‚</p></li><li><p>ä¼˜ç‚¹ï¼š</p><ul><li>æé«˜äº†æ“ä½œç³»ç»Ÿè®¾è®¡çš„æ­£ç¡®æ€§ã€å¯ç†è§£æ€§ã€å¯ç»´æŠ¤æ€§</li><li>å¢å¼ºäº†æ“ä½œç³»ç»Ÿçš„è¯¾é€‚åº”æ€§</li><li>åŠ é€Ÿäº†æ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹</li></ul></li><li><p>ç¼ºç‚¹ï¼š</p><ul><li>æ¨¡å—é—´çš„æ¥å£è§„å®šå¾ˆéš¾æ»¡è¶³å¯¹æ¥å£çš„å®é™…éœ€æ±‚</li><li>å„ä¸ªæ¨¡å—è§„æ ¼çš„è®¾è®¡æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å¥½ç­”æ¡ˆï¼Œæ²¡æ‰¾åˆ°å¯é çš„å†³å®šé¡ºåº</li></ul></li></ul><h3 id="3-å†…æ ¸æ¶æ„">3 å†…æ ¸æ¶æ„</h3><p><strong>è€Œæ“ä½œç³»ç»Ÿä»å†…æ ¸ä¸Šåˆ†å¤§è‡´åˆ†ä¸ºä¸¤ç‚¹ï¼š</strong></p><ul><li><p>å¤§å†…æ ¸/å•å†…æ ¸/å®å†…æ ¸</p><ul><li>æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½æ¨¡å—éƒ½ä½œä¸ºç³»ç»Ÿå†…æ ¸ï¼Œè¿è¡Œåœ¨æ ¸å¿ƒæ€</li><li>ä¼˜ç‚¹ï¼šé«˜æ€§èƒ½</li><li>ç¼ºç‚¹ï¼šå†…æ ¸ä»£ç é‡åºå¤§ï¼Œç»“æ„æ··ä¹±ï¼Œéš¾ä»¥ç»´æŠ¤</li><li>å…¸å‹çš„å¤§å†…æ ¸æ“ä½œç³»ç»Ÿï¼šLinuxã€Unix</li></ul></li><li><p>å¾®å†…æ ¸</p><ul><li><p>åªæŠŠæœ€åŸºæœ¬çš„åŠŸèƒ½ç•™åœ¨å†…æ ¸</p></li><li><p>å¾®å†…æ ¸åŸºæœ¬åŠŸèƒ½ï¼š</p><ul><li><p>è¿›ç¨‹/çº¿ç¨‹ç®¡ç†</p></li><li><p>ä½çº§å­˜å‚¨å™¨ç®¡ç†</p><p>åœ¨å¾®å†…æ ¸ä¸­ï¼Œåªé…ç½®äº†æœ€åŸºæœ¬çš„ä½çº§å­˜å‚¨å™¨ç®¡ç†æœºåˆ¶ã€‚å¦‚ç”¨äºå®ç°å°†é€»è¾‘åœ°å€å˜æ¢ä¸ºç‰©ç†åœ°å€ç­‰çš„é¡µè¡¨æœºåˆ¶å’Œåœ°å€å˜æ¢æœºåˆ¶ï¼Œè¿™ä¸€éƒ¨åˆ†éœ€è¦ä¾èµ–äºç¡¬ä»¶ï¼Œå› æ­¤æ”¾å…¥å¾®å†…æ ¸ã€‚</p><p>è€Œå®ç°è™šæ‹Ÿå­˜å‚¨å™¨ç®¡ç†çš„ç­–ç•¥ï¼Œåˆ™åŒ…å«åº”é‡‡å–ä½•ç§é¡µé¢ç½®æ¢ç®—æ³•ï¼Œé‡‡ç”¨ä½•ç§å†…å­˜åˆ†é…ä¸å›æ”¶çš„ç­–ç•¥ï¼Œåº”å°†è¿™éƒ¨åˆ†æ”¾åœ¨å¾®å†…æ ¸å¤–çš„å­˜å‚¨å™¨ç®¡ç†æœåŠ¡å™¨ä¸­ã€‚</p></li><li><p>ä¸­æ–­å’Œé™·å…¥å¤„ç†</p></li></ul></li><li><p>ä¼˜ç‚¹ï¼šå†…æ ¸åŠŸèƒ½å°‘ï¼Œç»“æ„æ¸…æ™°ï¼Œæ–¹ä¾¿ç»´æŠ¤</p></li><li><p>ç¼ºç‚¹ï¼šéœ€è¦é¢‘ç¹åœ°åœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€åˆ‡æ¢ï¼Œå®¹æ˜“é™ä½CPUæ€§èƒ½</p></li><li><p>å…¸å‹çš„å¾®å†…æ ¸æ“ä½œç³»ç»Ÿï¼šWindows NT</p></li><li><p>å®šä¹‰å¾®å†…æ ¸ç»“æ„OSçš„å››ä¸ªæ–¹é¢ï¼š</p><ul><li><p>è¶³å¤Ÿå°çš„å†…æ ¸</p></li><li><p>åŸºäºå®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼</p></li><li><p>åº”ç”¨<strong>æœºåˆ¶ä¸ç­–ç•¥åˆ†ç¦»</strong>åŸç†</p><ul><li><p>æœºåˆ¶æ˜¯æŒ‡å®ç°æŸä¸€åŠŸèƒ½çš„å…·ä½“æ‰§è¡Œæœºæ„</p></li><li><p>ç­–ç•¥æ˜¯æŒ‡åœ¨æœºåˆ¶çš„åŸºç¡€ä¸Šå€ŸåŠ©äºæŸäº›å‚æ•°å’Œç®—æ³•æ¥å®ç°è¯¥åŠŸèƒ½çš„ä¼˜åŒ–ï¼Œæˆ–è€…è¾¾åˆ°ä¸åŒçš„åŠŸèƒ½ç›®æ ‡ã€‚</p><p>ä¼ ç»ŸOSä¸­ï¼Œå°†æœºåˆ¶æ”¾åœ¨OSå†…æ ¸çš„è¾ƒä½å±‚ä¸­ï¼ŒæŠŠç­–ç•¥æ”¾åœ¨å†…æ ¸çš„è¾ƒé«˜å±‚ã€‚è€Œå¾®å†…æ ¸OSä¸­ï¼Œé€šå¸¸å°†æœºåˆ¶æ”¾åœ¨å¾®å†…æ ¸é‡Œï¼Œæ‰èƒ½æŠŠå†…æ ¸åšçš„å¾ˆå°</p></li></ul></li><li><p>é‡‡ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯</p><p>åŸºäºé¢å‘å¯¹è±¡æŠ€æœ¯ä¸­çš„<strong>æŠ½è±¡</strong>ä¸<strong>éšè”½</strong>åŸåˆ™ï¼Œèƒ½æ§åˆ¶ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚è¿›ä¸€æ­¥åˆ©ç”¨<strong>å¯¹è±¡ã€å°è£…ã€ç»§æ‰¿</strong>ç­‰æ¦‚å¿µè¿˜èƒ½ç¡®ä¿ç³»ç»Ÿè¿è¡Œçš„æ­£ç¡®ã€å¯é ã€æ˜“æ‰©å±•æ€§ã€‚ä¹Ÿæ˜¯å› ä¸ºå¦‚æ­¤ï¼Œé¢å‘å¯¹è±¡æŠ€æœ¯è¢«å¹¿æ³›åº”ç”¨åœ¨æ“ä½œç³»ç»Ÿçš„è®¾è®¡ä¸­ã€‚</p></li></ul></li></ul></li></ul><p>æ“ä½œç³»ç»Ÿä¸»è¦åˆ†ä¸¤ä¸ªæ¿å—ï¼š</p><ul><li><p>éå†…æ ¸åŠŸèƒ½ï¼šå¦‚GUI</p></li><li><p>å†…æ ¸åŠŸèƒ½ï¼š</p><ul><li><p>ä¸ç¡¬ä»¶ç®¡ç†è¾ƒç´§å¯†çš„æ¨¡å—</p><ul><li>æ—¶é’Ÿç®¡ç†ï¼ˆåˆ©ç”¨æ—¶é’Ÿä¸­æ–­å®ç°è®¡æ—¶åŠŸèƒ½ï¼‰</li><li>ä¸­æ–­å¤„ç†</li><li>åŸè¯­ï¼ˆè®¾å¤‡é©±åŠ¨ã€CPUåˆ‡æ¢ç­‰ï¼‰<ul><li>æ˜¯ä¸€ç§ç‰¹æ®Šç¨‹åº</li><li>å¤„äºæ“ä½œç³»ç»Ÿæœ€åº•å±‚ï¼Œæ˜¯æœ€æ¥è¿‘ç¡¬ä»¶çš„éƒ¨åˆ†</li><li>è¿™ç§ç¨‹åºå…·æœ‰åŸå­æ€§ï¼Œè¿è¡Œå¿…é¡»ä¸€æ°”å‘µæˆï¼Œä¸å¯è¢«ä¸­æ–­ã€‚</li><li>è¿è¡Œæ—¶é—´çŸ­ï¼Œè°ƒç”¨é¢‘ç¹</li></ul></li></ul></li><li><p>è¿™äº›ç®¡ç†å·¥ä½œæ›´å¤šæ˜¯å¯¹æ•°æ®ç»“æ„çš„æ“ä½œï¼Œä¸ä¼šç›´æ¥æ¶‰åŠç¡¬ä»¶ã€‚</p><ul><li><p>æŠŠè¿™éƒ¨åˆ†åŠŸèƒ½ä¹Ÿå†™è¿›å†…æ ¸çš„å†…æ ¸å«å¤§å†…æ ¸ã€‚åä¹‹ï¼Œåªæœ‰æ—¶é’Ÿï¼Œä¸­æ–­ï¼ŒåŸè¯­çš„å†…æ ¸ç§°ä¹‹ä¸ºå¾®å†…æ ¸ï¼Œå…¶è¿›ç¨‹ç®¡ç†ç­‰ç­‰å†…å®¹å°†è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼Œå¯¹æ€§èƒ½æœ‰ä¸€å®šçš„å½±å“ã€‚</p></li><li><p>è¿›ç¨‹ç®¡ç†ã€å­˜å‚¨å™¨ç®¡ç†ã€è®¾å¤‡ç®¡ç†ç­‰åŠŸèƒ½</p></li></ul></li><li><p>è¿™äº›å†…æ ¸åŠŸèƒ½ï¼Œå¿…é¡»è¿è¡Œåœ¨å†…æ ¸æ€</p></li><li><p>å¾®å†…æ ¸ç›¸æ¯”å¤§å†…æ ¸ï¼ŒCPUè¿è¡ŒçŠ¶æ€çš„è½¬æ¢ï¼ˆpswï¼‰çš„æ¬¡æ•°ä¼šå˜å¤šã€‚CPUè¿è¡ŒçŠ¶æ€çš„è½¬æ¢æ˜¯æœ‰æˆæœ¬çš„ï¼Œæ¶ˆè€—ä¸å°‘æ—¶é—´ã€‚é¢‘ç¹è½¬æ¢è¿è¡ŒçŠ¶æ€ä¼šé™ä½ç³»ç»Ÿæ€§èƒ½</p></li></ul></li><li><p>Ubuntuã€centosçš„å¼€å‘å›¢é˜Ÿä¸»è¦æ˜¯å®ç°äº†éå†…æ ¸åŠŸèƒ½ï¼Œè€Œå†…æ ¸åŠŸèƒ½éƒ½æ˜¯ç”¨äº†Linuxå†…æ ¸ã€‚</p></li></ul><h2 id="1-7-æ“ä½œç³»ç»Ÿçš„å‘å±•ä¸åˆ†ç±»">1.7 æ“ä½œç³»ç»Ÿçš„å‘å±•ä¸åˆ†ç±»</h2><h3 id="1-æ‰‹å·¥æ“ä½œé˜¶æ®µ">1 æ‰‹å·¥æ“ä½œé˜¶æ®µ</h3><ul><li><p>çº¸å¸¦æœºæ‰“å­”</p></li><li><p>ç¼ºç‚¹ï¼šç”¨æˆ·ç‹¬å å…¨é›†ï¼Œâ€äººæœºé€Ÿåº¦çŸ›ç›¾â€œ å¯¼è‡´èµ„æºåˆ©ç”¨ç‡ä½ã€‚</p></li><li><p>äººæœºé€Ÿåº¦çŸ›ç›¾:äººéœ€è¦å¾ˆé•¿æ—¶é—´å†™çº¸å¸¦ä»£ç ï¼Œä¸”ä¸€æ¬¡åªèƒ½ç”±ä¸€åç¨‹åºå‘˜ä½¿ç”¨è®¡ç®—æœºï¼Œä¸å…è®¸å¤šäººä½¿ç”¨ï¼›è€Œè®¡ç®—æœºå¾ˆå¿«å°±å¯ä»¥è¿è¡Œå®Œçº¸å¸¦ä»£ç </p></li></ul><h3 id="2-å•é“æ‰¹å¤„ç†ç³»ç»Ÿ">2 å•é“æ‰¹å¤„ç†ç³»ç»Ÿ</h3><ul><li><p>å¼•å…¥<strong>è„±æœºè¾“å…¥/è¾“å‡ºæŠ€æœ¯</strong>ï¼ˆç”¨å¤–å›´æœº+ç£å¸¦å®Œæˆï¼‰ï¼Œå¹¶ç”±**ç›‘ç£ç¨‹åºï¼ˆæ“ä½œç³»ç»Ÿçš„é›å½¢ï¼‰**è´Ÿè´£æ§åˆ¶ä½œä¸šçš„è¾“å…¥è¾“å‡ºï¼Œç£å¸¦è¯»å–ç†Ÿè¯»æ¯”çº¸å¸¦å¿«å¾ˆå¤š</p></li><li><p>ä¸»è¦ä¼˜ç‚¹ï¼šç¼“è§£ä¸€å®šç¨‹åº¦çš„äººåŠé€Ÿåº¦çŸ›ç›¾ï¼Œèµ„æºåˆ©ç”¨ç‡æœ‰ä¸€å®šçš„æå‡</p></li><li><p>ä¸»è¦ç¼ºç‚¹ï¼šå†…å­˜ä¸­ä»…èƒ½æœ‰ä¸€é“ç¨‹åºè¿è¡Œï¼Œè¿è¡Œç»“æŸæ‰èƒ½è¿›è¡Œä¸‹ä¸€é“ï¼ˆä¸²è¡Œæ‰§è¡Œï¼‰ã€‚è€Œ<strong>CPUæœ‰å¤§é‡çš„æ—¶é—´åœ¨ç©ºé—²ç­‰å¾…IOå®Œæˆ</strong>ï¼Œèµ„æºåˆ©ç”¨ç‡è¿˜æ˜¯ä¸é«˜</p></li></ul><h3 id="3-å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ">3 å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ</h3><ul><li><p>æ¯æ¬¡å¾€å†…å­˜ä¸­è¯»å–å¤šé“ç¨‹åº</p></li><li><p>æ“ä½œç³»ç»Ÿæ­£å¼è¯ç”Ÿï¼Œæ”¯æŒå¤šé“ç¨‹åºå¹¶å‘è¿è¡Œ</p></li><li><p>ä¸»è¦ä¼˜ç‚¹ï¼šå¤šé“ç¨‹åº<strong>å¹¶å‘</strong>æ‰§è¡Œï¼Œ<strong>å…±äº«</strong>è®¡ç®—æœºèµ„æºï¼Œ<strong>èµ„æºåˆ©ç”¨ç‡å¤§å¹…åº¦æå‡</strong>ï¼ŒCPUå’Œå…¶ä»–ç»„å‘˜æ›´èƒ½ä¿æŒ â€œå¿™ç¢Œâ€ çŠ¶æ€ï¼Œç³»ç»Ÿååé‡å¢å¤§</p></li><li><p>ä¸»è¦ç¼ºç‚¹ï¼šç”¨æˆ·å“åº”æ—¶é—´é•¿ï¼Œ<strong>æ²¡æœ‰äººæœºäº¤äº’åŠŸèƒ½</strong>ï¼ˆç”¨æˆ·æäº¤è‡ªå·±çš„ä½œä¸šæŒ‡æŒ¥å°±åªèƒ½ç­‰å¾…è®¡ç®—æœºå¤„ç†å®Œæ¯•ï¼Œä¸­é—´ä¸èƒ½æ§åˆ¶è‡ªå·±çš„ä½œä¸šæ‰§è¡Œ</p><p>å¦‚ï¼šæ— æ³•è°ƒè¯•ç¨‹åºï¼Œæ— æ³•åœ¨ç¨‹åºè¿è¡Œä¸­è¾“å…¥å‚æ•°ï¼‰</p></li></ul><h3 id="4-åˆ†æ—¶æ“ä½œç³»ç»Ÿ">4 åˆ†æ—¶æ“ä½œç³»ç»Ÿ</h3><ul><li><p>è®¡ç®—æœºä»¥<strong>æ—¶é—´ç‰‡</strong>ä¸ºå•ä½<strong>è½®æµä¸ºå„ä¸ªç”¨æˆ·/ä½œä¸šæœåŠ¡</strong>ï¼Œå„ä¸ªç”¨æˆ·å¯ä»¥é€šè¿‡ç»ˆç«¯ä¸è®¡ç®—æœºè¿›è¡Œäº¤äº’</p></li><li><p>ä¸»è¦ä¼˜ç‚¹ï¼šç”¨æˆ·è¯·æ±‚å¯ä»¥è¢«å³æ—¶å“åº”ï¼Œ<strong>è§£å†³äººæœºäº¤äº’çš„é—®é¢˜</strong>ã€‚å…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶ä½¿ç”¨ä¸€å°è®¡ç®—æœºï¼Œå¹¶ä¸”ç”¨æˆ·å¯¹è®¡ç®—æœºçš„æ“ä½œç›¸äº’ç‹¬ç«‹ï¼Œæ„Ÿå—ä¸åˆ°åˆ«äººçš„å­˜åœ¨</p></li><li><p>ä¸»è¦ç¼ºç‚¹ï¼š<strong>ä¸èƒ½ä¼˜å…ˆå¤„ç†ä¸€äº›ç´§æ€¥ä»»åŠ¡</strong>ã€‚æ“ä½œç³»ç»Ÿå¯¹å„ä¸ªç”¨æˆ·/ä½œä¸šéƒ½æ˜¯å…¬å¹³çš„ï¼Œå¾ªç¯åœ°ä¸ºæ¯ä¸ªç”¨æˆ·/ä½œä¸šæœåŠ¡ä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œä¸åŒºåˆ†ä»»åŠ¡ä¼˜å…ˆçº§/ç´§æ€¥æ€§ã€‚</p></li></ul><h3 id="5-å®æ—¶æ“ä½œç³»ç»Ÿ">5 å®æ—¶æ“ä½œç³»ç»Ÿ</h3><ul><li><p>è®¡ç®—æœºæ¥æ”¶åˆ°å¤–éƒ¨ä¿¡å·ååŠæ—¶è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”<strong>è¦åœ¨ä¸¥æ ¼çš„æ—¶é™å†…å¤„ç†å®Œäº‹ä»¶</strong>ã€‚å®æ—¶æ“ä½œç³»ç»Ÿçš„ä¸»è¦ç‰¹ç‚¹æ˜¯<strong>åŠæ—¶æ€§å’Œå¯é æ€§</strong>ã€‚</p><ul><li><p>ç¡¬å®æ—¶ç³»ç»Ÿï¼šå¿…é¡»åœ¨ç»å¯¹ä¸¥æ ¼çš„æ—¶é—´å†…å®Œæˆä»»åŠ¡</p><ul><li>å¦‚ï¼šè‡ªåŠ¨é©¾é©¶ç³»ç»Ÿ</li></ul></li><li><p>è½¯å®æ—¶ç³»ç»Ÿï¼šèƒ½å¤Ÿæ¥å—å¶å°”çš„è¿åæ—¶é—´è§„å®š</p><ul><li>å¦‚ï¼šè®¢ç¥¨ç³»ç»Ÿï¼ˆå®æ—¶æ›´æ–°ç¥¨æ•°ï¼‰</li></ul></li></ul></li><li><p>ä¸»è¦ä¼˜ç‚¹ï¼šèƒ½å¤ŸåŠæ—¶å“åº”ä¸€äº›ç´§æ€¥ä»»åŠ¡ï¼ŒæŸäº›ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡ä¸éœ€è¦æ—¶é—´ç‰‡æ’é˜Ÿã€‚</p><h3 id="6-å…¶ä»–æ“ä½œç³»ç»Ÿ">*6 å…¶ä»–æ“ä½œç³»ç»Ÿ</h3></li><li><p>ç½‘ç»œæ“ä½œç³»ç»Ÿï¼šå®ç°ç½‘ç»œä¸­å„ç§èµ„æºçš„å…±äº«ï¼ˆæ–‡ä»¶å…±äº«ï¼‰å’Œå„ä¸ªè®¡ç®—æœºä¹‹é—´çš„é€šä¿¡</p></li><li><p>åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿï¼šç‰¹ç‚¹æ˜¯åˆ†å¸ƒæ€§ã€å¹¶è¡Œæ€§ï¼Œä»»ä½•ä»»åŠ¡éƒ½å¯ä»¥åˆ†å¸ƒåœ¨è¿™äº›è®¡ç®—æœºä¸Šï¼Œå¹¶è¡ŒååŒåœ°å®Œæˆä»»åŠ¡</p></li><li><p>ä¸ªäººæ“ä½œç³»ç»Ÿï¼šWindowsã€macOSç­‰ç­‰</p></li></ul><h2 id="1-8-æ“ä½œç³»ç»Ÿå¼•å¯¼">1.8 æ“ä½œç³»ç»Ÿå¼•å¯¼</h2><p>å¸¸è§çš„æ“ä½œç³»ç»Ÿå¼•å¯¼æµç¨‹å¦‚ä¸‹</p><ul><li><p>æ¿€æ´»CPUï¼š</p><p>æ¿€æ´»çš„CPUè¯»å–[ROM]<sup class="refplus-num"><a href="#ref-ROM">[1]</a></sup>ä¸­çš„bootç¨‹åºï¼Œå°†æŒ‡ä»¤å¯„å­˜å™¨ç½®ä¸ºBIOS<sup class="refplus-num"><a href="#ref-BIOS">[2]</a></sup>çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œå³å¼€å§‹æ‰§è¡ŒBIOSçš„æŒ‡ä»¤ã€‚  </p><ul id="refplus" style="display:none;"><li id="ref-ROM" data-num="1">[1]  åªè¯»å­˜å‚¨å™¨ï¼Œå³ä½¿åˆ‡æ–­ç”µæºï¼Œä¿¡æ¯ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œåˆç§°ä¸ºå›ºå®šå­˜å‚¨å™¨ã€‚æ•´æœºå·¥ä½œè¿‡ç¨‹ä¸­åªèƒ½è¯»å‡ºï¼Œä¸èƒ½åƒéšæœºå­˜å‚¨å™¨èƒ½å¿«é€Ÿæ–¹ä¾¿åœ°æ”¹å†™å­˜å‚¨å†…å®¹ã€‚</li><li id="ref-BIOS" data-num="2">[2]   åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ</li></ul><p></p></li><li><p>ç¡¬ä»¶è‡ªæ£€ï¼š</p><p>å¯åŠ¨BIOSç¨‹åºä¹‹åï¼Œå…ˆè¿›è¡Œç¡¬ä»¶è‡ªæ£€ï¼Œæ£€æµ‹æ˜¯å¦æ•…éšœã€‚å¦‚æœ‰æ•…éšœï¼Œç”¨èœ‚é¸£å™¨å‘å‡ºä¸åŒå«ä¹‰çš„èœ‚é¸£ï¼›å¦‚æ— æ•…éšœï¼Œå±å¹•ä¼šå¼€å§‹æ˜¾ç¤ºcpuï¼Œå†…å­˜ï¼Œç¡¬ç›˜ç­‰ç­‰ä¿¡æ¯ã€‚</p></li><li><p>åŠ è½½å¸¦æœ‰æ“ä½œç³»ç»Ÿçš„ç¡¬ç›˜ï¼š</p><p>BIOSåœ¨è‡ªæ£€ç»“æŸåï¼Œå¼€å§‹è¯»å–Boot Sequence(é€šè¿‡CMOSé‡Œå­˜çš„å¯åŠ¨é¡ºåºï¼Œæˆ–è€…é€šè¿‡ä¸ç”¨æˆ·äº¤äº’çš„æ–¹å¼)ï¼ŒæŠŠæ§åˆ¶æƒäº¤ç»™æ’åºç¬¬ä¸€ä½çš„è®¾å¤‡ã€‚ç„¶åCPUå°†è¯¥å­˜å‚¨è®¾å¤‡çš„<strong>å¼•å¯¼æ‰‡åŒº</strong>çš„å†…å®¹å­˜è‡³å†…å­˜ä¸­ã€‚</p></li><li><p>åŠ è½½ä¸»å¼•å¯¼è®°å½•<strong>MBR</strong>ï¼š</p><p>ç¡¬ç›˜ä»¥ç‰¹å®šçš„æ ‡è¯†ç¬¦åŒºåˆ†å¼•å¯¼ç¡¬ç›˜å’Œéå¼•å¯¼ç¡¬ç›˜ã€‚å¦‚æœå‘ç°è¯¥ç›˜ä¸æ˜¯å¯å¼•å¯¼ç›˜ï¼Œå°±æ¢ä¸‹ä¸€ä¸ªã€‚è‹¥æ²¡æœ‰è¯¾å¼•å¯¼ç›˜ï¼Œä¼šå¯¼è‡´æ­»æœºã€‚<strong>ä¸»å¼•å¯¼è®°å½•MBRçš„ä½œç”¨å°±æ˜¯å‘Šè¯‰CPUå»ç¡¬ç›˜çš„å“ªä¸ªåˆ†åŒºå»å¯»æ‰¾æ“ä½œç³»ç»Ÿ</strong>ã€‚</p></li><li><p>æ‰«æç¡¬ç›˜åˆ†åŒºè¡¨ï¼Œå¹¶åŠ è½½ç¡¬ç›˜æ´»åŠ¨åˆ†åŒºï¼š</p><p>MBRåŒ…å«ç¡¬ç›˜åˆ†åŒºè¡¨ï¼Œç¡¬ç›˜åˆ†åŒºè¡¨ä»¥ç‰¹å®šçš„æ ‡è¯†ç¬¦åŒºåˆ†æ´»åŠ¨åˆ†åŒºå’Œéæ´»åŠ¨åˆ†åŒºã€‚ä¸»å¼•å¯¼è®°å½•æ‰«æç¡¬ç›˜åˆ†åŒºè¡¨ï¼Œè¿›è€Œè¯†åˆ«å«æœ‰æ“ä½œç³»ç»Ÿçš„ç¡¬ç›˜åˆ†åŒºï¼ˆæ´»åŠ¨åˆ†åŒºï¼‰ã€‚æ‰¾åˆ°ç¡¬ç›˜çš„æ´»åŠ¨åˆ†åŒºä¹‹åï¼Œå¼€å§‹åŠ è½½ç¡¬ç›˜çš„æ´»åŠ¨åˆ†åŒºï¼Œå°†æ§åˆ¶æƒäº¤ç»™æ´»åŠ¨åˆ†åŒºã€‚</p></li><li><p>åŠ è½½åˆ†åŒºå¼•å¯¼è®°å½•PBRï¼š</p><p>è¯»å–æ´»åŠ¨åˆ†åŒºçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œè¿™ä¸ªæ‰‡åŒºç§°ä¸º<strong>åˆ†åŒºå¼•å¯¼è®°å½•(PBR)</strong>ï¼Œå…¶ä½œç”¨æ˜¯å¯»æ‰¾å¹¶æ¿€æ´»åˆ†åŒºæ ¹ç›®å½•ä¸‹ï¼Œç”¨äºå¼•å¯¼æ“ä½œç³»ç»Ÿçš„ç¨‹åºï¼ˆå¯åŠ¨ç®¡ç†å™¨ï¼‰ã€‚</p></li><li><p>åŠ è½½å¯åŠ¨ç®¡ç†å™¨ï¼š</p><p>åˆ†åŒºå¼•å¯¼è®°å½•æœç´¢æ´»åŠ¨åˆ†åŒºä¸­çš„å¯åŠ¨ç®¡ç†å™¨ï¼Œå¹¶åŠ è½½å®ƒã€‚</p></li><li><p>åŠ è½½æ“ä½œç³»ç»Ÿ</p></li></ul><h2 id="1-9-è™šæ‹Ÿæœº">1.9 è™šæ‹Ÿæœº</h2><p>è™šæ‹Ÿæœºæ˜¯ä¸€å°é€»è¾‘è®¡ç®—æœºã€‚é€šè¿‡éšè—ç‰¹ç‚¹è®¡ç®—å¹³å°çš„å®é™…ç‰©ç†ç‰¹æ€§ï¼Œä¸ºç”¨æˆ·æä¾›æŠ½è±¡ã€ç»Ÿä¸€ã€æ¨¡æ‹Ÿçš„è®¡ç®—ç¯å¢ƒã€‚æœ‰ä¸¤ç§è™šæ‹Ÿæ–¹æ³•ã€‚</p><h3 id="1-ç¬¬ä¸€ç±»è™šæ‹Ÿç®¡ç†ç¨‹åº">1 ç¬¬ä¸€ç±»è™šæ‹Ÿç®¡ç†ç¨‹åº</h3><p>è¯¥è™šæ‹Ÿæœºä½œä¸ºç”¨æˆ·æ€æ‰§è¡Œï¼Œä¸å…è®¸ä½¿ç”¨ç‰¹æƒæŒ‡ä»¤ã€‚è€Œè™šæ‹Ÿæœºä¸Šçš„æ“ä½œç³»ç»Ÿè®¤ä¸ºè‡ªå·±æ˜¯åœ¨å†…æ ¸æ€ï¼ˆå®é™…ä¸Šä¸æ˜¯ï¼‰ï¼Œæˆä¸ºè™šæ‹Ÿå†…æ ¸æ€ã€‚</p><p>åœ¨æ”¯æŒè™šæ‹ŸåŒ–çš„CPUä¸Šï¼Œæ‰§è¡Œç‰¹æƒæŒ‡ä»¤æ—¶ï¼Œï¼Œè™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¼šæ£€æµ‹æ˜¯è™šæ‹Ÿæœºä¸­çš„æ“ä½œç³»ç»Ÿæ‰§è¡Œçš„è¿˜æ˜¯è™šæ‹Ÿæœºä¸­çš„ç”¨æˆ·ç¨‹åºæ‰§è¡Œçš„ã€‚å‰è€…ï¼Œä¼šå®‰æ’æ­£å¸¸æ‰§è¡Œï¼›å¦åˆ™ï¼Œè™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¼šæ¨¡æ‹ŸçœŸå®ç¡¬ä»¶ï¼Œé¢å¯¹ç”¨æˆ·ï¼Œæ¨¡æ‹Ÿæ‰§è¡Œç‰¹æƒæŒ‡ä»¤æ—¶çš„è¡Œä¸ºã€‚</p><h3 id="2-ç¬¬äºŒç±»è™šæ‹Ÿç®¡ç†ç¨‹åº">2 ç¬¬äºŒç±»è™šæ‹Ÿç®¡ç†ç¨‹åº</h3><p>æ˜¯ä¸€ç±»ä¸æ“ä½œç³»ç»Ÿåˆ†é…å’Œè°ƒåº¦èµ„æºçš„ç¨‹åºï¼Œå¾ˆåƒä¸€ä¸ªæ™®é€šçš„è¿›ç¨‹ã€‚ã€‚è¿™ä¸€ç±»ä»ç„¶ä¼ªè£…æˆå…·æœ‰CPUå’Œå„ç§èµ„æºçš„å®Œå¤‡è®¡ç®—æœºã€‚VMwareæ˜¯é¦–ä¸ªåœ¨x86ä¸Šçš„ç¬¬äºŒç±»è™šæ‹Ÿç®¡ç†ç¨‹åºã€‚</p><p>åˆšå¼€å§‹å¯åŠ¨çš„æ—¶å€™ï¼Œè¿™ä¸€ç±»è™šæ‹Ÿç®¡ç†ç¨‹åºåƒä¸€å°åˆšå¯åŠ¨çš„è®¡ç®—æœºé‚£æ ·è¿è½¬ï¼ŒæœŸæœ›æ‰¾åˆ°çš„é©±åŠ¨å™¨å¯ä»¥æ˜¯è™šæ‹Ÿè®¾å¤‡ã€‚ç„¶åå°†æ“ä½œç³»ç»Ÿå®‰è£…åˆ°è™šæ‹Ÿç£ç›˜ä¸Šï¼ˆå®¿ä¸»æ“ä½œç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶ï¼‰ã€‚å®‰è£…å®Œæˆåå³å¯è¿è¡Œã€‚</p><p>æœ‰çš„è¯´æ³•ï¼ŒæŠŠç¬¬ä¸€ç±»æˆä¸º<strong>è£¸é‡‘å±æ¶æ„</strong>ï¼Œç¬¬äºŒç±»ç§°ä¸º<strong>å¯„å±…æ¶æ„</strong>ã€‚</p>    <style>    #refplus, #refplus li{         padding:0;        margin:0;        list-style:none;    }ï¼›    </style>    <script src="https://unpkg.com/@popperjs/core@2"></script>    <script src="https://unpkg.com/tippy.js@6"></script>    <script>    document.querySelectorAll(".refplus-num").forEach((ref) => {        let refid = ref.firstChild.href.replace(location.origin+location.pathname,'');        let refel = document.querySelector(refid);        let refnum = refel.dataset.num;        let ref_content = refel.innerText.replace(`[${refnum}]`,'');        tippy(ref, {            content: ref_content,        });    });    </script>    ]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºçŸ¥è¯† </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆæ­å»ºMateryçš„ä¸€äº›æµç¨‹</title>
      <link href="/2022/04/02/build-matery/"/>
      <url>/2022/04/02/build-matery/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="æµ…è°ˆæ­å»ºmateryçš„ä¸€äº›æµç¨‹"><a href="#æµ…è°ˆæ­å»ºmateryçš„ä¸€äº›æµç¨‹" class="headerlink" title="æµ…è°ˆæ­å»ºmateryçš„ä¸€äº›æµç¨‹"></a>æµ…è°ˆæ­å»ºmateryçš„ä¸€äº›æµç¨‹</h1><p>å¦‚æœä½ éœ€è¦éƒ¨ç½²ä¸€ä¸ªåƒè¿™æ ·çš„åšå®¢ï¼Œè¿™é‡Œå¯ä»¥ä¸ºä½ æ­å»ºåšå®¢æä¾›æµç¨‹ä¸Šçš„å»ºè®®ã€‚</p><p>ä¹˜ç€åˆšæ­å»ºä¸ä¹…ï¼Œæ¥è®°å½•ä¸€ä¸‹æ­å»º<code>hexo-theme-matery</code>çš„ä¸€äº›æµç¨‹</p><h2 id="0ï¼Œä»‹ç»å¼€å‘ç¯å¢ƒ"><a href="#0ï¼Œä»‹ç»å¼€å‘ç¯å¢ƒ" class="headerlink" title="0ï¼Œä»‹ç»å¼€å‘ç¯å¢ƒ"></a>0ï¼Œä»‹ç»å¼€å‘ç¯å¢ƒ</h2><ul><li><p>é•¿å¹´æœªæ›´æ–°çš„è€Win10ï¼Œä»¥åŠæ›´æ–°è¿‡çš„vscode</p></li><li><p>è¿™é‡Œå»ºè®®å‚è€ƒä»¥ä¸‹å‡ ä¸ªé“¾æ¥ä¸€èµ·çœ‹</p><ul><li><a href="https://www.bilibili.com/video/BV1Yb411a7ty">https://www.bilibili.com/video/BV1Yb411a7ty</a></li><li><a href="https://godweiyang.com/2018/04/13/hexo-blog/">https://godweiyang.com/2018/04/13/hexo-blog/</a></li><li><a href="https://www.matemaster.cn/posts/52745.html">https://www.matemaster.cn/posts/52745.html</a></li></ul></li></ul><h2 id="1ï¼Œæ­å»ºnode-jsç­‰ç­‰åˆæ­¥å·¥ä½œç¯å¢ƒ"><a href="#1ï¼Œæ­å»ºnode-jsç­‰ç­‰åˆæ­¥å·¥ä½œç¯å¢ƒ" class="headerlink" title="1ï¼Œæ­å»ºnode.jsç­‰ç­‰åˆæ­¥å·¥ä½œç¯å¢ƒ"></a>1ï¼Œæ­å»ºnode.jsç­‰ç­‰åˆæ­¥å·¥ä½œç¯å¢ƒ</h2><p>å…ˆå»å®˜ç½‘ä¸‹è½½<a href="https://nodejs.org/en/">node.js</a>ï¼Œé€‰æ‹©ç¨³å®šç‰ˆå³å¯</p><p><img src="https://s2.loli.net/2022/04/03/dOYo2q4nPvJhrcl.png"></p><p>ä¸€è·¯é»˜è®¤å®‰è£…å³å¯ã€‚è£…å®Œä¼šæœ‰ä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯node.jsæœ¬èº«ï¼Œä¸€ä¸ªæ˜¯npmç»„ä»¶ã€‚</p><ul><li>è‡ªå·±æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä»¥åçš„ç½‘é¡µä»£ç å…¨æ”¾åœ¨é‡Œé¢ï¼Œæˆ‘çš„æ˜¯åœ¨d:/tuoyou-hao</li><li>ç”¨vscodeæ‰“å¼€è¿™ä¸ªæ–‡ä»¶å¤¹ï¼ˆæˆ–è€…ä½ ç”¨å‘½ä»¤è¡Œ cd è¿›å» ä¹Ÿå¯ä»¥ï¼‰ï¼Œåœ¨vscodeæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤</li></ul><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">&gt; node <span class="token operator">-</span>vv16<span class="token punctuation">.</span>14<span class="token punctuation">.</span>2&gt; npm <span class="token operator">-</span>v8<span class="token punctuation">.</span>5<span class="token punctuation">.</span>0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºnpmä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œæˆ‘ä»¬å¯ä»¥é€‰ç”¨æ·˜å®çš„æºä¸‹è½½ã€‚ã€æ³¨ï¼šæ·˜å®æºå·²ç»å¤±æ•ˆï¼Œéœ€è¦è‡ªè¡Œæœç´¢åˆ«çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨å®˜æ–¹æºã€‘</p><p>æˆ‘ä»¬ç”¨npmä¸‹è½½cnpmï¼š</p><p><code> &gt; npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p><p>ä¸‹è½½å®Œæˆåï¼Œè¾“å…¥<code>cnpm -v</code>æ£€æŸ¥ä¸€ä¸‹ï¼Œè¾“å‡ºä¸‹åˆ—å†…å®¹å³ä¸ºæ­£å¸¸</p><p><img src="https://s2.loli.net/2022/04/03/WDuRxhQiZV1w9IN.png"></p><p>ç„¶åæˆ‘ä»¬å¼€å§‹å®‰è£…hexo</p><pre class="line-numbers language-none"><code class="language-none">&gt; cnpm install -g hexo-cli &gt; hexo -vINFO  Validating confighexo: 6.1.0hexo-cli: 4.3.0os: win32 10.0.17134node: 16.14.2v8: 9.4.146.24-node.20uv: 1.43.0zlib: 1.2.11brotli: 1.0.9ares: 1.18.1modules: 93nghttp2: 1.45.1napi: 8llhttp: 6.0.4openssl: 1.1.1n+quiccldr: 40.0icu: 70.1tz: 2021a3unicode: 14.0ngtcp2: 0.1.0-DEVnghttp3: 0.1.0-DEV# æ˜¾ç¤ºå¦‚ä¸Šå†…å®¹ï¼Œhexoå°±æ˜¯æ­£å¸¸çš„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ <code>hexo init</code></p><p>hexoä¼šä¸ºä½ ç”Ÿæˆå¾ˆå¤šæ–‡ä»¶ï¼Œç„¶åä¸‹è½½å¹¶é…ç½®ä¸€ä¸ªé»˜è®¤ä¸»é¢˜ï¼ˆåœ¨themeæ–‡ä»¶å¤¹ï¼‰</p><p>é…ç½®å®Œæˆåï¼Œå‘½ä»¤è¡Œè¾“å…¥<code>hexo s</code>å³å¯åœ¨æœ¬åœ°localhost:4000çœ‹åˆ°hexoç»™ä½ ç”Ÿæˆçš„ç½‘é¡µ</p><p>è¿›å…¥\source\_postsæ–‡ä»¶å¤¹åº•ä¸‹ï¼Œå°±æ˜¯å­˜æ”¾ä½ çš„åšå®¢çš„åœ°æ–¹ï¼Œä½¿ç”¨markdownæ ¼å¼ç¼–å†™ã€‚</p><p>ç¡®è®¤å®Œæ¯•ä»¥åï¼Œå…ˆå»ç”³è¯·ä¸€ä¸ªæ–°çš„GitHubä»“åº“</p><p>ä¼šè®©ä½ å¡«å†™è‡ªå·±GitHubçš„åœ°å€ã€‚æ­¤æ—¶éœ€è¦ç”³è¯·è‡ªå·±çš„GitHubï¼Œå¹¶å°†ä»“åº“å‘½åä¸º&lt;ä½ çš„GitHubåå­—&gt;.github.io</p><ul><li><p>æ¯”å¦‚æˆ‘çš„GitHubåå­—å«tuoyou-haoï¼Œåˆ›å»ºçš„æ–°ä»“åº“å°±å«åšâ€œtuoyou-hao.github.ioâ€ã€‚<strong>å¿…é¡»ç¬¦åˆè¯¥å‘½åæ ¼å¼</strong>ï¼</p><p>åˆ›å»ºå®Œè¯¥ä»“åº“å³å¯ï¼Œæ— éœ€è¿›è¡Œå…¶ä»–æ“ä½œ</p></li><li><p>å»é…ç½®GitHubçš„ssh keyï¼Œå»ºç«‹sshé“¾æ¥ï¼Œå…·ä½“æ­¥éª¤å‚è€ƒï¼š<a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account">https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account</a></p></li></ul><p>é…ç½®å®Œæ¯•åï¼Œæ‰§è¡Œè¯¥æŒ‡ä»¤ï¼Œä¸‹è½½GitHubæ¨é€å·¥å…·</p><p><code>cnpm install --save hexo-deployer-git</code></p><p>ç„¶åä¿®æ”¹æ ¹ç›®å½•ä¸‹<code>_config.yml</code>é‡Œå¤´çš„é…ç½®ï¼Œæ‰¾åˆ°deployé€‰ä¿®</p><pre class="line-numbers language-none"><code class="language-none">deploy:- type: git  repository: git@github.com:xxx/xxx.github.io.git #å¡«ä½ çš„ä»“åº“å  branch: master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæ‰§è¡ŒhexoæŒ‡ä»¤ã€‚å‘½ä»¤è¡Œå¸¸ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š</p><pre class="line-numbers language-none"><code class="language-none">hexo clean #æ¸…ç†æœ¬åœ°ç”Ÿæˆæ–‡ä»¶hexo g  # ç”Ÿæˆåšå®¢ç½‘é¡µæ–‡ä»¶hexo s  # æœ¬åœ°é¢„è§ˆåšå®¢hexo d  # ä¸Šä¼ ç½‘é¡µæ–‡ä»¶åˆ°github<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>hexo då®Œæ¯•ä»¥åï¼Œè¿›å…¥ä½ xxx.gihub.ioç½‘ç«™ï¼Œå³å¯æŸ¥çœ‹åˆ°ä½ éƒ¨ç½²çš„ç½‘é¡µï¼ˆä¼šæœ‰å‡ åˆ†é’Ÿçš„å»¶è¿Ÿï¼‰</p><h2 id="2ï¼Œé…ç½®matery"><a href="#2ï¼Œé…ç½®matery" class="headerlink" title="2ï¼Œé…ç½®matery"></a>2ï¼Œé…ç½®matery</h2><ul><li><p>git cloneè¯¥é“¾æ¥åˆ°themesæ–‡ä»¶å¤¹ï¼š<a href="https://github.com/blinkfox/hexo-theme-matery">https://github.com/blinkfox/hexo-theme-matery</a></p></li><li><p>å¹¶æŠŠæ ¹ç›®å½•ä¸‹<code>_config.yml</code>æ–‡ä»¶é‡Œçš„themeå‚æ•°æ”¹æˆä½ cloneçš„æ–‡ä»¶å¤¹åå­—ï¼ˆæˆ‘è‡ªå·±é‡å‘½åå«materyï¼Œthemeå‚æ•°ä¹Ÿè¦å«materyï¼‰</p></li><li><p>åœ¨materyä¸»é¢˜æ–‡ä»¶å¤¹é‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ª<code>_config.yml</code>æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>README_CN.md</code>æ–‡ä»¶ï¼Œè¯·ä½ ä¸€å®šè¦è®¤çœŸä»”ç»†çœ‹é‚£ä»½æ–‡ä»¶ï¼Œéœ€è¦æ ¹æ®é‚£ä»½æ–‡ä»¶ä¸‹è½½å„ç§ä¾èµ–ã€‚ä¸‹è½½å®Œæˆåï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦å»é…ç½®</p></li><li><p>é…ç½®å®Œæˆå°±å‘å¸ƒåˆ°è‡ªå·±çš„GitHubä»“åº“å§</p></li></ul><h2 id="3ï¼Œç™¾åº¦æ¨é€"><a href="#3ï¼Œç™¾åº¦æ¨é€" class="headerlink" title="3ï¼Œç™¾åº¦æ¨é€"></a>3ï¼Œç™¾åº¦æ¨é€</h2><p>åœ¨ç™¾åº¦æ¨é€ä¸Šï¼Œå»ºè®®å‚è€ƒï¼š<a href="https://ziyuan.baidu.com/college/courseinfo?id=267&amp;page=1">https://ziyuan.baidu.com/college/courseinfo?id=267&amp;page=1</a></p><p>ç™»å½•è¯¥ç½‘ç«™ï¼š<a href="https://ziyuan.baidu.com/">https://ziyuan.baidu.com/</a></p><p>ç™»å½•æˆåŠŸåï¼Œåœ¨ç”¨æˆ·ä¸­å¿ƒ-&gt;ç«™ç‚¹ç®¡ç†-&gt;æ·»åŠ ç½‘ç«™æ“ä½œ </p><p>ç„¶åå¦‚ä½•å¯»æ‰¾tokenå‘¢ï¼Œtoken=ç§˜é’¥ï¼š</p><p><img src="https://s2.loli.net/2022/04/03/j4m8YTUfV29Dei3.jpg"></p><p>å…¶ä¸­materyå†…ç½®äº†æ¨é€åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦å†™å¥½å‚æ•°å³å¯ã€‚</p><pre class="line-numbers language-none"><code class="language-none">deploy:- type: git  repository: git@github.com:xxx/xxx.github.io.git  branch: master- type: baidu_url_submitter #è®°å¾—åœ¨deployä¸‹é…ç½®è¿™ä¸€å¥baidu_url_submit:  count: 20 # æäº¤æœ€æ–°çš„ä¸€ä¸ªé“¾æ¥  host: https://xxx.github.io # åœ¨ç™¾åº¦èµ„æºæœç´¢å¹³å°ä¸­æ³¨å†Œçš„åŸŸå  token: xxxxxxx # è¯·æ³¨æ„è¿™æ˜¯æ¨é€ç§˜é’¥ï¼Œ æ‰€ä»¥è¯·ä¸è¦æŠŠåšå®¢æºä»£ç å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ!  path: baidu_urls.txt # æ–‡æœ¬æ–‡æ¡£çš„åœ°å€ï¼Œ æ–°é“¾æ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4ï¼Œ-é…ç½®è¯„è®ºæ§ä»¶"><a href="#4ï¼Œ-é…ç½®è¯„è®ºæ§ä»¶" class="headerlink" title="4ï¼Œ é…ç½®è¯„è®ºæ§ä»¶"></a>4ï¼Œ é…ç½®è¯„è®ºæ§ä»¶</h2><p>é¦–å…ˆï¼Œåœ¨materyåº•ä¸‹ï¼Œå°†jsåº•ä¸‹çš„twikooæ›´æ–°è‡³æœ€æ–°ç‰ˆ</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">js</span><span class="token punctuation">:</span><span class="token key atrule">twikoo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://twikoo.js.org/quick-start.html#%E4%BA%91%E5%87%BD%E6%95%B0%E9%83%A8%E7%BD%B2">https://twikoo.js.org/quick-start.html#%E4%BA%91%E5%87%BD%E6%95%B0%E9%83%A8%E7%BD%B2</a></p><ol><li><p>ç”³è¯· <a href="https://www.mongodb.com/cloud/atlas/register">MongoDB (opens new window)</a>è´¦å·</p></li><li><p>åˆ›å»ºå…è´¹ MongoDB æ•°æ®åº“ï¼ŒåŒºåŸŸæ¨èé€‰æ‹© <code>AWS / N. Virginia (us-east-1)</code></p></li><li><p>åœ¨ Clusters é¡µé¢ç‚¹å‡» CONNECTï¼ŒæŒ‰æ­¥éª¤è®¾ç½®å…è®¸æ‰€æœ‰ IP åœ°å€çš„è¿æ¥ï¼ˆ<a href="https://vercel.com/support/articles/how-to-allowlist-deployment-ip-address">ä¸ºä»€ä¹ˆï¼Ÿ (opens new window)</a>ï¼‰ï¼Œåˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼Œé€‰æ‹©connectï¼Œä¸€å®šè¦é€‰æ‹©é“¾æ¥æ‚¨çš„åº”ç”¨ï¼Œé‚£ä¸ªæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²æ‰æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œè¯·å°†è¿æ¥å­—ç¬¦ä¸²ä¸­çš„ <code>password</code> ä¿®æ”¹ä¸ºæ•°æ®åº“å¯†ç </p><p><img src="https://s2.loli.net/2022/04/03/kLJfdnUmFrqZleC.png"></p><p><img src="https://s2.loli.net/2022/04/03/jmieJ9aAYcXLISO.png"></p></li><li><p>ç”³è¯· <a href="https://vercel.com/signup">Vercel (opens new window)</a>è´¦å·</p></li><li><p>è¿›å…¥ä»¥ä¸‹ç½‘å€æŠŠ Twikoo ä¸€é”®éƒ¨ç½²åˆ° Vercel<br><a href="https://vercel.com/import/project?template=https://github.com/imaegoo/twikoo/tree/dev/src/vercel-min">https://vercel.com/import/project?template=https://github.com/imaegoo/twikoo/tree/dev/src/vercel-min</a></p></li><li><p>è¿›å…¥ Settings - Environment Variablesï¼Œæ·»åŠ ç¯å¢ƒå˜é‡ <code>MONGODB_URI</code>ï¼Œå€¼ä¸ºç¬¬ 3 æ­¥çš„æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²</p></li><li><p>è¿›å…¥ Overviewï¼Œç‚¹å‡» Domains ä¸‹æ–¹çš„é“¾æ¥ï¼Œå¦‚æœç¯å¢ƒé…ç½®æ­£ç¡®ï¼Œå¯ä»¥çœ‹åˆ° â€œTwikoo äº‘å‡½æ•°è¿è¡Œæ­£å¸¸â€ çš„æç¤º</p></li><li><p>Vercel Domainsï¼ˆåŒ…å« <code>https://</code> å‰ç¼€ï¼Œä¾‹å¦‚ <code>https://xxx.vercel.app</code>ï¼‰æ•´ä¸ªç½‘å€å³ä¸ºæ‚¨çš„ç¯å¢ƒ id</p></li><li><p>æŠŠç½‘å€è´´è¿›ä¸»é¢˜çš„_config.ymlé‡Œå¤´å¯¹åº”çš„twikooçš„envIdï¼Œå¹¶å¯ç”¨twikooåŠŸèƒ½ã€‚</p></li></ol><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">twikoo</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">envId</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xxxx.app <span class="token comment">#æ­å»ºæ•™ç¨‹ï¼šhttps://twikoo.js.org/quick-start.html</span>  <span class="token comment"># region: ap-guangzhou # ç¯å¢ƒåœ°åŸŸï¼Œé»˜è®¤ä¸º ap-shanghai</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">'window.location.pathname'</span> <span class="token comment"># è‡ªå®šä¹‰æ–‡ç« è·¯å¾„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœéœ€è¦æœ€æ–°çš„ Twikoo äº‘å‡½æ•°éƒ¨ç½²æ–¹æ³•ï¼Œè¯·å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š<a href="https://twikoo.js.org/backend.html#vercel-%E9%83%A8%E7%BD%B2">Twikoo æ–‡æ¡£</a></p><h2 id="5ï¼Œ-é…ç½®å›¾åƒä¸Šä¼ "><a href="#5ï¼Œ-é…ç½®å›¾åƒä¸Šä¼ " class="headerlink" title="5ï¼Œ é…ç½®å›¾åƒä¸Šä¼ "></a>5ï¼Œ é…ç½®å›¾åƒä¸Šä¼ </h2><p>åœ¨å†™æœ¬ç¯‡åšå®¢çš„æ—¶å€™ï¼Œå½“æˆ‘æ¨é€ä¸Šæ¥çš„æ—¶å€™ï¼Œæ„å¤–çš„å‘ç°æ–‡ç« çš„å›¾ç‰‡è¿Ÿè¿Ÿè¯»å–ä¸äº†ï¼Œæµ‹è¯•è¿‡ä»¥ä¸‹æŒ‡ä»¤ï¼Œåè€Œæœ¬åœ°localhostä¹Ÿè¯»å–ä¸äº†äº†<br><code>cnpm install https://github.com/CodeFalling/hexo-asset-image â€“save</code></p><p>ç”±äºæˆ‘å¹¶éå‰ç«¯å·¥ä½œè€…ï¼Œå¯¹è¿™æ–¹é¢çŸ¥è¯†è¿˜æ˜¯æ¯”è¾ƒåŒ®ä¹ï¼Œä½ ä»¬å¯ä»¥å‚è€ƒè¿™ä¸ªæ•™ç¨‹çš„è§£å†³æ–¹æ³•ï¼š<br><a href="https://www.cnblogs.com/hugochen1024/p/12570656.html">https://www.cnblogs.com/hugochen1024/p/12570656.html</a></p><p>æˆ‘è‡ªå·±æ˜¯æ³¨å†Œ<code>SM.MS</code>ç½‘ç«™ï¼Œé“¾æ¥ï¼š<a href="https://sm.ms/">https://sm.ms/</a><br>åœ¨è¯¥ç½‘ç«™ä¸Šä¼ å›¾ç‰‡ï¼Œç½‘ç«™ä¼šç»™ä½ ä¸€ä¸ªé“¾æ¥ï¼Œå¯¼å…¥è¯¥é“¾æ¥çš„å›¾ç‰‡å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> Matrey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€Ÿå…¥é—¨Makefile(æ–°æ‰‹å‘)</title>
      <link href="/2022/03/31/Makefile-quick-get-start/"/>
      <url>/2022/03/31/Makefile-quick-get-start/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>å¿«é€Ÿå…¥é—¨Makefile(æ–°æ‰‹å‘)</h1><h2 id="1ã€ä»€ä¹ˆæ˜¯Makefile">1ã€ä»€ä¹ˆæ˜¯Makefile</h2><p>â€‹ç‰¹åˆ«æ˜¯åœ¨ Unix ä¸‹çš„è½¯ä»¶ç¼–è¯‘ï¼Œå¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå¤§å‹çš„å·¥ç¨‹ï¼Œä½ å°±ä¸èƒ½ä¸è‡ªå·±å†™Makefileäº†ã€‚</p><p>â€‹å› ä¸ºï¼ŒMakefileå…³ç³»åˆ°äº†æ•´ä¸ªä»£ç å·¥ç¨‹çš„ç¼–è¯‘è§„åˆ™ã€‚ä¸€ä¸ªå·¥ç¨‹ä¸­çš„æºæ–‡ä»¶ä¸è®¡æ•°ï¼ŒæŒ‰ç±»å‹ã€åŠŸèƒ½ã€æ¨¡å—åˆ†åˆ«æ”¾åœ¨è‹¥å¹²ä¸ªç›®å½•ä¸­ï¼ŒMakefileå®šä¹‰äº†ä¸€ç³»åˆ—çš„è§„åˆ™æ¥æŒ‡å®šï¼šå“ªäº›æ–‡ä»¶éœ€è¦å…ˆç¼–è¯‘ï¼Œå“ªäº›æ–‡ä»¶éœ€è¦åç¼–è¯‘ï¼Œå“ªäº›æ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œç”šè‡³è¿›è¡Œå…¶ä»–æ›´åŠ å¤æ‚çš„æ“ä½œã€‚Makefileå°±åƒä¸€ä¸ª Shell è„šæœ¬ä¸€æ ·ï¼Œå…¶ä¸­ä¹Ÿå¯ä»¥æ‰§è¡Œæ“ä½œç³»ç»Ÿçš„å‘½ä»¤ã€‚</p><p>â€‹Makefileå¸¦æ¥çš„å¥½å¤„å°±æ˜¯â€”â€”â€œè‡ªåŠ¨åŒ–ç¼–è¯‘â€ï¼Œä¸€æ—¦ä½ å†™å¥½äº†Makefileï¼Œåªéœ€è¦ä¸€ä¸ª<code>make </code>å‘½ä»¤ï¼Œæ•´ä¸ªå·¥ç¨‹å°±ä¼šå®Œå…¨è‡ªåŠ¨ç¼–è¯‘ï¼Œæå¤§çš„æé«˜äº†è½¯ä»¶å¼€å‘æ•ˆç‡ã€‚</p><p>â€‹åœ¨æˆ‘è¿˜åˆšæ¥è§¦Makefileçš„æ—¶å€™ï¼Œæˆ‘å¸¸å¸¸è‹¦æ¼äºæ‰¾ä¸åˆ°æ˜“è¯»å¥½æ‡‚çš„Makefileæ•™ç¨‹ã€‚æœ¬ç¯‡ä»…ä»…å¿«é€Ÿæè¿°ä¸€ä¸ªç®€å•çš„Makefileåº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œä»‹ç»ä¸€äº›åŸºæœ¬çš„æŒ‡ä»¤å’Œè¯­æ³•ï¼Œä¾¿äºå¿«é€Ÿç†Ÿæ‚‰ç›¸å…³çš„æŒ‡ä»¤ã€‚</p><h2 id="2ã€Makefileçš„ä¸€äº›åŸºæœ¬è§„åˆ™">2ã€Makefileçš„ä¸€äº›åŸºæœ¬è§„åˆ™</h2><ul><li>æœ¬ç¯‡å°†ä»¥Cè¯­è¨€çš„æºç ä¸ºåŸºç¡€ï¼Œé»˜è®¤ä½¿ç”¨gccç¼–è¯‘å™¨ï¼Œéœ€è¦æœ‰ç›¸å…³çš„å‰ç½®çŸ¥è¯†</li></ul><p>make å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œéœ€è¦ä¸€ä¸ªMakefileæ–‡ä»¶ï¼Œä»¥å‘Šè¯‰ make å‘½ä»¤éœ€è¦æ€ä¹ˆæ ·çš„å»ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚ æ–‡ä»¶ååªèƒ½ç”¨makefileã€Makefileæˆ–è€…GNUmakefile ã€‚æœ€å¸¸ç”¨çš„æ˜¯<code>makefile</code>ã€<code>Makefile</code>ã€‚</p><p>(å¦‚æœä½ éè¦ä½¿ç”¨åˆ«çš„åå­—æ¥å‘½åMakefileï¼Œéœ€è¦ä½¿ç”¨æŒ‡ä»¤makeååŠ å‚æ•°<code>-f</code>/<code>--file</code>ï¼Œå¦‚ <code>make -f your_makefile_name.md</code> )</p><ul><li>Makefile çš„åŸºæœ¬è§„åˆ™ã€‚<ul><li>å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰ C æ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚</li><li>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ª C æ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªä¼šç¼–è¯‘è¢«ä¿®æ”¹çš„ C æ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</li><li>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„ C æ–‡ä»¶ï¼Œ å¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</li></ul></li></ul><h2 id="3ã€Makefileç¼–å†™">3ã€Makefileç¼–å†™</h2><h3 id="3-1-æ¥å†™ä¸€ä¸ªæœ€ç®€å•çš„Makefile">3.1 æ¥å†™ä¸€ä¸ªæœ€ç®€å•çš„Makefile</h3><p>æˆ‘ä»¬æ¥çœ‹è¿™ä¸€æ®µä»£ç <code>a.c</code></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//a.c</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éå¸¸ç®€å•ã€‚åŠ å…¥æˆ‘ä»¬è¦åœ¨Linuxä¸‹ç¼–è¯‘è¿è¡Œï¼Œåº”è¯¥è¦æ€ä¹ˆåš</p><p>æ˜¯çš„ï¼Œåœ¨shellä¸­ä½¿ç”¨gccç¼–è¯‘ï¼Œç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ç›´æ¥æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶å°±ä¼šæ˜¾ç¤ºâ€œHello Worrldâ€</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">gcc a.c -o a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæˆ‘è¦åœ¨Makefileé‡Œé¢ç¼–è¯‘è¿™ä¸ªa.cçš„ä»£ç ï¼Œåº”è¯¥æ€ä¹ˆå†™ï¼Ÿ</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile"><span class="token target symbol">a</span><span class="token punctuation">:</span>a.cgcc a.c -o a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœä½ æŸ¥é˜…è¿‡å’ŒMakefileç›¸å…³çš„èµ„æ–™ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°è¿™æ®µæ–‡å­—</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile"><span class="token target symbol">target ...</span> <span class="token punctuation">:</span> prerequisites ...              command              ...              ...  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä½ å¯ä»¥å¯¹ç…§ä¸Šé¢ç¼–è¯‘a.cçš„Makefileä»£ç æ¥çœ‹ã€‚</p><ul><li><p>target ä¹Ÿå°±æ˜¯ç›®æ ‡æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ Object Fileï¼Œä¹Ÿå¯ä»¥æ˜¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ¯”å¦‚a.cç”Ÿæˆçš„ a å¯æ‰§è¡Œæ–‡ä»¶ï¼‰ã€‚è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œæ ‡ç­¾æœ¬ç« æš‚ä¸ä»‹ç»ï¼Œåç»­çš„åšå®¢å†åšä»‹ç»ã€‚</p></li><li><p>prerequisites å°±æ˜¯ï¼Œè¦ç”Ÿæˆé‚£ä¸ª target æ‰€éœ€è¦çš„æ–‡ä»¶æˆ–æ˜¯ç›®æ ‡ã€‚ (a å¯æ‰§è¡Œæ–‡ä»¶çš„ç”Ÿæˆéœ€è¦ä¾èµ–äº a.c)</p></li><li><p>command ä¹Ÿå°±æ˜¯ make éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚ï¼ˆä»»æ„çš„ Shell å‘½ä»¤ï¼Œæ¯”å¦‚è°ƒç”¨gccï¼‰</p></li></ul><p>è€Œä»‹ç»å®ŒåŸºæœ¬è¯­å¥ï¼Œæˆ‘ä»¬å°±å¾—å›å¤´æ¥çœ‹ä¸€ä¸‹makeçš„å·¥ä½œæ–¹å¼ã€‚</p><h3 id="3-2-makeçš„å·¥ä½œæ–¹å¼">3.2 makeçš„å·¥ä½œæ–¹å¼</h3><p>è¿™æ®µæ–‡å­—æ”¾åœ¨è¿™é‡Œæˆ‘è®¤ä¸ºæ‰æœ‰ä¾¿äºç†è§£</p><p>åœ¨é»˜è®¤çš„æ–¹å¼ä¸‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åªè¾“å…¥ make å‘½ä»¤ã€‚é‚£ä¹ˆï¼š</p><ol><li><p>make ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ‰¾åå­—å«â€œMakefileâ€æˆ–â€œmakefileâ€çš„æ–‡ä»¶ã€‚</p></li><li><p>å¦‚æœæ‰¾åˆ°ï¼Œå®ƒä¼šæ‰¾æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼ˆtargetï¼‰</p><p>æ¯”å¦‚ä¸‹é¢è¿™æ®µMakefileï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å…ˆæŠŠ *.c æ–‡ä»¶å…ˆç¼–è¯‘æˆ *.o æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸€æ­¥åˆ°ä½çš„ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥å°†ä¸Šé¢<code>gcc a.c -o a</code>çš„æ­¥éª¤æ‹†åˆ†æˆä»¥ä¸‹ä¸¤å¥ï¼š</p></li></ol><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile"><span class="token target symbol">a</span><span class="token punctuation">:</span>a.ogcc a.o -o a<span class="token target symbol">a.o</span><span class="token punctuation">:</span>a.cgcc -c a.c -o a.o<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â€‹Makefileä¼šå…ˆæ‰¾åˆ° â€œaâ€ è¿™ä¸ªç›®æ ‡ï¼Œå¹¶æŠŠè¿™ä¸ªæ–‡ä»¶ä½œä¸ºæœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶ã€‚å…¶ä½™çš„å„é¡¹ä¾èµ–æ–‡ä»¶å¾—å†™åœ¨åé¢ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è¦ä»‹ç»çš„ï¼š</p><ol start="3"><li><p>å¦‚æœ a è¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–æ˜¯ a æ‰€ä¾èµ–çš„åé¢çš„ [*.o] æ–‡ä»¶çš„æ–‡ä»¶ä¿®æ”¹æ—¶é—´è¦æ¯” a è¿™ä¸ªæ–‡ä»¶æ–°ï¼Œé‚£ä¹ˆï¼Œä»–å°±ä¼šæ‰§è¡Œåé¢æ‰€å®šä¹‰çš„å‘½ä»¤ï¼Œä»¥æ­¤ç”Ÿæˆ a è¿™ä¸ªæ–‡ä»¶ã€‚</p></li><li><p>å¦‚æœ a æ‰€ä¾èµ–çš„ *.o æ–‡ä»¶ä¹Ÿå­˜åœ¨ï¼Œé‚£ä¹ˆ make ä¼šåœ¨å½“å‰æ–‡ä»¶ä¸­æ‰¾ç›®æ ‡ä¸º *.o æ–‡ä»¶çš„ä¾èµ–æ€§ï¼Œå¦‚æœæ‰¾åˆ°åˆ™å†æ ¹æ®é‚£ä¸€ä¸ªè§„åˆ™ç”Ÿæˆ *.o æ–‡ä»¶ã€‚ï¼ˆæœ‰ç‚¹åƒä¸€ä¸ªå †æ ˆçš„è¿‡ç¨‹ï¼‰</p></li><li><p>å½“ç„¶ï¼Œä½ çš„ C æ–‡ä»¶å’Œ H æ–‡ä»¶ç­‰ç­‰ä¾èµ–æ–‡ä»¶æ˜¯å­˜åœ¨çš„ï¼Œäºæ˜¯ make ä¼šç”Ÿæˆ *.o æ–‡ä»¶ï¼Œç„¶åå†ç”¨ *.o  æ–‡ä»¶å®Œæˆmake çš„ç»ˆæä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶ a äº†ã€‚</p></li></ol><p>å¹¶ä¸”å’Œä¸Šä¸€æ¬¡çš„å•ä¸ªè¯­å¥ç¼–è¯‘ä¸åŒï¼Œæˆ‘ä»¬åŒæ—¶è¿˜èƒ½è·å¾— a.o çš„æ–‡ä»¶</p><h3 id="3-3-å¤šä¸ªæ–‡ä»¶ç¼–è¯‘">3.3 å¤šä¸ªæ–‡ä»¶ç¼–è¯‘</h3><p>ä½ ç°åœ¨æœ‰ä¸€ä¸ªå¤§å·¥ç¨‹ä»£ç çš„mainä»£ç ï¼Œæ˜¯ä¸€ä¸ªè®¡ç®—å™¨ï¼Œå‡è®¾ä½ æ˜¯è¿™æ ·ç¼–å†™çš„ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d+%d=%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d-%d=%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">sub</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d*%d=%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">mul</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//main.c</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼ŒåŠ æ³•ï¼Œå‡æ³•ï¼Œä¹˜æ³•çš„å‡½æ•°å†™åœ¨å…¶ä»–çš„æ–‡ä»¶é‡Œé¢ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//add.c</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//sub.c</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">*</span>b<span class="token punctuation">}</span><span class="token comment">//mul.c</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶æˆ‘ä»¬Makefileå°±å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile"><span class="token target symbol">cal</span><span class="token punctuation">:</span>main.o add.o sub.o mul.ogcc main.o add.o sub.o mul.o -o cal<span class="token target symbol">main.o</span><span class="token punctuation">:</span>main.cgcc -c main.c -o main.o<span class="token target symbol">add.o</span><span class="token punctuation">:</span>add.cgcc -c add.c -o add.o<span class="token target symbol">sub.o</span><span class="token punctuation">:</span>sub.cgcc -c sub.c -o sub.o<span class="token target symbol">mul.o</span><span class="token punctuation">:</span>mul.cgcc -c mul.c -o mul.o<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å…¶ä¸­ cal æ–‡ä»¶éœ€è¦<code>main.o add.o sub.o mul.o</code>ï¼Œè€Œæˆ‘ä»¬å„ä¸ª *.o æ–‡ä»¶éœ€è¦ç”±å„è‡ªçš„ *.c æ–‡ä»¶ç¼–è¯‘è€Œæˆã€‚</p><p>è®°ä½ä¸Šé¢è¿™æ®µmakefileçš„æ ·å­ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šä»‹ç»å¾ˆå¤šç§æ–¹æ³•ï¼Œç®€åŒ–ä¸Šé¢è¿™æ®µmakefileã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬è¿˜å¯ä»¥å†™æˆè¿™ç§å½¢å¼ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†ï¼š</p></li></ul><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile"><span class="token target symbol">ALL</span><span class="token punctuation">:</span>cal<span class="token target symbol">main.o</span><span class="token punctuation">:</span>main.cgcc -c main.c -o main.o<span class="token target symbol">add.o</span><span class="token punctuation">:</span>add.cgcc -c add.c -o add.o<span class="token target symbol">sub.o</span><span class="token punctuation">:</span>sub.cgcc -c sub.c -o sub.o<span class="token target symbol">mul.o</span><span class="token punctuation">:</span>mul.cgcc -c mul.c -o mul.o<span class="token target symbol">cal</span><span class="token punctuation">:</span>main.o add.o sub.o mul.ogcc main.o add.o sub.o mul.o -o cal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†æ˜¯å¦‚æœåç»­æˆ‘éœ€è¦åŠ å…¥ä¸€ä¸ªé™¤æ³•åŠŸèƒ½ï¼Œæˆ–è€…è¿˜è¦åŠ å…¥å…¶ä»–è®¡ç®—åŠŸèƒ½ï¼Œå°±éœ€è¦ä¸æ–­åœ°é‡å†™Makefileï¼Œå²‚ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Œäºæ˜¯æˆ‘ä»¬å¼•å…¥ï¼š</p><h3 id="3-4-å˜é‡">3.4 å˜é‡</h3><p>åœ¨makefileä¸­ï¼Œå˜é‡å£°æ˜çš„æ—¶å€™éœ€è¦èµ‹åˆå€¼ã€‚ä½¿ç”¨çš„æ—¶å€™åœ¨å˜é‡åå‰é¢åŠ ä¸Š<code>$</code>å·ã€‚ç”¨å°æ‹¬å·æˆ–å¤§æ‹¬å·æ‹¬èµ·æ¥</p><p>(å¦‚æœä½ è¦ä½¿ç”¨çœŸå®çš„â€œ$â€å­—ç¬¦ï¼Œé‚£ä¹ˆä½ éœ€è¦ç”¨ â€œ$$â€ æ¥è¡¨ç¤º)</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ALL:calmain.o:main.cgcc -c main.c -o main.oadd.o:add.cgcc -c add.c -o add.osub.o:sub.cgcc -c sub.c -o sub.omul.o:mul.cgcc -c mul.c -o mul.oobjects=main.o add.o sub.o mul.ocal:$(objects)gcc main.o add.o sub.o mul.o -o cal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æŠŠ<code>main.o add.o sub.o mul.o</code>å…¨éƒ¨æ”¾åœ¨<code>objects</code>å˜é‡åº•ä¸‹ï¼Œä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥ç”¨<code>$(objects)</code>æŠŠé‡Œé¢å­˜çš„å„ç§å˜é‡æ‹¿æ¥ç¼–è¯‘äº†ã€‚å˜é‡æ˜¯å¯ä»¥åµŒå¥—ä½¿ç”¨çš„ï¼Œæ¯”å¦‚ï¼š</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile">x <span class="token operator">=</span> y y <span class="token operator">=</span> z a <span class="token operator">:=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token variable">$</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œ := æ˜¯èµ‹å€¼çš„æ„æ€ï¼Œå¦ä¸€ç§ç”¨å˜é‡æ¥å®šä¹‰å˜é‡çš„æ–¹æ³•ï¼Œå’Œ = çš„åŒºåˆ«å°±æ˜¯ï¼Œå‰é¢çš„å˜é‡ä¸èƒ½ä½¿ç”¨åé¢çš„å˜é‡ï¼Œåªèƒ½ä½¿ç”¨å‰é¢å·²å®šä¹‰å¥½äº†çš„å˜é‡ã€‚è¿™é‡Œçš„ a é‡Œå¤´å­˜çš„å°±æ˜¯ z ã€‚</p><p>æœ‰äº†å˜é‡è¿™ä¸ªå¥½ä¸œè¥¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ï¼š</p><h3 id="3-5-é€šé…ç¬¦">3.5 é€šé…ç¬¦</h3><p>æˆ‘ä»¬ä¸ºäº†è®©Makefileè‡ªå·±æ‰¾è¢«æˆ‘ä»¬æ›´æ–°è¿‡çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆå¦‚ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile">src <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">wildcard</span> *.c<span class="token punctuation">)</span>obj <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">patsubst</span> %.c, %.o, <span class="token variable">$</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token target symbol">ALL</span><span class="token punctuation">:</span>cal<span class="token target symbol">main.o</span><span class="token punctuation">:</span>main.cgcc -c main.c -o main.o<span class="token target symbol">add.o</span><span class="token punctuation">:</span>add.cgcc -c add.c -o add.o<span class="token target symbol">sub.o</span><span class="token punctuation">:</span>sub.cgcc -c sub.c -o sub.o<span class="token target symbol">mul.o</span><span class="token punctuation">:</span>mul.cgcc -c mul.c -o mul.o<span class="token target symbol">cal</span><span class="token punctuation">:</span><span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>gcc <span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> -o cal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>wildcard</code>ï¼Œçº¸ç‰Œæ¸¸æˆä¸­çš„ â€œç™¾æ­ç‰Œâ€ ï¼Œè®¡ç®—æœºé‡Œç§°ä¸º â€œé€šé…ç¬¦â€ ã€‚ä¼šåœ¨å½“å‰ç›®å½•è‡ªå·±æœç´¢æ‰€æœ‰åŒ¹é… <code>*.c</code>çš„æ–‡ä»¶ã€‚ï¼ˆå¦‚æœä½ éœ€è¦ä½¿ç”¨åˆ°è·¯å¾„ï¼Œç¢äºç¯‡å¹…ï¼Œéœ€è¦è‡ªè¡Œäº†è§£notdirå‚æ•°ï¼Œç”¨æ³•ä¸º<code>file=$(notdir $(src))</code>ï¼‰</li><li><code>patsubst</code>ï¼Œæ¨¡å¼å­—ç¬¦ä¸²æ›¿æ¢å‡½æ•°ã€‚<ul><li>é‡Œé¢çš„<code>%</code>æ˜¯åŒ¹é…ç¬¦ï¼Œå‡å¦‚è¯´æˆ‘ä»¬æœ‰<code>main.c add.c sub.c mul.c</code>è¿™å‡ ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨<code>%</code>å¯ä»¥åƒä½¿ç”¨forå¾ªç¯ä¸€æ ·ï¼ŒæŒ¨ä¸ªæ–‡ä»¶åéå†è¿›å»<code>*.c</code>é‡Œ</li><li>åé¢<code>$(src)</code>è¡¨ç¤ºï¼šå¸Œæœ›<code>patsubst</code>å¯ä»¥éå†å“ªäº›æ–‡ä»¶ã€‚æˆ‘ä»¬å°±éå†å½“å‰ç›®å½•<code>$(src)</code>åº•ä¸‹çš„ *.c æ–‡ä»¶</li></ul></li></ul><h3 id="3-6-æ›´å¤šä¾¿æ·çš„ä¹¦å†™æ–¹å¼">3.6 æ›´å¤šä¾¿æ·çš„ä¹¦å†™æ–¹å¼</h3><p>å¦‚æœæˆ‘è¿˜æƒ³æ›´æ”¹ä»£ç çš„åç§°ï¼Œå°±éœ€è¦è‡ªå·±é‡å†™makefileï¼Œæœªå…æœ‰ç‚¹å¤ªéº»çƒ¦äº†ã€‚å¦‚æœå¯ä»¥è‡ªå·±å»å¯»æ‰¾è¿™äº›æ–‡ä»¶å°±å¥½äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯¹ä¸Šé¢çš„ä»£ç æ›´æ–°äº†ä¸€ä¸‹ï¼Œå¼•å…¥è‡ªåŠ¨åŒ–å˜é‡ï¼ŒåŠŸèƒ½ä¸å˜ï¼Œå†™æˆå¦‚ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile">src <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">wildcard</span> *.c<span class="token punctuation">)</span>obj <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">patsubst</span> %.c, %.o, <span class="token variable">$</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token target symbol">ALL</span><span class="token punctuation">:</span>cal<span class="token target symbol">main.o</span><span class="token punctuation">:</span>main.cgcc -c <span class="token variable">$&lt;</span> -o <span class="token variable">$@</span><span class="token target symbol">add.o</span><span class="token punctuation">:</span>add.cgcc -c <span class="token variable">$&lt;</span> -o <span class="token variable">$@</span><span class="token target symbol">sub.o</span><span class="token punctuation">:</span>sub.cgcc -c <span class="token variable">$&lt;</span> -o <span class="token variable">$@</span><span class="token target symbol">mul.o</span><span class="token punctuation">:</span>mul.cgcc -c <span class="token variable">$&lt;</span> -o <span class="token variable">$@</span><span class="token target symbol">cal</span><span class="token punctuation">:</span><span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>gcc <span class="token variable">$^</span> -o <span class="token variable">$@</span><span class="token target symbol">clean</span><span class="token punctuation">:</span>-rm -rf <span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> cal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th style="text-align:center">ç¬¦å·</th><th style="text-align:center">è§£é‡Š</th><th style="text-align:center">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:center">$@</td><td style="text-align:center">è¡¨ç¤ºè¦ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶</td><td style="text-align:center">main.o:main.cä¸­çš„main.o</td></tr><tr><td style="text-align:center">$^</td><td style="text-align:center">è¡¨ç¤ºå…¨éƒ¨çš„ä¾èµ–æ–‡ä»¶</td><td style="text-align:center">cal:$(obj)ä¸­çš„æ•´ä¸ª$(obj)</td></tr><tr><td style="text-align:center">$&lt;</td><td style="text-align:center">è¡¨ç¤ºç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶</td><td style="text-align:center">main.o:main.cä¸­ç¬¬ä¸€ä¸ªä¾èµ–ï¼Œä¹Ÿå°±æ˜¯main.c</td></tr></tbody></table><p>è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„è‡ªåŠ¨åŒ–å˜é‡ï¼Œå¦‚$+,$*,$?ç­‰ç­‰ï¼Œä¸åœ¨æœ¬ç¯‡åšå®¢è¯¦ç»†è§£é‡Šï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™</p><p>ä¸Šé¢è¿™æ®µä»£ç è¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ã€‚</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile">src <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">wildcard</span> *.c<span class="token punctuation">)</span>obj <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">patsubst</span> %.c, %.o, <span class="token variable">$</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token target symbol">ALL</span><span class="token punctuation">:</span>cal<span class="token target symbol"><span class="token variable">$</span>(obj)</span><span class="token punctuation">:</span>%.o<span class="token punctuation">:</span>%.cgcc -c <span class="token variable">$&lt;</span> -o <span class="token variable">$@</span><span class="token target symbol">cal</span><span class="token punctuation">:</span><span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>gcc <span class="token variable">$^</span> -o <span class="token variable">$@</span><span class="token target symbol">clean</span><span class="token punctuation">:</span>-rm -rf <span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> cal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»†å¿ƒçš„å°ä¼™ä¼´ä¼šå‘ç°è¿™ä¸¤æ®µä»£ç å¤šå‡ºæ¥ä¸€ä¸ªç›®æ ‡<code>clean</code>ï¼Œå¦‚æœä½ å¸Œæœ›é‡æ–°makeä¸€éå·¥ç¨‹ï¼Œé‚£å°±éœ€è¦å…ˆæŠŠç”Ÿæˆçš„å„é¡¹æ–‡ä»¶åˆ é™¤ã€‚ç”¨<code>make clean</code>æŒ‡ä»¤å°±å¯ä»¥è‡ªå·±å£°æ˜æ¸…ç†å‡½æ•°</p><p>å¦‚æœä½ åœ¨æƒ³ï¼Œæˆ‘ä»¬åˆä¸æ‰“ç®—ç”Ÿæˆcleanç›®æ ‡æ–‡ä»¶ï¼Œæœ‰æ²¡æœ‰åˆ«çš„ä¹¦å†™æ–¹æ¡ˆï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œå°±éœ€è¦ç”¨åˆ°æ ‡ç­¾ä¸­çš„ â€œä¼ªç›®æ ‡â€œ <code>.PHONY</code>ã€‚</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile"><span class="token builtin-target builtin">.PHONY</span> <span class="token punctuation">:</span> clean <span class="token target symbol">clean</span> <span class="token punctuation">:</span> -rm -rf <span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> cal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>(rm å‘½ä»¤å‰é¢åŠ äº†ä¸€ä¸ªå°å‡å·çš„æ„æ€å°±æ˜¯ï¼Œä¹Ÿè®¸æŸäº›æ–‡ä»¶å‡ºç°é—®é¢˜ï¼Œä½†ä¸è¦ç®¡ï¼Œç»§ç»­åšåé¢çš„äº‹ã€‚)</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬å¹¶ä¸ç”Ÿæˆâ€œcleanâ€è¿™ä¸ªæ–‡ä»¶ã€‚â€œä¼ªç›®æ ‡â€å¹¶ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåªæ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œç”±äºâ€œä¼ªç›®æ ‡â€ä¸æ˜¯æ–‡ä»¶ï¼Œæ‰€ä»¥ make æ— æ³•ç”Ÿæˆå®ƒçš„ä¾èµ–å…³ç³»å’Œå†³å®šå®ƒæ˜¯å¦è¦æ‰§è¡Œã€‚æˆ‘ä»¬åªæœ‰é€šè¿‡æ˜¾ç¤ºåœ°æŒ‡æ˜è¿™ä¸ªâ€œç›®æ ‡â€æ‰èƒ½è®©å…¶ç”Ÿæ•ˆã€‚å½“ç„¶ï¼Œâ€œä¼ªç›®æ ‡â€çš„å–åä¸èƒ½å’Œæ–‡ä»¶åé‡åï¼Œä¸ç„¶å…¶å°±å¤±å»äº†â€œä¼ªç›®æ ‡â€çš„æ„ä¹‰äº†ã€‚</p><p>å½“ç„¶ï¼Œä¸ºäº†é¿å…å’Œæ–‡ä»¶é‡åçš„è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è®°â€œ.PHONYâ€æ¥æ˜¾ç¤ºåœ°æŒ‡æ˜ä¸€ä¸ªç›®æ ‡æ˜¯â€œä¼ªç›®æ ‡â€ï¼Œå‘ make è¯´æ˜ï¼Œä¸ç®¡æ˜¯å¦æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªç›®æ ‡å°±æ˜¯â€œä¼ªç›®æ ‡â€ã€‚</p><h3 id="3-7-å¼•ç”¨æ–‡ä»¶">3.7 å¼•ç”¨æ–‡ä»¶</h3><p>å¦‚æœæˆ‘ä»¬æ•´ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶å…¨éƒ½åœ¨åˆ«çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚è¯´åœ¨<code>./inc</code>ç›®å½•åº•ä¸‹ï¼Œæˆ‘ä»¬æœ‰<code>add.h  mul.h  sub.h</code>ä¸‰ä¸ªå¤´æ–‡ä»¶ï¼Œåº”è¯¥æ€ä¹ˆå¼•ç”¨è¿›æ¥å‘¢ï¼Ÿ</p><pre class="line-numbers language-makefile" data-language="makefile"><code class="language-makefile">src <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">wildcard</span> *.c<span class="token punctuation">)</span>obj <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">patsubst</span> %.c, %.o, <span class="token variable">$</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token target symbol">ALL</span><span class="token punctuation">:</span>cal<span class="token target symbol"><span class="token variable">$</span>(obj)</span><span class="token punctuation">:</span>%.o<span class="token punctuation">:</span>%.cgcc -c <span class="token variable">$&lt;</span> -o <span class="token variable">$@</span> -I inc<span class="token target symbol">cal</span><span class="token punctuation">:</span><span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>gcc <span class="token variable">$^</span> -o <span class="token variable">$@</span> -I inc<span class="token target symbol">clean</span><span class="token punctuation">:</span>-rm -rf <span class="token variable">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> cal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚ä¸Šä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>-I/</code>æˆ–è€…<code>--include-dir</code>å‚æ•°ï¼Œå°±å¯ä»¥æŒ‡å®šå¤´æ–‡ä»¶æ‰€åœ¨ä½ç½®äº†</p><p>äº‹å®ä¸Šï¼Œä¸åªæ˜¯å¤´æ–‡ä»¶ï¼Œæœ‰å…¶ä»–çš„makefileæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªå‚æ•°å¯¼å…¥ã€‚make å°±ä¼šåœ¨è¿™ä¸ªå‚æ•°æ‰€æŒ‡å®šçš„ç›®å½•ä¸‹å»å¯»æ‰¾ã€‚å¦‚æœç›®å½•prefix/includeï¼ˆä¸€èˆ¬æ˜¯ï¼š/usr/local/bin æˆ–/usr/includeï¼‰å­˜åœ¨çš„è¯ï¼Œmake ä¹Ÿä¼šå»æ‰¾ã€‚</p><p>å¦‚æœæœ‰æ–‡ä»¶æ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œmake ä¼šç”Ÿæˆä¸€æ¡è­¦å‘Šä¿¡æ¯ï¼Œä½†ä¸ä¼šé©¬ä¸Šå‡ºç°è‡´å‘½é”™è¯¯ã€‚å®ƒä¼šç»§ç»­è½½å…¥å…¶å®ƒçš„æ–‡ä»¶ï¼Œä¸€æ—¦å®Œæˆ makefile çš„è¯»å–ï¼Œmake ä¼šå†é‡è¯•è¿™äº›æ²¡æœ‰æ‰¾åˆ°ï¼Œæˆ–æ˜¯ä¸èƒ½è¯»å–çš„æ–‡ä»¶ï¼Œå¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œmake æ‰ä¼šå‡ºç°ä¸€æ¡è‡´å‘½ä¿¡æ¯ã€‚å¦‚æœä½ æƒ³è®© make ä¸ç†é‚£äº›æ— æ³•è¯»å–çš„æ–‡ä»¶ï¼Œè€Œç»§ç»­æ‰§è¡Œï¼Œä½ å¯ä»¥åƒä¸Šé¢çš„<code>clean</code>ç›®æ ‡ä¸€æ ·ï¼Œåœ¨ include å‰åŠ ä¸€ä¸ªå‡å·â€œ-â€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Makefile </tag>
            
            <tag> æ–°æ‰‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å»ºç«™çš„ç¬¬ä¸€ç¯‡åšå®¢</title>
      <link href="/2022/03/21/first/"/>
      <url>/2022/03/21/first/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1>å»ºç«™ä»¥æ¥ç¬¬ä¸€ç¯‡åšå®¢</h1><p>å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯æ‹“ä½‘è±ªçš„åšå®¢ç½‘ç«™ï¼Œä¹Ÿæ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ã€‚<br>è¿™ç¯‡åšå®¢æ²¡ä»€ä¹ˆè¥å…»ï¼Œç•™ä¸ªçºªå¿µï¼Œä¹Ÿæ˜¯ä¸ºäº†ä»£ç è°ƒè¯•çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹çœ‹æ•ˆæœ<br>å°±ï¼Œåœ¨è¿™é‡ŒèŠèŠå‡ å¥ï¼Œç®€å•ç«‹ä¸ªflagã€‚åç»­ä¼šåœ¨è¿™ä¸ªåšå®¢ç½‘ç«™å‘å¸ƒä¸€äº›æŠ€æœ¯ç±»æ–‡ç« </p><h1>Whyï¼Ÿä¸ºä»€ä¹ˆä¼šæƒ³èµ·æ¥å†™åšå®¢ï¼Ÿ</h1><p>å‡ å¹´å‰å°±æœ‰è®¾è®¡è‡ªå·±åšå®¢çš„æƒ³æ³•ã€‚å¥ˆä½•å½“æ—¶æˆ‘æ¥è§¦åˆ°è¿™æ–¹é¢èµ„è®¯å¤ªå°‘ï¼Œæˆ‘å°±åœ¨<code>åä¸ºäº‘åšå®¢</code>ä¸Šå‘äº†å‡ ç¯‡å…³äºOpenCVå’ŒAtlas 200DKçš„æ–‡ç« ã€‚ä½†å‘ç°å¯¹æ–‡ç« å½’ç±»å’Œä¿®æ”¹ç­‰ç­‰æ–¹é¢æˆ‘ç”¨ç€ä¸æ˜¯å¾ˆä¹ æƒ¯ï¼ˆä¸»è¦ä¹Ÿæ˜¯å› ä¸ºæˆ‘æ²¡åä¸‹æ¥å¥½å¥½æ•´ç†èµ„æ–™å†™åšå®¢ï¼‰ï¼Œé‚åœæ›´äº†å¥½é•¿ä¸€æ®µæ—¶é—´ã€‚ç›´åˆ°å‰æ®µæ—¶é—´å¯¹é™æ€ç½‘ç«™æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œå°±è®¡åˆ’ä»ç°åœ¨å¼€å§‹ç§¯ç´¯è‡ªå·±çš„åšå®¢ï¼ŒæŠŠæ–‡ç« åˆ†é—¨åˆ«ç±»æ•´ç†å¥½ï¼Œæ¥ç»´æŠ¤å¥½è¿™ä¸ªåšå®¢ç½‘ç«™ã€‚</p><h1>Whenï¼Ÿä»€ä¹ˆæ—¶å€™å¼€å§‹å†™çš„ï¼Ÿ</h1><p>ä¹Ÿæ²¡å¤šä¹…ï¼Œ2021å¹´æ‰å¼€å§‹ã€‚ä¸è¿‡å†™åšå®¢è¿™ä¸ªè®¡åˆ’æˆ‘ä¼šæŒç»­åšæŒä¸‹å»</p><h1>Whatï¼Ÿéƒ½å†™ä¸€äº›ä»€ä¹ˆä¸»é¢˜çš„åšå®¢ï¼Ÿ</h1><p>æœ¬åšå®¢ä¸»è¦æ•´ç†å’Œè®¡ç®—æœºç›¸å…³çš„åšå®¢ï¼Œå†…å®¹ä¼šæ…¢æ…¢åå‘äºäººå·¥æ™ºèƒ½æ–¹é¢ï¼Œç»†åˆ†ä¸‹æ¥å„ç§ç±»åˆ«çš„æ–‡ç« å¯èƒ½å¤šå¤šå°‘å°‘éƒ½ä¼šæœ‰ç‚¹ã€‚</p><h1>Whoï¼Ÿå†™å‡ºæ¥çš„åšå®¢éƒ½æ˜¯ç»™è°çœ‹çš„ï¼Ÿ</h1><p>æˆ‘ä¼šä»ç®€å•çš„æŠ€æœ¯å†…å®¹å¼€å§‹å†™èµ·ï¼ŒåŒ…æ‹¬é‡æ–°æ•´ç†ä»¥å‰å†™è¿‡çš„OpenCVç±»åšå®¢ï¼ŒæŠŠä¸€äº›æˆ‘è®¤ä¸ºè®²çš„ä¸å¤Ÿæ¸…æ™°çš„å†…å®¹å†æ¢³ç†ä¸€éã€‚ä¸»è¦å†…å®¹è¿˜æ˜¯é¢å‘äººå·¥æ™ºèƒ½é¢†åŸŸã€‚</p><h1>How muchï¼Ÿè¦èŠ±å¤šå°‘æ—¶é—´å’Œé‡‘é’±æ¥è¿è¥ç»´æŠ¤ï¼Ÿ</h1><p>å†™åšå®¢å…¶å®è¿˜è›®èŠ±æ—¶é—´çš„ï¼Œå°¤å…¶æ˜¯åœ¨ä»»åŠ¡é‡å¤šèµ·æ¥çš„æ—¶å€™ã€‚é‡‘é’±çš„è¯å°±æ²¡æœ‰å¼€é”€äº†ï¼Œæ‰˜ç®¡åœ¨GitHubä¸Šï¼Œä½ çœ‹æˆ‘æ˜¯ä¸æ˜¯è¿ä¸ªåŸŸåéƒ½æ²¡ä¹°(ï¼´â–½ï¼´)ã€‚ç­‰åšå®¢æœ‰äº†ä¸€å®šçš„æ—¶é—´ã€ç§¯ç´¯ä¸€å®šé‡æ¯”è¾ƒæ‹¿å¾—å‡ºæ‰‹çš„æ–‡ç« ï¼Œæˆ–è®¸é‚£ä¸ªæ—¶å€™æˆ‘ä¼šä¹°ä¸ªåŸŸåã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é—²èŠ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²èŠ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
